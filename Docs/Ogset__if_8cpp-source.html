<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Ogset_if.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.17 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>Ogset_if.cpp</h1><a href="Ogset__if_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="preprocessor">#include &lt;OSYS.H&gt;</span>
00002 <span class="preprocessor">#include &lt;<a class="code" href="KEY_8H.html">KEY.H</a>&gt;</span>
00003 <span class="preprocessor">#include &lt;<a class="code" href="OLOG_8H.html">OLOG.H</a>&gt;</span>
00004 <span class="preprocessor">#include &lt;<a class="code" href="OGAMESET_8H.html">OGAMESET.H</a>&gt;</span>
00005 <span class="preprocessor">#include &lt;OWORLDMT.H&gt;</span>
00006 <span class="preprocessor">#include &lt;<a class="code" href="OGSET_8H.html">OGSET.H</a>&gt;</span>
00007 <span class="preprocessor">#include &lt;<a class="code" href="ORADIO_8H.html">ORADIO.H</a>&gt;</span>
00008 <span class="preprocessor">#include &lt;<a class="code" href="ORESTXT_8H.html">ORESTXT.H</a>&gt;</span>
00009 <span class="preprocessor">#include &lt;<a class="code" href="OVGA_8H.html">OVGA.H</a>&gt;</span>
00010 <span class="preprocessor">#include &lt;<a class="code" href="COLOR_8H.html">COLOR.H</a>&gt;</span>
00011 <span class="preprocessor">#include &lt;OFINANCE.H&gt;</span>
00012 <span class="preprocessor">#include &lt;OFONT.H&gt;</span>
00013 <span class="preprocessor">#include &lt;OGAMESTR.H&gt;</span>
00014 <span class="preprocessor">#include &lt;OMOUSE.H&gt;</span>
00015 <span class="preprocessor">#include &lt;<a class="code" href="OTABMENU_8H.html">OTABMENU.H</a>&gt;</span>
00016 <span class="preprocessor">#include &lt;<a class="code" href="OSLIDER_8H.html">OSLIDER.H</a>&gt;</span>
00017 <span class="preprocessor">#include &lt;<a class="code" href="OVALSLDR_8H.html">OVALSLDR.H</a>&gt;</span>
00018 <span class="preprocessor">#include &lt;OIFACE.H&gt;</span>
00019 <span class="preprocessor">#include &lt;OINFO.H&gt;</span>
00020 <span class="preprocessor">#include &lt;OSPINNER.H&gt;</span>
00021 <span class="preprocessor">#include &lt;<a class="code" href="OTEXT_8H.html">OTEXT.H</a>&gt;</span>
00022 <span class="preprocessor">#include &lt;<a class="code" href="OVBROW98_8H.html">OVBROW98.H</a>&gt;</span>
00023 <span class="preprocessor">#include &lt;<a class="code" href="OBNDSLDR_8H.html">OBNDSLDR.H</a>&gt;</span>
00024 <span class="preprocessor">#include &lt;OPSCHOOL.H&gt;</span>
00025 <span class="preprocessor">#include &lt;<a class="code" href="ODEPTRES_8H.html">ODEPTRES.H</a>&gt;</span>
00026 <span class="preprocessor">#include &lt;<a class="code" href="OBOX_8H.html">OBOX.H</a>&gt;</span>
00027 <span class="preprocessor">#include &lt;OAUDIO.H&gt;</span>
00028 <span class="preprocessor">#include &lt;OCONFIG.H&gt;</span>
00029 <span class="preprocessor">#include &lt;OGFILE.H&gt;</span>
00030 <span class="preprocessor">#include &lt;<a class="code" href="OVGALOCK_8H.html">OVGALOCK.H</a>&gt;</span>
00031 <span class="preprocessor">#include &lt;STDIO.H&gt;</span>
00032 
00033 <span class="keyword">enum</span> {
00034     <a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a> = <a class="code" href="Oworldmt_8h.html#a12">ZOOM_X1</a> + 15,
00035     <a class="code" href="Ogset__if_8cpp.html#a126a100">REPORT_Y1</a> = <a class="code" href="Oworldmt_8h.html#a13">ZOOM_Y1</a> + 15,
00036     <a class="code" href="Ogset__if_8cpp.html#a126a101">REPORT_X2</a> = <a class="code" href="Oworldmt_8h.html#a14">ZOOM_X2</a> - 15,
00037     <a class="code" href="Ogset__if_8cpp.html#a126a102">REPORT_Y2</a> = <a class="code" href="Oworldmt_8h.html#a15">ZOOM_Y2</a> - 40
00038 };
00039 
00040 <span class="keyword">enum</span> {
00041     <a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a> = <a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a> + 5,
00042     <a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a> = <a class="code" href="Ogset__if_8cpp.html#a126a100">REPORT_Y1</a> + 35,
00043     <a class="code" href="Ogset__if_8cpp.html#a127a105">TMENU_X2</a> = <a class="code" href="Ogset__if_8cpp.html#a126a101">REPORT_X2</a> - 5,
00044     <a class="code" href="Ogset__if_8cpp.html#a127a106">TMENU_Y2</a> = <a class="code" href="Ogset__if_8cpp.html#a126a102">REPORT_Y2</a> - 5
00045 };
00046 
00047 <span class="keyword">enum</span> { <a class="code" href="Ogset__if_8cpp.html#a128a107">LEFT_PUSHED</a>, <a class="code" href="Ogset__if_8cpp.html#a128a108">RIGHT_PUSHED</a>, <a class="code" href="Ogset__if_8cpp.html#a128a109">ALL_POP</a> };
00048 
00049 <span class="keyword">enum</span> {
00050     <a class="code" href="Ogset__if_8cpp.html#a129a110">TAB_SCREEN</a>,
00051     <a class="code" href="Ogset__if_8cpp.html#a129a111">SAVE_EXPRESS</a>,
00052 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00053 <span class="preprocessor"></span>    CUSTOMIZE_SCORE,                                <span class="comment">// mode for changing weight of goal</span>
00054 <span class="preprocessor">#endif</span>
00055 <span class="preprocessor"></span>};
00056 
00057 <span class="keyword">static</span> current_report_mode=<a class="code" href="Ogset__if_8cpp.html#a129a110">TAB_SCREEN</a>;
00058 <span class="keyword">static</span> button_state = <a class="code" href="Ogset__if_8cpp.html#a128a109">ALL_POP</a>;
00059 <span class="keyword">static</span> button_timing = 0;
00060 <span class="keyword">static</span> <span class="keywordtype">int</span> selected_scenario=<a class="code" href="Gamedef_8h.html#a81a41">PRIVATE_SCHOOL</a>;
00061 
00062 <span class="keyword">static</span> <a class="code" href="classTabMenu.html">TabMenu</a> tab_menu;
00063 <span class="keyword">static</span> <span class="keywordtype">int</span> tab_sel;
00064 <span class="keyword">static</span> <span class="keywordtype">char</span> *tab_short_desc[] = {
00065     <span class="stringliteral">"Basic options"</span>,
00066     <span class="stringliteral">"Advanced options I"</span>,
00067     <span class="stringliteral">"Advanced options II"</span>,
00068     <span class="stringliteral">"Express games"</span>,
00069 };
00070 <span class="keyword">static</span> <span class="keywordtype">char</span> *tab_long_desc[] = {
00071     <span class="stringliteral">"Basic options"</span>,
00072     <span class="stringliteral">"Advanced options I"</span>,
00073     <span class="stringliteral">"Advanced options II"</span>,
00074     <span class="stringliteral">"Express games"</span>,
00075 };
00076 
00077 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00078 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">char</span> *field_name[] = {
00079     <span class="stringliteral">""</span>,
00080     <span class="stringliteral">"Applied Science"</span>,
00081     <span class="stringliteral">"Business"</span>,
00082     <span class="stringliteral">"Creative Arts"</span>,
00083     <span class="stringliteral">"Engineering"</span>,
00084     <span class="stringliteral">"Humanities"</span>,
00085     <span class="stringliteral">"Language Studies"</span>,
00086     <span class="stringliteral">"Math and Computer Science"</span>,
00087     <span class="stringliteral">"Natural Science"</span>,
00088     <span class="stringliteral">"Social Science"</span>,
00089 };
00090 <span class="preprocessor">#endif</span>
00091 <span class="preprocessor"></span>
00092 <span class="keyword">static</span> <a class="code" href="classButton.html">Button</a> button_start,button_cancel;
00093 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00094 <span class="preprocessor"></span><span class="keyword">static</span> <a class="code" href="classButton.html">Button</a> button_customize_score;
00095 <span class="keyword">static</span> <a class="code" href="classButton.html">Button</a> button_randomize_setting;
00096 <span class="preprocessor">#endif</span>
00097 <span class="preprocessor"></span><span class="keyword">static</span> <a class="code" href="classButton.html">Button</a> scr_button_start,scr_button_cancel;
00098 <span class="keyword">static</span> <span class="keywordtype">char</span> * button_label[]={<span class="stringliteral">"Start scenario"</span>,<span class="stringliteral">"Cancel"</span>};
00099 
00100 <span class="keyword">static</span> <a class="code" href="classButton.html">Button</a> button_add,button_remove,button_reset,button_addall;
00101 
00102 <span class="keyword">static</span> <span class="keywordtype">char</span> init_flag;
00103 <span class="keyword">static</span> <span class="keywordtype">char</span> redraw_browser_flag;
00104 <span class="keyword">static</span> <span class="keywordtype">int</span> pic_id;
00105 <span class="comment">// ###### begin Gilbert 19/04/2001 ###### //</span>
00106 <span class="keyword">static</span> <span class="keywordtype">short</span> *scr2_vbrowser1_bitmap = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00107 <span class="keyword">static</span> <span class="keywordtype">short</span> *scr2_vbrowser2_bitmap = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00108 <span class="comment">// ###### end Gilbert 19/04/2001 ###### //</span>
00109 
00110 <span class="comment">// Screen Express Game</span>
00111 <span class="keyword">static</span> <a class="code" href="classVBrowse98.html">VBrowse98</a> scr1_vbrowser1;
00112 <span class="keyword">static</span> <a class="code" href="classVBrowse98.html">VBrowse98</a> scr1_vbrowser2;
00113 <span class="keyword">static</span> <a class="code" href="classButton.html">Button</a> scr1_button_load;
00114 <span class="keyword">static</span> <a class="code" href="classButton.html">Button</a> scr1_button_save;
00115 <span class="keyword">static</span> <a class="code" href="classButton.html">Button</a> scr1_button_del;
00116 <span class="keyword">static</span> <span class="keywordtype">int</span> scr1_browseRecCount1=1;
00117 <span class="keyword">static</span> <span class="keywordtype">int</span> scr1_browseRecCount2=1;
00118 <span class="keyword">static</span> <span class="keywordtype">int</span> scr1_browseRecHeight=20;
00119 <span class="keyword">static</span> <span class="keywordtype">void</span> scr1_disp_rep_row1(<span class="keywordtype">int</span>,<span class="keywordtype">int</span>,<span class="keywordtype">int</span>,<span class="keywordtype">int</span>);
00120 <span class="keyword">static</span> <span class="keywordtype">void</span> scr1_disp_rep_row2(<span class="keywordtype">int</span>,<span class="keywordtype">int</span>,<span class="keywordtype">int</span>,<span class="keywordtype">int</span>);
00121 
00122 <span class="comment">// Screen Save Express Game</span>
00123 <span class="keyword">static</span> <a class="code" href="classButton.html">Button</a> scr5_button_save;
00124 <span class="keyword">static</span> <a class="code" href="classButton.html">Button</a> scr5_button_cancel;
00125 <span class="keyword">static</span> <a class="code" href="classGetA.html">GetA</a> scr5_game_name;
00126 
00127 <span class="comment">// Screen Basic Option</span>
00128 <span class="keyword">static</span> <a class="code" href="classVBrowse98.html">VBrowse98</a> scr2_vbrowser1;
00129 <span class="keyword">static</span> <a class="code" href="classVBrowse98.html">VBrowse98</a> scr2_vbrowser2;
00130 <span class="keyword">static</span> <span class="keywordtype">int</span> scr2_browseRecCount1=1;
00131 <span class="keyword">static</span> <span class="keywordtype">int</span> scr2_browseRecCount2=1;
00132 <span class="keyword">static</span> <span class="keywordtype">int</span> scr2_browseRecHeight=20;
00133 <span class="keyword">static</span> <span class="keywordtype">void</span> scr2_disp_rep_row1(<span class="keywordtype">int</span>,<span class="keywordtype">int</span>,<span class="keywordtype">int</span>,<span class="keywordtype">int</span>);
00134 <span class="keyword">static</span> <span class="keywordtype">void</span> scr2_disp_rep_row2(<span class="keywordtype">int</span>,<span class="keywordtype">int</span>,<span class="keywordtype">int</span>,<span class="keywordtype">int</span>);
00135 
00136 <span class="comment">//static short* button_refresh_bitmap;</span>
00137 
00138 <span class="keyword">static</span> <a class="code" href="classGetAGroup.html">GetAGroup</a> scr2_name(3);
00139 <span class="comment">//static int player_school.tmp_department_pool_flag[DEPARTMENT_TYPE_COUNT];</span>
00140 <span class="comment">//static int player_school.right_bws_pool[DEPARTMENT_TYPE_COUNT];</span>
00141 <span class="comment">//static int player_school.left_bws_pool[DEPARTMENT_TYPE_COUNT];</span>
00142 <span class="comment">//static int player_school.right_bws_pool_size;</span>
00143 <span class="comment">//static int player_school.left_bws_pool_size;</span>
00144 <span class="comment">//static int player_school.pool_selected_size;</span>
00145 <span class="comment">//static int player_school.just_add=0,player_school.just_remove=0;</span>
00146 <span class="keyword">static</span> <span class="keywordtype">int</span> player_school_prestige;
00147 <span class="keyword">static</span> <span class="keywordtype">int</span> player_school_doctoral_program_intensity;
00148 <span class="keyword">static</span> <span class="keywordtype">int</span> player_school_sponsored_research_intensity;
00149 
00150 <span class="comment">//static int dummy=5000;</span>
00151 
00152 <span class="comment">// Screen Custom Option 1</span>
00153 
00154 <span class="keyword">static</span> <a class="code" href="classRadioButton.html">RadioButton</a> scr3_rbutton1;
00155 <span class="keyword">static</span> <a class="code" href="classRadioButton.html">RadioButton</a> scr3_rbutton2;
00156 <span class="keyword">static</span> <a class="code" href="classRadioButton.html">RadioButton</a> scr3_rbutton3;
00157 
00158 <span class="keyword">static</span> <a class="code" href="classRadioButton.html">RadioButton</a> scr3_rbutton4;
00159 <span class="keyword">static</span> <a class="code" href="classRadioButton.html">RadioButton</a> scr3_rbutton5;
00160 <span class="keyword">static</span> <a class="code" href="classRadioButton.html">RadioButton</a> scr3_rbutton6;
00161 <span class="keyword">static</span> <a class="code" href="classRadioButton.html">RadioButton</a> scr3_rbutton7;
00162 <span class="keyword">static</span> <a class="code" href="classRadioButton.html">RadioButton</a> scr3_rbutton8;
00163 <span class="keyword">static</span> <a class="code" href="classRadioButton.html">RadioButton</a> scr3_rbutton9;
00164 <span class="comment">//static ValueSlider scr3_slider1;</span>
00165 <span class="comment">//static ValueSlider scr3_slider2;</span>
00166 <span class="comment">//static ValueSlider scr3_slider3;</span>
00167 <span class="comment">//static ValueSlider scr3_slider4;</span>
00168 <span class="comment">//static ValueSlider scr3_slider5;</span>
00169 <span class="comment">//static ValueSlider scr3_bounded_slider0;</span>
00170 <span class="comment">//static ValueSlider scr3_bounded_slider2;</span>
00171 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00172 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">char</span>* scr3_label[]= {
00173     <span class="stringliteral">"Institutional control"</span>,
00174     <span class="stringliteral">"Student headcount"</span>,
00175     <span class="stringliteral">"Percentage of part-time students"</span>,
00176     <span class="stringliteral">"Sponsored research intensity"</span>,
00177     <span class="stringliteral">"Percentage of graduate students"</span>,
00178     <span class="stringliteral">"Percentage of undergrads getting degree in five years"</span>,
00179     <span class="stringliteral">"Percentage of undergrads in student housing"</span>,
00180     <span class="stringliteral">"Athletics program intensity"</span>
00181 };
00182 
00183 <span class="keyword">static</span> <span class="keywordtype">char</span>* scr3_rbutton1_options[]={<span class="stringliteral">"Private"</span>,<span class="stringliteral">"Public"</span>};
00184 <span class="keyword">static</span> <span class="keywordtype">char</span>* scr3_rbutton2_options[]={<span class="stringliteral">"Small"</span>,<span class="stringliteral">"Medium"</span>,<span class="stringliteral">"High"</span>};
00185 <span class="keyword">static</span> <span class="keywordtype">char</span>* scr3_rbutton3_options[]={<span class="stringliteral">"None"</span>,<span class="stringliteral">"Medium"</span>,<span class="stringliteral">"High"</span>};
00186 <span class="keyword">static</span> <span class="keywordtype">char</span>* scr3_rbutton4_options[]={<span class="stringliteral">"None"</span>,<span class="stringliteral">"Medium"</span>,<span class="stringliteral">"High"</span>};
00187 <span class="keyword">static</span> <span class="keywordtype">char</span>* scr3_rbutton5_options[]={<span class="stringliteral">"Low"</span>,<span class="stringliteral">"Medium"</span>,<span class="stringliteral">"High"</span>};
00188 <span class="keyword">static</span> <span class="keywordtype">char</span>* scr3_rbutton6_options[]={<span class="stringliteral">"Low"</span>,<span class="stringliteral">"Medium"</span>,<span class="stringliteral">"High"</span>};
00189 <span class="keyword">static</span> <span class="keywordtype">char</span>* scr3_rbutton7_options[]={<span class="stringliteral">"Low"</span>,<span class="stringliteral">"Medium"</span>,<span class="stringliteral">"High"</span>};
00190 <span class="keyword">static</span> <span class="keywordtype">char</span>* scr3_rbutton8_options[]={<span class="stringliteral">"Division III"</span>,<span class="stringliteral">"Division II"</span>,<span class="stringliteral">"Division I"</span>,};
00191 
00192 <span class="preprocessor">#else</span>
00193 <span class="preprocessor"></span>
00194 <span class="keyword">static</span> <span class="keywordtype">char</span>* scr3_label[]= {
00195     <span class="stringliteral">"Student marketing area"</span>,
00196     <span class="stringliteral">"Prestige"</span>,
00197     <span class="stringliteral">"Number of on-campus students"</span>,
00198     <span class="stringliteral">"Percentage of distance learners"</span>,
00199     <span class="stringliteral">"Percentage of undergrads who are part-time"</span>,
00200     <span class="stringliteral">"Percentage of undergrads getting degree in five years"</span>,
00201     <span class="stringliteral">"Percentage of full-time undergrads in student housing"</span>,
00202     <span class="stringliteral">"Athletics program intensity"</span>
00203 };
00204 
00205 <span class="keyword">static</span> <span class="keywordtype">char</span>* scr3_rbutton1_options[]={<span class="stringliteral">"National"</span>,<span class="stringliteral">"Regional"</span>,<span class="stringliteral">"Local"</span>};
00206 <span class="keyword">static</span> <span class="keywordtype">char</span>* scr3_rbutton2_options[]={<span class="stringliteral">"Division III"</span>,<span class="stringliteral">"Division II"</span>,<span class="stringliteral">"Division I"</span>,};
00207 <span class="comment">//static char* scr3_rbutton3_options[]={"Small,n=2000","Medium,n=5000","Large,n=8000"};</span>
00208 
00209 <span class="keyword">static</span> <span class="keywordtype">char</span>* scr3_rbutton3_options[]={<span class="stringliteral">"Low"</span>,<span class="stringliteral">"Medium"</span>,<span class="stringliteral">"High"</span>};
00210 <span class="keyword">static</span> <span class="keywordtype">char</span>* scr3_rbutton4_options[]={<span class="stringliteral">"None"</span>,<span class="stringliteral">"Medium"</span>,<span class="stringliteral">"High"</span>};
00211 <span class="keyword">static</span> <span class="keywordtype">char</span>* scr3_rbutton5_options[]= {           <span class="comment">//## chea 091199 this is more appro.</span>
00212     <span class="stringliteral">"Small"</span>,<span class="stringliteral">"Medium"</span>,<span class="stringliteral">"High"</span>
00213 };
00214 <span class="preprocessor">#endif</span>
00215 <span class="preprocessor"></span>
00216 <span class="comment">// Screen Custom Option 2</span>
00217 <span class="keyword">static</span> <a class="code" href="classRadioButton.html">RadioButton</a> scr4_rbutton1;
00218 <span class="keyword">static</span> <a class="code" href="classRadioButton.html">RadioButton</a> scr4_rbutton2;
00219 <span class="keyword">static</span> <a class="code" href="classRadioButton.html">RadioButton</a> scr4_rbutton3;
00220 <span class="keyword">static</span> <a class="code" href="classRadioButton.html">RadioButton</a> scr4_rbutton4;
00221 <span class="keyword">static</span> <a class="code" href="classRadioButton.html">RadioButton</a> scr4_rbutton5;
00222 
00223 <span class="keyword">static</span> <a class="code" href="classRadioButton.html">RadioButton</a> scr4_rbutton6;
00224 <span class="keyword">static</span> <a class="code" href="classRadioButton.html">RadioButton</a> scr4_rbutton7;
00225 <span class="keyword">static</span> <a class="code" href="classRadioButton.html">RadioButton</a> scr4_rbutton8;
00226 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00227 <span class="preprocessor"></span><span class="keyword">static</span> <a class="code" href="classRadioButton.html">RadioButton</a> scr4_rbutton9;
00228 <span class="preprocessor">#endif</span>
00229 <span class="preprocessor"></span><span class="comment">/*</span>
00230 <span class="comment">static ValueSlider scr4_slider1;</span>
00231 <span class="comment">static ValueSlider scr4_slider3;</span>
00232 <span class="comment">static ValueSlider scr4_slider4;</span>
00233 <span class="comment">*/</span>
00234 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00235 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">char</span>* scr4_label[]= {
00236     <span class="stringliteral">"Prestige"</span>,
00237     <span class="stringliteral">"Relative wealth"</span>,
00238     <span class="stringliteral">"Campus environment"</span>,
00239     <span class="stringliteral">"Random events"</span>,
00240     <span class="stringliteral">"Random objectives"</span>,
00241     <span class="stringliteral">"Random perturbations during play"</span>,
00242     <span class="stringliteral">"Behavioral response speed"</span>,
00243     <span class="stringliteral">"Auto-save every year"</span>,
00244     <span class="stringliteral">"Log key outputs to file"</span>,
00245 };
00246 <span class="keyword">static</span> <span class="keywordtype">char</span>* scr4_rbutton1_options[]={<span class="stringliteral">"Low"</span>,<span class="stringliteral">"Medium"</span>,<span class="stringliteral">"High"</span>};
00247 <span class="keyword">static</span> <span class="keywordtype">char</span>* scr4_rbutton2_options[]={<span class="stringliteral">"Rich"</span>,<span class="stringliteral">"In between"</span>,<span class="stringliteral">"Struggling"</span>};
00248 <span class="keyword">static</span> <span class="keywordtype">char</span>* scr4_rbutton3_options[]={<span class="stringliteral">"Urban"</span>,<span class="stringliteral">"Suburban"</span>,<span class="stringliteral">"Rural"</span>};
00249 <span class="keyword">static</span> <span class="keywordtype">char</span>* scr4_rbutton4_options[]={<span class="stringliteral">"None"</span>,<span class="stringliteral">"Occasional"</span>,<span class="stringliteral">"Frequent"</span>};
00250 <span class="keyword">static</span> <span class="keywordtype">char</span>* scr4_rbutton5_options[]={<span class="stringliteral">"None"</span>,<span class="stringliteral">"Occasional"</span>,<span class="stringliteral">"Frequent"</span>};
00251 <span class="keyword">static</span> <span class="keywordtype">char</span>* scr4_rbutton6_options[]={<span class="stringliteral">"None"</span>,<span class="stringliteral">"Normal"</span>};
00252 <span class="keyword">static</span> <span class="keywordtype">char</span>* scr4_rbutton7_options[]={<span class="stringliteral">"Normal"</span>,<span class="stringliteral">"Faster"</span>,<span class="stringliteral">"Light-speed"</span>};
00253 <span class="keyword">static</span> <span class="keywordtype">char</span>* scr4_rbutton8_options[]={<span class="stringliteral">"No"</span>,<span class="stringliteral">"Yes"</span>};
00254 <span class="keyword">static</span> <span class="keywordtype">char</span>* scr4_rbutton9_options[]={<span class="stringliteral">"No"</span>,<span class="stringliteral">"Year"</span>,<span class="stringliteral">"Trimester"</span>};
00255 
00256 <span class="preprocessor">#else</span>
00257 <span class="preprocessor"></span>
00258 <span class="keyword">static</span> <span class="keywordtype">char</span>* scr4_label[]= {
00259     <span class="stringliteral">"Percentage of graduate students"</span>,
00260     <span class="stringliteral">"Percent of nondegree students"</span>,
00261     <span class="stringliteral">"Doctoral program intensity"</span>,
00262     <span class="stringliteral">"Sponsored research intensity"</span>,
00263     <span class="stringliteral">"Relative wealth"</span>,
00264     <span class="stringliteral">"Institutional control"</span>,
00265     <span class="stringliteral">"Campus environment"</span>,
00266     <span class="stringliteral">"Random events"</span>,
00267     <span class="stringliteral">"Random objectives"</span>,
00268 };
00269 
00270 <span class="keyword">static</span> <span class="keywordtype">char</span>* scr4_rbutton1_options[]={<span class="stringliteral">"Rich"</span>,<span class="stringliteral">"In between"</span>,<span class="stringliteral">"Struggling"</span>};
00271 <span class="keyword">static</span> <span class="keywordtype">char</span>* scr4_rbutton2_options[]={<span class="stringliteral">"Private"</span>,<span class="stringliteral">"Public"</span>};
00272 <span class="keyword">static</span> <span class="keywordtype">char</span>* scr4_rbutton3_options[]={<span class="stringliteral">"Urban"</span>,<span class="stringliteral">"Suburban"</span>,<span class="stringliteral">"Rural"</span>};
00273 <span class="keyword">static</span> <span class="keywordtype">char</span>* scr4_rbutton4_options[]={<span class="stringliteral">"None"</span>,<span class="stringliteral">"Occasional"</span>,<span class="stringliteral">"Frequent"</span>};
00274 <span class="keyword">static</span> <span class="keywordtype">char</span>* scr4_rbutton5_options[]={<span class="stringliteral">"None"</span>,<span class="stringliteral">"Occasional"</span>,<span class="stringliteral">"Frequent"</span>};
00275 <span class="keyword">static</span> <span class="keywordtype">char</span>* scr4_rbutton6_options[]={<span class="stringliteral">"Small"</span>,<span class="stringliteral">"Medium"</span>,<span class="stringliteral">"Large"</span>};
00276 <span class="preprocessor">#endif</span>
00277 <span class="preprocessor"></span>
00278 <span class="keyword">static</span> <span class="keywordtype">char</span> just_some_items_detected_flag=0;
00279 
00280 <span class="keyword">static</span> <span class="keywordtype">void</span> new_game_deinit() {
00281     <span class="keywordflow">if</span>(scr2_vbrowser1_bitmap) {
00282         <a class="code" href="ALL_8H.html#a8">mem_del</a>(scr2_vbrowser1_bitmap);
00283         scr2_vbrowser1_bitmap=<a class="code" href="OHELP_8H.html#a0">NULL</a>;
00284     }
00285     <span class="keywordflow">if</span>(scr2_vbrowser2_bitmap) {
00286         <a class="code" href="ALL_8H.html#a8">mem_del</a>(scr2_vbrowser2_bitmap);
00287         scr2_vbrowser2_bitmap=<a class="code" href="OHELP_8H.html#a0">NULL</a>;
00288     }
00289 
00290     scr3_rbutton1.<a class="code" href="classRadioButton.html#a3">deinit</a>();
00291     scr3_rbutton2.<a class="code" href="classRadioButton.html#a3">deinit</a>();
00292     scr3_rbutton3.<a class="code" href="classRadioButton.html#a3">deinit</a>();
00293     scr3_rbutton4.<a class="code" href="classRadioButton.html#a3">deinit</a>();
00294     scr3_rbutton5.<a class="code" href="classRadioButton.html#a3">deinit</a>();
00295     scr3_rbutton6.<a class="code" href="classRadioButton.html#a3">deinit</a>();
00296     scr3_rbutton7.<a class="code" href="classRadioButton.html#a3">deinit</a>();
00297     scr3_rbutton8.<a class="code" href="classRadioButton.html#a3">deinit</a>();
00298     <span class="comment">//          scr3_slider1.deinit();</span>
00299     <span class="comment">//          scr3_slider2.deinit();</span>
00300     <span class="comment">//          scr3_slider3.deinit();</span>
00301     <span class="comment">//          scr3_slider4.deinit();</span>
00302     <span class="comment">//          scr3_slider5.deinit();</span>
00303     <span class="comment">//          scr3_bounded_slider2.deinit();</span>
00304 
00305     scr4_rbutton1.<a class="code" href="classRadioButton.html#a3">deinit</a>();
00306     scr4_rbutton2.<a class="code" href="classRadioButton.html#a3">deinit</a>();
00307     scr4_rbutton3.<a class="code" href="classRadioButton.html#a3">deinit</a>();
00308     scr4_rbutton4.<a class="code" href="classRadioButton.html#a3">deinit</a>();
00309     scr4_rbutton5.<a class="code" href="classRadioButton.html#a3">deinit</a>();
00310     scr4_rbutton6.<a class="code" href="classRadioButton.html#a3">deinit</a>();
00311     scr4_rbutton7.<a class="code" href="classRadioButton.html#a3">deinit</a>();
00312     scr4_rbutton8.<a class="code" href="classRadioButton.html#a3">deinit</a>();
00313 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00314 <span class="preprocessor"></span>    scr4_rbutton9.<a class="code" href="classRadioButton.html#a3">deinit</a>();
00315 <span class="preprocessor">#endif</span>
00316 <span class="preprocessor"></span>
00317     <span class="comment">//          scr4_slider1.deinit();</span>
00318     <span class="comment">//          scr4_slider3.deinit();</span>
00319     <span class="comment">//          scr4_slider4.deinit();</span>
00320 
00321     scr2_browseRecCount1=1;
00322     scr2_browseRecCount2=1;
00323 }
00324 
00325 <span class="keyword">static</span> <a class="code" href="classString.html">String</a> save_express_name;
00326 <span class="keyword">static</span> <span class="keywordtype">void</span> save_express_report(<span class="keywordtype">int</span> refreshFlag) {
00327     <span class="keywordtype">int</span> vtab1=<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+95,vtab2=<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+108,vtab3=<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+150,vtab4=<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+185;
00328     <span class="keywordtype">int</span> tab1=<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+40,tab2=<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+90,tab3=<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+600,tab4=<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+650;
00329 
00330     <span class="keywordflow">if</span>(refreshFlag==<a class="code" href="Gamedef_8h.html#a71a16">INFO_REPAINT</a>) {
00331         user_interface.darken(<a class="code" href="Oworldmt_8h.html#a12">ZOOM_X1</a>,<a class="code" href="Oworldmt_8h.html#a13">ZOOM_Y1</a>,<a class="code" href="Oworldmt_8h.html#a14">ZOOM_X2</a>,<a class="code" href="Oworldmt_8h.html#a15">ZOOM_Y2</a>);
00332         info.disp_column_bitmap(&amp;vga_back);
00333         user_interface.brighten(tab1,vtab1,tab4,vtab4);
00334         user_interface.rect(tab1,vtab1,tab4,vtab4);
00335         scr5_button_save.<a class="code" href="classButton.html#a10">create_text</a>
00336             (tab2+70,vtab3+5,tab2+170,vtab3+25,<span class="stringliteral">"Save"</span>);
00337         <span class="comment">//              scr5_button_save.set_key('S');</span>
00338         scr5_button_cancel.<a class="code" href="classButton.html#a10">create_text</a>
00339             (tab2+360,vtab3+5,tab2+460,vtab3+25,<span class="stringliteral">"Cancel"</span>);
00340         <span class="comment">//              scr5_button_cancel.set_key('C');</span>
00341 
00342         font_chartsm.put(tab1+10,vtab2-3,<span class="stringliteral">"Express game name"</span>);
00343 
00344         user_interface.bar(tab1+10,vtab2+15,tab1+600,vtab2+40,<a class="code" href="COLOR_8H.html#a17">V_WHITE</a>);
00345         user_interface.rect(tab1+10,vtab2+15,tab1+600,vtab2+40,1);
00346         strcpy(save_express_name.<a class="code" href="classString.html#m0">str_buf</a>,player_school.school_name);
00347         scr5_game_name.<a class="code" href="classGetA.html#a1">init</a>(tab1+20,vtab2+21,tab1+600,save_express_name.<a class="code" href="classString.html#m0">str_buf</a>,<span class="keyword">sizeof</span>(save_express_name.<a class="code" href="classString.html#m0">str_buf</a>)-1,&amp;font_charts,0,1);
00348         sys.redraw_all_flag=0;
00349         vga.blt_buf(0,0,<a class="code" href="OVGA_8H.html#a0">VGA_WIDTH</a>-1,<a class="code" href="OVGA_8H.html#a1">VGA_HEIGHT</a>-1);
00350     }
00351     <span class="keywordflow">else</span> {
00352         user_interface.bar(tab1+10,vtab2+15,tab1+600,vtab2+40,<a class="code" href="COLOR_8H.html#a17">V_WHITE</a>);
00353         user_interface.rect(tab1+10,vtab2+15,tab1+600,vtab2+40,1);
00354         scr5_game_name.<a class="code" href="classGetA.html#a7">paint</a>();
00355         scr5_button_save.<a class="code" href="classButton.html#a20">paint</a>();
00356         scr5_button_cancel.<a class="code" href="classButton.html#a20">paint</a>();
00357         vga.blt_buf(tab1+10,vtab2+15,tab1+600,vtab2+40);
00358         vga.blt_buf(tab2+70,vtab3+5,tab2+170,vtab3+25);
00359         vga.blt_buf(tab2+360,vtab3+5,tab2+460,vtab3+25);
00360     }
00361 }
00362 
00363 <span class="keyword">static</span> <span class="keywordtype">int</span> save_express_detect() {
00364     vga.use_back();
00365     <span class="keywordtype">int</span> saveNow = scr5_game_name.<a class="code" href="classGetA.html#a6">detect</a>()==<a class="code" href="KEY_8H.html#a3">KEY_RETURN</a>;
00366 
00367     vga.use_front();                                <span class="comment">// ## use_front to make the button flashing in release mode.</span>
00368     <span class="keywordflow">if</span>( saveNow || scr5_button_save.<a class="code" href="classButton.html#a21">detect</a>()) {
00369         <a class="code" href="classString.html">String</a> tmp;
00370         strcpy(tmp.<a class="code" href="classString.html#m0">str_buf</a>,scr5_game_name.<a class="code" href="classGetA.html#m3">input_field</a>);
00371         <span class="keywordflow">if</span>(stricmp((tmp.<a class="code" href="classString.html#m0">str_buf</a>+tmp.<a class="code" href="classString.html#a5">len</a>()-4),<span class="stringliteral">".xps"</span>)!=0) {
00372             tmp+=<span class="stringliteral">".xps"</span>;
00373         }
00374         game_file.save_express_game(tmp.<a class="code" href="classString.html#m0">str_buf</a>);
00375         current_report_mode=<a class="code" href="Ogset__if_8cpp.html#a129a110">TAB_SCREEN</a>;
00376         sys.redraw_all_flag=1;
00377         <span class="keywordflow">return</span> 1;
00378     }
00379     <span class="keywordflow">if</span>(scr5_button_cancel.<a class="code" href="classButton.html#a21">detect</a>()) {
00380         current_report_mode=<a class="code" href="Ogset__if_8cpp.html#a129a110">TAB_SCREEN</a>;
00381         sys.redraw_all_flag=1;
00382         <span class="keywordflow">return</span> 1;
00383     }
00384     vga.use_back();
00385     <span class="keywordflow">return</span> 0;
00386 }
00387 
00388 <span class="keyword">static</span> <span class="keywordtype">int</span> callback_disp(<span class="keywordtype">int</span> selNum, <span class="keywordtype">int</span> refreshFlag) {
00389     <span class="keyword">static</span> <span class="keywordtype">int</span> scr4_v1=1,scr4_v2=2,scr4_v3=3,scr4_v4=4,scr4_v5=0,scr4_v6=2,scr4_v7=1;
00390     <span class="keyword">static</span> <span class="keywordtype">int</span> scr3_v1=1,scr3_v2=2,scr3_v3=3,scr3_v4=4,scr3_v5=0,scr3_v6=2,scr3_v7=1,scr3_v8=1;
00391     sys.yield();
00392     <span class="comment">//##        begin   zhoubin         000405</span>
00393     player_school.right_bws_pool_size=0;
00394     player_school.left_bws_pool_size=0;
00395 
00396     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0,l=0,r=0;i&lt;department_res.department_count;i++) {
00397         <span class="keywordflow">if</span>(player_school.tmp_department_pool_flag[i]==0) {
00398             player_school.left_bws_pool[l]=i+1;
00399             player_school.left_bws_pool_size++;
00400             l++;
00401             <span class="keywordflow">if</span>(player_school.just_remove==(i+1)) {
00402                 scr2_browseRecCount2=l;
00403                 player_school.just_remove=0;
00404             }
00405         }
00406         <span class="keywordflow">else</span> {
00407             player_school.right_bws_pool[r]=i+1;
00408             player_school.right_bws_pool_size++;
00409             r++;
00410             <span class="keywordflow">if</span>(player_school.just_add==(i+1)) {
00411                 scr2_browseRecCount1=r;
00412                 player_school.just_add=0;
00413             }
00414         }
00415     }
00416     <span class="comment">//##        end             zhoubin 000405</span>
00417 
00418     <span class="keywordflow">if</span>(selNum==3) {
00419         <span class="comment">//---init. of screen 1 -//</span>
00420         <span class="keywordflow">if</span>(refreshFlag== <a class="code" href="Gamedef_8h.html#a71a16">INFO_REPAINT</a>) {
00421             new_game_deinit();
00422 
00423             user_interface.brighten(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+5,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+5,<a class="code" href="Ogset__if_8cpp.html#a127a105">TMENU_X2</a>-5,<a class="code" href="Ogset__if_8cpp.html#a127a106">TMENU_Y2</a>-40);
00424             user_interface.rect(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+5,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+5,<a class="code" href="Ogset__if_8cpp.html#a127a105">TMENU_X2</a>-5,<a class="code" href="Ogset__if_8cpp.html#a127a106">TMENU_Y2</a>-40);
00425             scr1_vbrowser1.<a class="code" href="classVBrowse98.html#a2">init</a>(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+10,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+10,<a class="code" href="Ogset__if_8cpp.html#a127a105">TMENU_X2</a>-5,<a class="code" href="Ogset__if_8cpp.html#a127a106">TMENU_Y2</a>-40,
00426                                 0,  scr1_browseRecHeight,scr1_browseRecCount1,
00427                                 scr1_disp_rep_row1,<a class="code" href="OHELP_8H.html#a0">NULL</a>,1);
00428             <span class="comment">//                  scr1_vbrowser2.init(TMENU_X1+5,TMENU_Y2-175,TMENU_X2-5,TMENU_Y2-40,</span>
00429             <span class="comment">//                    0,    scr1_browseRecHeight, scr1_browseRecCount2,</span>
00430             <span class="comment">//                    scr1_disp_rep_row2,NULL,0);</span>
00431 
00432             <span class="comment">//--------- create buttons ---------//</span>
00433 
00434             scr1_button_load.<a class="code" href="classButton.html#a10">create_text</a>
00435                 ( <a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+50,<a class="code" href="Ogset__if_8cpp.html#a127a106">TMENU_Y2</a>-25,<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+220,<a class="code" href="Ogset__if_8cpp.html#a127a106">TMENU_Y2</a>-5,
00436                   <span class="stringliteral">"Load express game"</span>);
00437             scr1_button_load.<a class="code" href="classButton.html#a6">set_key</a>(<span class="charliteral">'L'</span>);
00438 
00439             scr1_button_save.<a class="code" href="classButton.html#a10">create_text</a>
00440                 ( <a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+260,<a class="code" href="Ogset__if_8cpp.html#a127a106">TMENU_Y2</a>-25,<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+430,<a class="code" href="Ogset__if_8cpp.html#a127a106">TMENU_Y2</a>-5,
00441                   <span class="stringliteral">"Save express game"</span>);
00442             scr1_button_save.<a class="code" href="classButton.html#a6">set_key</a>(<span class="charliteral">'S'</span>);
00443 
00444             scr1_button_del.<a class="code" href="classButton.html#a10">create_text</a>
00445                 ( <a class="code" href="Ogset__if_8cpp.html#a127a105">TMENU_X2</a>-220,<a class="code" href="Ogset__if_8cpp.html#a127a106">TMENU_Y2</a>-25,<a class="code" href="Ogset__if_8cpp.html#a127a105">TMENU_X2</a>-50,<a class="code" href="Ogset__if_8cpp.html#a127a106">TMENU_Y2</a>-5,
00446                   <span class="stringliteral">"Delete express game"</span>);
00447             scr1_button_del.<a class="code" href="classButton.html#a6">set_key</a>(<span class="charliteral">'D'</span>);
00448 
00449             <span class="comment">//----------------------------------//</span>
00450 
00451             scr1_vbrowser1.<a class="code" href="classVBrowse98.html#a4">open</a>(scr1_vbrowser1.<a class="code" href="classVBrowse98.html#a6">recno</a>());
00452             <span class="comment">//            scr1_vbrowser2.open(scr1_vbrowser2.recno());</span>
00453         }
00454         <span class="comment">//              scr1_vbrowser1.update();</span>
00455         <span class="comment">//              scr1_vbrowser2.update();</span>
00456         scr1_button_load.<a class="code" href="classButton.html#a20">paint</a>();
00457         scr1_button_save.<a class="code" href="classButton.html#a20">paint</a>();
00458         scr1_button_del.<a class="code" href="classButton.html#a20">paint</a>();
00459     }
00460 
00462 
00463     <span class="keywordflow">if</span>(selNum==0) {
00464         <span class="keywordtype">int</span> vtab1=<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+5,vtab2=<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+60,vtab3=<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+120,vtab4=<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+320;
00465         <span class="keywordtype">int</span> vtab5=<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+280,vtab6=<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+220,vtab7=<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+255,vtab8=<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+290;
00466         <span class="keywordtype">int</span> tab1=<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+15,tab2=<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+150,tab3=<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+390,tab4=<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+680;
00467 
00468         <span class="keywordflow">if</span>(refreshFlag== <a class="code" href="Gamedef_8h.html#a71a16">INFO_REPAINT</a>) {
00469             <span class="comment">//---init. of screen 2 -//</span>
00470             new_game_deinit();
00471 
00472             <span class="comment">// Basic options --//</span>
00473             user_interface.rect(tab1,vtab1+20,tab1+115,vtab1+100);
00474             <span class="comment">//                  button_up.create_text(tab1+80,vtab1+33,tab1+105,vtab1+60,"^");</span>
00475             <span class="comment">//                  button_down.create_text(tab1+80,vtab1+63,tab1+105,vtab1+90,"v");</span>
00476 
00477             button_add.<a class="code" href="classButton.html#a10">create_text</a>(tab1+285,vtab3+60,tab1+385,vtab3+80,<span class="stringliteral">"Add &gt;&gt;"</span>);
00478             button_remove.<a class="code" href="classButton.html#a10">create_text</a>(tab1+285,vtab3+100,tab1+385,vtab3+120,<span class="stringliteral">"&lt;&lt; Remove "</span>);
00479             button_reset.<a class="code" href="classButton.html#a10">create_text</a>(tab1+285,vtab3+140,tab1+385,vtab3+160,<span class="stringliteral">"Reset"</span>);
00480 
00481             font_chart_blue_sm.put(tab1+5,vtab1+5,<span class="stringliteral">"Institution logo"</span>);
00482             font_chart_blue_sm.put(tab2,vtab1+5,<span class="stringliteral">"Institution name"</span>);
00483             font_chart_blue_sm.put(tab2,vtab1+60,<span class="stringliteral">"Player first name"</span>);
00484             font_chart_blue_sm.put(tab2+268,vtab1+60,<span class="stringliteral">"Last name"</span>);
00485 
00486             scr2_name[0].init(tab2+5,vtab1+28,tab2+520,player_school.school_name,<span class="keyword">sizeof</span>(player_school.school_name)-1,&amp;font_charts,0,1);
00487             scr2_name[1].init(tab2+5,vtab1+83,tab2+250,player_school.player_first_name,<span class="keyword">sizeof</span>(player_school.player_first_name)-1,&amp;font_charts,0,1);
00488             scr2_name[2].init(tab2+275,vtab1+83,tab2+520,player_school.player_last_name,<span class="keyword">sizeof</span>(player_school.player_last_name)-1,&amp;font_charts,0,1);
00489             scr2_name.<a class="code" href="classGetAGroup.html#a4">set_focus</a>(0);
00490             scr2_name[0].<a class="code" href="classGetAGroup.html#a2">paint</a>();
00491             scr2_name[1].<a class="code" href="classGetAGroup.html#a2">paint</a>();
00492             scr2_name[2].<a class="code" href="classGetAGroup.html#a2">paint</a>();
00493 
00494 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00495 <span class="preprocessor"></span>            font_charts.put(tab1+40,vtab3,<span class="stringliteral">"Available departments"</span>);
00496             font_charts.put(tab1+460,vtab3,<span class="stringliteral">"Included departments"</span>);
00497 <span class="preprocessor">#else</span>
00498 <span class="preprocessor"></span>            font_charts.put(tab1+40,vtab3,<span class="stringliteral">"Department choices"</span>);
00499             font_charts.put(tab1+460,vtab3,<span class="stringliteral">"Added departments"</span>);
00500 <span class="preprocessor">#endif</span>
00501 <span class="preprocessor"></span>        }
00502 
00503         <span class="keywordflow">if</span>(redraw_browser_flag || refreshFlag==<a class="code" href="Gamedef_8h.html#a71a16">INFO_REPAINT</a>) {
00504             player_school.right_bws_pool_size=0;
00505             player_school.left_bws_pool_size=0;
00506 
00507             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0,l=0,r=0;i&lt;department_res.department_count;i++) {
00508                 <span class="keywordflow">if</span>(player_school.tmp_department_pool_flag[i]==0) {
00509                     player_school.left_bws_pool[l]=i+1;
00510                     player_school.left_bws_pool_size++;
00511                     l++;
00512                     <span class="keywordflow">if</span>(player_school.just_remove==(i+1)) {
00513                         scr2_browseRecCount2=l;
00514                         player_school.just_remove=0;
00515                     }
00516                 }
00517                 <span class="keywordflow">else</span> {
00518                     player_school.right_bws_pool[r]=i+1;
00519                     player_school.right_bws_pool_size++;
00520                     r++;
00521                     <span class="keywordflow">if</span>(player_school.just_add==(i+1)) {
00522                         scr2_browseRecCount1=r;
00523                         player_school.just_add=0;
00524                     }
00525                 }
00526             }
00527 
00528             <span class="keywordflow">if</span>(refreshFlag==<a class="code" href="Gamedef_8h.html#a71a16">INFO_REPAINT</a>) {
00529                 <span class="comment">// backup the background of the vbrowser</span>
00530                 scr2_vbrowser1_bitmap=
00531                     vga.active_buf-&gt;save_area(
00532                         tab1+400,vtab3+30,tab1+670,vtab4,
00533                         scr2_vbrowser1_bitmap
00534                         );
00535                 scr2_vbrowser2_bitmap=
00536                     vga.active_buf-&gt;save_area(
00537                         tab1,vtab3+30,tab1+270,vtab4,
00538                         scr2_vbrowser2_bitmap
00539                         );
00540                 <span class="keywordtype">char</span>* bitmapPtr = image_mascot.get_data(player_school.mascot);
00541                 <span class="keywordflow">if</span>( bitmapPtr ) {
00542                     vga_back.put_bitmap(tab1+10,vtab1+33,bitmapPtr );
00543                 }
00544 
00545                 image_interface.put_back(tab1+80,vtab1+35,<span class="stringliteral">"U-ARW-UP"</span>);
00546                 image_interface.put_back(tab1+80,vtab1+65,<span class="stringliteral">"D-ARW-UP"</span>);
00547 
00548                 user_interface.bar(tab2-5,vtab1+22,tab2+520,vtab1+46,<a class="code" href="COLOR_8H.html#a17">V_WHITE</a>);
00549                 user_interface.bar(tab2-5,vtab1+77,tab2+250,vtab1+101,<a class="code" href="COLOR_8H.html#a17">V_WHITE</a>);
00550                 user_interface.bar(tab2+265,vtab1+77,tab2+520,vtab1+101,<a class="code" href="COLOR_8H.html#a17">V_WHITE</a>);
00551                 user_interface.rect(tab2-5,vtab1+22,tab2+520,vtab1+46,1);
00552                 user_interface.rect(tab2-5,vtab1+77,tab2+250,vtab1+101,1);
00553                 user_interface.rect(tab2+265,vtab1+77,tab2+520,vtab1+101,1);
00554 
00555                 button_add.<a class="code" href="classButton.html#a20">paint</a>();
00556                 button_remove.<a class="code" href="classButton.html#a20">paint</a>();
00557                 button_reset.<a class="code" href="classButton.html#a20">paint</a>();
00558                 button_add.<a class="code" href="classButton.html#a25">pop</a>();
00559                 button_remove.<a class="code" href="classButton.html#a25">pop</a>();
00560                 button_reset.<a class="code" href="classButton.html#a25">pop</a>();
00561                 scr2_name.<a class="code" href="classGetAGroup.html#a2">paint</a>();
00562 
00563             }
00564             <span class="keywordflow">else</span> {
00565                 <span class="comment">// redraw the background</span>
00566                 vga.active_buf-&gt;rest_area(scr2_vbrowser1_bitmap,0,0);
00567                 vga.active_buf-&gt;rest_area(scr2_vbrowser2_bitmap,0,0);
00568             }
00569 
00570             user_interface.rect(tab1+395,vtab3+25,tab1+670,vtab4);
00571             user_interface.rect(tab1-5,vtab3+25,tab1+270,vtab4);
00572 
00573             scr2_vbrowser1.<a class="code" href="classVBrowse98.html#a2">init</a>(tab1+400,vtab3+30,tab1+670,vtab4,
00574                                 0,  scr2_browseRecHeight,player_school.right_bws_pool_size,
00575                                 scr2_disp_rep_row1,<a class="code" href="OHELP_8H.html#a0">NULL</a>,1);
00576             scr2_vbrowser2.<a class="code" href="classVBrowse98.html#a2">init</a>(tab1,vtab3+30,tab1+270,vtab4,
00577                                 0,  scr2_browseRecHeight,player_school.left_bws_pool_size,
00578                                 scr2_disp_rep_row2,<a class="code" href="OHELP_8H.html#a0">NULL</a>,1);
00579 
00580             scr2_vbrowser1.<a class="code" href="classVBrowse98.html#a4">open</a>(scr2_browseRecCount1);
00581             scr2_vbrowser2.<a class="code" href="classVBrowse98.html#a4">open</a>(scr2_browseRecCount2);
00582             redraw_browser_flag=0;
00583         }
00585         scr2_browseRecCount1=scr2_vbrowser1.<a class="code" href="classVBrowse98.html#a6">recno</a>();
00586         scr2_browseRecCount2=scr2_vbrowser2.<a class="code" href="classVBrowse98.html#a6">recno</a>();
00587 
00588         <span class="keywordflow">if</span>(just_some_items_detected_flag) {
00589             <span class="keywordtype">char</span>* bitmapPtr = image_mascot.get_data(player_school.mascot);
00590             <span class="keywordflow">if</span>( bitmapPtr ) {
00591                 vga_back.put_bitmap(tab1+10,vtab1+33,bitmapPtr );
00592             }
00593 
00594             image_interface.put_back(tab1+80,vtab1+35,<span class="stringliteral">"U-ARW-UP"</span>);
00595             image_interface.put_back(tab1+80,vtab1+65,<span class="stringliteral">"D-ARW-UP"</span>);
00596 
00597             user_interface.bar(tab2-5,vtab1+22,tab2+520,vtab1+46,<a class="code" href="COLOR_8H.html#a17">V_WHITE</a>);
00598             user_interface.bar(tab2-5,vtab1+77,tab2+250,vtab1+101,<a class="code" href="COLOR_8H.html#a17">V_WHITE</a>);
00599             user_interface.bar(tab2+265,vtab1+77,tab2+520,vtab1+101,<a class="code" href="COLOR_8H.html#a17">V_WHITE</a>);
00600             user_interface.rect(tab2-5,vtab1+22,tab2+520,vtab1+46,1);
00601             user_interface.rect(tab2-5,vtab1+77,tab2+250,vtab1+101,1);
00602             user_interface.rect(tab2+265,vtab1+77,tab2+520,vtab1+101,1);
00603 
00604             button_add.<a class="code" href="classButton.html#a20">paint</a>();
00605             button_remove.<a class="code" href="classButton.html#a20">paint</a>();
00606             button_reset.<a class="code" href="classButton.html#a20">paint</a>();
00607             button_add.<a class="code" href="classButton.html#a25">pop</a>();
00608             button_remove.<a class="code" href="classButton.html#a25">pop</a>();
00609             button_reset.<a class="code" href="classButton.html#a25">pop</a>();
00610             scr2_name.<a class="code" href="classGetAGroup.html#a2">paint</a>();
00611             just_some_items_detected_flag=0;
00612         }
00613     }
00615 
00616     <span class="keywordflow">if</span>(selNum==1) {
00617         <span class="keywordtype">int</span> vtab1=20,vtab2=55,vtab3=90,vtab4=125;
00618         <span class="keywordtype">int</span> vtab5=185,vtab6=220,vtab7=255,vtab8=290;
00619         <span class="keywordtype">int</span> tab1=25,tab2=300,tab3=400,tab4=680;
00620 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00621 <span class="preprocessor"></span>        tab2=360;
00622         <span class="keywordtype">int</span> TMENU_X2_2CHOICE = (<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab2 + 2*<a class="code" href="Ogset__if_8cpp.html#a127a105">TMENU_X2</a>) / 3;
00623 <span class="preprocessor">#endif</span>
00624 <span class="preprocessor"></span>        <span class="comment">//---init. of screen 3 -//</span>
00625         <span class="keywordflow">if</span>(refreshFlag== <a class="code" href="Gamedef_8h.html#a71a16">INFO_REPAINT</a>) {
00626             new_game_deinit();
00627             user_interface.rect(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+5,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+5,<a class="code" href="Ogset__if_8cpp.html#a127a105">TMENU_X2</a>-5,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab5-25, 1);
00628             user_interface.rect(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+5,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab5-15,<a class="code" href="Ogset__if_8cpp.html#a127a105">TMENU_X2</a>-5,<a class="code" href="Ogset__if_8cpp.html#a127a106">TMENU_Y2</a>-5, 1);
00629 
00630 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00631 <span class="preprocessor"></span>            <span class="comment">// option in ver2 is re-arranged</span>
00632 
00633             scr3_rbutton1.<a class="code" href="classRadioButton.html#a2">init</a>(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab2,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab1,TMENU_X2_2CHOICE,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab1+20,
00634                                2, &amp;(player_school.control),
00635                                scr3_rbutton1_options);
00636 
00637             scr3_rbutton2.<a class="code" href="classRadioButton.html#a2">init</a>(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab2,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab2,<a class="code" href="Ogset__if_8cpp.html#a127a105">TMENU_X2</a>, <a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab2+20,
00638                                3, &amp;(player_school.student_count),
00639                                scr3_rbutton2_options);
00640 
00641             scr3_rbutton3.<a class="code" href="classRadioButton.html#a2">init</a>(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab2,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab3,<a class="code" href="Ogset__if_8cpp.html#a127a105">TMENU_X2</a>, <a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab3+20,
00642                                3, &amp;(player_school.parttime_undergrad_percent),
00643                                scr3_rbutton3_options);
00644 
00645             scr3_rbutton4.<a class="code" href="classRadioButton.html#a2">init</a>(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab2,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab4,<a class="code" href="Ogset__if_8cpp.html#a127a105">TMENU_X2</a>, <a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab4+20,
00646                                3, &amp;(player_school.sponsored_research_intensity),
00647                                scr3_rbutton4_options);
00648 
00649             scr3_rbutton5.<a class="code" href="classRadioButton.html#a2">init</a>(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab2,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab5,<a class="code" href="Ogset__if_8cpp.html#a127a105">TMENU_X2</a>, <a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab5+20,
00650                                3, &amp;(player_school.graduate_student_percent),
00651                                scr3_rbutton5_options);
00652 
00653             scr3_rbutton6.<a class="code" href="classRadioButton.html#a2">init</a>(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab2,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab6,<a class="code" href="Ogset__if_8cpp.html#a127a105">TMENU_X2</a>, <a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab6+20,
00654                                3, &amp;(player_school.ug_get_degree_in_5year_percent),
00655                                scr3_rbutton6_options);
00656 
00657             scr3_rbutton7.<a class="code" href="classRadioButton.html#a2">init</a>(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab2,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab7,<a class="code" href="Ogset__if_8cpp.html#a127a105">TMENU_X2</a>, <a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab7+20,
00658                                3, &amp;(player_school.fulltime_ug_in_housing_percent),
00659                                scr3_rbutton7_options);
00660 
00661             scr3_rbutton8.<a class="code" href="classRadioButton.html#a2">init</a>(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab2,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab8,<a class="code" href="Ogset__if_8cpp.html#a127a105">TMENU_X2</a>, <a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab8+20,
00662                                3, &amp;(player_school.athletic_program_intensity),
00663                                scr3_rbutton8_options);
00664 <span class="preprocessor">#else</span>
00665 <span class="preprocessor"></span>            scr3_rbutton1.<a class="code" href="classRadioButton.html#a2">init</a>(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab2,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab1,<a class="code" href="Ogset__if_8cpp.html#a127a105">TMENU_X2</a>,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab1+20,
00666                                3, &amp;(player_school.student_market),
00667                                scr3_rbutton1_options);
00668 
00669             scr3_rbutton2.<a class="code" href="classRadioButton.html#a2">init</a>(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab3,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab8,<a class="code" href="Ogset__if_8cpp.html#a127a105">TMENU_X2</a>, <a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab8+20,
00670                                3, &amp;(player_school.athletic_program_intensity),
00671                                scr3_rbutton2_options);
00672 
00673             <span class="comment">//                  scr3_rbutton1.init(TMENU_X1+tab2,TMENU_Y1+vtab1,TMENU_X2,TMENU_Y1+vtab1+20,</span>
00674             <span class="comment">//                                                                  3, &amp;(player_school.student_market),</span>
00675             <span class="comment">//                                                                  scr3_rbutton1_options);</span>
00676 
00677             <span class="comment">//                  scr3_bounded_slider0.init(TMENU_X1+tab2,TMENU_Y1+vtab2,380,17,</span>
00678             <span class="comment">//                                                                  0,10000,&amp;(player_school_prestige),1,V_YELLOW,9);</span>
00679 
00680             scr3_rbutton4.<a class="code" href="classRadioButton.html#a2">init</a>(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab2,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab2,<a class="code" href="Ogset__if_8cpp.html#a127a105">TMENU_X2</a>,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab2+20,
00681                                3, &amp;(player_school.prestige),
00682                                scr3_rbutton3_options);
00683 
00684             scr3_rbutton3.<a class="code" href="classRadioButton.html#a2">init</a>(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab2,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab3,<a class="code" href="Ogset__if_8cpp.html#a127a105">TMENU_X2</a>, <a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab3+20,
00685                                3, &amp;(player_school.student_count),
00686                                scr3_rbutton5_options);
00687 
00688             <span class="comment">//                  scr3_bounded_slider2.init</span>
00689             <span class="comment">//                                                                  (TMENU_X1+tab2,TMENU_Y1+vtab4, 380, 17,</span>
00690             <span class="comment">//                                                                  0,100,&amp;(player_school.sl5_student_percent),1, V_YELLOW,3);              //## fred 0118</span>
00691 
00692             scr3_rbutton5.<a class="code" href="classRadioButton.html#a2">init</a>(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab2,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab4,<a class="code" href="Ogset__if_8cpp.html#a127a105">TMENU_X2</a>,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab4+20,
00693                                3, &amp;(player_school.sl5_student_percent),
00694                                scr3_rbutton4_options);
00695 
00696             <span class="comment">//                  scr3_slider2.init(TMENU_X1+tab3,TMENU_Y1+vtab5, 200, 17,</span>
00697             <span class="comment">//                                                                  0,100,&amp;(player_school.parttime_undergrad_percent),1, V_YELLOW,3);</span>
00698 
00699             scr3_rbutton6.<a class="code" href="classRadioButton.html#a2">init</a>(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab3,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab5,<a class="code" href="Ogset__if_8cpp.html#a127a105">TMENU_X2</a>,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab5+20,
00700                                3, &amp;(player_school.parttime_undergrad_percent),
00701                                scr3_rbutton4_options);
00702 
00703             <span class="comment">//                  scr3_slider3.init(TMENU_X1+tab3,TMENU_Y1+vtab6, 200, 17,</span>
00704             <span class="comment">//                                                                  0,100,&amp;(player_school.ug_get_degree_in_5year_percent),1, V_YELLOW,3);</span>
00705 
00706             scr3_rbutton7.<a class="code" href="classRadioButton.html#a2">init</a>(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab3,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab6,<a class="code" href="Ogset__if_8cpp.html#a127a105">TMENU_X2</a>,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab6+20,
00707                                3, &amp;(player_school.ug_get_degree_in_5year_percent),
00708                                scr3_rbutton3_options);
00709 
00710             <span class="comment">//                  scr3_slider4.init(TMENU_X1+tab3,TMENU_Y1+vtab7, 200, 17,</span>
00711             <span class="comment">//                                                                  0,100,&amp;(player_school.fulltime_ug_in_housing_percent),1, V_YELLOW,3);</span>
00712 
00713             scr3_rbutton8.<a class="code" href="classRadioButton.html#a2">init</a>(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab3,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab7,<a class="code" href="Ogset__if_8cpp.html#a127a105">TMENU_X2</a>,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab7+20,
00714                                3, &amp;(player_school.fulltime_ug_in_housing_percent),
00715                                scr3_rbutton3_options);
00716 <span class="preprocessor">#endif</span>
00717 <span class="preprocessor"></span>
00718             font_chart_blue_sm.put(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab1,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab1+5,
00719                                    scr3_label[0]);
00720             font_chart_blue_sm.put(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab1,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab2+5,
00721                                    scr3_label[1]);
00722             font_chart_blue_sm.put(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab1,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab3+5,
00723                                    scr3_label[2]);
00724             font_chart_blue_sm.put(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab1,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab4+5,
00725                                    scr3_label[3]);
00726             font_chart_blue_sm.put(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab1,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab5+5,
00727                                    scr3_label[4]);
00728             font_chart_blue_sm.put(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab1,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab6+5,
00729                                    scr3_label[5]);
00730             font_chart_blue_sm.put(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab1,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab7+5,
00731                                    scr3_label[6]);
00732             font_chart_blue_sm.put(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab1,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab8+5,
00733                                    scr3_label[7]);
00734 
00735             <span class="comment">//                  scr3_bounded_slider0.refresh();</span>
00736             <span class="comment">//                  scr3_bounded_slider2.refresh();</span>
00737             <span class="comment">//                  scr3_slider2.refresh();</span>
00738             <span class="comment">//                  scr3_slider3.refresh();</span>
00739             <span class="comment">//                  scr3_slider4.refresh();</span>
00740         }
00741 
00742         <span class="keywordflow">if</span>(just_some_items_detected_flag) {
00743             scr3_rbutton1.<a class="code" href="classRadioButton.html#a5">refresh</a>();
00744             scr3_rbutton2.<a class="code" href="classRadioButton.html#a5">refresh</a>();
00745             scr3_rbutton3.<a class="code" href="classRadioButton.html#a5">refresh</a>();
00746             scr3_rbutton4.<a class="code" href="classRadioButton.html#a5">refresh</a>();
00747             scr3_rbutton5.<a class="code" href="classRadioButton.html#a5">refresh</a>();
00748             scr3_rbutton6.<a class="code" href="classRadioButton.html#a5">refresh</a>();
00749             scr3_rbutton7.<a class="code" href="classRadioButton.html#a5">refresh</a>();
00750             scr3_rbutton8.<a class="code" href="classRadioButton.html#a5">refresh</a>();
00751             just_some_items_detected_flag=0;
00752         }
00753 
00754     }
00755 
00756     <span class="keywordflow">if</span>(selNum==2) {
00757 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00758 <span class="preprocessor"></span>        <span class="keywordtype">int</span> vtab1=25,vtab2=50,vtab3=75;
00759         <span class="keywordtype">int</span> vtab4=135,vtab5=160,vtab6=185,vtab7=210,vtab8=235,vtab9=260;
00760         <span class="keywordtype">int</span> tab1=25,tab2=300,tab3=400,tab4=680;
00761         <span class="keywordtype">int</span> TMENU_X2_2CHOICE = (<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab2 + 2*<a class="code" href="Ogset__if_8cpp.html#a127a105">TMENU_X2</a>) / 3;
00762 <span class="preprocessor">#else</span>
00763 <span class="preprocessor"></span>        <span class="keywordtype">int</span> vtab1=25,vtab2=30,vtab3=55,vtab4=80;
00764         <span class="keywordtype">int</span> vtab5=140,vtab6=165,vtab7=190;
00765         <span class="keywordtype">int</span> vtab8=250,vtab9=275;
00766         <span class="keywordtype">int</span> tab1=25,tab2=200,tab3=320,tab4=680;
00767 <span class="preprocessor">#endif</span>
00768 <span class="preprocessor"></span>
00769         <span class="comment">//--- initialize screen 4 -----//</span>
00770 
00771         <span class="keywordflow">if</span>(refreshFlag==<a class="code" href="Gamedef_8h.html#a71a16">INFO_REPAINT</a>) {
00772             new_game_deinit();
00773 
00774 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00775 <span class="preprocessor"></span>            user_interface.rect(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+5,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab1-15,<a class="code" href="Ogset__if_8cpp.html#a127a105">TMENU_X2</a>-5,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab3+35, 1);
00776             user_interface.rect(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+5,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab4-15,<a class="code" href="Ogset__if_8cpp.html#a127a105">TMENU_X2</a>-5,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab9+35, 1);
00777 
00778             scr4_rbutton1.<a class="code" href="classRadioButton.html#a2">init</a>(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab2,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab1,<a class="code" href="Ogset__if_8cpp.html#a127a105">TMENU_X2</a>,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab1+20,
00779                                3, &amp;(player_school.prestige), scr4_rbutton1_options);
00780             scr4_rbutton2.<a class="code" href="classRadioButton.html#a2">init</a>(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab2,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab2,<a class="code" href="Ogset__if_8cpp.html#a127a105">TMENU_X2</a>,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab2+20,
00781                                3, &amp;(player_school.relative_wealth), scr4_rbutton2_options);
00782             scr4_rbutton3.<a class="code" href="classRadioButton.html#a2">init</a>(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab2,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab3,<a class="code" href="Ogset__if_8cpp.html#a127a105">TMENU_X2</a>,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab3+20,
00783                                3, &amp;(player_school.campus_environment), scr4_rbutton3_options);
00784             scr4_rbutton4.<a class="code" href="classRadioButton.html#a2">init</a>(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab2,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab4,<a class="code" href="Ogset__if_8cpp.html#a127a105">TMENU_X2</a>,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab4+20,
00785                                3, &amp;(player_school.chance_event_frequency), scr4_rbutton4_options);
00786             scr4_rbutton5.<a class="code" href="classRadioButton.html#a2">init</a>(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab2,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab5,<a class="code" href="Ogset__if_8cpp.html#a127a105">TMENU_X2</a>,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab5+20,
00787                                3, &amp;(player_school.chance_objective_frequency), scr4_rbutton5_options);
00788             scr4_rbutton6.<a class="code" href="classRadioButton.html#a2">init</a>(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab2,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab6,TMENU_X2_2CHOICE,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab6+20,
00789                                2, &amp;(player_school.chance_perturbations), scr4_rbutton6_options);
00790             scr4_rbutton7.<a class="code" href="classRadioButton.html#a2">init</a>(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab2,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab7,<a class="code" href="Ogset__if_8cpp.html#a127a105">TMENU_X2</a>,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab7+20,
00791                                3, &amp;(player_school.behavioral_response_speed), scr4_rbutton7_options);
00792             scr4_rbutton8.<a class="code" href="classRadioButton.html#a2">init</a>(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab2,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab8,TMENU_X2_2CHOICE,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab8+20,
00793                                2, &amp;(config.auto_save), scr4_rbutton8_options);
00794             scr4_rbutton9.<a class="code" href="classRadioButton.html#a2">init</a>(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab2,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab9,<a class="code" href="Ogset__if_8cpp.html#a127a105">TMENU_X2</a>,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab9+20,
00795                                3, &amp;(config.log_enable), scr4_rbutton9_options);
00796 
00797             font_chart_blue_sm.put(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab1,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab1+5,
00798                                    scr4_label[0]);
00799             font_chart_blue_sm.put(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab1,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab2+5,
00800                                    scr4_label[1]);
00801             font_chart_blue_sm.put(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab1,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab3+5,
00802                                    scr4_label[2]);
00803             font_chart_blue_sm.put(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab1,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab4+5,
00804                                    scr4_label[3]);
00805             font_chart_blue_sm.put(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab1,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab5+5,
00806                                    scr4_label[4]);
00807             font_chart_blue_sm.put(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab1,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab6+5,
00808                                    scr4_label[5]);
00809             font_chart_blue_sm.put(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab1,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab7+5,
00810                                    scr4_label[6]);
00811             font_chart_blue_sm.put(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab1,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab8+5,
00812                                    scr4_label[7]);
00813             font_chart_blue_sm.put(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab1,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab9+5,
00814                                    scr4_label[8]);
00815 
00816 <span class="preprocessor">#else</span>
00817 <span class="preprocessor"></span>            user_interface.rect(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+5,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab2-15,<a class="code" href="Ogset__if_8cpp.html#a127a105">TMENU_X2</a>-5,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab4+35, 1);
00818             user_interface.rect(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+5,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab5-15,<a class="code" href="Ogset__if_8cpp.html#a127a105">TMENU_X2</a>-5,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab7+35, 1);
00819             user_interface.rect(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+5,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab8-15,<a class="code" href="Ogset__if_8cpp.html#a127a105">TMENU_X2</a>-5,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab9+35, 1);
00820 
00821             <span class="comment">//                  scr4_slider1.init(TMENU_X1+tab3,TMENU_Y1+vtab2, 300,17,</span>
00822             <span class="comment">//                                                                  0,100,&amp;(player_school.graduate_student_percent),1, V_YELLOW,3);</span>
00823 
00824             <span class="comment">//                  scr4_slider3.init(TMENU_X1+tab3,TMENU_Y1+vtab3, 300, 17,</span>
00825             <span class="comment">//                                                                  0,10000,&amp;(player_school_doctoral_program_intensity),1, V_YELLOW,9);</span>
00826 
00827             <span class="comment">//                  scr4_slider4.init(TMENU_X1+tab3,TMENU_Y1+vtab4, 300, 17,</span>
00828             <span class="comment">//                                                                  0,10000,&amp;(player_school_sponsored_research_intensity),1, V_YELLOW,9);</span>
00829 
00830             scr4_rbutton6.<a class="code" href="classRadioButton.html#a2">init</a>(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab2,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab2,<a class="code" href="Ogset__if_8cpp.html#a127a105">TMENU_X2</a>,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab2+20,
00831                                3, &amp;(player_school.graduate_student_percent), scr3_rbutton3_options);
00832 
00833             scr4_rbutton7.<a class="code" href="classRadioButton.html#a2">init</a>(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab2 ,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab3,<a class="code" href="Ogset__if_8cpp.html#a127a105">TMENU_X2</a>,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab3+20,
00834                                3, &amp;(player_school.doctoral_program_intensity), scr3_rbutton4_options);
00835 
00836             scr4_rbutton8.<a class="code" href="classRadioButton.html#a2">init</a>(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab2,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab4,<a class="code" href="Ogset__if_8cpp.html#a127a105">TMENU_X2</a>,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab4+20,
00837                                3, &amp;(player_school.sponsored_research_intensity), scr3_rbutton4_options);
00838 
00839             scr4_rbutton1.<a class="code" href="classRadioButton.html#a2">init</a>(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab2,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab5,<a class="code" href="Ogset__if_8cpp.html#a127a105">TMENU_X2</a>,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab5+20,
00840                                3, &amp;(player_school.relative_wealth), scr4_rbutton1_options);
00841 
00842             scr4_rbutton2.<a class="code" href="classRadioButton.html#a2">init</a>(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab2 ,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab6,<a class="code" href="Ogset__if_8cpp.html#a127a105">TMENU_X2</a>-166,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab6+20,
00843                                2, &amp;(player_school.control), scr4_rbutton2_options);
00844 
00845             scr4_rbutton3.<a class="code" href="classRadioButton.html#a2">init</a>(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab2,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab7,<a class="code" href="Ogset__if_8cpp.html#a127a105">TMENU_X2</a>,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab7+20,
00846                                3, &amp;(player_school.campus_environment), scr4_rbutton3_options);
00847 
00848             scr4_rbutton4.<a class="code" href="classRadioButton.html#a2">init</a>(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab2,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab8,<a class="code" href="Ogset__if_8cpp.html#a127a105">TMENU_X2</a>,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab8+20,
00849                                3, &amp;(player_school.chance_event_frequency), scr4_rbutton4_options);
00850 
00851             scr4_rbutton5.<a class="code" href="classRadioButton.html#a2">init</a>(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab2,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab9,<a class="code" href="Ogset__if_8cpp.html#a127a105">TMENU_X2</a>,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab9+20,
00852                                3, &amp;(player_school.chance_objective_frequency), scr4_rbutton5_options);
00853 
00854             font_chart_blue_sm.put(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab1,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab2+5,
00855                                    scr4_label[0]);
00856             <span class="comment">//          font_chartsm.put(TMENU_X1+tab1,TMENU_Y1+vtab2+5,</span>
00857             <span class="comment">//                                                          scr4_label[1]);</span>
00858             font_chart_blue_sm.put(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab1,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab3+5,
00859                                    scr4_label[2]);
00860             font_chart_blue_sm.put(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab1,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab4+5,
00861                                    scr4_label[3]);
00862             font_chart_blue_sm.put(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab1,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab5+5,
00863                                    scr4_label[4]);
00864             font_chart_blue_sm.put(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab1,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab6+5,
00865                                    scr4_label[5]);
00866             font_chart_blue_sm.put(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab1,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab7+5,
00867                                    scr4_label[6]);
00868             font_chart_blue_sm.put(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab1,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab8+5,
00869                                    scr4_label[7]);
00870             font_chart_blue_sm.put(<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+tab1,<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+vtab9+5,
00871                                    scr4_label[8]);
00872             <span class="comment">//                  scr4_rbutton1.refresh();</span>
00873             <span class="comment">//                  scr4_rbutton2.refresh();</span>
00874             <span class="comment">//                  scr4_rbutton3.refresh();</span>
00875             <span class="comment">//                  scr4_rbutton4.refresh();</span>
00876             <span class="comment">//                  scr4_rbutton5.refresh();</span>
00877             <span class="comment">//                  scr4_slider1.refresh();</span>
00878             <span class="comment">//                  scr4_slider3.refresh();</span>
00879             <span class="comment">//                  scr4_slider4.refresh();</span>
00880 <span class="preprocessor">#endif</span>
00881 <span class="preprocessor"></span>        }
00882 
00883         <span class="keywordflow">if</span>(just_some_items_detected_flag) {
00884             scr4_rbutton1.<a class="code" href="classRadioButton.html#a5">refresh</a>();
00885             scr4_rbutton2.<a class="code" href="classRadioButton.html#a5">refresh</a>();
00886             scr4_rbutton3.<a class="code" href="classRadioButton.html#a5">refresh</a>();
00887             scr4_rbutton4.<a class="code" href="classRadioButton.html#a5">refresh</a>();
00888             scr4_rbutton5.<a class="code" href="classRadioButton.html#a5">refresh</a>();
00889             scr4_rbutton6.<a class="code" href="classRadioButton.html#a5">refresh</a>();
00890             scr4_rbutton7.<a class="code" href="classRadioButton.html#a5">refresh</a>();
00891             scr4_rbutton8.<a class="code" href="classRadioButton.html#a5">refresh</a>();
00892 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00893 <span class="preprocessor"></span>            scr4_rbutton9.<a class="code" href="classRadioButton.html#a5">refresh</a>();
00894 <span class="preprocessor">#endif</span>
00895 <span class="preprocessor"></span>            just_some_items_detected_flag=0;
00896         }
00897     }
00898     <span class="keywordflow">return</span> 0;
00899 }
00900 
00901 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00902 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">char</span> can_remove_this_department( <span class="keywordtype">int</span> deptId ) {
00903     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;DEPARTMENT_TYPE_COUNT;i++) {
00904         <span class="keywordflow">if</span> ( i == deptId )                            <span class="comment">// no need to do if the same department</span>
00905             <span class="keywordflow">continue</span>;
00906 
00907         <span class="comment">// in the selected list</span>
00908         <span class="keywordflow">if</span> ( player_school.tmp_department_pool_flag[i-1] ) {
00909             <span class="keywordflow">if</span> ( department_res[deptId]-&gt;field_id == department_res[i]-&gt;field_id )
00910                 <span class="keywordflow">return</span> 1;
00911         }
00912     }
00913 
00914     <span class="keywordflow">return</span> 0;
00915 }
00916 <span class="preprocessor">#endif</span>
00917 <span class="preprocessor"></span>
00918 <span class="keyword">static</span> <span class="keywordtype">int</span> callback_detect(<span class="keywordtype">int</span> selNum) {
00919 
00920     <span class="keywordflow">if</span>(selNum==3) {
00921         scr1_vbrowser1.<a class="code" href="classVBrowse98.html#a8">detect</a>();
00922         vga.use_front();
00923 
00924         <span class="comment">//-------- detect Load button --------//</span>
00925 
00926         <span class="keywordflow">if</span>(scr1_button_load.<a class="code" href="classButton.html#a21">detect</a>()||scr1_vbrowser1.<a class="code" href="classVBrowse98.html#m1">double_click</a>==1) {
00927             <span class="keywordflow">if</span>(scr1_vbrowser1.<a class="code" href="classVBrowse98.html#a6">recno</a>()&gt;0) {
00928                 <a class="code" href="classGameFile.html">GameFile</a>* gfPtr = game_file_array[scr1_vbrowser1.<a class="code" href="classVBrowse98.html#a6">recno</a>()];
00929                 <span class="keywordflow">if</span>(gfPtr) {
00930                     <span class="keywordtype">char</span>* name = gfPtr-&gt;<a class="code" href="classGameFile.html#m1">file_name</a>;
00931                     <span class="keywordflow">if</span>(strlen(name)&gt;0) {
00932                         gfPtr-&gt;<a class="code" href="classGameFile.html#a4">load_express_game</a>(name);
00933                         current_report_mode=<a class="code" href="Ogset__if_8cpp.html#a129a110">TAB_SCREEN</a>;
00934                         *(tab_menu.<a class="code" href="classTabMenu.html#m8">sel_num</a>)=selNum=0;
00935                         sys.redraw_all_flag=1;
00936                     }
00937                 }
00938             }
00939             scr1_vbrowser1.<a class="code" href="classVBrowse98.html#m1">double_click</a>=0;
00940         }
00941 
00942         <span class="comment">//-------- detect Save button --------//</span>
00943 
00944         <span class="keywordflow">if</span>(scr1_button_save.<a class="code" href="classButton.html#a21">detect</a>()) {
00945             current_report_mode=<a class="code" href="Ogset__if_8cpp.html#a129a111">SAVE_EXPRESS</a>;
00946             sys.redraw_all_flag=1;
00947         }
00948 
00949         <span class="comment">//-------- detect Delete button --------//</span>
00950 
00951         <span class="keywordflow">if</span>(scr1_button_del.<a class="code" href="classButton.html#a21">detect</a>() ) {
00952             <span class="keywordflow">if</span>( scr1_vbrowser1.<a class="code" href="classVBrowse98.html#a6">recno</a>()&gt;0 ) {
00953                 game_file_array.del_express_game(scr1_vbrowser1.<a class="code" href="classVBrowse98.html#a6">recno</a>());
00954                 sys.redraw_all_flag=1;
00955             }
00956         }
00957 
00958         vga.use_back();
00959     }
00960 
00961     <span class="keywordflow">if</span>(selNum==0) {
00962         <span class="keywordtype">int</span> tab1=<a class="code" href="Ogset__if_8cpp.html#a127a103">TMENU_X1</a>+15,vtab1=<a class="code" href="Ogset__if_8cpp.html#a127a104">TMENU_Y1</a>+5;
00963         vga.use_back();
00964 
00965         <span class="comment">//              if(button_up.detect())</span>
00966         <span class="comment">// if(mouse.single_click(tab1+80,vtab1+33,tab1+105,vtab1+60))</span>
00967         <span class="comment">// use any_click in version 2</span>
00968         <span class="keywordflow">if</span>(mouse.any_click(tab1+80,vtab1+33,tab1+105,vtab1+60)) {
00969             <span class="keywordflow">do</span> {
00970                 player_school.mascot--;
00971                 <span class="keywordflow">if</span>(player_school.mascot&lt;1)
00972                     player_school.mascot=image_mascot.rec_count;
00973             } <span class="keywordflow">while</span>( player_school.is_hidden_mascot(player_school.mascot) );
00974             image_interface.put_front(tab1+80,vtab1+35,<span class="stringliteral">"U-ARW-DN"</span>);
00975             audio.play_wav(<span class="stringliteral">"BEEPS-1"</span>,audio.int_to_DsVolume(config.sound_effect_volume));
00976             just_some_items_detected_flag=1;
00977         }
00978 
00979         <span class="comment">//              if(button_down.detect())</span>
00980         <span class="comment">// if(mouse.single_click(tab1+80,vtab1+63,tab1+105,vtab1+90))</span>
00981         <span class="keywordflow">if</span>(mouse.any_click(tab1+80,vtab1+63,tab1+105,vtab1+90)) {
00982             <span class="keywordflow">do</span> {
00983                 player_school.mascot++;
00984                 <span class="keywordflow">if</span>(player_school.mascot&gt;image_mascot.rec_count)
00985                     player_school.mascot=1;
00986             } <span class="keywordflow">while</span>( player_school.is_hidden_mascot(player_school.mascot) );
00987             image_interface.put_front(tab1+80,vtab1+65,<span class="stringliteral">"D-ARW-DN"</span>);
00988             audio.play_wav(<span class="stringliteral">"BEEPS-1"</span>,audio.int_to_DsVolume(config.sound_effect_volume));
00989             just_some_items_detected_flag=1;
00990         }
00991 
00992         sys.yield();
00993 
00994         <span class="keywordflow">if</span>(scr2_name.<a class="code" href="classGetAGroup.html#a3">detect</a>())
00995             just_some_items_detected_flag=1;
00996 
00997         vga.use_front();                              <span class="comment">// ## use_front to make the button flashing in release mode.</span>
00998 
00999         <span class="keywordflow">if</span>(button_add.<a class="code" href="classButton.html#a21">detect</a>()) {
01000             <span class="keywordflow">if</span>(scr2_vbrowser2.<a class="code" href="classVBrowse98.html#a6">recno</a>()&gt;0) {
01001                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;DEPARTMENT_TYPE_COUNT;i++)
01002                     <span class="keywordflow">if</span>(player_school.selected_department_list[i]==0) {
01003                         player_school.just_add=player_school.left_bws_pool[scr2_vbrowser2.<a class="code" href="classVBrowse98.html#a6">recno</a>()-1];
01004                         player_school.selected_department_list[i]=player_school.just_add;
01005                         player_school.tmp_department_pool_flag[player_school.just_add-1]=1;
01006                         <span class="keywordflow">break</span>;
01007                     }
01008                 redraw_browser_flag=1;
01009             }
01010             just_some_items_detected_flag=1;
01011         }
01012 
01013         sys.yield();
01014 
01015         <span class="keywordflow">if</span>(button_remove.<a class="code" href="classButton.html#a21">detect</a>()) {
01016             <span class="keywordflow">if</span>(scr2_vbrowser1.<a class="code" href="classVBrowse98.html#a6">recno</a>()&gt;0) {
01017                 <span class="keywordtype">int</span> i;
01018                 <span class="keywordtype">int</span> tmp=player_school.right_bws_pool[scr2_vbrowser1.<a class="code" href="classVBrowse98.html#a6">recno</a>()-1];
01019 
01020 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
01021 <span class="preprocessor"></span>                <span class="keywordflow">if</span> ( can_remove_this_department( tmp ) ) {
01022                     <span class="keywordflow">for</span>(i=0;i&lt;DEPARTMENT_TYPE_COUNT;i++)
01023                         <span class="keywordflow">if</span>(player_school.selected_department_list[i]==tmp) {
01024                             player_school.just_remove=player_school.right_bws_pool[scr2_vbrowser1.<a class="code" href="classVBrowse98.html#a6">recno</a>()-1];
01025                             player_school.selected_department_list[i]=0;
01026                             player_school.tmp_department_pool_flag[player_school.just_remove-1]=0;
01027                             <span class="keywordflow">break</span>;
01028                         }
01029                     <span class="comment">// Move the last nonzero entry to fill removed entry.</span>
01030                     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=DEPARTMENT_TYPE_COUNT-1;j&gt;i;j--) {
01031                         <span class="keywordflow">if</span>(player_school.selected_department_list[j]!=0) {
01032                             player_school.selected_department_list[i]=
01033                                 player_school.selected_department_list[j];
01034                             player_school.selected_department_list[j]=0;
01035                             <span class="keywordflow">break</span>;
01036                         }
01037                     }
01038 
01039                     redraw_browser_flag=1;
01040                 }
01041                 <span class="keywordflow">else</span> {
01042                     <span class="comment">// msg box</span>
01043                     <span class="keywordtype">char</span> msgStr[200];
01044 
01045                     <span class="keywordtype">short</span> fieldId = department_res[tmp]-&gt;field_id;
01046 
01047                     sprintf( msgStr, <span class="stringliteral">"At least one department is required in this domain: %s. You must add another department in the domain before removing this one."</span>, field_name[fieldId] );
01048 
01049                     box.msg( msgStr );
01050                 }
01051 <span class="preprocessor">#else</span>
01052 <span class="preprocessor"></span>                <span class="keywordflow">for</span>(i=0;i&lt;DEPARTMENT_TYPE_COUNT;i++)
01053                     <span class="keywordflow">if</span>(player_school.selected_department_list[i]==tmp) {
01054                         player_school.just_remove=player_school.right_bws_pool[scr2_vbrowser1.<a class="code" href="classVBrowse98.html#a6">recno</a>()-1];
01055                         player_school.selected_department_list[i]=0;
01056                         player_school.tmp_department_pool_flag[player_school.just_remove-1]=0;
01057                         <span class="keywordflow">break</span>;
01058                     }
01059                 <span class="comment">// Move the last nonzero entry to fill removed entry.</span>
01060                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=DEPARTMENT_TYPE_COUNT-1;j&gt;i;j--) {
01061                     <span class="keywordflow">if</span>(player_school.selected_department_list[j]!=0) {
01062                         player_school.selected_department_list[i]=
01063                             player_school.selected_department_list[j];
01064                         player_school.selected_department_list[j]=0;
01065                         <span class="keywordflow">break</span>;
01066                     }
01067                 }
01068 
01069                 redraw_browser_flag=1;
01070 <span class="preprocessor">#endif</span>
01071 <span class="preprocessor"></span>            }
01072             just_some_items_detected_flag=1;
01073         }
01074 
01075         <span class="keywordflow">if</span>(button_reset.<a class="code" href="classButton.html#a21">detect</a>()) {
01076             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;department_res.department_count;i++) {
01077                 player_school.tmp_department_pool_flag[i]=0;
01078                 player_school.selected_department_list[i]=0;
01079 
01080             }
01081 
01082             redraw_browser_flag=1;
01083 
01084             <span class="comment">//                  {11,7,22,15,16,20,26,3,6};</span>
01085             <span class="comment">//                  for(i=0;i&lt;DEPARTMENT_TYPE_COUNT;i++)</span>
01086             <span class="comment">//                  player_school.selected_department_list[i]=(i&lt;MIN_DEPARTMENT)?(i+1):0;</span>
01087 
01088             player_school.selected_department_list[0]=11;
01089             player_school.tmp_department_pool_flag[11-1]=1;
01090             player_school.selected_department_list[1]=7;
01091             player_school.tmp_department_pool_flag[7-1]=1;
01092 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
01093 <span class="preprocessor"></span>            player_school.selected_department_list[2]=2;
01094             player_school.tmp_department_pool_flag[2-1]=1;
01095 <span class="preprocessor">#else</span>
01096 <span class="preprocessor"></span>            player_school.selected_department_list[2]=22;
01097             player_school.tmp_department_pool_flag[22-1]=1;
01098 <span class="preprocessor">#endif</span>
01099 <span class="preprocessor"></span>            player_school.selected_department_list[3]=15;
01100             player_school.tmp_department_pool_flag[15-1]=1;
01101             player_school.selected_department_list[4]=16;
01102             player_school.tmp_department_pool_flag[16-1]=1;
01103             player_school.selected_department_list[5]=10;
01104             player_school.tmp_department_pool_flag[10-1]=1;
01105             player_school.selected_department_list[6]=20;
01106             player_school.tmp_department_pool_flag[20-1]=1;
01107             player_school.selected_department_list[7]=26;
01108             player_school.tmp_department_pool_flag[26-1]=1;
01109             player_school.selected_department_list[8]=3;
01110             player_school.tmp_department_pool_flag[3-1]=1;
01111             player_school.selected_department_list[9]=6;
01112             player_school.tmp_department_pool_flag[6-1]=1;
01113 
01114             scr2_browseRecCount1=1;
01115             scr2_browseRecCount2=1;
01116             just_some_items_detected_flag=1;
01117         }
01118         sys.yield();
01119 
01120         vga.use_back();
01121         scr2_vbrowser1.<a class="code" href="classVBrowse98.html#a8">detect</a>();
01122         scr2_vbrowser2.<a class="code" href="classVBrowse98.html#a8">detect</a>();
01123     }
01124 
01125     <span class="keywordflow">if</span>(selNum==1) {
01126         <span class="keywordflow">if</span>(scr3_rbutton1.<a class="code" href="classRadioButton.html#a6">detect</a>())
01127             just_some_items_detected_flag=1;
01128         <span class="keywordflow">if</span>(scr3_rbutton2.<a class="code" href="classRadioButton.html#a6">detect</a>())
01129             just_some_items_detected_flag=1;
01130         <span class="keywordflow">if</span>(scr3_rbutton3.<a class="code" href="classRadioButton.html#a6">detect</a>())
01131             just_some_items_detected_flag=1;
01132         <span class="keywordflow">if</span>(scr3_rbutton4.<a class="code" href="classRadioButton.html#a6">detect</a>())
01133             just_some_items_detected_flag=1;
01134         <span class="keywordflow">if</span>(scr3_rbutton5.<a class="code" href="classRadioButton.html#a6">detect</a>())
01135             just_some_items_detected_flag=1;
01136         <span class="keywordflow">if</span>(scr3_rbutton6.<a class="code" href="classRadioButton.html#a6">detect</a>())
01137             just_some_items_detected_flag=1;
01138         <span class="keywordflow">if</span>(scr3_rbutton7.<a class="code" href="classRadioButton.html#a6">detect</a>())
01139             just_some_items_detected_flag=1;
01140         <span class="keywordflow">if</span>(scr3_rbutton8.<a class="code" href="classRadioButton.html#a6">detect</a>())
01141             just_some_items_detected_flag=1;
01142 
01143         sys.yield();
01144 
01145         <span class="comment">//      if(scr3_bounded_slider0.detect())</span>
01146         <span class="comment">//                      player_school.prestige=player_school_prestige/1000;</span>
01147         <span class="comment">//              scr3_slider2.detect();</span>
01148         <span class="comment">//              scr3_slider3.detect();</span>
01149         <span class="comment">//              scr3_slider4.detect();</span>
01150         <span class="comment">//              scr3_slider5.detect();</span>
01151         <span class="comment">//              scr3_bounded_slider2.detect();</span>
01152     }
01153 
01154     <span class="keywordflow">if</span>(selNum==2) {
01155         <span class="keywordflow">if</span>(scr4_rbutton1.<a class="code" href="classRadioButton.html#a6">detect</a>())
01156             just_some_items_detected_flag=1;
01157         <span class="keywordflow">if</span>(scr4_rbutton2.<a class="code" href="classRadioButton.html#a6">detect</a>())
01158             just_some_items_detected_flag=1;
01159         <span class="keywordflow">if</span>(scr4_rbutton3.<a class="code" href="classRadioButton.html#a6">detect</a>())
01160             just_some_items_detected_flag=1;
01161         <span class="keywordflow">if</span>(scr4_rbutton4.<a class="code" href="classRadioButton.html#a6">detect</a>())
01162             just_some_items_detected_flag=1;
01163         <span class="keywordflow">if</span>(scr4_rbutton5.<a class="code" href="classRadioButton.html#a6">detect</a>())
01164             just_some_items_detected_flag=1;
01165         <span class="keywordflow">if</span>(scr4_rbutton6.<a class="code" href="classRadioButton.html#a6">detect</a>())
01166             just_some_items_detected_flag=1;
01167         <span class="keywordflow">if</span>(scr4_rbutton7.<a class="code" href="classRadioButton.html#a6">detect</a>())
01168             just_some_items_detected_flag=1;
01169         <span class="keywordflow">if</span>(scr4_rbutton8.<a class="code" href="classRadioButton.html#a6">detect</a>()) {
01170             just_some_items_detected_flag=1;
01171 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
01172 <span class="preprocessor"></span>            <span class="comment">// ask directory of auto save game</span>
01173             <span class="keywordflow">if</span>( config.auto_save ) {
01174                 <span class="keywordflow">if</span>( !config.auto_save_file_name[0] ) {
01175                     <a class="code" href="classMouseDispCount.html">MouseDispCount</a> mouseDispCount;          <span class="comment">// redisplay windows cursor</span>
01176 
01177                     <span class="keywordtype">char</span> tempFilename[<span class="keyword">sizeof</span>(config.auto_save_file_name)];
01178 
01179                     strcpy(tempFilename, <span class="stringliteral">"save001.sav"</span>);
01180 
01181                     <span class="comment">// ask filename now</span>
01182                     OPENFILENAME openFileName;
01183                     memset( &amp;openFileName, 0, <span class="keyword">sizeof</span>(openFileName) );
01184                     openFileName.lStructSize = <span class="keyword">sizeof</span>(openFileName);
01185                     openFileName.hwndOwner = sys.main_hwnd;
01186                     openFileName.hInstance = sys.app_hinstance;
01187                     <span class="comment">// two '\0' at the end</span>
01188                     openFileName.lpstrFilter = <span class="stringliteral">"Virtual U Auto Save(*.sav)\0*.sav\0All Files(*.*)\0*.*\0"</span>;
01189                     openFileName.lpstrCustomFilter = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
01190                     openFileName.nMaxCustFilter = 0;
01191                     openFileName.nFilterIndex = 0;
01192                     openFileName.lpstrFile =  tempFilename; <span class="comment">// first char is already NULL</span>
01193                     openFileName.nMaxFile = <span class="keyword">sizeof</span>(tempFilename);
01194                     openFileName.lpstrFileTitle = <a class="code" href="OHELP_8H.html#a0">NULL</a>;     <span class="comment">// result filename, without path</span>
01195                     openFileName.nMaxFileTitle = 0;
01196                     openFileName.lpstrInitialDir = <span class="stringliteral">"."</span>;     <span class="comment">// current directory</span>
01197                     openFileName.lpstrTitle = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
01198                     openFileName.Flags = OFN_OVERWRITEPROMPT | OFN_LONGNAMES | OFN_PATHMUSTEXIST | OFN_HIDEREADONLY;
01199                     openFileName.nFileOffset = 0;
01200                     openFileName.nFileExtension = 0;
01201                     openFileName.lpstrDefExt = <span class="stringliteral">"sav"</span>;
01202                     openFileName.lCustData = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
01203                     openFileName.lpfnHook = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
01204                     openFileName.lpTemplateName = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
01205 
01206                     <span class="keywordflow">if</span>( !GetSaveFileName(&amp;openFileName) )
01207                         config.auto_save = 0;                 <span class="comment">// cancel will disable autosave</span>
01208                     <span class="keywordflow">else</span>
01209                         strcpy(config.auto_save_file_name, tempFilename );
01210 
01211                 }                                         <span class="comment">// call mouseDispCount destructor</span>
01212             }
01213 <span class="preprocessor">#endif</span>
01214 <span class="preprocessor"></span>        }
01215 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
01216 <span class="preprocessor"></span>        <span class="keywordflow">if</span>(scr4_rbutton9.<a class="code" href="classRadioButton.html#a6">detect</a>()) {
01217             just_some_items_detected_flag=1;
01218             <span class="comment">// ask log file name</span>
01219             <span class="keywordflow">if</span>( config.log_enable ) {
01220                 <span class="comment">// ask log filename, first time only</span>
01221                 <span class="keywordflow">if</span>( !config.log_file_name[0] ) { {
01222                     <a class="code" href="classMouseDispCount.html">MouseDispCount</a> mouseDispCount;        <span class="comment">// redisplay windows cursor</span>
01223 
01224                     strcpy( config.log_file_name, <span class="stringliteral">"autolog.log"</span> );
01225 
01226                     <span class="comment">// ask filename now</span>
01227                     OPENFILENAME openFileName;
01228                     memset( &amp;openFileName, 0, <span class="keyword">sizeof</span>(openFileName) );
01229                     openFileName.lStructSize = <span class="keyword">sizeof</span>(openFileName);
01230                     openFileName.hwndOwner = sys.main_hwnd;
01231                     openFileName.hInstance = sys.app_hinstance;
01232                     <span class="comment">// two '\0' at the end</span>
01233                     openFileName.lpstrFilter = <span class="stringliteral">"Log file(*.log)\0*.log\0All Files(*.*)\0*.*\0"</span>;
01234                     openFileName.lpstrCustomFilter = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
01235                     openFileName.nMaxCustFilter = 0;
01236                     openFileName.nFilterIndex = 0;
01237                     <span class="comment">// first char is already NULL</span>
01238                     openFileName.lpstrFile =  config.log_file_name;
01239                     openFileName.nMaxFile = <span class="keyword">sizeof</span>(config.log_file_name);
01240                     openFileName.lpstrFileTitle = <a class="code" href="OHELP_8H.html#a0">NULL</a>;   <span class="comment">// result filename, without path</span>
01241                     openFileName.nMaxFileTitle = 0;
01242                     openFileName.lpstrInitialDir = <span class="stringliteral">"."</span>;   <span class="comment">// current directory</span>
01243                     openFileName.lpstrTitle = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
01244                     openFileName.Flags = OFN_OVERWRITEPROMPT | OFN_LONGNAMES | OFN_PATHMUSTEXIST | OFN_HIDEREADONLY;
01245                     openFileName.nFileOffset = 0;
01246                     openFileName.nFileExtension = 0;
01247                     openFileName.lpstrDefExt = <span class="stringliteral">"log"</span>;
01248                     openFileName.lCustData = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
01249                     openFileName.lpfnHook = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
01250                     openFileName.lpTemplateName = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
01251 
01252                     <span class="keywordflow">if</span>( !GetSaveFileName(&amp;openFileName) ) {
01253                         config.log_enable = 0;              <span class="comment">// cancel will disable autosave</span>
01254                         config.log_file_name[0] = <span class="charliteral">'\0'</span>;     <span class="comment">// clear name</span>
01255                     }
01256                 }                                       <span class="comment">// call mouseDispCount destructor</span>
01257 
01258                 <span class="keywordflow">if</span>( config.log_enable &amp;&amp; config.log_file_name[0] )
01259                     <span class="comment">// overwrite old log file</span>
01260                     game_file.create_game_log(config.log_file_name);
01261                 }
01262             }
01263         }
01264 <span class="preprocessor">#endif</span>
01265 <span class="preprocessor"></span>        sys.yield();
01266         <span class="comment">/*</span>
01267 <span class="comment">          scr4_slider1.detect();</span>
01268 <span class="comment"></span>
01269 <span class="comment">          if(scr4_slider3.detect())</span>
01270 <span class="comment">          player_school.doctoral_program_intensity=player_school_doctoral_program_intensity/1000;</span>
01271 <span class="comment"></span>
01272 <span class="comment">          if(scr4_slider4.detect())</span>
01273 <span class="comment">          player_school.sponsored_research_intensity=player_school_sponsored_research_intensity/1000;</span>
01274 <span class="comment">        */</span>
01275     }
01276     sys.yield();
01277     <span class="keywordflow">return</span> 0;
01278 }
01279 
01280 <span class="keyword">static</span> <span class="keywordtype">void</span> scr1_disp_rep_row1(<span class="keywordtype">int</span> recNo, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> refreshFlag) {
01281     <span class="keywordflow">if</span>((recNo&gt;0)&amp;&amp;(recNo&lt;=game_file_array.size())) {
01282 
01283         <a class="code" href="classGameFile.html">GameFile</a>* gfPtr = game_file_array[recNo];
01284         <span class="keywordtype">char</span>* name = gfPtr-&gt;<a class="code" href="classGameFile.html#a0">get_save_name</a>();
01285         font_chartsm.put(x,y,name);
01286     }
01287 }
01288 
01289 <span class="keyword">static</span> <span class="keywordtype">void</span> scr1_disp_rep_row2(<span class="keywordtype">int</span> recNo, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> refreshFlag) {
01290 }
01291 
01292 <span class="keyword">static</span> <span class="keywordtype">void</span> scr2_disp_rep_row1(<span class="keywordtype">int</span> recNo, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> refreshFlag) {
01293     <span class="comment">//  user_interface.bar(x, y, x+240, y+16,Vga::active_buf-&gt;color_down);</span>
01294     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0,j=0;(i&lt;recNo)&amp;&amp;(j&lt;DEPARTMENT_TYPE_COUNT);j++)
01295         <span class="keywordflow">if</span>(player_school.tmp_department_pool_flag[j]==1)
01296             i++;
01297     <span class="comment">//  err.run("department_res.department_count=%d\n",department_res.department_count);</span>
01298     <span class="keywordflow">if</span>(j&lt;=department_res.department_count)
01299         font_letter.put(x,y,department_res[j]-&gt;name);
01300 }
01301 
01302 <span class="keyword">static</span> <span class="keywordtype">void</span> scr2_disp_rep_row2(<span class="keywordtype">int</span> recNo, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> refreshFlag) {
01303     <span class="comment">//  user_interface.bar(x, y, x+240, y+16,Vga::active_buf-&gt;color_down);</span>
01304     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0,j=0;(i&lt;recNo)&amp;&amp;(j&lt;DEPARTMENT_TYPE_COUNT);j++)
01305         <span class="keywordflow">if</span>(player_school.tmp_department_pool_flag[j]==0)
01306             i++;
01307     <span class="comment">//  DEBUG_LOG("j=");</span>
01308     <span class="comment">//  DEBUG_LOG(j);</span>
01309     <span class="comment">//  DEBUG_LOG("\n");</span>
01310     <span class="keywordflow">if</span>(j&lt;=department_res.department_count)
01311         font_letter.put(x,y,department_res[j]-&gt;name);
01312 }
01313 
01314 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
01315 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">int</span> current_score_report_type=0;           <span class="comment">// 0 to SCORE_SUBGROUP_COUNT-1</span>
01316 <span class="keyword">static</span> <span class="keywordtype">int</span> customize_score_init_flag = 0;
01317 
01318 <span class="keyword">static</span> <span class="keywordtype">short</span> *type_button_up_bitmap[<a class="code" href="Opschool_8h.html#a65a53">SCORE_SUBGROUP_COUNT</a>];
01319 <span class="keyword">static</span> <span class="keywordtype">short</span> *type_button_down_bitmap[<a class="code" href="Opschool_8h.html#a65a53">SCORE_SUBGROUP_COUNT</a>];
01320 <span class="keyword">static</span> <span class="keywordtype">char</span>  *type_button_label[<a class="code" href="Opschool_8h.html#a65a53">SCORE_SUBGROUP_COUNT</a>]= {
01321     <span class="stringliteral">"Outputs"</span>,
01322     <span class="stringliteral">"Performance indicators"</span>,
01323     <span class="stringliteral">"Attitudes toward the institution"</span>,
01324     <span class="stringliteral">"Financial indicators"</span>,
01325 };
01326 <span class="keyword">static</span> <a class="code" href="classText.html">Text</a> text_sub_group_weight;
01327 <span class="keyword">static</span> <a class="code" href="classButtonGroup.html">ButtonGroup</a> type_button_group(<a class="code" href="Opschool_8h.html#a65a53">SCORE_SUBGROUP_COUNT</a>);
01328 <span class="keyword">static</span> <a class="code" href="classButton.html">Button</a> button_restore_weight;
01329 <span class="keyword">static</span> <a class="code" href="classButton.html">Button</a> button_normalize_weight;
01330 
01331 <span class="keyword">enum</span> {
01332     BOTTOM_BUTTON_WIDTH = 100,
01333     BOTTOM_BUTTON_WIDTH2 = 150,
01334     <a class="code" href="Oscor__if_8cpp.html#a106a63">BOTTOM_BUTTON_WIDTH3</a> = 220,
01335     BOTTOM_BUTTON_HEIGHT = 25,
01336     BOTTOM_BUTTON_DISTANCE = (<a class="code" href="Ogset__if_8cpp.html#a126a101">REPORT_X2</a>-<a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a>-BOTTOM_BUTTON_WIDTH*6)/6+30,
01337 };
01338 
01339 <span class="keyword">enum</span> {
01340     <a class="code" href="Oscor__if_8cpp.html#a107a68">WINDOW_X1</a> = <a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a>+10,
01341     <a class="code" href="Oscor__if_8cpp.html#a107a69">WINDOW_Y1</a> = <a class="code" href="Ogset__if_8cpp.html#a126a100">REPORT_Y1</a>+16,
01342     <a class="code" href="Oscor__if_8cpp.html#a107a70">WINDOW_X2</a> = <a class="code" href="Ogset__if_8cpp.html#a126a101">REPORT_X2</a>-10,
01343     <span class="comment">//  WINDOW_Y2 = REPORT_Y2-44,</span>
01344     <a class="code" href="Oscor__if_8cpp.html#a107a71">WINDOW_Y2</a> = <a class="code" href="Ogset__if_8cpp.html#a126a102">REPORT_Y2</a>-52,
01345 };
01346 
01347 <span class="keyword">static</span> <span class="keywordtype">char</span> * sub_score_title[<a class="code" href="Opschool_8h.html#a65a52">SCORE_VAR_COUNT</a>]= {
01348     <span class="stringliteral">"Degrees granted"</span>,
01349     <span class="stringliteral">"Sponsored performance"</span>,
01350 
01351     <span class="stringliteral">"Institutional prestige"</span>,
01352     <span class="stringliteral">"Educational quality"</span>,
01353     <span class="stringliteral">"Scholarship, broadly defined"</span>,
01354     <span class="stringliteral">"Student diversity"</span>,
01355     <span class="stringliteral">"Faculty diversity"</span>,
01356     <span class="stringliteral">"Percentage of alumni who have donated during the last five years"</span>,
01357 
01358     <span class="stringliteral">"Faculty morale"</span>,
01359     <span class="stringliteral">"Student morale"</span>,
01360     <span class="stringliteral">"Staff morale"</span>,
01361 
01362     <span class="stringliteral">"Current surplus (deficit) as a percentage of expenditure"</span>,
01363     <span class="stringliteral">"Smoothed surplus (deficit) as a percentage of expenditure"</span>,
01364     <span class="stringliteral">"Endowment payout rate relative to the equilibrium payout rate"</span>,
01365     <span class="stringliteral">"Deferred maintenance backlog"</span>,
01366 };
01367 <span class="keyword">static</span> <a class="code" href="classSpinner.html">Spinner</a> sub_score_weight_spinner[<a class="code" href="Opschool_8h.html#a65a52">SCORE_VAR_COUNT</a>];
01368 
01369 <span class="keyword">static</span> <span class="keywordtype">void</span> customize_score_deinit() {
01370     <span class="keywordflow">if</span>( customize_score_init_flag ) {
01371         <span class="comment">//------- deinit type buttons --------//</span>
01372         type_button_group.<a class="code" href="classButtonGroup.html#a2">deinit_buttons</a>();
01373         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="Opschool_8h.html#a65a53">SCORE_SUBGROUP_COUNT</a>; i++) {
01374             <a class="code" href="ALL_8H.html#a8">mem_del</a>(type_button_up_bitmap[i]);
01375             <a class="code" href="ALL_8H.html#a8">mem_del</a>(type_button_down_bitmap[i]);
01376             type_button_up_bitmap[i] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
01377             type_button_down_bitmap[i] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
01378         }
01379         text_sub_group_weight.<a class="code" href="classText.html#a26">deinit</a>();
01380         <span class="keywordflow">for</span>( i = 0; i &lt; <a class="code" href="Opschool_8h.html#a65a52">SCORE_VAR_COUNT</a>; ++i ) {
01381             sub_score_weight_spinner[i].<a class="code" href="classSpinner.html#m28">pause_when_focus</a> = 0;
01382             sub_score_weight_spinner[i].<a class="code" href="classSpinner.html#a3">deinit</a>();
01383         }
01384         customize_score_init_flag = 0;
01385     }
01386 }
01387 
01388 <span class="keyword">static</span> <span class="keywordtype">void</span> customize_score_mode(<span class="keywordtype">int</span> refreshFlag) {
01389     <span class="keyword">const</span> <span class="keyword">static</span> tab1=10,tab2=150,tab3=320,tab4=420,tab5=490,tab6=620,tab7=680;
01390     <span class="keyword">const</span> <span class="keyword">static</span> vtab1=22,vtab2=37,vtab3=200,vtab4=330,vtab5=320;
01391 
01392     <span class="keywordtype">int</span> w0 = 0;
01393     <span class="keywordtype">int</span> w1 = 0;
01394     <span class="keywordtype">int</span> i;
01395 
01396     <span class="keywordflow">switch</span>(current_score_report_type) {
01397     <span class="keywordflow">case</span> 0: w0=<a class="code" href="Opschool_8h.html#a65a54">GROUP1_BEGIN_ID</a>; w1=<a class="code" href="Opschool_8h.html#a65a55">GROUP2_BEGIN_ID</a>; <span class="keywordflow">break</span>;
01398     <span class="keywordflow">case</span> 1: w0=<a class="code" href="Opschool_8h.html#a65a55">GROUP2_BEGIN_ID</a>; w1=<a class="code" href="Opschool_8h.html#a65a56">GROUP3_BEGIN_ID</a>; <span class="keywordflow">break</span>;
01399     <span class="keywordflow">case</span> 2: w0=<a class="code" href="Opschool_8h.html#a65a56">GROUP3_BEGIN_ID</a>; w1=<a class="code" href="Opschool_8h.html#a65a57">GROUP4_BEGIN_ID</a>; <span class="keywordflow">break</span>;
01400     <span class="keywordflow">case</span> 3: w0=<a class="code" href="Opschool_8h.html#a65a57">GROUP4_BEGIN_ID</a>; w1=<a class="code" href="Opschool_8h.html#a65a52">SCORE_VAR_COUNT</a>; <span class="keywordflow">break</span>;
01401     }
01402 
01403     <span class="keywordflow">if</span>( refreshFlag == <a class="code" href="Gamedef_8h.html#a71a16">INFO_REPAINT</a> ) {
01404         customize_score_deinit();
01405 
01406         user_interface.bg_img(pic_id, &amp;vga_back);
01407 
01408         <span class="comment">// top title</span>
01409         user_interface.brighten(<a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a>+100,<a class="code" href="Ogset__if_8cpp.html#a126a100">REPORT_Y1</a>-10,<a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a>+630,<a class="code" href="Ogset__if_8cpp.html#a126a100">REPORT_Y1</a>+13);
01410         user_interface.rect(<a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a>+100,<a class="code" href="Ogset__if_8cpp.html#a126a100">REPORT_Y1</a>-10,<a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a>+630,<a class="code" href="Ogset__if_8cpp.html#a126a100">REPORT_Y1</a>+13,1);
01411         font_charts.center_put(<a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a>+100,<a class="code" href="Ogset__if_8cpp.html#a126a100">REPORT_Y1</a>-10,<a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a>+630,<a class="code" href="Ogset__if_8cpp.html#a126a100">REPORT_Y1</a>+13,
01412                                <span class="stringliteral">"Customize Trustee Performance Weights"</span>);
01413 
01414         <span class="comment">// create buttons</span>
01415 
01416         <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="Opschool_8h.html#a65a53">SCORE_SUBGROUP_COUNT</a>; i++) {
01417             type_button_up_bitmap[i] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
01418             type_button_down_bitmap[i] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
01419         }
01420 
01421         <span class="keywordtype">int</span> x, y;
01422         <span class="comment">// Outputs page button</span>
01423         x=<a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a>+tab2;
01424         y=<a class="code" href="Ogset__if_8cpp.html#a126a100">REPORT_Y1</a>+vtab4;
01425 
01426         user_interface.create_button_bitmap(x, y,
01427                                             x+<a class="code" href="Oscor__if_8cpp.html#a106a63">BOTTOM_BUTTON_WIDTH3</a>, y+BOTTOM_BUTTON_HEIGHT,
01428                                             type_button_label[0], &amp;type_button_up_bitmap[0],
01429                                             &amp;type_button_down_bitmap[0], &amp;vga_back);
01430         type_button_group[0].create_bitmapW(x, y,
01431                                             x+<a class="code" href="Oscor__if_8cpp.html#a106a63">BOTTOM_BUTTON_WIDTH3</a>, y+BOTTOM_BUTTON_HEIGHT,
01432                                             ((0 == current_score_report_type) ?
01433                                              type_button_down_bitmap[0] :
01434                                              type_button_up_bitmap[0])+4, 0);
01435 
01436         <span class="comment">// Performance Indicators page button</span>
01437 
01438         x+=<a class="code" href="Oscor__if_8cpp.html#a106a63">BOTTOM_BUTTON_WIDTH3</a>+BOTTOM_BUTTON_DISTANCE;
01439 
01440         user_interface.create_button_bitmap(x, y,
01441                                             x+<a class="code" href="Oscor__if_8cpp.html#a106a63">BOTTOM_BUTTON_WIDTH3</a>, y+BOTTOM_BUTTON_HEIGHT,
01442                                             type_button_label[1], &amp;type_button_up_bitmap[1],
01443                                             &amp;type_button_down_bitmap[1], &amp;vga_back);
01444         type_button_group[1].create_bitmapW(x, y,
01445                                             x+<a class="code" href="Oscor__if_8cpp.html#a106a63">BOTTOM_BUTTON_WIDTH3</a>, y+BOTTOM_BUTTON_HEIGHT,
01446                                             ((1 == current_score_report_type) ?
01447                                              type_button_down_bitmap[1] :
01448                                              type_button_up_bitmap[1])+4, 0);
01449 
01450         <span class="comment">// Attitudes toward the institution page button</span>
01451 
01452         x=<a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a>+tab2;
01453         y=<a class="code" href="Ogset__if_8cpp.html#a126a100">REPORT_Y1</a>+vtab4+30;
01454 
01455         user_interface.create_button_bitmap(x, y,
01456                                             x+<a class="code" href="Oscor__if_8cpp.html#a106a63">BOTTOM_BUTTON_WIDTH3</a>, y+BOTTOM_BUTTON_HEIGHT,
01457                                             type_button_label[2], &amp;type_button_up_bitmap[2],
01458                                             &amp;type_button_down_bitmap[2], &amp;vga_back);
01459         type_button_group[2].create_bitmapW(x, y,
01460                                             x+<a class="code" href="Oscor__if_8cpp.html#a106a63">BOTTOM_BUTTON_WIDTH3</a>, y+BOTTOM_BUTTON_HEIGHT,
01461                                             ((2 == current_score_report_type) ?
01462                                              type_button_down_bitmap[2] :
01463                                              type_button_up_bitmap[2])+4, 0);
01464 
01465         <span class="comment">// Financial indicators page button</span>
01466 
01467         x+=<a class="code" href="Oscor__if_8cpp.html#a106a63">BOTTOM_BUTTON_WIDTH3</a>+BOTTOM_BUTTON_DISTANCE;
01468 
01469         user_interface.create_button_bitmap(x, y,
01470                                             x+<a class="code" href="Oscor__if_8cpp.html#a106a63">BOTTOM_BUTTON_WIDTH3</a>, y+BOTTOM_BUTTON_HEIGHT,
01471                                             type_button_label[3], &amp;type_button_up_bitmap[3],
01472                                             &amp;type_button_down_bitmap[3], &amp;vga_back);
01473         type_button_group[3].create_bitmapW(x, y,
01474                                             x+<a class="code" href="Oscor__if_8cpp.html#a106a63">BOTTOM_BUTTON_WIDTH3</a>, y+BOTTOM_BUTTON_HEIGHT,
01475                                             ((3 == current_score_report_type) ?
01476                                              type_button_down_bitmap[3] :
01477                                              type_button_up_bitmap[3])+4, 0);
01478 
01479         <a class="code" href="ALL_8H.html#a0">err_when</a>( <a class="code" href="Opschool_8h.html#a65a53">SCORE_SUBGROUP_COUNT</a> != 4 );        <span class="comment">// initialize more type_button_label here</span>
01480 
01481         <span class="comment">// back button</span>
01482         x=<a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a>+tab1;
01483         y=<a class="code" href="Ogset__if_8cpp.html#a126a100">REPORT_Y1</a>+vtab4-4;
01484 
01485         button_customize_score.<a class="code" href="classButton.html#a10">create_text</a>(x, y,
01486                                            x+BOTTOM_BUTTON_WIDTH+35, y+20, <span class="stringliteral">"Back"</span> );   <span class="comment">// becomes button for going back</span>
01487 
01488         y+=23;
01489         button_restore_weight.<a class="code" href="classButton.html#a10">create_text</a>(x, y,
01490                                           <span class="comment">// call player_school.init_sub_score_weight</span>
01491                                           x+BOTTOM_BUTTON_WIDTH+35, y+20, <span class="stringliteral">"Restore defaults"</span> );
01492 
01493         y+=23;
01494         button_normalize_weight.<a class="code" href="classButton.html#a10">create_text</a>(x, y,
01495                                             x+BOTTOM_BUTTON_WIDTH+35, y+20, <span class="stringliteral">"Rescale all"</span> );
01496 
01497         <span class="comment">// column labels</span>
01498         user_interface.brighten(<a class="code" href="Oscor__if_8cpp.html#a107a68">WINDOW_X1</a>,<a class="code" href="Oscor__if_8cpp.html#a107a69">WINDOW_Y1</a>,<a class="code" href="Oscor__if_8cpp.html#a107a70">WINDOW_X2</a>,<a class="code" href="Oscor__if_8cpp.html#a107a71">WINDOW_Y2</a>);
01499         user_interface.rect(<a class="code" href="Oscor__if_8cpp.html#a107a68">WINDOW_X1</a>,<a class="code" href="Oscor__if_8cpp.html#a107a69">WINDOW_Y1</a>,<a class="code" href="Oscor__if_8cpp.html#a107a70">WINDOW_X2</a>,<a class="code" href="Oscor__if_8cpp.html#a107a71">WINDOW_Y2</a>);
01500         user_interface.rect(<a class="code" href="Oscor__if_8cpp.html#a107a68">WINDOW_X1</a>,<a class="code" href="Oscor__if_8cpp.html#a107a69">WINDOW_Y1</a>,<a class="code" href="Oscor__if_8cpp.html#a107a70">WINDOW_X2</a>,<a class="code" href="Oscor__if_8cpp.html#a107a69">WINDOW_Y1</a>+vtab1);
01501         font_chartsm.put(<a class="code" href="Oscor__if_8cpp.html#a107a68">WINDOW_X1</a>+tab1,<a class="code" href="Oscor__if_8cpp.html#a107a69">WINDOW_Y1</a>+vtab1-17,<span class="stringliteral">"Contributing factors"</span>);
01502         font_chartsm.put(<a class="code" href="Oscor__if_8cpp.html#a107a68">WINDOW_X1</a>+tab4-15,<a class="code" href="Oscor__if_8cpp.html#a107a69">WINDOW_Y1</a>+vtab1-17,<span class="stringliteral">"Default"</span>);
01503         font_chartsm.put(<a class="code" href="Oscor__if_8cpp.html#a107a68">WINDOW_X1</a>+tab5,<a class="code" href="Oscor__if_8cpp.html#a107a69">WINDOW_Y1</a>+vtab1-17,<span class="stringliteral">"Current weight"</span>);
01504 
01505         <span class="keywordtype">int</span> j;
01506         <span class="keywordtype">float</span> defSubGroupWeight = 0.0f;
01507         <span class="keywordflow">for</span>( i=w0, j=0; i &lt; w1; ++i,++j ) {
01508             font_chartsm.put_paragraph(<a class="code" href="Oscor__if_8cpp.html#a107a68">WINDOW_X1</a>+tab1,<a class="code" href="Oscor__if_8cpp.html#a107a69">WINDOW_Y1</a>+vtab2+j*40,
01509                                        <a class="code" href="Oscor__if_8cpp.html#a107a68">WINDOW_X1</a>+tab3-15,<a class="code" href="Oscor__if_8cpp.html#a107a69">WINDOW_Y1</a>+vtab2+j*40+40-1, sub_score_title[i] );
01510             font_chartsm.right_put(<a class="code" href="Oscor__if_8cpp.html#a107a68">WINDOW_X1</a>+tab4+25,<a class="code" href="Oscor__if_8cpp.html#a107a69">WINDOW_Y1</a>+vtab2+j*40, m.format(player_school.get_default_sub_score_weight(i),24));
01511             defSubGroupWeight += player_school.get_default_sub_score_weight(i);
01512             <span class="comment">// weight is player_school.sub_score_weight[i]</span>
01513 
01514             sub_score_weight_spinner[i].<a class="code" href="classSpinner.html#m28">pause_when_focus</a> = 0;
01515             sub_score_weight_spinner[i].<a class="code" href="classSpinner.html#a2">init</a>(
01516                 <a class="code" href="Oscor__if_8cpp.html#a107a68">WINDOW_X1</a>+tab5, <a class="code" href="Oscor__if_8cpp.html#a107a69">WINDOW_Y1</a>+vtab2+j*40-6,
01517                 <a class="code" href="Oscor__if_8cpp.html#a107a68">WINDOW_X1</a>+tab6-20, <a class="code" href="Oscor__if_8cpp.html#a107a69">WINDOW_Y1</a>+vtab2+j*40+22,
01518                 &amp;player_school.sub_score_weight[i],
01519                 0.0f, 100.0f, 0.1f, 0, <a class="code" href="OHELP_8H.html#a0">NULL</a>, 24 );
01520         }
01521 
01522         <span class="comment">// display total weight of group</span>
01523         font_chartsm.put(<a class="code" href="Oscor__if_8cpp.html#a107a68">WINDOW_X1</a>+tab1+10, <a class="code" href="Oscor__if_8cpp.html#a107a71">WINDOW_Y2</a>-20, <span class="stringliteral">"Total Category Weight"</span>, 0, <a class="code" href="Oscor__if_8cpp.html#a107a68">WINDOW_X1</a>+tab3-15);
01524         font_chartsm.right_put(<a class="code" href="Oscor__if_8cpp.html#a107a68">WINDOW_X1</a>+tab4+25, <a class="code" href="Oscor__if_8cpp.html#a107a71">WINDOW_Y2</a>-20, m.format(defSubGroupWeight,24) );
01525 
01526         customize_score_init_flag = 1;
01527         sys.redraw_all_flag=0;
01528     }
01529 
01530     <span class="keywordtype">float</span> subGroupWeight = 0.0f;
01531     <span class="keywordflow">for</span>( i=w0; i &lt; w1; ++i ) {
01532         sub_score_weight_spinner[i].<a class="code" href="classSpinner.html#a4">paint</a>();
01533         subGroupWeight += player_school.sub_score_weight[i];
01534     }
01535     <span class="comment">// font_charts.right_put(WINDOW_X1+tab6-30, WINDOW_Y2-20, m.format(subGroupWeight,24) );</span>
01536     text_sub_group_weight.<a class="code" href="classText.html#a17">right_put</a>( <a class="code" href="Oscor__if_8cpp.html#a107a68">WINDOW_X1</a>+tab6-30, <a class="code" href="Oscor__if_8cpp.html#a107a71">WINDOW_Y2</a>-20, &amp;subGroupWeight, 24 );
01537 
01538     button_customize_score.<a class="code" href="classButton.html#a20">paint</a>();
01539     button_restore_weight.<a class="code" href="classButton.html#a20">paint</a>();
01540     button_normalize_weight.<a class="code" href="classButton.html#a20">paint</a>();
01541     type_button_group.<a class="code" href="classButtonGroup.html#a3">paint</a>(current_score_report_type);
01542     vga.blt_buf(0,0,<a class="code" href="OVGA_8H.html#a0">VGA_WIDTH</a>-1,<a class="code" href="OVGA_8H.html#a1">VGA_HEIGHT</a>-1);
01543 }
01544 
01545 <span class="keyword">static</span> <span class="keywordtype">int</span> customize_score_detect() {
01546     <span class="comment">// switch sub score group</span>
01547     <span class="keywordflow">if</span>( type_button_group.<a class="code" href="classButtonGroup.html#a4">detect</a>() &gt;= 0 ) {
01548         current_score_report_type = type_button_group();
01549         sys.redraw_all_flag=1;
01550         <span class="keywordflow">return</span> 1;
01551     }
01552 
01553     <span class="keywordtype">int</span> w0 = 0;
01554     <span class="keywordtype">int</span> w1 = 0;
01555     <span class="keywordtype">int</span> i;
01556 
01557     <span class="keywordflow">switch</span>(current_score_report_type) {
01558     <span class="keywordflow">case</span> 0: w0=<a class="code" href="Opschool_8h.html#a65a54">GROUP1_BEGIN_ID</a>; w1=<a class="code" href="Opschool_8h.html#a65a55">GROUP2_BEGIN_ID</a>; <span class="keywordflow">break</span>;
01559     <span class="keywordflow">case</span> 1: w0=<a class="code" href="Opschool_8h.html#a65a55">GROUP2_BEGIN_ID</a>; w1=<a class="code" href="Opschool_8h.html#a65a56">GROUP3_BEGIN_ID</a>; <span class="keywordflow">break</span>;
01560     <span class="keywordflow">case</span> 2: w0=<a class="code" href="Opschool_8h.html#a65a56">GROUP3_BEGIN_ID</a>; w1=<a class="code" href="Opschool_8h.html#a65a57">GROUP4_BEGIN_ID</a>; <span class="keywordflow">break</span>;
01561     <span class="keywordflow">case</span> 3: w0=<a class="code" href="Opschool_8h.html#a65a57">GROUP4_BEGIN_ID</a>; w1=<a class="code" href="Opschool_8h.html#a65a52">SCORE_VAR_COUNT</a>; <span class="keywordflow">break</span>;
01562     }
01563 
01564     <span class="keywordflow">for</span>( i=w0; i &lt; w1; ++i ) {
01565         <span class="keywordflow">if</span>( sub_score_weight_spinner[i].<a class="code" href="classSpinner.html#a6">detect</a>() )
01566             <span class="keywordflow">return</span> 1;
01567     }
01568 
01569     <span class="keywordflow">if</span>( button_restore_weight.<a class="code" href="classButton.html#a21">detect</a>() ) {
01570         player_school.init_sub_score_weight();
01571     }
01572 
01573     <span class="keywordflow">if</span>( button_normalize_weight.<a class="code" href="classButton.html#a21">detect</a>() ) {
01574         player_school.normalize_sub_score_weight();
01575     }
01576 
01577     <span class="keywordflow">if</span>( button_customize_score.<a class="code" href="classButton.html#a21">detect</a>() ) {
01578         player_school.normalize_sub_score_weight();
01579         customize_score_deinit();
01580         current_report_mode=<a class="code" href="Ogset__if_8cpp.html#a129a110">TAB_SCREEN</a>;
01581         sys.redraw_all_flag=1;
01582         <span class="keywordflow">return</span> 1;
01583     }
01584     <span class="keywordflow">return</span> 0;
01585 }
01586 <span class="preprocessor">#endif</span>
01587 <span class="preprocessor"></span>
01588 <span class="keyword">static</span> <a class="code" href="classValueSlider.html">ValueSlider</a> value_slider;
01589 <span class="keyword">static</span> <span class="keywordtype">int</span> value_slider_var;
01590 
01591 <span class="comment">//------- dummy----------//</span>
01592 <span class="comment">//static BoundedSlider bounded_slider;</span>
01593 <span class="comment">//static double bounded_slider_var, bounded_slider_lo, bounded_slider_up;</span>
01594 
01595 <span class="keyword">static</span> <span class="keywordtype">char</span> *legend[] = {
01596     <span class="stringliteral">"Legend 1"</span>, <span class="stringliteral">"Legend 2"</span>, <span class="stringliteral">"Legend 3"</span>, <span class="stringliteral">"Legend 4"</span>
01597 };
01598 <span class="keyword">static</span> <span class="keywordtype">int</span> graph_a_start, graph_a_end, graph_data_num, graph_data_num1;
01599 <span class="keyword">static</span> <span class="keywordtype">int</span> graph_data[] = {
01600     24, 37, 50, 18, 40, 50, 90, 20, 18, 29, 94, 19, 2, 6, 13
01601 };
01602 
01603 <span class="keyword">static</span> <span class="keywordtype">char</span> *x_lab = <span class="stringliteral">"X-axis label"</span>;
01604 <span class="keyword">static</span> <span class="keywordtype">char</span> *y_lab = <span class="stringliteral">"Y-axis label"</span>;
01605 
01606 <span class="keyword">static</span> <a class="code" href="classSpinner.html">Spinner</a> spinner, spinner2;
01607 <span class="keyword">static</span> <span class="keywordtype">float</span> spinner_val, spinner_val2;
01608 
01609 <span class="keyword">static</span> <a class="code" href="classRadioButton.html">RadioButton</a> radio_button;
01610 <span class="keyword">static</span> <span class="keywordtype">int</span> radio_sel;
01611 <span class="keyword">static</span> <span class="keywordtype">char</span> *radio_desc[] = {
01612     <span class="stringliteral">"Selection 1"</span>, <span class="stringliteral">"Selection 2"</span>, <span class="stringliteral">"Selection 3"</span>
01613 };
01614 
01615 <span class="comment">//static SliderGroup slider_group(3);</span>
01616 <span class="comment">//static int slider_var[3];</span>
01617 <span class="comment">//-----------------------------------------------------------------//</span>
01618 
<a name="l01619"></a><a class="code" href="classGameSetting.html#a0">01619</a> <a class="code" href="classGameSetting.html#a0">GameSetting::GameSetting</a>() {
01620     tab_sel = 0;                                    <span class="comment">// default to Basic Options</span>
01621     init_flag = 0;
01622     redraw_browser_flag = 0;
01623     scr1_browseRecCount1=1;
01624     scr1_browseRecCount2=1;
01625     pic_id = 9;
01626 }
01627 
<a name="l01628"></a><a class="code" href="classGameSetting.html#a2">01628</a> <span class="keywordtype">void</span> <a class="code" href="classGameSetting.html#a2">GameSetting::new_game_init</a>() {
01629     <span class="comment">/* reset browsers */</span>
01630     <span class="comment">//  for(int i=0;i&lt;DEPARTMENT_TYPE_COUNT;i++)</span>
01631     <span class="comment">//          player_school.selected_department_list[i]=(i&lt;MIN_DEPARTMENT)?(i+1):0;</span>
01632     <span class="comment">//  int i;</span>
01633 
01634     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;department_res.department_count;i++) {
01635         player_school.tmp_department_pool_flag[i]=0;
01636         player_school.selected_department_list[i]=0;
01637     }
01638 
01639     player_school.selected_department_list[0]=11;
01640     player_school.tmp_department_pool_flag[11-1]=1;
01641     player_school.selected_department_list[1]=7;
01642     player_school.tmp_department_pool_flag[7-1]=1;
01643 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
01644 <span class="preprocessor"></span>    player_school.selected_department_list[2]=2;
01645     player_school.tmp_department_pool_flag[2-1]=1;
01646 <span class="preprocessor">#else</span>
01647 <span class="preprocessor"></span>    player_school.selected_department_list[2]=22;
01648     player_school.tmp_department_pool_flag[22-1]=1;
01649 <span class="preprocessor">#endif</span>
01650 <span class="preprocessor"></span>    player_school.selected_department_list[3]=15;
01651     player_school.tmp_department_pool_flag[15-1]=1;
01652     player_school.selected_department_list[4]=16;
01653     player_school.tmp_department_pool_flag[16-1]=1;
01654     player_school.selected_department_list[5]=10;
01655     player_school.tmp_department_pool_flag[10-1]=1;
01656     player_school.selected_department_list[6]=20;
01657     player_school.tmp_department_pool_flag[20-1]=1;
01658     player_school.selected_department_list[7]=26;
01659     player_school.tmp_department_pool_flag[26-1]=1;
01660     player_school.selected_department_list[8]=3;
01661     player_school.tmp_department_pool_flag[3-1]=1;
01662     player_school.selected_department_list[9]=6;
01663     player_school.tmp_department_pool_flag[6-1]=1;
01664 
01665     <span class="comment">//  for(i=0;i&lt;DEPARTMENT_TYPE_COUNT;i++)</span>
01666     <span class="comment">//          player_school.tmp_department_pool_flag[i]=(i&lt;MIN_DEPARTMENT)?1:0;</span>
01667 
01668     <span class="comment">//  player_school_prestige=player_school.prestige*1000;</span>
01669     <span class="comment">//  player_school_doctoral_program_intensity=player_school.doctoral_program_intensity*1000;</span>
01670     <span class="comment">//  player_school_sponsored_research_intensity=player_school.sponsored_research_intensity*1000;</span>
01671 
01672     player_school_prestige=player_school.prestige;
01673     player_school_doctoral_program_intensity=player_school.doctoral_program_intensity;
01674     player_school_sponsored_research_intensity=player_school.sponsored_research_intensity;
01675 
01676 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
01677 <span class="preprocessor"></span>    player_school.init_sub_score_weight();
01678     config.auto_save = 0;
01679     config.auto_save_file_name[0] = <span class="charliteral">'\0'</span>;
01680     config.log_enable = 0;                          <span class="comment">// 0=none, 1=year, 2=trimester</span>
01681     config.log_file_name[0] = <span class="charliteral">'\0'</span>;
01682 <span class="preprocessor">#endif</span>
01683 <span class="preprocessor"></span>}
01684 
<a name="l01685"></a><a class="code" href="classGameSetting.html#a3">01685</a> <span class="keywordtype">void</span> <a class="code" href="classGameSetting.html#a3">GameSetting::new_game_report</a>(<span class="keywordtype">int</span> refreshFlag) {
01686     <span class="keywordtype">int</span> vtab1=50,vtab2=150,vtab3=160,vtab4=250;
01687     <span class="keywordtype">int</span> tab1=10,tab2=200,tab3=400,tab4=680;
01688 
01689     <span class="keywordflow">if</span>(current_report_mode==<a class="code" href="Ogset__if_8cpp.html#a129a110">TAB_SCREEN</a>) {
01690         <span class="keywordflow">if</span> (refreshFlag == <a class="code" href="Gamedef_8h.html#a71a16">INFO_REPAINT</a>) {
01691             game_file_array.init(<span class="stringliteral">"*.XPS"</span>);
01692             scr1_browseRecCount1=game_file_array.size();
01693             vga.use_back();
01694             user_interface.bg_img(pic_id, &amp;vga_back);
01695             <span class="comment">//                  vga.blt_buf(0,0,VGA_WIDTH-1,VGA_HEIGHT-1);</span>
01696             <span class="comment">//                  sys.blt_virtual_buf();</span>
01697             tab_menu.<a class="code" href="classTabMenu.html#a2">init</a>(<a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a>,<a class="code" href="Ogset__if_8cpp.html#a126a100">REPORT_Y1</a>,<a class="code" href="Ogset__if_8cpp.html#a126a101">REPORT_X2</a>,<a class="code" href="Ogset__if_8cpp.html#a126a102">REPORT_Y2</a>,
01698                           4, &amp;tab_sel, 150, 150,
01699                           tab_short_desc, tab_long_desc,
01700                           callback_disp, callback_detect);
01701 
01702 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
01703 <span class="preprocessor"></span>            button_customize_score.<a class="code" href="classButton.html#a10">create_text</a>
01704                 (<a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a>+350-300, <a class="code" href="Ogset__if_8cpp.html#a126a102">REPORT_Y2</a>+10,
01705                  <a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a>+350-150, <a class="code" href="Ogset__if_8cpp.html#a126a102">REPORT_Y2</a>+30, <span class="stringliteral">"Customize score"</span> );
01706             button_randomize_setting.<a class="code" href="classButton.html#a10">create_text</a>
01707                 (<a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a>+350-140, <a class="code" href="Ogset__if_8cpp.html#a126a102">REPORT_Y2</a>+10,
01708                  <a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a>+350+10, <a class="code" href="Ogset__if_8cpp.html#a126a102">REPORT_Y2</a>+30, <span class="stringliteral">"Randomize setting"</span> );
01709             button_start.<a class="code" href="classButton.html#a10">create_text</a>
01710                 (<a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a>+350+20, <a class="code" href="Ogset__if_8cpp.html#a126a102">REPORT_Y2</a>+10,
01711                  <a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a>+350+170, <a class="code" href="Ogset__if_8cpp.html#a126a102">REPORT_Y2</a>+30, <span class="stringliteral">"Start game"</span> );
01712             button_cancel.<a class="code" href="classButton.html#a10">create_text</a>
01713                 (<a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a>+350+180, <a class="code" href="Ogset__if_8cpp.html#a126a102">REPORT_Y2</a>+10,
01714                  <a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a>+350+330, <a class="code" href="Ogset__if_8cpp.html#a126a102">REPORT_Y2</a>+30, <span class="stringliteral">"Back"</span>);
01715 <span class="preprocessor">#else</span>
01716 <span class="preprocessor"></span>            button_start.<a class="code" href="classButton.html#a10">create_text</a>
01717                 (<a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a>+150, <a class="code" href="Ogset__if_8cpp.html#a126a102">REPORT_Y2</a>+10,
01718                  <a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a>+300, <a class="code" href="Ogset__if_8cpp.html#a126a102">REPORT_Y2</a>+30, <span class="stringliteral">"Start game"</span>);
01719             button_cancel.<a class="code" href="classButton.html#a10">create_text</a>
01720                 (<a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a>+400, <a class="code" href="Ogset__if_8cpp.html#a126a102">REPORT_Y2</a>+10,
01721                  <a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a>+550, <a class="code" href="Ogset__if_8cpp.html#a126a102">REPORT_Y2</a>+30, <span class="stringliteral">"Back"</span>);
01722 <span class="preprocessor">#endif</span>
01723 <span class="preprocessor"></span>            sys.redraw_all_flag=0;
01724             sys.yield();
01725         }
01726         <span class="keywordflow">else</span> {
01727             vga.use_back();
01728             sys.yield();
01729             tab_menu.<a class="code" href="classTabMenu.html#a4">refresh</a>(refreshFlag);
01730             sys.yield();
01731         }
01732 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
01733 <span class="preprocessor"></span>        button_customize_score.<a class="code" href="classButton.html#a20">paint</a>();
01734         button_randomize_setting.<a class="code" href="classButton.html#a20">paint</a>();
01735 <span class="preprocessor">#endif</span>
01736 <span class="preprocessor"></span>        button_start.<a class="code" href="classButton.html#a20">paint</a>();
01737         button_cancel.<a class="code" href="classButton.html#a20">paint</a>();
01738         vga.blt_buf(0,0,<a class="code" href="OVGA_8H.html#a0">VGA_WIDTH</a>-1,<a class="code" href="OVGA_8H.html#a1">VGA_HEIGHT</a>-1);
01739     }
01740 
01741     <span class="keywordflow">if</span>(current_report_mode==<a class="code" href="Ogset__if_8cpp.html#a129a111">SAVE_EXPRESS</a>) {
01742         vga.use_back();
01743         save_express_report(refreshFlag);
01744         <span class="comment">//              sys.yield();</span>
01745         <span class="comment">//              vga.blt_buf(0,0,VGA_WIDTH-1,VGA_HEIGHT-1);</span>
01746         sys.yield();
01747     }
01748 
01749 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
01750 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(current_report_mode==CUSTOMIZE_SCORE) {
01751         vga.use_back();
01752         customize_score_mode(refreshFlag);
01753         sys.yield();
01754     }
01755 <span class="preprocessor">#endif</span>
01756 <span class="preprocessor"></span>}
01757 
01758 <span class="comment">//------ Begin of function GameSetting::detect ------//</span>
<a name="l01764"></a><a class="code" href="classGameSetting.html#a4">01764</a> <span class="comment">int GameSetting::new_game_detect() {</span>
01765     <span class="keywordtype">int</span> rc=0;
01766     vga.use_back();
01767     <span class="keywordflow">if</span>(current_report_mode==<a class="code" href="Ogset__if_8cpp.html#a129a111">SAVE_EXPRESS</a>) {
01768         save_express_detect();
01769     }
01770 
01771 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
01772 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(current_report_mode==CUSTOMIZE_SCORE) {
01773         customize_score_detect();
01774     }
01775 <span class="preprocessor">#endif</span>
01776 <span class="preprocessor"></span>
01777     sys.yield();
01778 
01779     <span class="keywordflow">if</span>(current_report_mode==<a class="code" href="Ogset__if_8cpp.html#a129a110">TAB_SCREEN</a>) {
01780         tab_menu.<a class="code" href="classTabMenu.html#a5">detect</a>();
01781         vga.use_front();
01782 
01783 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
01784 <span class="preprocessor"></span>        <span class="keywordflow">if</span>( button_customize_score.<a class="code" href="classButton.html#a21">detect</a>() ) {
01785             <span class="comment">// go in CUSTOMIZE_SCORE</span>
01786             current_report_mode = CUSTOMIZE_SCORE;
01787             sys.redraw_all_flag=1;
01788             rc = 0;
01789         }
01790         <span class="keywordflow">if</span>( button_randomize_setting.<a class="code" href="classButton.html#a21">detect</a>() ) {
01791             <span class="comment">// randomize department</span>
01792             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;department_res.department_count;i++) {
01793                 player_school.tmp_department_pool_flag[i]=0;
01794                 player_school.selected_department_list[i]=0;
01795             }
01796 
01797             redraw_browser_flag=1;
01798 
01799             <span class="keywordtype">int</span> addedCount=0;
01800             <span class="keywordtype">int</span> maxAdd = <a class="code" href="Opschool_8h.html#a0">MIN_DEPARTMENT</a> + m.random(<a class="code" href="Gamedef_8h.html#a10">MAX_DEPARTMENT</a>-(<a class="code" href="Opschool_8h.html#a0">MIN_DEPARTMENT</a>)+1);
01801 
01802             <span class="keywordflow">for</span>(i=0;i&lt;department_res.department_count;i++) {
01803                 <span class="comment">// chance of add a department is vacancy/(no. choice not decide)</span>
01804                 <span class="keywordflow">if</span>( addedCount &lt; maxAdd
01805                     &amp;&amp; m.random(department_res.department_count-i) &lt; maxAdd-addedCount ) {
01806                     player_school.selected_department_list[addedCount]=i+1;
01807                     player_school.tmp_department_pool_flag[i]=1;
01808                     addedCount++;
01809                 }
01810                 <span class="keywordflow">else</span> {
01811                     player_school.tmp_department_pool_flag[i]=0;
01812                 }
01813             }
01814 
01815             scr2_browseRecCount1=1;
01816             scr2_browseRecCount2=1;
01817             just_some_items_detected_flag=1;
01818 
01819             <span class="comment">// randomize score setting</span>
01820             player_school.control = m.random(2);
01821             player_school.student_count = m.random(3);
01822             player_school.parttime_undergrad_percent = m.random(3);
01823             player_school.sponsored_research_intensity = m.random(3);
01824             player_school.graduate_student_percent = m.random(3);
01825             player_school.ug_get_degree_in_5year_percent = m.random(3);
01826             player_school.fulltime_ug_in_housing_percent = m.random(3);
01827             player_school.athletic_program_intensity = m.random(3);
01828 
01829             player_school.prestige = m.random(3);
01830             player_school.relative_wealth = m.random(3);
01831             player_school.campus_environment = m.random(3);
01832 
01833             just_some_items_detected_flag=1;
01834         }
01835 <span class="preprocessor">#endif</span>
01836 <span class="preprocessor"></span>
01837         <span class="keywordflow">if</span>( button_start.<a class="code" href="classButton.html#a21">detect</a>() ) {
01838             <span class="comment">//## fred 0118</span>
01839             <span class="keywordflow">if</span>(player_school.right_bws_pool_size&gt;<a class="code" href="Gamedef_8h.html#a10">MAX_DEPARTMENT</a>) {
01840                 <a class="code" href="classString.html">String</a> msg_text;
01841                 msg_text = <span class="stringliteral">"The University must have \nat least "</span>;
01842                 msg_text += m.format(<a class="code" href="Opschool_8h.html#a0">MIN_DEPARTMENT</a>,4);
01843                 msg_text += <span class="stringliteral">" but not more \nthan "</span>;
01844                 msg_text += m.format(<a class="code" href="Gamedef_8h.html#a10">MAX_DEPARTMENT</a>,4);
01845                 msg_text += <span class="stringliteral">" departments."</span>;
01846                 box.msg(msg_text.<a class="code" href="classString.html#m0">str_buf</a>);
01847             }
01848             <span class="keywordflow">else</span> <span class="keywordflow">if</span>(player_school.right_bws_pool_size&lt;<a class="code" href="Opschool_8h.html#a0">MIN_DEPARTMENT</a>) {
01849                 <a class="code" href="classString.html">String</a> msg_text;
01850                 msg_text = <span class="stringliteral">"You must choose at least \n"</span>;
01851                 msg_text += m.format(<a class="code" href="Opschool_8h.html#a0">MIN_DEPARTMENT</a>,4);
01852                 msg_text += <span class="stringliteral">" departments."</span>;
01853                 box.msg(msg_text.<a class="code" href="classString.html#m0">str_buf</a>);
01854             }
01855             <span class="keywordflow">else</span> {
01856                 rc = 1;
01857                 *(tab_menu.<a class="code" href="classTabMenu.html#m8">sel_num</a>)=0;
01858             }
01859         }
01860         <span class="keywordflow">if</span>(button_cancel.<a class="code" href="classButton.html#a21">detect</a>()) {
01861             rc = -1;
01862         }
01863     }
01864     vga.use_back();
01865 
01866     <span class="keywordflow">return</span> rc;
01867 }
01868 
01869 <span class="comment">//------- End of function GameSetting::detect ------//</span>
01870 
01871 <span class="comment">//----------------------------</span>
01872 <span class="comment">// - play scenario</span>
01873 <span class="comment">//--------------------------------</span>
01874 <span class="keyword">enum</span> {<a class="code" href="Ogset__if_8cpp.html#a130a112">SCENARIO_DESC</a>=1,<a class="code" href="Ogset__if_8cpp.html#a130a113">SCENARIO_SELECT</a>=2};
01875 <span class="keyword">enum</span> {<a class="code" href="Ogset__if_8cpp.html#a131a114">TMP_SCENARIO_COUNT</a>=<a class="code" href="Opschool_8h.html#a63a32">SCENARIO_COUNT</a>};
01876 <span class="keyword">static</span> scenario_mode = <a class="code" href="Ogset__if_8cpp.html#a130a112">SCENARIO_DESC</a>;
01877 <span class="keyword">static</span> <a class="code" href="classVBrowse98.html">VBrowse98</a> scenario_vbrowser;
01878 <span class="keyword">static</span> <span class="keywordtype">int</span> scenario_browseRecCount1=<a class="code" href="Ogset__if_8cpp.html#a131a114">TMP_SCENARIO_COUNT</a>;
01879 <span class="keyword">static</span> <span class="keywordtype">int</span> scenario_browseRecHeight=19;
01880 <span class="keyword">static</span> <span class="keywordtype">void</span> scenario_disp_rep_row(<span class="keywordtype">int</span>,<span class="keywordtype">int</span>,<span class="keywordtype">int</span>,<span class="keywordtype">int</span>);
01881 <span class="keyword">static</span> <span class="keywordtype">char</span>* scn_name[<a class="code" href="Ogset__if_8cpp.html#a131a114">TMP_SCENARIO_COUNT</a>] = {
01882     <span class="stringliteral">"1. PAY BETTER"</span>,
01883     <span class="stringliteral">"2. ALLOCATE NEW MONEY"</span>,
01884     <span class="stringliteral">"3. TEACH BETTER"</span>,
01885     <span class="stringliteral">"4. IMPROVE RESEARCH PERFORMANCE"</span>,
01886     <span class="stringliteral">"5. WIN GAMES"</span>,
01887     <span class="stringliteral">"6. REDUCE TUITION"</span>,
01888     <span class="stringliteral">"7. RESPOND TO ENROLLMENT SHIFTS"</span>,
01889     <span class="stringliteral">"8. ENROLL MORE MINORITY STUDENTS"</span>,
01890     <span class="stringliteral">"9. HIRE MORE MINORITY FACULTY MEMBERS"</span>,
01891     <span class="stringliteral">"10. BALANCE THE BUDGET"</span>,
01892 };
01893 
01894 <span class="keyword">static</span> <span class="keywordtype">int</span> scn_id[<a class="code" href="Ogset__if_8cpp.html#a131a114">TMP_SCENARIO_COUNT</a>] = {
01895     <a class="code" href="Opschool_8h.html#a63a22">SCN_RAISE_SALARY</a>,
01896     <a class="code" href="Opschool_8h.html#a63a23">SCN_INVEST_ACADEMIC</a>,
01897     <a class="code" href="Opschool_8h.html#a63a24">SCN_TEACHING_QUALITY</a>,                           <span class="comment">//## fred0301</span>
01898     <a class="code" href="Opschool_8h.html#a63a25">SCN_RESEARCH_QUALITY</a>,                           <span class="comment">//## fred0301</span>
01899     <a class="code" href="Opschool_8h.html#a63a26">SCN_WINNING_ATHLETICS</a>,
01900     <a class="code" href="Opschool_8h.html#a63a27">SCN_LIMIT_TUITION_GROWTH</a>,
01901     <a class="code" href="Opschool_8h.html#a63a28">SCN_COMPENSATE_FOR_ENROLLMENT_SHIFTS</a>,           <span class="comment">//## fred0301</span>
01902     <a class="code" href="Opschool_8h.html#a63a29">SCN_STUDENT_DIVERSITY</a>,
01903     <a class="code" href="Opschool_8h.html#a63a30">SCN_FACULTY_DIVERSITY</a>,
01904     <a class="code" href="Opschool_8h.html#a63a31">SCN_BALANCE_BUDGET</a>,
01905 };
01906 
01907 <span class="comment">// ###### begin Gilbert 19/04/2001 ###### //</span>
01908 <span class="keyword">static</span> <span class="keywordtype">short</span> *scn_bitmap = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
01909 <span class="comment">// ###### end Gilbert 19/04/2001 ###### //</span>
01910 <span class="keyword">static</span> <span class="keywordtype">int</span> old_scn_id;
01911 
01912 <span class="keyword">static</span> <span class="keywordtype">void</span> scenario_disp_rep_row(<span class="keywordtype">int</span> recNo, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> refreshFlag) {
01913     <span class="keywordflow">if</span>(recNo&lt;=<a class="code" href="Ogset__if_8cpp.html#a131a114">TMP_SCENARIO_COUNT</a>)
01914         font_letter.put(x,y,scn_name[recNo-1]);
01915 }
01916 
01917 <span class="keyword">static</span> <span class="keywordtype">void</span> play_scenario_deinit() {
01918     <span class="keywordflow">if</span>(scn_bitmap) {
01919         <a class="code" href="ALL_8H.html#a8">mem_del</a>(scn_bitmap);
01920         scn_bitmap=<a class="code" href="OHELP_8H.html#a0">NULL</a>;
01921     }
01922 }
01923 
<a name="l01924"></a><a class="code" href="classGameSetting.html#a5">01924</a> <span class="keywordtype">void</span> <a class="code" href="classGameSetting.html#a5">GameSetting::play_scenario_init</a>() {
01925 }
01926 
<a name="l01927"></a><a class="code" href="classGameSetting.html#a6">01927</a> <span class="keywordtype">void</span> <a class="code" href="classGameSetting.html#a6">GameSetting::play_scenario_report</a>(<span class="keywordtype">int</span> refreshFlag) {
01928     <span class="keywordtype">int</span> vtab1=<a class="code" href="Ogset__if_8cpp.html#a126a100">REPORT_Y1</a>+5,vtab2=<a class="code" href="Ogset__if_8cpp.html#a126a100">REPORT_Y1</a>+110,vtab3=<a class="code" href="Ogset__if_8cpp.html#a126a100">REPORT_Y1</a>+140,vtab4=<a class="code" href="Ogset__if_8cpp.html#a126a100">REPORT_Y1</a>+360;
01929     <span class="keywordtype">int</span> tab1=<a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a>+30,tab2=<a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a>+165,tab3=<a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a>+405,tab4=<a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a>+695;
01930 
01931     vga.use_back();
01932     sys.yield();
01933 
01934     <span class="keywordflow">if</span>(scenario_mode==<a class="code" href="Ogset__if_8cpp.html#a130a113">SCENARIO_SELECT</a>) {
01935         <span class="keywordflow">if</span> (refreshFlag == <a class="code" href="Gamedef_8h.html#a71a16">INFO_REPAINT</a>) {
01936             user_interface.bg_img(pic_id, &amp;vga_back);
01937             play_scenario_deinit();
01938             scr_button_start.<a class="code" href="classButton.html#a10">create_text</a>
01939                 (<a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a>+130, <a class="code" href="Ogset__if_8cpp.html#a126a102">REPORT_Y2</a>+15,
01940                  <a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a>+300, <a class="code" href="Ogset__if_8cpp.html#a126a102">REPORT_Y2</a>+35, <span class="stringliteral">"Start scenario"</span>);
01941             scr_button_cancel.<a class="code" href="classButton.html#a10">create_text</a>
01942                 (<a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a>+400, <a class="code" href="Ogset__if_8cpp.html#a126a102">REPORT_Y2</a>+15,
01943                  <a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a>+570, <a class="code" href="Ogset__if_8cpp.html#a126a102">REPORT_Y2</a>+35, <span class="stringliteral">"Back"</span>);
01944 
01945             <span class="comment">//                  button_up.create_text(tab1+80,vtab1+35,tab1+105,vtab1+60,"^");</span>
01946             <span class="comment">//                  button_down.create_text(tab1+80,vtab1+65,tab1+105,vtab1+90,"v");</span>
01947 
01948             user_interface.brighten(tab1-5,vtab1-5,tab4,vtab2);
01949             user_interface.brighten(tab1-5,vtab3,tab4,vtab4);
01950             user_interface.rect(tab1-5,vtab1-5,tab4,vtab2,1);
01951             user_interface.rect(tab1-5,vtab3,tab4,vtab4,1);
01952             user_interface.rect(tab1,vtab1+20,tab1+115,vtab1+100);
01953 
01954             font_chart_blue_sm.put(tab1+5,vtab1+5,<span class="stringliteral">"Institution logo"</span>);
01955             font_chart_blue_sm.put(tab2,vtab1+5,<span class="stringliteral">"Institution name"</span>);
01956             font_chart_blue_sm.put(tab2,vtab1+60,<span class="stringliteral">"Player first name"</span>);
01957             font_chart_blue_sm.put(tab2+268,vtab1+60,<span class="stringliteral">"Last name"</span>);
01958             font_chart_blue_sm.put(tab1,vtab3-16,<span class="stringliteral">"Institution type"</span>);
01959 
01960             scr2_name[0].init(tab2+5,vtab1+28,tab2+520,player_school.school_name,<span class="keyword">sizeof</span>(player_school.school_name)-1,&amp;font_charts,0,1);
01961             scr2_name[1].init(tab2+5,vtab1+83,tab2+250,player_school.player_first_name,<span class="keyword">sizeof</span>(player_school.player_first_name)-1,&amp;font_charts,0,1);
01962             scr2_name[2].init(tab2+275,vtab1+83,tab2+520,player_school.player_last_name,<span class="keyword">sizeof</span>(player_school.player_last_name)-1,&amp;font_charts,0,1);
01963             scr2_name.<a class="code" href="classGetAGroup.html#a4">set_focus</a>(0);
01964             scr2_name[0].<a class="code" href="classGetAGroup.html#a2">paint</a>();
01965             scr2_name[1].<a class="code" href="classGetAGroup.html#a2">paint</a>();
01966             scr2_name[2].<a class="code" href="classGetAGroup.html#a2">paint</a>();
01967             sys.redraw_all_flag=0;
01968             vga.blt_buf(0,0,<a class="code" href="OVGA_8H.html#a0">VGA_WIDTH</a>-1,<a class="code" href="OVGA_8H.html#a1">VGA_HEIGHT</a>-1);
01969         }
01970         <span class="keywordflow">else</span> {
01971         }
01972 
01973         sys.yield();
01974         scr_button_start.<a class="code" href="classButton.html#a20">paint</a>();
01975         scr_button_cancel.<a class="code" href="classButton.html#a20">paint</a>();
01976         vga.blt_buf(<a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a>+130, <a class="code" href="Ogset__if_8cpp.html#a126a102">REPORT_Y2</a>+15,
01977                     <a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a>+300, <a class="code" href="Ogset__if_8cpp.html#a126a102">REPORT_Y2</a>+35);
01978         vga.blt_buf(<a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a>+400, <a class="code" href="Ogset__if_8cpp.html#a126a102">REPORT_Y2</a>+15,
01979                     <a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a>+570, <a class="code" href="Ogset__if_8cpp.html#a126a102">REPORT_Y2</a>+35);
01980 
01981         <span class="keyword">static</span> old_mascot=-1;
01982         <span class="keywordflow">if</span>(old_mascot!=player_school.mascot) {
01983             <span class="keywordtype">char</span>* bitmapPtr = image_mascot.get_data(player_school.mascot);
01984             <span class="keywordflow">if</span>( bitmapPtr ) {
01985                 vga_back.put_bitmap(tab1+10,vtab1+32,bitmapPtr );
01986             }
01987 
01988             image_interface.put_back(tab1+80,vtab1+33,<span class="stringliteral">"U-ARW-UP"</span>);
01989             image_interface.put_back(tab1+80,vtab1+63,<span class="stringliteral">"D-ARW-UP"</span>);
01990             vga.blt_buf(tab1,vtab1+20,tab1+115,vtab1+100);
01991         }
01992 
01993         sys.yield();
01994         user_interface.bar(tab2-5,vtab1+22,tab2+520,vtab1+46,<a class="code" href="COLOR_8H.html#a17">V_WHITE</a>);
01995         user_interface.bar(tab2-5,vtab1+77,tab2+250,vtab1+101,<a class="code" href="COLOR_8H.html#a17">V_WHITE</a>);
01996         user_interface.bar(tab2+265,vtab1+77,tab2+520,vtab1+101,<a class="code" href="COLOR_8H.html#a17">V_WHITE</a>);
01997         user_interface.rect(tab2-5,vtab1+22,tab2+520,vtab1+46,1);
01998         user_interface.rect(tab2-5,vtab1+77,tab2+250,vtab1+101,1);
01999         user_interface.rect(tab2+265,vtab1+77,tab2+520,vtab1+101,1);
02000         scr2_name.<a class="code" href="classGetAGroup.html#a2">paint</a>();
02001 
02002         vga.blt_buf(tab2-5,vtab1+22,tab2+520,vtab1+48);
02003         vga.blt_buf(tab2-5,vtab1+77,tab2+250,vtab1+103);
02004         vga.blt_buf(tab2+265,vtab1+77,tab2+520,vtab1+103);
02005 
02006         sys.yield();
02007 
02008         <span class="keyword">static</span> old_selected_scenario=-1;
02009         <span class="keywordflow">if</span>(selected_scenario!=old_selected_scenario) {
02010             image_interface.put_back(tab1+10,vtab3+7,<span class="stringliteral">"SCE_PV_F"</span>);
02011             image_interface.put_back(tab1+175,vtab3+7,<span class="stringliteral">"SCE_LB_F"</span>);
02012             image_interface.put_back(tab1+340,vtab3+7,<span class="stringliteral">"SCE_PB_F"</span>);
02013             image_interface.put_back(tab1+505,vtab3+7,<span class="stringliteral">"SCE_CM_F"</span>);
02014             <span class="keywordflow">if</span>(selected_scenario==<a class="code" href="Gamedef_8h.html#a81a41">PRIVATE_SCHOOL</a>)
02015                 image_interface.put_back(tab1+10,vtab3+7,<span class="stringliteral">"SCE_PV_N"</span>);
02016             <span class="keywordflow">if</span>(selected_scenario==<a class="code" href="Gamedef_8h.html#a81a42">LIBERAL_ARTS_SCHOOL</a>)
02017                 image_interface.put_back(tab1+175,vtab3+7,<span class="stringliteral">"SCE_LB_N"</span>);
02018             <span class="keywordflow">if</span>(selected_scenario==<a class="code" href="Gamedef_8h.html#a81a43">PUBLIC_SCHOOL</a>)
02019                 image_interface.put_back(tab1+340,vtab3+7,<span class="stringliteral">"SCE_PB_N"</span>);
02020             <span class="keywordflow">if</span>(selected_scenario==<a class="code" href="Gamedef_8h.html#a81a44">COMPREHENSIVE_SCHOOL</a>)
02021                 image_interface.put_back(tab1+505,vtab3+7,<span class="stringliteral">"SCE_CM_N"</span>);
02022             <span class="comment">/*          font_fblack.put_paragraph(tab1+30,vtab4-40,tab1+150,vtab4-10,</span>
02023 <span class="comment">                        "Private Research University");</span>
02024 <span class="comment">                        font_fblack.put_paragraph(tab1+195,vtab4-40,tab1+335,vtab4-10,</span>
02025 <span class="comment">                        "Liberal Arts College");</span>
02026 <span class="comment">                        font_fblack.put_paragraph(tab1+360,vtab4-40,tab1+480,vtab4-10,</span>
02027 <span class="comment">                        "Public Research University");</span>
02028 <span class="comment">                        font_fblack.put_paragraph(tab1+525,vtab4-40,tab1+645,vtab4-10,</span>
02029 <span class="comment">                        "Comprehensive University");</span>
02030 <span class="comment">            */</span>
02031             user_interface.rect(tab1+10,vtab3+7,tab1+160,vtab3+207,1);
02032             user_interface.rect(tab1+175,vtab3+7,tab1+325,vtab3+207,1);
02033             user_interface.rect(tab1+340,vtab3+7,tab1+490,vtab3+207,1);
02034             user_interface.rect(tab1+505,vtab3+7,tab1+655,vtab3+207,1);
02035 
02036             vga.blt_buf(tab1+10,vtab3+7,tab1+160,vtab3+209);
02037             vga.blt_buf(tab1+175,vtab3+7,tab1+325,vtab3+209);
02038             vga.blt_buf(tab1+340,vtab3+7,tab1+490,vtab3+209);
02039             vga.blt_buf(tab1+505,vtab3+7,tab1+655,vtab3+209);
02040         }
02041     }
02042     <span class="keywordflow">else</span> {
02043         <span class="comment">//              sys.yield();</span>
02044         <span class="keywordflow">if</span> (refreshFlag == <a class="code" href="Gamedef_8h.html#a71a16">INFO_REPAINT</a>) {
02045             user_interface.bg_img(pic_id, &amp;vga_back);
02046             play_scenario_deinit();
02047             scr_button_start.<a class="code" href="classButton.html#a10">create_text</a>
02048                 (<a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a>+130, <a class="code" href="Ogset__if_8cpp.html#a126a102">REPORT_Y2</a>+13,
02049                  <a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a>+300, <a class="code" href="Ogset__if_8cpp.html#a126a102">REPORT_Y2</a>+33, <span class="stringliteral">"Select scenario"</span>);
02050             scr_button_cancel.<a class="code" href="classButton.html#a10">create_text</a>
02051                 (<a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a>+400, <a class="code" href="Ogset__if_8cpp.html#a126a102">REPORT_Y2</a>+13,
02052                  <a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a>+570, <a class="code" href="Ogset__if_8cpp.html#a126a102">REPORT_Y2</a>+33, <span class="stringliteral">"Back"</span>);
02053 
02054             user_interface.brighten(tab1,vtab1,tab4,vtab4);
02055             user_interface.rect(tab1,vtab1,tab4,vtab4,1);
02056             <span class="comment">//                  font_chart_blue_sm.put(tab1+50,vtab1+5,"Scenario");</span>
02057             <span class="comment">//font_chart_blue_sm.put(tab1+530,vtab1+5,"Difficulty");</span>
02058             user_interface.brighten(tab1+20,vtab1+20,
02059                                     tab1+645,vtab1+140);
02060             user_interface.rect(  tab1+20,vtab1+20,
02061                                   tab1+645,vtab1+140,1);
02062             scenario_vbrowser.<a class="code" href="classVBrowse98.html#a2">init</a>(
02063                 tab1+20,vtab1+20,
02064                 tab1+645,vtab1+140,
02065                 0,  scenario_browseRecHeight,scenario_browseRecCount1,
02066                 scenario_disp_rep_row,<a class="code" href="OHELP_8H.html#a0">NULL</a>,1);
02067             <span class="comment">//                  sys.yield();</span>
02068 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
02069 <span class="preprocessor"></span>            <span class="comment">// find the vbrowse recno of current scenario</span>
02070             <span class="keywordflow">for</span>( <span class="keywordtype">int</span> scRecno=<a class="code" href="Ogset__if_8cpp.html#a131a114">TMP_SCENARIO_COUNT</a>; scRecno &gt; 1 &amp;&amp; scn_id[scRecno-1]!=player_school.scenario_id; --scRecno );
02071             <a class="code" href="ALL_8H.html#a0">err_when</a>( scRecno&lt;1);
02072             scenario_vbrowser.<a class="code" href="classVBrowse98.html#a4">open</a>(scRecno);
02073 <span class="preprocessor">#else</span>
02074 <span class="preprocessor"></span>            scenario_vbrowser.<a class="code" href="classVBrowse98.html#a4">open</a>(scenario_vbrowser.<a class="code" href="classVBrowse98.html#a6">recno</a>());
02075 <span class="preprocessor">#endif</span>
02076 <span class="preprocessor"></span>            <span class="comment">//                  sys.yield();</span>
02077             scn_bitmap=vga.active_buf-&gt;save_area(
02078                 tab1+15,vtab3,tab4-15,vtab4,
02079                 scn_bitmap
02080                 );
02081 
02082             scr_button_start.<a class="code" href="classButton.html#a20">paint</a>();
02083             scr_button_cancel.<a class="code" href="classButton.html#a20">paint</a>();
02084             vga.blt_buf(0,0,<a class="code" href="OVGA_8H.html#a0">VGA_WIDTH</a>-1,<a class="code" href="OVGA_8H.html#a1">VGA_HEIGHT</a>-1);
02085         }
02086         sys.yield();
02087 
02088         <span class="keywordflow">if</span> (old_scn_id !=scn_id[scenario_vbrowser.<a class="code" href="classVBrowse98.html#a6">recno</a>() - 1]) {
02089             <a class="code" href="classString.html">String</a> str;
02090             str  = <a class="code" href="Gamedef_8h.html#a4">DIR_RES</a>;
02091             str += <span class="stringliteral">"SCENDESC"</span>;
02092             <a class="code" href="classResTxt.html">ResTxt</a> rs;
02093             rs.<a class="code" href="classResTxt.html#a2">init</a>(str);
02094 
02095             <span class="keywordtype">int</span> topic_id=rs.<a class="code" href="classResTxt.html#a7">locate_topic</a>(m.format(scn_id[scenario_vbrowser.<a class="code" href="classVBrowse98.html#a6">recno</a>() - 1],4));
02096             <span class="keywordtype">char</span> * textPtr = rs.<a class="code" href="classResTxt.html#a5">get_body</a>(topic_id);
02097             vga.active_buf-&gt;rest_area(scn_bitmap,0,0);
02098             font_letter.put_paragraph(tab1+15,vtab3+25,tab4-15,vtab4,textPtr);
02099             old_scn_id=scn_id[scenario_vbrowser.<a class="code" href="classVBrowse98.html#a6">recno</a>() - 1];
02100 
02101             <span class="comment">//--- Demo: only the first scenario is available in the demo ---//</span>
02102 
02103 <span class="preprocessor">#ifdef DEMO</span>
02104 <span class="preprocessor"></span>            <span class="keywordflow">if</span>( scenario_vbrowser.<a class="code" href="classVBrowse98.html#a6">recno</a>() &gt; 1 )
02105                 font_chart_red_sm.right_put( tab4-20, vtab3+25, <span class="stringliteral">"Not available in the demo version"</span> );
02106 <span class="preprocessor">#endif</span>
02107 <span class="preprocessor"></span>
02108             vga.blt_buf(0,0,<a class="code" href="OVGA_8H.html#a0">VGA_WIDTH</a>-1,<a class="code" href="OVGA_8H.html#a1">VGA_HEIGHT</a>-1);
02109         }
02110     }
02111     sys.yield();
02112 }
02113 
02114 <span class="comment">//------ Begin of function GameSetting::detect ------//</span>
<a name="l02120"></a><a class="code" href="classGameSetting.html#a7">02120</a> <span class="comment">int GameSetting::play_scenario_detect() {</span>
02121     <span class="keywordtype">int</span> rc=0;
02122     vga.use_back();
02123 
02124     <span class="keywordtype">int</span> vtab1=<a class="code" href="Ogset__if_8cpp.html#a126a100">REPORT_Y1</a>+5,vtab2=<a class="code" href="Ogset__if_8cpp.html#a126a100">REPORT_Y1</a>+110,vtab3=<a class="code" href="Ogset__if_8cpp.html#a126a100">REPORT_Y1</a>+140,vtab4=<a class="code" href="Ogset__if_8cpp.html#a126a100">REPORT_Y1</a>+355;
02125     <span class="keywordtype">int</span> tab1=<a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a>+30,tab2=<a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a>+165,tab3=<a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a>+405,tab4=<a class="code" href="Ogset__if_8cpp.html#a126a99">REPORT_X1</a>+695;
02126     vga.use_back();
02127 
02128     sys.yield();
02129     <span class="keywordflow">if</span>(scenario_mode==<a class="code" href="Ogset__if_8cpp.html#a130a113">SCENARIO_SELECT</a>) {
02130         <span class="keywordflow">if</span>(mouse.single_click(tab1+10,vtab3+7,tab1+160,vtab3+207)) {
02131             player_school.school_type=selected_scenario=<a class="code" href="Gamedef_8h.html#a81a41">PRIVATE_SCHOOL</a>;
02132             audio.play_wav(<span class="stringliteral">"BEEPS-1"</span>,audio.int_to_DsVolume(config.sound_effect_volume));
02133         }
02134 
02135         <span class="keywordflow">if</span>(mouse.single_click(tab1+175,vtab3+7,tab1+325,vtab3+207)) {
02136             player_school.school_type=selected_scenario=<a class="code" href="Gamedef_8h.html#a81a42">LIBERAL_ARTS_SCHOOL</a>;
02137             audio.play_wav(<span class="stringliteral">"BEEPS-1"</span>,audio.int_to_DsVolume(config.sound_effect_volume));
02138         }
02139 
02140         <span class="keywordflow">if</span>(mouse.single_click(tab1+340,vtab3+7,tab1+490,vtab3+207)) {
02141             player_school.school_type=selected_scenario=<a class="code" href="Gamedef_8h.html#a81a43">PUBLIC_SCHOOL</a>;
02142             audio.play_wav(<span class="stringliteral">"BEEPS-1"</span>,audio.int_to_DsVolume(config.sound_effect_volume));
02143         }
02144         <span class="keywordflow">if</span>(mouse.single_click(tab1+505,vtab3+7,tab1+655,vtab3+207)) {
02145             player_school.school_type=selected_scenario=<a class="code" href="Gamedef_8h.html#a81a44">COMPREHENSIVE_SCHOOL</a>;
02146             audio.play_wav(<span class="stringliteral">"BEEPS-1"</span>,audio.int_to_DsVolume(config.sound_effect_volume));
02147         }
02148 
02149         <span class="comment">//              if(button_up.detect())</span>
02150         <span class="comment">//              if(mouse.single_click(tab1+80,vtab1+35,tab1+105,vtab1+60))</span>
02151         <span class="comment">// switch to any_click in version 2</span>
02152         <span class="keywordflow">if</span>(mouse.any_click(tab1+80,vtab1+35,tab1+105,vtab1+60)) {
02153             <span class="keywordflow">do</span> {
02154                 player_school.mascot--;
02155                 <span class="keywordflow">if</span>(player_school.mascot&lt;1)
02156                     player_school.mascot=image_mascot.rec_count;
02157             } <span class="keywordflow">while</span>( player_school.is_hidden_mascot(player_school.mascot) );
02158             image_interface.put_front(tab1+80,vtab1+33,<span class="stringliteral">"U-ARW-DN"</span>);
02159             audio.play_wav(<span class="stringliteral">"BEEPS-1"</span>,audio.int_to_DsVolume(config.sound_effect_volume));
02160         }
02161 
02162         <span class="comment">//              if(button_down.detect())</span>
02163         <span class="comment">//              if(mouse.single_click(tab1+80,vtab1+65,tab1+105,vtab1+90))</span>
02164         <span class="comment">// switch to any_click in version 2</span>
02165         <span class="keywordflow">if</span>(mouse.any_click(tab1+80,vtab1+65,tab1+105,vtab1+90)) {
02166             <span class="keywordflow">do</span> {
02167                 player_school.mascot++;
02168                 <span class="keywordflow">if</span>(player_school.mascot&gt;image_mascot.rec_count)
02169                     player_school.mascot=1;
02170             } <span class="keywordflow">while</span>( player_school.is_hidden_mascot(player_school.mascot) );
02171             image_interface.put_front(tab1+80,vtab1+63,<span class="stringliteral">"D-ARW-DN"</span>);
02172             audio.play_wav(<span class="stringliteral">"BEEPS-1"</span>,audio.int_to_DsVolume(config.sound_effect_volume));
02173         }
02174 
02175         scr2_name.<a class="code" href="classGetAGroup.html#a3">detect</a>();
02176 
02177         vga.use_front();
02178         <span class="keywordflow">if</span>( scr_button_start.<a class="code" href="classButton.html#a21">detect</a>() ) {
02179             rc = 1;
02180             scenario_mode=<a class="code" href="Ogset__if_8cpp.html#a130a112">SCENARIO_DESC</a>;
02181             selected_scenario = <a class="code" href="Gamedef_8h.html#a81a41">PRIVATE_SCHOOL</a>;         <span class="comment">// reset the selected_scenario</span>
02182             old_scn_id=-1;
02183         }
02184 
02185         <span class="keywordflow">if</span>( scr_button_cancel.<a class="code" href="classButton.html#a21">detect</a>() ) {
02186             rc = 2;
02187             sys.redraw_all_flag=1;
02188             scenario_mode=<a class="code" href="Ogset__if_8cpp.html#a130a112">SCENARIO_DESC</a>;
02189             old_scn_id=-1;
02190         }
02191         vga.use_back();
02192     }
02193     <span class="keywordflow">else</span> {
02194         vga.use_front();
02195 
02196         <span class="keywordflow">if</span>(scenario_vbrowser.<a class="code" href="classVBrowse98.html#a8">detect</a>()) {
02197 <span class="preprocessor">#ifdef DEMO</span>
02198 <span class="preprocessor"></span>            <span class="keywordflow">if</span>( scenario_vbrowser.<a class="code" href="classVBrowse98.html#a6">recno</a>() &gt; 1 )
02199                 scr_button_start.<a class="code" href="classButton.html#a26">disable</a>();
02200             <span class="keywordflow">else</span>
02201                 scr_button_start.<a class="code" href="classButton.html#a27">enable</a>();
02202             <span class="keywordflow">return</span> 0;
02203 <span class="preprocessor">#endif</span>
02204 <span class="preprocessor"></span>        }
02205 
02206         <span class="keywordflow">if</span>( scr_button_start.<a class="code" href="classButton.html#a21">detect</a>() ) {
02207             player_school.scenario_id=scn_id[scenario_vbrowser.<a class="code" href="classVBrowse98.html#a6">recno</a>() - 1];
02208             rc = 2;
02209             sys.redraw_all_flag=1;
02210             scenario_mode=<a class="code" href="Ogset__if_8cpp.html#a130a113">SCENARIO_SELECT</a>;
02211             old_scn_id=-1;
02212         }
02213         sys.yield();
02214 
02215         <span class="keywordflow">if</span>( scr_button_cancel.<a class="code" href="classButton.html#a21">detect</a>() ) {
02216             old_scn_id=-1;
02217             rc = -1;
02218         }
02219         vga.use_back();
02220     }
02221     <span class="keywordflow">return</span> rc;
02222 }
02223 
02224 <span class="comment">//------- End of function GameSetting::detect ------//</span>
02225 <a class="code" href="classGameSetting.html#a1">GameSetting::~GameSetting</a>() {
02226     new_game_deinit();
02227     play_scenario_deinit();
02228 }
</pre></div><hr><address style="align: right;"><small>Generated on Fri Aug 23 01:37:58 2002 for VirtualU by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.17 </small></address>
</body>
</html>
