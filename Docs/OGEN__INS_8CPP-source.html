<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>OGEN_INS.CPP Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.17 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>OGEN_INS.CPP</h1><a href="OGEN__INS_8CPP.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">//Filename    : OGAMGEN2.CPP</span>
00002 <span class="comment">//Description : Game Generation - Environment options</span>
00003 
00004 <span class="preprocessor">#include &lt;<a class="code" href="OVGA_8H.html">OVGA.H</a>&gt;</span>
00005 <span class="preprocessor">#include &lt;<a class="code" href="OSTR_8H.html">OSTR.H</a>&gt;</span>
00006 <span class="preprocessor">#include &lt;OFONT.H&gt;</span>
00007 <span class="preprocessor">#include &lt;OBUTTON.H&gt;</span>
00008 <span class="preprocessor">#include &lt;OSPINNER.H&gt;</span>
00009 <span class="preprocessor">#include &lt;OPERSON.H&gt;</span>
00010 <span class="preprocessor">#include &lt;<a class="code" href="OWORLD_8H.html">OWORLD.H</a>&gt;</span>
00011 <span class="preprocessor">#include &lt;OEVENT.H&gt;</span>
00012 <span class="preprocessor">#include &lt;OTOWN.H&gt;</span>
00013 <span class="preprocessor">#include &lt;OGRPAI.H&gt;</span>
00014 <span class="preprocessor">#include &lt;<a class="code" href="OGAME_8H.html">OGAME.H</a>&gt;</span>
00015 
00016 <span class="comment">//--- The united field description width of all fields ---//</span>
00017 
<a name="l00018"></a><a class="code" href="OGEN__INS_8CPP.html#a0">00018</a> <span class="preprocessor">#define FLD_DES_WIDTH     226</span>
00019 <span class="preprocessor"></span>
<a name="l00020"></a><a class="code" href="OGEN__INS_8CPP.html#a1">00020</a> <span class="preprocessor">#define MAX_SEAPORT       10                      // Max no. of seaport of each type : consumer and industrial</span>
00021 <span class="preprocessor"></span>
00022 <span class="comment">//-------- Define static variables ----------//</span>
00023 
00024 <span class="keyword">static</span> <a class="code" href="classButtonGroup.html">ButtonGroup</a> button_local(3), <a class="code" href="OGEN__INS_8CPP.html#a3">button_character</a>(7), <a class="code" href="OGEN__INS_8CPP.html#a4">button_capital</a>(5), <a class="code" href="OGEN__INS_8CPP.html#a5">button_skill</a>(5),
00025     <a class="code" href="OGEN__INS_8CPP.html#a6">button_show</a>(2), <a class="code" href="OGEN__INS_8CPP.html#a7">button_constant</a>(2), <a class="code" href="OGEN__INS_8CPP.html#a8">button_quality</a>(3),
00026     <a class="code" href="OGEN__INS_8CPP.html#a9">button_complex_eco</a>(2), <a class="code" href="OGEN__INS_8CPP.html#a10">button_town_emerge</a>(2), <a class="code" href="OGEN__INS_8CPP.html#a11">button_seaport_emerge</a>(2),
00027     <a class="code" href="OGEN__INS_8CPP.html#a12">button_stock_enable</a>(2), <a class="code" href="OGEN__INS_8CPP.html#a13">button_event</a>(4), <a class="code" href="OGEN__INS_8CPP.html#a14">button_ai_type</a>(2),
00028     <a class="code" href="OGEN__INS_8CPP.html#a15">button_random_pref</a>(2), <a class="code" href="OGEN__INS_8CPP.html#a16">button_change_ai_type</a>(2),
00029     <a class="code" href="OGEN__INS_8CPP.html#a17">button_difficulty</a>(7);
00030 
00031 <span class="keyword">static</span> <a class="code" href="classSpinner.html">Spinner</a> spinner_town, spinner_competitor,
00032     spinner_seaport1, spinner_seaport2;
00033 
00034 <span class="keyword">static</span> <a class="code" href="classSpinner.html">Spinner</a> spinner_ai_type[TOTAL_AI_TYPE];
00035 
00036 <span class="keyword">static</span> <span class="keywordtype">short</span>   diff_rating_x, diff_rating_y;
00037 <span class="keyword">static</span> <span class="keywordtype">char</span>    internal_call=0;
00038 
00039 <span class="comment">//------- Define static functions ----------//</span>
00040 
00041 <span class="keyword">static</span> <span class="keywordtype">void</span> put_yes_no_option(<span class="keywordtype">int</span>, <span class="keywordtype">int</span>, <span class="keywordtype">char</span>*, <a class="code" href="classButtonGroup.html">ButtonGroup</a>&amp;, <span class="keywordtype">int</span>);
00042 
00043 <span class="comment">//--------- Begin of function Game::gen_competitor --------//</span>
00049 <span class="comment">void Game::gen_competitor(int x1, int y1, int x2, int y2) {</span>
00050     gen_opt_difficulty(x1, y1, x2, y1+70);
00051 
00052     gen_opt_competitor(x1, y1+71, x2, y2);
00053 }
00054 
00055 <span class="comment">//----------- End of function Game::gen_competitor ---------//</span>
00056 
00057 <span class="comment">//--------- Begin of function Game::gen_env --------//</span>
00063 <span class="comment">void Game::gen_env(int x1, int y1, int x2, int y2) {</span>
00064     gen_opt_difficulty(x1, y1, x2, y1+70);
00065 
00066     <span class="comment">//--------- City Options ------------//</span>
00067 
00068     gen_opt_city(x1, y1+71, x2, y1+160);
00069 
00070     gen_opt_stock(x1, y1+161, x2, y1+211);
00071 
00072     gen_opt_event(x1, y1+212, x2, y2);
00073 }
00074 
00075 <span class="comment">//----------- End of function Game::gen_env ---------//</span>
00076 
00077 <span class="comment">//--------- Begin of function Game::gen_import --------//</span>
00083 <span class="comment">void Game::gen_import(int x1, int y1, int x2, int y2) {</span>
00084     gen_opt_difficulty(x1, y1, x2, y1+70);
00085 
00086     gen_opt_seaport(x1, y1+71, x2, y2);
00087 }
00088 
00089 <span class="comment">//----------- End of function Game::gen_import ---------//</span>
00090 
00091 <span class="comment">//..........................................................//</span>
00092 
00093 <span class="comment">//--------- Begin of function Game::gen_competitor_detect --------//</span>
00095 <span class="comment">void Game::gen_competitor_detect() {</span>
00096     gen_opt_difficulty_detect();
00097 
00098     <span class="comment">//--------- Detect buttons ----------//</span>
00099 
00100     <span class="keywordflow">if</span>( button_character.<a class="code" href="classButtonGroup.html#a4">detect</a>() &gt;= 0 )
00101         average_ai_character = button_character.<a class="code" href="classButtonGroup.html#m1">button_pressed</a>;
00102 
00103     <span class="keywordflow">if</span>( button_capital.<a class="code" href="classButtonGroup.html#a4">detect</a>() &gt;= 0 )
00104         competitor_capital = button_capital.<a class="code" href="classButtonGroup.html#m1">button_pressed</a>;
00105 
00106     <span class="keywordflow">if</span>( button_skill.<a class="code" href="classButtonGroup.html#a4">detect</a>() &gt;= 0 )
00107         competitor_skill = button_skill.<a class="code" href="classButtonGroup.html#m1">button_pressed</a>;
00108 
00109     <span class="keywordflow">if</span>( button_show.<a class="code" href="classButtonGroup.html#a4">detect</a>() &gt;= 0 )
00110         show_competitor_info = button_show.<a class="code" href="classButtonGroup.html#m1">button_pressed</a>;
00111 
00112     <span class="keywordflow">if</span>( button_random_pref.<a class="code" href="classButtonGroup.html#a4">detect</a>() &gt;= 0 )
00113         random_person_pref = button_random_pref.<a class="code" href="classButtonGroup.html#m1">button_pressed</a>;
00114 
00115     <span class="keywordflow">if</span>( button_ai_type.<a class="code" href="classButtonGroup.html#a4">detect</a>() &gt;= 0 )
00116         random_ai_type = button_ai_type.<a class="code" href="classButtonGroup.html#m1">button_pressed</a>;
00117 
00118     <span class="comment">//-------- Detect Spinner -----------//</span>
00119 
00120     spinner_competitor.<a class="code" href="classSpinner.html#a6">detect</a>();
00121 
00122     <span class="comment">//--- recalculate the difficulty rating and refresh if changed ---//</span>
00123 
00124     calc_difficulty_rating();
00125 }
00126 
00127 <span class="comment">//----------- End of function Game::gen_competitor_detect ---------//</span>
00128 
00129 <span class="comment">//--------- Begin of function Game::gen_env_detect --------//</span>
00131 <span class="comment">void Game::gen_env_detect() {</span>
00132     gen_opt_difficulty_detect();
00133 
00134     <span class="comment">//--------- Detect buttons ----------//</span>
00135 
00136     <span class="keywordflow">if</span>( button_town_emerge.<a class="code" href="classButtonGroup.html#a4">detect</a>() &gt;= 0 )
00137         new_town_emerge = button_town_emerge.<a class="code" href="classButtonGroup.html#m1">button_pressed</a>;
00138     <span class="comment">/*</span>
00139 <span class="comment">      if( button_complex_eco.detect() &gt;= 0 )</span>
00140 <span class="comment">      complex_town_eco = button_complex_eco.button_pressed;</span>
00141 <span class="comment">    */</span>
00142     <span class="keywordflow">if</span>( button_local.<a class="code" href="classButtonGroup.html#a4">detect</a>() &gt;= 0 )
00143         local_competitiveness = button_local.<a class="code" href="classButtonGroup.html#m1">button_pressed</a>;
00144 
00145     <span class="keywordflow">if</span>( button_stock_enable.<a class="code" href="classButtonGroup.html#a4">detect</a>() &gt;= 0 )
00146         stock_enable = button_stock_enable.<a class="code" href="classButtonGroup.html#m1">button_pressed</a>;
00147 
00148     <span class="keywordflow">if</span>( button_event.<a class="code" href="classButtonGroup.html#a4">detect</a>() &gt;= 0 )
00149         random_event_frequency = button_event.<a class="code" href="classButtonGroup.html#m1">button_pressed</a>;
00150 
00151     <span class="comment">//-------- Detect Spinner -----------//</span>
00152 
00153     <span class="comment">// map_town_array is the no. of custom towns, the max. no. of cities cannot be less than it</span>
00154 
00155     <span class="keywordflow">if</span>( world.map_town_array.size() &gt; init_town_num ) {
00156         init_town_num = world.map_town_array.size();
00157         spinner_town.<a class="code" href="classSpinner.html#a5">refresh</a>();
00158     }
00159 
00160     spinner_town.set_range( max( 1, world.map_town_array.size()), MAX_TOWN );
00161 
00162     spinner_town.<a class="code" href="classSpinner.html#a6">detect</a>();
00163     spinner_competitor.<a class="code" href="classSpinner.html#a6">detect</a>();
00164 
00165     <span class="comment">//--- recalculate the difficulty rating and refresh if changed ---//</span>
00166 
00167     calc_difficulty_rating();
00168 }
00169 
00170 <span class="comment">//----------- End of function Game::gen_env_detect ---------//</span>
00171 
00172 <span class="comment">//--------- Begin of function Game::gen_import_detect --------//</span>
00174 <span class="comment">void Game::gen_import_detect() {</span>
00175     gen_opt_difficulty_detect();
00176 
00177     <span class="comment">//--------- Detect buttons ----------//</span>
00178 
00179     <span class="keywordflow">if</span>( button_seaport_emerge.<a class="code" href="classButtonGroup.html#a4">detect</a>() &gt;= 0 )
00180         new_seaport_emerge = button_seaport_emerge.<a class="code" href="classButtonGroup.html#m1">button_pressed</a>;
00181 
00182     <span class="keywordflow">if</span>( button_constant.<a class="code" href="classButtonGroup.html#a4">detect</a>() &gt;= 0 )
00183         constant_import = button_constant.<a class="code" href="classButtonGroup.html#m1">button_pressed</a>;
00184 
00185     <span class="keywordflow">if</span>( button_quality.<a class="code" href="classButtonGroup.html#a4">detect</a>() &gt;= 0 )
00186         import_quality = button_quality.<a class="code" href="classButtonGroup.html#m1">button_pressed</a>;
00187 
00188     <span class="comment">//-------- Detect Spinner -----------//</span>
00189 
00190     spinner_seaport1.<a class="code" href="classSpinner.html#a6">detect</a>();
00191     spinner_seaport2.<a class="code" href="classSpinner.html#a6">detect</a>();
00192 
00193     <span class="comment">//--- recalculate the difficulty rating and refresh if changed ---//</span>
00194 
00195     calc_difficulty_rating();
00196 }
00197 
00198 <span class="comment">//----------- End of function Game::gen_import_detect ---------//</span>
00199 
00200 <span class="comment">//..........................................................//</span>
00201 
00202 <span class="comment">//--------- Begin of function Game::gen_opt_difficulty --------//</span>
00208 <span class="comment">void Game::gen_opt_difficulty(int x1, int y1, int x2, int y2) {</span>
00209     <span class="keywordflow">if</span>( internal_call )                             <span class="comment">// called by gen_opt_difficulty_detect()</span>
00210         <span class="keywordflow">return</span>;
00211 
00212     vga.d3_panel_down(x1, y1, x2, y2, 2, 1, <span class="stringliteral">"T_GAMGEN"</span>);
00213 
00214     <span class="keywordtype">int</span> x=x1+10, y=y1+45;
00215 
00216     font_std.put( x, y+5, <span class="stringliteral">"Difficulty Level"</span> );
00217 
00218     x+=115;
00219 
00220     button_difficulty[0].create_text( x    , y, <span class="stringliteral">"Very Easy"</span>, 0 );
00221     button_difficulty[1].create_text( x+70 , y, <span class="stringliteral">"Easy"</span>     , 0 );
00222     button_difficulty[2].create_text( x+115, y, <span class="stringliteral">"Medium"</span>   , 0 );
00223     button_difficulty[3].create_text( x+173, y, <span class="stringliteral">"Hard"</span>     , 0 );
00224     button_difficulty[4].create_text( x+218, y, <span class="stringliteral">"Very Hard"</span>, 0 );
00225     button_difficulty[5].create_text( x+288, y, <span class="stringliteral">"Hardest"</span>  , 0 );
00226     button_difficulty[6].create_text( x+346, y, <span class="stringliteral">"Custom"</span>   , 0 );
00227 
00228     button_difficulty.<a class="code" href="classButtonGroup.html#a3">paint</a>(difficulty_level);
00229 
00230     font_mid.d3_put( x1+150, y1+8, x1+330, y1+38, <span class="stringliteral">"Difficulty Rating"</span> );
00231 
00232     diff_rating_x=x1+336, diff_rating_y=y1+13;      <span class="comment">// for calc_difficulty_rating()</span>
00233 
00234     font_mid.put( diff_rating_x, diff_rating_y, m.format(difficulty_rating, 3) );
00235 }
00236 
00237 <span class="comment">//----------- End of function Game::gen_opt_difficulty ---------//</span>
00238 
00239 <span class="comment">//--------- Begin of function Game::gen_opt_difficulty_detect --------//</span>
00241 <span class="comment">void Game::gen_opt_difficulty_detect() {</span>
00242     <span class="keywordflow">if</span>( button_difficulty.<a class="code" href="classButtonGroup.html#a4">detect</a>() &gt;= 0 ) {
00243         set_difficulty_level(button_difficulty.<a class="code" href="classButtonGroup.html#m1">button_pressed</a>);
00244 
00245         internal_call=1;                              <span class="comment">// don't refresh in gen_opt_difficulty()</span>
00246         gen_disp(<a class="code" href="Gamedef_8h.html#a71a17">INFO_UPDATE</a>);
00247         internal_call=0;
00248 
00249         vga.tile( diff_rating_x, diff_rating_y, diff_rating_x+100, diff_rating_y+28, <span class="stringliteral">"T_GAMGEN"</span> );
00250 
00251         font_mid.put( diff_rating_x, diff_rating_y, m.format(difficulty_rating, 3) );
00252     }
00253 }
00254 
00255 <span class="comment">//----------- End of function Game::gen_opt_difficulty_detect ---------//</span>
00256 
00257 <span class="comment">//------ Begin of function Game::set_difficulty_level -----//</span>
00259 <span class="comment">void Game::set_difficulty_level(int diffLevel) {</span>
00260     difficulty_level = diffLevel;
00261 
00262     <span class="comment">//----------- Very Easy -------------//</span>
00263 
00264     <span class="keywordflow">if</span>( diffLevel==0 ) {
00265         <span class="comment">//---- competitors options -----//</span>
00266 
00267         competitor_num        = 3;
00268         average_ai_character  = PERSON_CONSERATIVE;
00269         competitor_capital    = <a class="code" href="Oconfig_8h.html#a6a2">OPTION_LOW</a>;
00270         competitor_skill      = AI_SKILL_NONE;
00271         show_competitor_info  = 1;
00272 
00273         <span class="comment">//------ seaport options -------//</span>
00274 
00275         consumer_seaport_num   = 2;
00276         industrial_seaport_num = 2;
00277         constant_import        = 1;
00278         import_quality         = <a class="code" href="Oconfig_8h.html#a6a4">OPTION_HIGH</a>;
00279 
00280         <span class="comment">//-------- City options --------//</span>
00281 
00282         local_competitiveness= <a class="code" href="Oconfig_8h.html#a6a2">OPTION_LOW</a>;
00283         complex_town_eco     = 0;
00284 
00285         <span class="comment">//------- Random events --------//</span>
00286 
00287         random_event_frequency = RANDOM_EVENT_FREQ_NONE;
00288     }
00289 
00290     <span class="comment">//-------------- Easy ---------------//</span>
00291 
00292     <span class="keywordflow">if</span>( diffLevel==1 ) {
00293         <span class="comment">//---- competitors options -----//</span>
00294 
00295         competitor_num        = 5;
00296         average_ai_character  = AI_CHARACTER_PREDEFINED;
00297         competitor_capital    = <a class="code" href="Oconfig_8h.html#a6a2">OPTION_LOW</a>;
00298         competitor_skill      = AI_SKILL_NONE;
00299         show_competitor_info  = 1;
00300 
00301         <span class="comment">//------ seaport options -------//</span>
00302 
00303         consumer_seaport_num   = 1;
00304         industrial_seaport_num = 2;
00305         constant_import        = 1;
00306         import_quality         = <a class="code" href="Oconfig_8h.html#a6a4">OPTION_HIGH</a>;
00307 
00308         <span class="comment">//-------- City options --------//</span>
00309 
00310         local_competitiveness= <a class="code" href="Oconfig_8h.html#a6a3">OPTION_MODERATE</a>;
00311         complex_town_eco     = 0;
00312 
00313         <span class="comment">//------- Random events --------//</span>
00314 
00315         random_event_frequency = RANDOM_EVENT_FREQ_NONE;
00316     }
00317 
00318     <span class="comment">//------------ Medium ------------//</span>
00319 
00320     <span class="keywordflow">if</span>( diffLevel==2 ) {
00321         <span class="comment">//---- competitors options -----//</span>
00322 
00323         competitor_num        = 7;
00324         average_ai_character  = AI_CHARACTER_PREDEFINED;
00325         competitor_capital    = <a class="code" href="Oconfig_8h.html#a6a3">OPTION_MODERATE</a>;
00326         competitor_skill      = AI_SKILL_NONE;
00327         show_competitor_info  = 1;
00328 
00329         <span class="comment">//------ seaport options -------//</span>
00330 
00331         consumer_seaport_num   = 1;
00332         industrial_seaport_num = 1;
00333         constant_import        = 1;
00334         import_quality         = <a class="code" href="Oconfig_8h.html#a6a3">OPTION_MODERATE</a>;
00335 
00336         <span class="comment">//-------- City options --------//</span>
00337 
00338         local_competitiveness= <a class="code" href="Oconfig_8h.html#a6a3">OPTION_MODERATE</a>;
00339         complex_town_eco     = 0;
00340 
00341         <span class="comment">//------- Random events --------//</span>
00342 
00343         random_event_frequency = RANDOM_EVENT_FREQ_NONE;
00344     }
00345 
00346     <span class="comment">//------------ Hard ------------//</span>
00347 
00348     <span class="keywordflow">if</span>( diffLevel==3 ) {
00349         <span class="comment">//---- competitors options -----//</span>
00350 
00351         competitor_num        = 8;
00352         average_ai_character  = AI_CHARACTER_PREDEFINED;
00353         competitor_capital    = <a class="code" href="Oconfig_8h.html#a6a4">OPTION_HIGH</a>;
00354         competitor_skill      = AI_SKILL_LOW;
00355         show_competitor_info  = 0;
00356 
00357         <span class="comment">//------ seaport options -------//</span>
00358 
00359         consumer_seaport_num   = 1;
00360         industrial_seaport_num = 1;
00361         constant_import        = 1;
00362         import_quality         = <a class="code" href="Oconfig_8h.html#a6a2">OPTION_LOW</a>;
00363 
00364         <span class="comment">//-------- City options --------//</span>
00365 
00366         local_competitiveness = <a class="code" href="Oconfig_8h.html#a6a3">OPTION_MODERATE</a>;
00367         complex_town_eco     = 0;
00368 
00369         <span class="comment">//------- Random events --------//</span>
00370 
00371         random_event_frequency = RANDOM_EVENT_FREQ_LOW;
00372     }
00373 
00374     <span class="comment">//--------- Very Hard ------------//</span>
00375 
00376     <span class="keywordflow">if</span>( diffLevel==4 ) {
00377         <span class="comment">//---- competitors options -----//</span>
00378 
00379         competitor_num        = 8;
00380         average_ai_character  = PERSON_VERY_AGGRESSIVE;
00381         competitor_capital    = <a class="code" href="Oconfig_8h.html#a6a5">OPTION_VERY_HIGH</a>;
00382         competitor_skill      = AI_SKILL_PREDEFINED;
00383         show_competitor_info  = 0;
00384 
00385         <span class="comment">//------ seaport options -------//</span>
00386 
00387         consumer_seaport_num   = 1;
00388         industrial_seaport_num = 1;
00389         constant_import        = 0;
00390         import_quality         = <a class="code" href="Oconfig_8h.html#a6a2">OPTION_LOW</a>;
00391 
00392         <span class="comment">//-------- City options --------//</span>
00393 
00394         local_competitiveness= <a class="code" href="Oconfig_8h.html#a6a4">OPTION_HIGH</a>;
00395         complex_town_eco     = 1;
00396 
00397         <span class="comment">//------- Random events --------//</span>
00398 
00399         random_event_frequency = RANDOM_EVENT_FREQ_MODERATE;
00400     }
00401 
00402     <span class="comment">//--------- Hardest ------------//</span>
00403 
00404     <span class="keywordflow">if</span>( diffLevel==5 ) {
00405         <span class="comment">//---- competitors options -----//</span>
00406 
00407         competitor_num        = 10;
00408         average_ai_character  = PERSON_VERY_AGGRESSIVE;
00409         competitor_capital    = OPTION_EXTREMELY_HIGH;
00410         competitor_skill      = AI_SKILL_HIGH;
00411         show_competitor_info  = 0;
00412 
00413         <span class="comment">//------ seaport options -------//</span>
00414 
00415         consumer_seaport_num   = 0;
00416         industrial_seaport_num = 0;
00417         constant_import        = 0;
00418         import_quality         = <a class="code" href="Oconfig_8h.html#a6a2">OPTION_LOW</a>;
00419 
00420         <span class="comment">//-------- City options --------//</span>
00421 
00422         local_competitiveness= <a class="code" href="Oconfig_8h.html#a6a4">OPTION_HIGH</a>;
00423         complex_town_eco     = 1;
00424 
00425         <span class="comment">//------- Random events --------//</span>
00426 
00427         random_event_frequency = RANDOM_EVENT_FREQ_HIGH;
00428     }
00429 
00430     <span class="comment">//------- calculate difficulty rating --------//</span>
00431 
00432     calc_difficulty_rating(0);                      <span class="comment">// don't refresh</span>
00433 }
00434 
00435 <span class="comment">//------- End of function Game::set_difficulty_level ------//</span>
00436 
00437 <span class="comment">//--------- Begin of function Game::calc_difficulty_rating --------//</span>
00482 <span class="comment">void Game::calc_difficulty_rating(int refreshFlag) {</span>
00483     <span class="keywordtype">int</span> oldRating = difficulty_rating;
00484 
00485     <span class="comment">//-------- calc competitiveness rating ---------//</span>
00486 
00487     <span class="keywordtype">int</span> competitivenessRating = 15 + competitor_capital * 11 +
00488         !show_competitor_info * 15;
00489 
00490     <span class="keywordflow">if</span>( average_ai_character &lt; PERSON_CHARACTER_TYPE )
00491         competitivenessRating += average_ai_character * 5;
00492     <span class="keywordflow">else</span>
00493         competitivenessRating += 7;
00494 
00495     <span class="keywordflow">if</span>( competitor_skill == AI_SKILL_PREDEFINED )
00496         competitivenessRating += 40;
00497 
00498     <span class="keywordflow">else</span> <span class="keywordflow">if</span>( competitor_skill &gt;= AI_SKILL_LOW )
00499         competitivenessRating += (competitor_skill-AI_SKILL_LOW+1)*20;
00500 
00501     <span class="comment">//-------------- calc import rating ------------//</span>
00502 
00503     <span class="keywordtype">int</span> importRating;
00504     <span class="keywordtype">int</span> seaportNum=consumer_seaport_num + industrial_seaport_num;
00505 
00506     <span class="keywordflow">if</span>( seaportNum &gt; 0 ) {
00507         importRating = 10 + !constant_import * 10 + (2-import_quality) * 5;
00508         <span class="comment">// minimum one industrial seaport</span>
00509         importRating = importRating * (20-seaportNum) / 20;
00510     }
00511     <span class="keywordflow">else</span>
00512         importRating = 30;
00513 
00514     difficulty_rating = 1 + competitivenessRating * competitor_num / 10 +
00515         importRating + local_competitiveness * 10 +
00516         random_event_frequency * 4;
00517 
00518     <span class="comment">// translate the number from a maximum of 242 to a maximum of 200</span>
00519     difficulty_rating = difficulty_rating * 200 / 212;
00520 
00521     difficulty_rating = max( 1, difficulty_rating );
00522 
00523     <span class="comment">//--- if the player overrides the settings, set it to "Custom" difficulty ---//</span>
00524 
00525     <span class="keywordflow">if</span>( refreshFlag &amp;&amp; difficulty_rating != oldRating ) {
00526         difficulty_level = LEVEL_CUSTOM;              <span class="comment">// custom difficulty level</span>
00527 
00528         button_difficulty.<a class="code" href="classButtonGroup.html#a5">push</a>(difficulty_level);
00529 
00530         vga.tile( diff_rating_x, diff_rating_y, diff_rating_x+100, diff_rating_y+28, <span class="stringliteral">"T_GAMGEN"</span> );
00531 
00532         font_mid.put( diff_rating_x, diff_rating_y, m.format(difficulty_rating, 3) );
00533     }
00534 }
00535 
00536 <span class="comment">//----------- End of function Game::calc_difficulty_rating ---------//</span>
00537 
00538 <span class="comment">//--------- Begin of function Game::gen_opt_competitor --------//</span>
00542 <span class="comment">void Game::gen_opt_competitor(int x1, int y1, int x2, int y2) {</span>
00543     vga.d3_panel_down(x1, y1, x2, y2, 2, 1, <span class="stringliteral">"T_GAMGEN"</span>);
00544 
00545     font_std.d3_put( x1+2, y1+2, x2-2, y1+18, <span class="stringliteral">"Competitors"</span> );
00546 
00547     <span class="comment">//------- No. of Competitors in the Game -------//</span>
00548 
00549     <span class="keywordtype">int</span> x=x1+4;
00550     <span class="keywordtype">int</span> xm=x+<a class="code" href="OGEN__INS_8CPP.html#a0">FLD_DES_WIDTH</a>+3;
00551     <span class="keywordtype">int</span> y=y1+24;
00552 
00553     <span class="comment">// -1 is GroupMisc</span>
00554     <span class="keywordtype">int</span> maxAiGroup = min( MAX_GROUP-expected_player_num-1, MAX_AI_GROUP );
00555 
00556     <span class="keywordflow">if</span>( !multiplayer_game )
00557         maxAiGroup = MAX_AI_GROUP;
00558 
00559     <span class="comment">// -2 is the Government Group and Player Group</span>
00560     spinner_competitor.create( x, y, <span class="stringliteral">"No. of Competitors"</span>, x+<a class="code" href="OGEN__INS_8CPP.html#a0">FLD_DES_WIDTH</a>, &amp;competitor_num, 1, 0, maxAiGroup );
00561 
00562     y+=19;
00563     vga.separator( x1, y, x2, y+1 );
00564     y+=6;
00565 
00566     <span class="comment">//------- Average Competitor Character ---------//</span>
00567 
00568     font_san.put_field( x, y, <span class="stringliteral">"Competitor Character"</span>, x+<a class="code" href="OGEN__INS_8CPP.html#a0">FLD_DES_WIDTH</a>, <span class="stringliteral">""</span> );
00569 
00570     button_character[0].create_text( xm    , y-2 , <span class="stringliteral">"Conservative"</span>   , 0 );
00571     button_character[1].create_text( xm+72 , y-2 , <span class="stringliteral">"Moderate"</span>       , 0 );
00572     button_character[2].create_text( xm+132, y-2 , <span class="stringliteral">"Aggressive"</span>     , 0 );
00573     button_character[3].create_text( xm+200, y-2 , <span class="stringliteral">"Very Aggressive"</span>, 0 );
00574 
00575     y+=19;
00576 
00577     button_character[4].create_text( xm    , y-2 , <span class="stringliteral">"Pre-defined"</span>    , 0 );
00578     button_character[5].create_text( xm+72 , y-2 , <span class="stringliteral">"Random"</span>         , 0 );
00579     button_character[6].create_text( xm+132, y-2 , <span class="stringliteral">"Even"</span>           , 0 );
00580 
00581     button_character.<a class="code" href="classButtonGroup.html#a3">paint</a>(average_ai_character);
00582 
00583     y+=21;
00584 
00585     <span class="comment">//--------- Competitors Capital --------//</span>
00586 
00587     font_san.put_field( x, y, <span class="stringliteral">"Competitor Capital"</span>, x+<a class="code" href="OGEN__INS_8CPP.html#a0">FLD_DES_WIDTH</a>, <span class="stringliteral">""</span> );
00588 
00589     button_capital[0].create_text( xm    , y-2, <span class="stringliteral">"Low"</span>      , 0 );
00590     button_capital[1].create_text( xm+37 , y-2, <span class="stringliteral">"Moderate"</span> , 0 );
00591     button_capital[2].create_text( xm+97 , y-2, <span class="stringliteral">"High"</span>     , 0 );
00592     button_capital[3].create_text( xm+137, y-2, <span class="stringliteral">"Very High"</span>, 0 );
00593     button_capital[4].create_text( xm+200, y-2, <span class="stringliteral">"Extremely High"</span>, 0 );
00594     button_capital.<a class="code" href="classButtonGroup.html#a3">paint</a>(competitor_capital);
00595 
00596     y+=21;
00597 
00598     <span class="comment">//--------- Competitor Expertise ----------//</span>
00599 
00600     font_san.put_field( x, y, <span class="stringliteral">"Competitor Expertise Level"</span>, x+<a class="code" href="OGEN__INS_8CPP.html#a0">FLD_DES_WIDTH</a>, <span class="stringliteral">""</span> );
00601 
00602     button_skill[0].create_text( xm    , y-2, <span class="stringliteral">"None"</span>       , 0 );
00603     button_skill[1].create_text( xm+42 , y-2, <span class="stringliteral">"Pre-defined"</span>, 0 );
00604     button_skill[2].create_text( xm+110, y-2, <span class="stringliteral">"Low"</span>        , 0 );
00605     button_skill[3].create_text( xm+147, y-2, <span class="stringliteral">"Moderate"</span>   , 0 );
00606     button_skill[4].create_text( xm+208, y-2, <span class="stringliteral">"High"</span>       , 0 );
00607     button_skill.<a class="code" href="classButtonGroup.html#a3">paint</a>(competitor_skill);
00608 
00609     y+=21;
00610 
00611     <span class="comment">//----------- Show Competitor Information ----------//</span>
00612 
00613     put_yes_no_option( x, y, <span class="stringliteral">"Show Competitor Trade Secrets"</span>, button_show, show_competitor_info );
00614 
00615     y+=21;
00616 
00617     <span class="comment">//----------- Random Competitor Personality -----------//</span>
00618 
00619     put_yes_no_option( x, y, <span class="stringliteral">"Random Competitor Personality"</span>, button_random_pref, random_person_pref );
00620 
00621     y+=21;
00622 
00623     <span class="comment">//----------- Random Competitor Strategy -----------//</span>
00624 
00625     put_yes_no_option( x, y, <span class="stringliteral">"Random Competitor Strategy"</span>, button_ai_type, random_ai_type );
00626 
00627     y+=21;
00628 }
00629 
00630 <span class="comment">//----------- End of function Game::gen_opt_competitor ---------//</span>
00631 
00632 <span class="comment">//--------- Begin of function Game::gen_ai_type --------//</span>
00636 <span class="comment">void Game::gen_ai_type(int x1, int y1, int x2, int y2) {</span>
00637     vga.d3_panel_down(x1, y1, x2, y2, 2, 1, <span class="stringliteral">"T_GAMGEN"</span>);
00638 
00639     font_std.d3_put( x1+2, y1+2, x2-2, y1+18, <span class="stringliteral">"Competitor Strategies"</span> );
00640 
00641     <span class="comment">//------ No. of Cities in the beginning -------//</span>
00642 
00643     <span class="keywordtype">int</span>    i, x=x1+4, y=y1+24;
00644     <a class="code" href="classString.html">String</a> str;
00645 
00646     <span class="keywordflow">for</span>( i=0 ; i&lt;TOTAL_AI_TYPE ; i++, y+=15 ) {
00647         str  = <span class="stringliteral">"Max No. of "</span>;
00648         str += GroupAI::ai_type_str_array[i];
00649         str += <span class="stringliteral">" Competitors"</span>;
00650 
00651         spinner_ai_type[i].create( x, y, str, x+246, ai_type_num_array+i, 1, 0, MAX_AI_GROUP );
00652     }
00653 
00654     <span class="comment">//----------- Allow change AI type ---------------//</span>
00655 
00656     y+=6;
00657 
00658     put_yes_no_option( x, y, <span class="stringliteral">"Enable Competitors Change Strategies"</span>, button_change_ai_type, allow_change_ai_type );
00659 
00660     y+=19;
00661     vga.separator( x1, y, x2, y+1 );
00662 }
00663 
00664 <span class="comment">//----------- End of function Game::gen_ai_type ---------//</span>
00665 
00666 <span class="comment">//--------- Begin of function Game::gen_ai_type_detect --------//</span>
00668 <span class="comment">void Game::gen_ai_type_detect() {</span>
00669     <span class="comment">//-------- AI type spinners ---------//</span>
00670 
00671     <span class="keywordflow">if</span>( game_design_mode ) {
00672         <span class="keywordtype">int</span> i;
00673 
00674         <span class="keywordflow">for</span>( i=0 ; i&lt;TOTAL_AI_TYPE ; i++ )
00675             spinner_ai_type[i].<a class="code" href="classSpinner.html#a6">detect</a>();
00676 
00677         <span class="keywordflow">if</span>( button_change_ai_type.<a class="code" href="classButtonGroup.html#a4">detect</a>() &gt;= 0 )
00678             allow_change_ai_type = button_change_ai_type.<a class="code" href="classButtonGroup.html#m1">button_pressed</a>;
00679     }
00680 }
00681 
00682 <span class="comment">//----------- End of function Game::gen_ai_type_detect ---------//</span>
00683 
00684 <span class="comment">//...........................................................//</span>
00685 
00686 <span class="comment">//--------- Begin of function Game::gen_opt_city --------//</span>
00690 <span class="comment">void Game::gen_opt_city(int x1, int y1, int x2, int y2) {</span>
00691     vga.d3_panel_down(x1, y1, x2, y2, 2, 1, <span class="stringliteral">"T_GAMGEN"</span>);
00692 
00693     font_std.d3_put( x1+2, y1+2, x2-2, y1+18, <span class="stringliteral">"Cities"</span> );
00694 
00695     <span class="comment">//------ No. of Cities in the beginning -------//</span>
00696 
00697     <span class="keywordtype">int</span> x=x1+4;
00698     <span class="keywordtype">int</span> y=y1+24;
00699 
00700     <span class="comment">// map_town_array is the no. of custom towns, the max. no. of cities cannot be less than it</span>
00701     spinner_town.create( x, y, <span class="stringliteral">"No. of Cities at the Beginning"</span>, x+<a class="code" href="OGEN__INS_8CPP.html#a0">FLD_DES_WIDTH</a>, &amp;init_town_num, 1, max(1,world.map_town_array.size()), MAX_TOWN );
00702 
00703     <span class="comment">//----------- New Cities Emerge During the Game ----------//</span>
00704 
00705     y+=21;
00706     put_yes_no_option( x, y, <span class="stringliteral">"New Cities Emerge During the Game"</span>, button_town_emerge, new_town_emerge );
00707     <span class="comment">/*</span>
00708 <span class="comment">      //------------ Complex City Economy ----------//</span>
00709 <span class="comment"></span>
00710 <span class="comment">      y+=21;</span>
00711 <span class="comment">      put_yes_no_option( x, y, "Complex City Economy", button_complex_eco, complex_town_eco );</span>
00712 <span class="comment">    */</span>
00713     <span class="comment">//--------- Local Competitors Strength --------//</span>
00714 
00715     y+=21;
00716     font_san.put_field( x, y, <span class="stringliteral">"Competence of Local Competitors"</span>, x+<a class="code" href="OGEN__INS_8CPP.html#a0">FLD_DES_WIDTH</a>, <span class="stringliteral">""</span> );
00717 
00718     x+=<a class="code" href="OGEN__INS_8CPP.html#a0">FLD_DES_WIDTH</a>+3;
00719     button_local[0].create_text( x   , y-2, <span class="stringliteral">"Low"</span>     , 0 );
00720     button_local[1].create_text( x+37, y-2, <span class="stringliteral">"Moderate"</span>, 0 );
00721     button_local[2].create_text( x+97, y-2, <span class="stringliteral">"High"</span>    , 0 );
00722     button_local.<a class="code" href="classButtonGroup.html#a3">paint</a>(local_competitiveness);
00723 }
00724 
00725 <span class="comment">//----------- End of function Game::gen_opt_city ---------//</span>
00726 
00727 <span class="comment">//--------- Begin of function Game::gen_opt_seaport --------//</span>
00731 <span class="comment">void Game::gen_opt_seaport(int x1, int y1, int x2, int y2) {</span>
00732     vga.d3_panel_down(x1, y1, x2, y2, 2, 1, <span class="stringliteral">"T_GAMGEN"</span>);
00733 
00734     font_std.d3_put( x1+2, y1+2, x2-2, y1+18, <span class="stringliteral">"Imports"</span> );
00735 
00736     <span class="comment">//------- No. of Seaport Importing Consumer Goods -------//</span>
00737 
00738     <span class="keywordtype">int</span> x=x1+4;
00739     <span class="keywordtype">int</span> y=y1+24;
00740 
00741     spinner_seaport1.create( x, y, <span class="stringliteral">"No. of Seaports Importing Consumer Goods"</span>, x+<a class="code" href="OGEN__INS_8CPP.html#a0">FLD_DES_WIDTH</a>, &amp;consumer_seaport_num, 1, 0, <a class="code" href="OGEN__INS_8CPP.html#a1">MAX_SEAPORT</a> );
00742 
00743     <span class="comment">//------- No. of Seaport Importing Industrial Goods -------//</span>
00744 
00745     y+=21;
00746 
00747     <span class="comment">// minimum one industrial seaport</span>
00748     spinner_seaport2.create( x, y, <span class="stringliteral">"No. of Seaports Importing Industrial Goods"</span>, x+<a class="code" href="OGEN__INS_8CPP.html#a0">FLD_DES_WIDTH</a>, &amp;industrial_seaport_num, 1, 0, <a class="code" href="OGEN__INS_8CPP.html#a1">MAX_SEAPORT</a> );
00749 
00750     <span class="comment">//----------- Seaport Emerge ----------//</span>
00751 
00752     y+=21;
00753 
00754     put_yes_no_option( x, y, <span class="stringliteral">"New Seaports Emerge During the Game"</span>, button_seaport_emerge, new_seaport_emerge );
00755 
00756     <span class="comment">//----------- Dynamic seaport ----------//</span>
00757 
00758     y+=21;
00759 
00760     put_yes_no_option( x, y, <span class="stringliteral">"Constant Import Supply"</span>, button_constant, constant_import );
00761 
00762     <span class="comment">//----------- Quality of Imported Products ----------//</span>
00763 
00764     y+=21;
00765 
00766     font_san.put_field( x, y, <span class="stringliteral">"Import Quality"</span>, x+<a class="code" href="OGEN__INS_8CPP.html#a0">FLD_DES_WIDTH</a>, <span class="stringliteral">""</span> );
00767 
00768     x+=<a class="code" href="OGEN__INS_8CPP.html#a0">FLD_DES_WIDTH</a>+3;
00769     button_quality[0].create_text( x   , y-2, <span class="stringliteral">"Low"</span>     , 0 );
00770     button_quality[1].create_text( x+37, y-2, <span class="stringliteral">"Moderate"</span>, 0 );
00771     button_quality[2].create_text( x+97, y-2, <span class="stringliteral">"High"</span>    , 0 );
00772     button_quality.<a class="code" href="classButtonGroup.html#a3">paint</a>(import_quality);
00773 
00774     y+=19;
00775     vga.separator( x1, y, x2, y+1 );
00776 }
00777 
00778 <span class="comment">//----------- End of function Game::gen_opt_seaport ---------//</span>
00779 
00780 <span class="comment">//--------- Begin of function Game::gen_opt_stock --------//</span>
00784 <span class="comment">void Game::gen_opt_stock(int x1, int y1, int x2, int y2) {</span>
00785     vga.d3_panel_down(x1, y1, x2, y2, 2, 1, <span class="stringliteral">"T_GAMGEN"</span>);
00786 
00787     font_std.d3_put( x1+2, y1+2, x2-2, y1+18, <span class="stringliteral">"Stock Market"</span> );
00788 
00789     <span class="comment">//------ Whether the game has stock market or not -------//</span>
00790 
00791     <span class="keywordtype">int</span> x=x1+4;
00792     <span class="keywordtype">int</span> y=y1+24;
00793 
00794     <span class="comment">//ERD</span>
00795     <span class="keywordflow">if</span>(!multiplayer_game)                           <span class="comment">// don't allow stock investment if multiplayer enabled.</span>
00796         put_yes_no_option( x, y, <span class="stringliteral">"Allow Stock Investment"</span>, button_stock_enable, stock_enable );
00797     <span class="keywordflow">else</span>
00798         font_san.put( x, y, <span class="stringliteral">"The stock market is disabled in multiplayer games."</span> );
00799     <span class="comment">//ERD</span>
00800 }
00801 
00802 <span class="comment">//----------- End of function Game::gen_opt_stock ---------//</span>
00803 
00804 <span class="comment">//--------- Begin of function Game::gen_opt_event --------//</span>
00808 <span class="comment">void Game::gen_opt_event(int x1, int y1, int x2, int y2) {</span>
00809     vga.d3_panel_down(x1, y1, x2, y2, 2, 1, <span class="stringliteral">"T_GAMGEN"</span>);
00810 
00811     font_std.d3_put( x1+2, y1+2, x2-2, y1+18, <span class="stringliteral">"Random Events"</span> );
00812 
00813     <span class="comment">//------ Whether the game has disaster or not -------//</span>
00814 
00815     <span class="keywordtype">int</span> x=x1+4;
00816     <span class="keywordtype">int</span> y=y1+24;
00817     <span class="keywordtype">int</span> xm=x+<a class="code" href="OGEN__INS_8CPP.html#a0">FLD_DES_WIDTH</a>+3;
00818 
00819     font_san.put_field( x, y, <span class="stringliteral">"Random Event Frequency"</span>, x+<a class="code" href="OGEN__INS_8CPP.html#a0">FLD_DES_WIDTH</a>, <span class="stringliteral">""</span> );
00820 
00821     button_event[0].create_text( xm    , y-2, <span class="stringliteral">"None"</span>     , 0 );
00822     button_event[1].create_text( xm+40 , y-2, <span class="stringliteral">"Low"</span>      , 0 );
00823     button_event[2].create_text( xm+77 , y-2, <span class="stringliteral">"Moderate"</span> , 0 );
00824     button_event[3].create_text( xm+137, y-2, <span class="stringliteral">"High"</span>     , 0 );
00825     button_event.<a class="code" href="classButtonGroup.html#a3">paint</a>(random_event_frequency);
00826 }
00827 
00828 <span class="comment">//----------- End of function Game::gen_opt_event ---------//</span>
00829 
00830 <span class="comment">//........................................................//</span>
00831 
00832 <span class="comment">//------- Begin of static function put_yes_no_option -------//</span>
00833 
00834 <span class="keyword">static</span> <span class="keywordtype">void</span> put_yes_no_option(<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">char</span>* optionDes,
00835                               <a class="code" href="classButtonGroup.html">ButtonGroup</a>&amp; buttonGroup, <span class="keywordtype">int</span> defaultButton) {
00836     font_san.put_field( x, y, optionDes, x+<a class="code" href="OGEN__INS_8CPP.html#a0">FLD_DES_WIDTH</a>, <span class="stringliteral">""</span> );
00837 
00838     x+=<a class="code" href="OGEN__INS_8CPP.html#a0">FLD_DES_WIDTH</a>+3;
00839     buttonGroup[1].create_text( x    , y-2, <span class="stringliteral">"Yes"</span>, 0 );
00840     buttonGroup[0].create_text( x+35 , y-2, <span class="stringliteral">"No"</span> , 0 );
00841     buttonGroup.<a class="code" href="classButtonGroup.html#a3">paint</a>(defaultButton);
00842 }
00843 
00844 <span class="comment">//-------- End of static function put_yes_no_option -------//</span>
</pre></div><hr><address style="align: right;"><small>Generated on Fri Aug 23 01:37:44 2002 for VirtualU by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.17 </small></address>
</body>
</html>
