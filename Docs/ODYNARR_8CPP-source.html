<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>ODYNARR.CPP Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.17 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>ODYNARR.CPP</h1><a href="ODYNARR_8CPP.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">//Filename    :: ODYNARR.CPP</span>
00002 <span class="comment">//Description :: Dynamic Array object</span>
00003 
00004 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
00005 <span class="preprocessor">#include &lt;string.h&gt;</span>
00006 
00007 <span class="preprocessor">#include &lt;<a class="code" href="ODYNARR_8H.html">ODYNARR.H</a>&gt;</span>
00008 <span class="preprocessor">#include &lt;<a class="code" href="OFILE_8H.html">OFILE.H</a>&gt;</span>
00009 <span class="preprocessor">#include &lt;OMISC.H&gt;</span>
00010 
00011 <span class="comment">//--------- BEGIN OF FUNCTION DynArray Constructor -------//</span>
00012 <span class="comment">//</span>
00013 <span class="comment">// &lt;int&gt; eleSize  = size of each element</span>
00014 <span class="comment">// [int] blockNum = number of entity of each block of element</span>
00015 <span class="comment">//                       increased ( default : 30 )</span>
00016 
<a name="l00017"></a><a class="code" href="classDynArray.html#a0">00017</a> <a class="code" href="classDynArray.html#a0">DynArray::DynArray</a>(<span class="keywordtype">int</span> eleSize,<span class="keywordtype">int</span> blockNum) {
00018     <a class="code" href="classDynArray.html#m4">ele_size</a>  = eleSize;
00019     <a class="code" href="classDynArray.html#m1">block_num</a> = blockNum;
00020 
00021     <a class="code" href="classDynArray.html#m7">body_buf</a> = <a class="code" href="ALL_8H.html#a5">mem_add</a>( <a class="code" href="classDynArray.html#m4">ele_size</a>*<a class="code" href="classDynArray.html#m1">block_num</a> );
00022 
00023     <a class="code" href="classDynArray.html#m2">cur_pos</a>=0;
00024     <a class="code" href="classDynArray.html#m3">last_ele</a>=0;
00025     <a class="code" href="classDynArray.html#m0">ele_num</a>= <a class="code" href="classDynArray.html#m1">block_num</a>;
00026 
00027     <a class="code" href="classDynArray.html#m5">sort_offset</a> = -1;
00028 }
00029 
00030 <span class="comment">//----------- END OF FUNCTION DynArray Constructor -----//</span>
00031 
00032 <span class="comment">//--------- BEGIN OF FUNCTION DynArray Destructor ------//</span>
00033 
<a name="l00034"></a><a class="code" href="classDynArray.html#a1">00034</a> <a class="code" href="classDynArray.html#a1">DynArray::~DynArray</a>() {
00035     <a class="code" href="classDynArray.html#a2">deinit</a>();
00036 }
00037 
00038 <span class="comment">//---------- END OF FUNCTION DynArray Destructor --------//</span>
00039 
00040 <span class="comment">//--------- BEGIN OF FUNCTION DynArray::deinit ------//</span>
00041 
<a name="l00042"></a><a class="code" href="classDynArray.html#a2">00042</a> <span class="keywordtype">void</span> <a class="code" href="classDynArray.html#a2">DynArray::deinit</a>() {
00043     <span class="keywordflow">if</span>( body_buf ) {
00044         <a class="code" href="ALL_8H.html#a8">mem_del</a>( <a class="code" href="classDynArray.html#m7">body_buf</a> );
00045         <a class="code" href="classDynArray.html#m7">body_buf</a> = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00046     }
00047 }
00048 
00049 <span class="comment">//---------- END OF FUNCTION DynArray::deinit --------//</span>
00050 
00051 <span class="comment">//--------- BEGIN OF FUNCTION DynArray::resize ---------//</span>
00052 <span class="comment">//</span>
00053 <span class="comment">// change the size of the storage block - this will always be an increase</span>
00054 <span class="comment">//</span>
<a name="l00055"></a><a class="code" href="classDynArray.html#a3">00055</a> <span class="keywordtype">void</span> <a class="code" href="classDynArray.html#a3">DynArray::resize</a>( <span class="keywordtype">int</span> newNum ) {
00056     <span class="comment">//-------------------------------------------------------//</span>
00057     <span class="comment">//</span>
00058     <span class="comment">// The Mem::resize() and realloc() may not function properly in</span>
00059     <span class="comment">// some case when the memory block has a considerable size.</span>
00060     <span class="comment">//</span>
00061     <span class="comment">// Calling function resize_keep_data will do additional effort</span>
00062     <span class="comment">// to preserve the original data.</span>
00063     <span class="comment">//</span>
00064     <span class="comment">//-------------------------------------------------------//</span>
00065 
00066     <span class="comment">// give both the original data size and the new data size</span>
00067     <a class="code" href="classDynArray.html#m7">body_buf</a> = <a class="code" href="ALL_8H.html#a7">mem_resize</a>( <a class="code" href="classDynArray.html#m7">body_buf</a>, newNum*<a class="code" href="classDynArray.html#m4">ele_size</a> );
00068 
00069     <a class="code" href="classDynArray.html#m0">ele_num</a> = newNum;
00070 }
00071 
00072 <span class="comment">//--------- END OF FUNCTION DynArray::resize -----------//</span>
00073 
00074 <span class="comment">//--------- BEGIN OF FUNCTION DynArray::zap ---------//</span>
00075 <span class="comment">//</span>
00076 <span class="comment">// Zap the whole dynamic array, clear all elements</span>
00077 <span class="comment">//</span>
00078 <span class="comment">// [int] resizeFlag - whether resize the array to its initial size</span>
00079 <span class="comment">//                                                       or keep its current size.</span>
00080 <span class="comment">//                                                       (default:1)</span>
00081 <span class="comment">//</span>
<a name="l00082"></a><a class="code" href="classDynArray.html#a38">00082</a> <span class="keywordtype">void</span> <a class="code" href="classDynArray.html#a38">DynArray::zap</a>(<span class="keywordtype">int</span> resizeFlag) {
00083     <span class="keywordflow">if</span>( resizeFlag ) {
00084         <span class="keywordflow">if</span>( <a class="code" href="classDynArray.html#m0">ele_num</a> != <a class="code" href="classDynArray.html#m1">block_num</a> ) {                  <span class="comment">// if the current record no. is already block_num, no resizing needed</span>
00085             <a class="code" href="classDynArray.html#m0">ele_num</a>  = <a class="code" href="classDynArray.html#m1">block_num</a>;
00086             <a class="code" href="classDynArray.html#m7">body_buf</a> = <a class="code" href="ALL_8H.html#a7">mem_resize</a>(<a class="code" href="classDynArray.html#m7">body_buf</a>, <a class="code" href="classDynArray.html#m4">ele_size</a>*<a class="code" href="classDynArray.html#m0">ele_num</a> );
00087         }
00088     }
00089 
00090     <a class="code" href="classDynArray.html#m2">cur_pos</a>=0;
00091     <a class="code" href="classDynArray.html#m3">last_ele</a>=0;
00092 }
00093 
00094 <span class="comment">//--------- END OF FUNCTION DynArray::zap -----------//</span>
00095 
00096 <span class="comment">//---------- BEGIN OF FUNCTION DynArray::linkin -----------//</span>
00097 <span class="comment">//</span>
00098 <span class="comment">// Link a record at the END of the array</span>
00099 <span class="comment">//</span>
00100 <span class="comment">// WARNING : After calling linkin() all pointers to the linklist body</span>
00101 <span class="comment">//           should be updated, because mem_resize() will move the body memory</span>
00102 <span class="comment">//</span>
<a name="l00103"></a><a class="code" href="classDynArray.html#a4">00103</a> <span class="keywordtype">void</span> <a class="code" href="classDynArray.html#a4">DynArray::linkin</a>(<span class="keywordtype">void</span>* ent) {
00104     <a class="code" href="classDynArray.html#m3">last_ele</a>++;
00105     <a class="code" href="classDynArray.html#m2">cur_pos</a>=<a class="code" href="classDynArray.html#m3">last_ele</a>;
00106 
00107     <span class="keywordflow">if</span> ( <a class="code" href="classDynArray.html#m3">last_ele</a> &gt; <a class="code" href="classDynArray.html#m0">ele_num</a> )                       <span class="comment">// not enough empty element left to hold the new entity</span>
00108         <a class="code" href="classDynArray.html#a3">resize</a>( <a class="code" href="classDynArray.html#m0">ele_num</a> + <a class="code" href="classDynArray.html#m1">block_num</a> );
00109 
00110     <span class="keywordflow">if</span> ( ent )
00111         memcpy(<a class="code" href="classDynArray.html#m7">body_buf</a>+(<a class="code" href="classDynArray.html#m2">cur_pos</a>-1)*<a class="code" href="classDynArray.html#m4">ele_size</a>, ent, <a class="code" href="classDynArray.html#m4">ele_size</a> );
00112     <span class="keywordflow">else</span>
00113         *(<a class="code" href="classDynArray.html#m7">body_buf</a>+(<a class="code" href="classDynArray.html#m2">cur_pos</a>-1)*<a class="code" href="classDynArray.html#m4">ele_size</a>) = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00114 }
00115 
00116 <span class="comment">//---------- END OF FUNCTION DynArray::linkin ------------//</span>
00117 
00118 <span class="comment">//---------- BEGIN OF FUNCTION DynArray::linkin_unique -----------//</span>
00119 <span class="comment">//</span>
00120 <span class="comment">// Linkin - unique mode. If duplicated, don't link into the array.</span>
00121 <span class="comment">//</span>
<a name="l00122"></a><a class="code" href="classDynArray.html#a5">00122</a> <span class="keywordtype">void</span> <a class="code" href="classDynArray.html#a5">DynArray::linkin_unique</a>(<span class="keywordtype">void</span>* ent) {
00123     <span class="keywordtype">int</span> i;
00124 
00125     <span class="keywordflow">for</span>( i=0 ; i&lt;<a class="code" href="classDynArray.html#m3">last_ele</a> ; i++ ) {
00126         <span class="keywordflow">if</span>( memcmp( <a class="code" href="classDynArray.html#m7">body_buf</a>+i*<a class="code" href="classDynArray.html#m4">ele_size</a>, ent, <a class="code" href="classDynArray.html#m4">ele_size</a> )==0 )
00127             <span class="keywordflow">return</span>;
00128     }
00129 
00130     <a class="code" href="classDynArray.html#a4">linkin</a>(ent);
00131 }
00132 
00133 <span class="comment">//---------- END OF FUNCTION DynArray::linkin_unique ------------//</span>
00134 
00135 <span class="comment">//---------- BEGIN OF FUNCTION DynArray::insert -----------//</span>
00136 <span class="comment">//</span>
00137 <span class="comment">// Link into the position BEFORE the current one</span>
00138 <span class="comment">//</span>
00139 <span class="comment">// Warning : DynArrayB (version B) can't use this function</span>
00140 <span class="comment">//</span>
<a name="l00141"></a><a class="code" href="classDynArray.html#a8">00141</a> <span class="keywordtype">void</span> <a class="code" href="classDynArray.html#a8">DynArray::insert</a>(<span class="keywordtype">void</span>* ent) {
00142     <span class="keywordflow">if</span>( <a class="code" href="classDynArray.html#a28">size</a>()==0 ) {
00143         <a class="code" href="classDynArray.html#a4">linkin</a>(ent);
00144         <span class="keywordflow">return</span>;
00145     }
00146 
00147     <a class="code" href="classDynArray.html#m3">last_ele</a>++;
00148 
00149     <span class="keywordflow">if</span> ( <a class="code" href="classDynArray.html#m3">last_ele</a> &gt; <a class="code" href="classDynArray.html#m0">ele_num</a> )                       <span class="comment">// not enough empty element left to hold the new entity</span>
00150         <a class="code" href="classDynArray.html#a3">resize</a>( <a class="code" href="classDynArray.html#m0">ele_num</a> + <a class="code" href="classDynArray.html#m1">block_num</a> );
00151 
00152     memmove( <a class="code" href="classDynArray.html#m7">body_buf</a>+<a class="code" href="classDynArray.html#m2">cur_pos</a>*<a class="code" href="classDynArray.html#m4">ele_size</a>,<a class="code" href="classDynArray.html#m7">body_buf</a>+(<a class="code" href="classDynArray.html#m2">cur_pos</a>-1)*<a class="code" href="classDynArray.html#m4">ele_size</a>, (<a class="code" href="classDynArray.html#m3">last_ele</a>-<a class="code" href="classDynArray.html#m2">cur_pos</a>)*<a class="code" href="classDynArray.html#m4">ele_size</a> );
00153 
00154     <span class="keywordflow">if</span> ( ent )
00155         memcpy(<a class="code" href="classDynArray.html#m7">body_buf</a>+(<a class="code" href="classDynArray.html#m2">cur_pos</a>-1)*<a class="code" href="classDynArray.html#m4">ele_size</a>, ent, <a class="code" href="classDynArray.html#m4">ele_size</a> );
00156     <span class="keywordflow">else</span>
00157         *(<a class="code" href="classDynArray.html#m7">body_buf</a>+(<a class="code" href="classDynArray.html#m2">cur_pos</a>-1)*<a class="code" href="classDynArray.html#m4">ele_size</a>) = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00158 }
00159 
00160 <span class="comment">//---------- END OF FUNCTION DynArray::insert ------------//</span>
00161 
00162 <span class="comment">//---------- BEGIN OF FUNCTION DynArray::insert_at -----------//</span>
00163 <span class="comment">//</span>
00164 <span class="comment">// Link into the position BEFORE the current one</span>
00165 <span class="comment">//</span>
00166 <span class="comment">// Warning : DynArrayB (version B) can't use this function</span>
00167 <span class="comment">//</span>
00168 <span class="comment">// &lt;int&gt;   insertPos - the recno to insert the new entity.</span>
00169 <span class="comment">// &lt;void*&gt; ent             - pointer to the record entity. If NULL, blank record.</span>
00170 <span class="comment">//</span>
<a name="l00171"></a><a class="code" href="classDynArray.html#a9">00171</a> <span class="keywordtype">void</span> <a class="code" href="classDynArray.html#a9">DynArray::insert_at</a>(<span class="keywordtype">int</span> insertPos, <span class="keywordtype">void</span>* ent) {
00172     <span class="keywordflow">if</span>( <a class="code" href="classDynArray.html#a28">size</a>()==0 || insertPos&gt;<a class="code" href="classDynArray.html#m3">last_ele</a> ) {
00173         <a class="code" href="classDynArray.html#a4">linkin</a>(ent);
00174         <span class="keywordflow">return</span>;
00175     }
00176 
00177     <a class="code" href="ALL_8H.html#a0">err_when</a>( insertPos&lt;1 || insertPos &gt; <a class="code" href="classDynArray.html#m3">last_ele</a> );
00178 
00179     <a class="code" href="classDynArray.html#m3">last_ele</a>++;
00180 
00181     <span class="keywordflow">if</span> ( <a class="code" href="classDynArray.html#m3">last_ele</a> &gt; <a class="code" href="classDynArray.html#m0">ele_num</a> )                       <span class="comment">// not enough empty element left to hold the new entity</span>
00182         <a class="code" href="classDynArray.html#a3">resize</a>( <a class="code" href="classDynArray.html#m0">ele_num</a> + <a class="code" href="classDynArray.html#m1">block_num</a> );
00183 
00184     memmove( <a class="code" href="classDynArray.html#m7">body_buf</a>+insertPos*<a class="code" href="classDynArray.html#m4">ele_size</a>, <a class="code" href="classDynArray.html#m7">body_buf</a>+(insertPos-1)*<a class="code" href="classDynArray.html#m4">ele_size</a>, (<a class="code" href="classDynArray.html#m3">last_ele</a>-insertPos)*<a class="code" href="classDynArray.html#m4">ele_size</a> );
00185 
00186     <span class="keywordflow">if</span> ( ent )
00187         memcpy(<a class="code" href="classDynArray.html#m7">body_buf</a>+(insertPos-1)*<a class="code" href="classDynArray.html#m4">ele_size</a>, ent, <a class="code" href="classDynArray.html#m4">ele_size</a> );
00188     <span class="keywordflow">else</span>
00189         *(<a class="code" href="classDynArray.html#m7">body_buf</a>+(insertPos-1)*<a class="code" href="classDynArray.html#m4">ele_size</a>) = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00190 }
00191 
00192 <span class="comment">//---------- END OF FUNCTION DynArray::insert_at ------------//</span>
00193 
00194 <span class="comment">//----------- BEGIN OF FUNCTION DynArray::linkout ---------//</span>
00195 <span class="comment">//</span>
00196 <span class="comment">// Linkout the current object and then point to next object</span>
00197 <span class="comment">//</span>
00198 <span class="comment">// [int] delPos = the position (recno) of the item to be deleted</span>
00199 <span class="comment">//                ( default : recno() current record no. )</span>
00200 <span class="comment">//</span>
<a name="l00201"></a><a class="code" href="classDynArray.html#a6">00201</a> <span class="keywordtype">void</span> <a class="code" href="classDynArray.html#a6">DynArray::linkout</a>(<span class="keywordtype">int</span> delPos) {
00202     <span class="keywordflow">if</span>( delPos &lt; 0 )
00203         delPos = <a class="code" href="classDynArray.html#m2">cur_pos</a>;
00204 
00205     <span class="keywordflow">if</span>( delPos == 0 || delPos &gt; <a class="code" href="classDynArray.html#m3">last_ele</a> )
00206         <span class="keywordflow">return</span>;
00207 
00208     <span class="keywordflow">if</span>( delPos != <a class="code" href="classDynArray.html#m3">last_ele</a> )
00209         memmove( <a class="code" href="classDynArray.html#m7">body_buf</a>+(delPos-1)*<a class="code" href="classDynArray.html#m4">ele_size</a>, <a class="code" href="classDynArray.html#m7">body_buf</a>+delPos*<a class="code" href="classDynArray.html#m4">ele_size</a>, (<a class="code" href="classDynArray.html#m3">last_ele</a>-delPos)*<a class="code" href="classDynArray.html#m4">ele_size</a> );
00210 
00211     <a class="code" href="classDynArray.html#m3">last_ele</a>--;
00212 
00213     <span class="keywordflow">if</span>( <a class="code" href="classDynArray.html#m2">cur_pos</a> &gt; <a class="code" href="classDynArray.html#m3">last_ele</a> )
00214         <a class="code" href="classDynArray.html#m2">cur_pos</a> = <a class="code" href="classDynArray.html#m3">last_ele</a>;
00215 
00216     <span class="keywordflow">if</span> ( <a class="code" href="classDynArray.html#m3">last_ele</a> &lt; <a class="code" href="classDynArray.html#m0">ele_num</a> - <a class="code" href="classDynArray.html#m1">block_num</a>*2 )         <span class="comment">// shrink the size if two empty block of element are left</span>
00217         <a class="code" href="classDynArray.html#a3">resize</a>( <a class="code" href="classDynArray.html#m0">ele_num</a> - <a class="code" href="classDynArray.html#m1">block_num</a> );
00218 }
00219 
00220 <span class="comment">//------------ END OF FUNCTION DynArray::linkout ----------//</span>
00221 
00222 <span class="comment">//---------- BEGIN OF FUNCTION DynArray::update ---------//</span>
00223 <span class="comment">//</span>
00224 <span class="comment">// &lt;void*&gt; bodyPtr = the pointer to the content body</span>
00225 <span class="comment">// [int]   recNo   = no. of the record to be updated</span>
00226 <span class="comment">//                   ( default : current record no. )</span>
00227 <span class="comment">//</span>
<a name="l00228"></a><a class="code" href="classDynArray.html#a7">00228</a> <span class="keywordtype">void</span> <a class="code" href="classDynArray.html#a7">DynArray::update</a>(<span class="keywordtype">void</span>* bodyPtr, <span class="keywordtype">int</span> recNo) {
00229     <span class="keywordflow">if</span>( recNo &lt; 0 )
00230         recNo = <a class="code" href="classDynArray.html#m2">cur_pos</a>;
00231 
00232     <span class="keywordflow">if</span>( recNo &lt;= 0 )
00233         <span class="keywordflow">return</span>;
00234 
00235     <span class="keywordflow">if</span>( bodyPtr )
00236         memcpy(<a class="code" href="classDynArray.html#m7">body_buf</a>+(recNo-1)*<a class="code" href="classDynArray.html#m4">ele_size</a>, bodyPtr, <a class="code" href="classDynArray.html#m4">ele_size</a> );
00237     <span class="keywordflow">else</span>
00238         *(<a class="code" href="classDynArray.html#m7">body_buf</a>+(recNo-1)*<a class="code" href="classDynArray.html#m4">ele_size</a>) = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00239 }
00240 
00241 <span class="comment">//----------- END OF FUNCTION DynArray::update ---------//</span>
00242 
00243 <span class="comment">//---------- BEGIN OF FUNCTION DynArray::add_blank -----------//</span>
00244 <span class="comment">//</span>
00245 <span class="comment">// Add a specified number of blank records at the END of the array</span>
00246 <span class="comment">//</span>
00247 <span class="comment">// &lt;int&gt; blankNum = no. of blank records</span>
00248 <span class="comment">//</span>
<a name="l00249"></a><a class="code" href="classDynArray.html#a10">00249</a> <span class="keywordtype">void</span> <a class="code" href="classDynArray.html#a10">DynArray::add_blank</a>(<span class="keywordtype">int</span> blankNum) {
00250     <a class="code" href="classDynArray.html#m2">cur_pos</a>=<a class="code" href="classDynArray.html#m3">last_ele</a>+1;
00251     <a class="code" href="classDynArray.html#m3">last_ele</a>+=blankNum;
00252 
00253     <span class="keywordflow">if</span> ( <a class="code" href="classDynArray.html#m3">last_ele</a> &gt; <a class="code" href="classDynArray.html#m0">ele_num</a> )                       <span class="comment">// not enough empty element left to hold the new entity</span>
00254         <a class="code" href="classDynArray.html#a3">resize</a>( <a class="code" href="classDynArray.html#m3">last_ele</a>+<a class="code" href="classDynArray.html#m1">block_num</a> );
00255 
00256     memset( <a class="code" href="classDynArray.html#m7">body_buf</a>+(<a class="code" href="classDynArray.html#m2">cur_pos</a>-1)*<a class="code" href="classDynArray.html#m4">ele_size</a>, 0, blankNum*<a class="code" href="classDynArray.html#m4">ele_size</a> );
00257 }
00258 
00259 <span class="comment">//---------- END OF FUNCTION DynArray::add_blank ------------//</span>
00260 
00261 <span class="comment">//------ BEGIN OF FUNCTION DynArray::scan_whole ----------//</span>
00262 <span class="comment">//</span>
00263 <span class="comment">// Description : scan a sorted or unsorted link list for matching</span>
00264 <span class="comment">//               the Whole Structure</span>
00265 <span class="comment">//</span>
00266 <span class="comment">// Syntax      : scan(&lt;void*&gt;)</span>
00267 <span class="comment">//</span>
00268 <span class="comment">// &lt;void*&gt; = pointer to the data structure</span>
00269 <span class="comment">//</span>
00270 <span class="comment">// Return : 0 if not found</span>
00271 <span class="comment">//          if found, return the position found</span>
00272 <span class="comment">//</span>
<a name="l00273"></a><a class="code" href="classDynArray.html#a31">00273</a> <span class="keywordtype">int</span> <a class="code" href="classDynArray.html#a31">DynArray::scan_whole</a>(<span class="keywordtype">void</span>* structPtr) {
00274     <span class="keywordflow">for</span> ( <a class="code" href="classDynArray.html#m2">cur_pos</a>=1 ; <a class="code" href="classDynArray.html#m2">cur_pos</a>&lt;=<a class="code" href="classDynArray.html#m3">last_ele</a> ; <a class="code" href="classDynArray.html#m2">cur_pos</a>++ ) {
00275         <span class="keywordflow">if</span>( memcmp( structPtr, <a class="code" href="classDynArray.html#a13">get</a>(), <a class="code" href="classDynArray.html#m4">ele_size</a> ) == 0 )
00276             <span class="keywordflow">return</span> <a class="code" href="classDynArray.html#m2">cur_pos</a>;
00277     }
00278 
00279     <span class="keywordflow">return</span> 0;
00280 }
00281 
00282 <span class="comment">//-------- END OF FUNCTION DynArray::scan_whole ----------//</span>
00283 
00284 <span class="comment">//------ BEGIN OF FUNCTION DynArray::scan ----------//</span>
00285 <span class="comment">//</span>
00286 <span class="comment">// Description : scan a sorted or unsorted link list for matching</span>
00287 <span class="comment">//               the specified element in the structure</span>
00288 <span class="comment">//</span>
00289 <span class="comment">// Syntax      : scan(&lt;void*&gt;,&lt;int&gt;,&lt;char&gt;,[int])</span>
00290 <span class="comment">//</span>
00291 <span class="comment">// &lt;void*&gt; = the data to be scanned for</span>
00292 <span class="comment">// &lt;int&gt;   = the offset of the structure containing the variable to be compared</span>
00293 <span class="comment">// &lt;char&gt;  = the type of the variable in the structure</span>
00294 <span class="comment">//           'C' = char[]</span>
00295 <span class="comment">//           'P' = char*</span>
00296 <span class="comment">//           'd' = double</span>
00297 <span class="comment">//           'i' = integer</span>
00298 <span class="comment">//           'c' = char</span>
00299 <span class="comment">// [int]  = restore the original position      ( default : FALSE )</span>
00300 <span class="comment">//</span>
00301 <span class="comment">// Return : 0 if not found</span>
00302 <span class="comment">//          if found, return the position found</span>
00303 <span class="comment">//</span>
<a name="l00304"></a><a class="code" href="classDynArray.html#a32">00304</a> <span class="keywordtype">int</span> <a class="code" href="classDynArray.html#a32">DynArray::scan</a>(<span class="keywordtype">void</span>* varChar,<span class="keywordtype">int</span> varOff,<span class="keywordtype">char</span> varType,<span class="keywordtype">int</span> restPos) {
00305     <span class="keywordtype">int</span> oldPos,ret;
00306 
00307     oldPos = <a class="code" href="classDynArray.html#m2">cur_pos</a>;
00308 
00309     <span class="keywordflow">for</span> ( <a class="code" href="classDynArray.html#m2">cur_pos</a>=1 ; <a class="code" href="classDynArray.html#m2">cur_pos</a>&lt;=<a class="code" href="classDynArray.html#m3">last_ele</a> ; <a class="code" href="classDynArray.html#m2">cur_pos</a>++ ) {
00310         <span class="keywordflow">if</span> ( <a class="code" href="classDynArray.html#a33">compare</a>(varChar,varOff,varType) ) {
00311             ret = <a class="code" href="classDynArray.html#m2">cur_pos</a>;
00312             <span class="keywordflow">if</span> (restPos)
00313                 <a class="code" href="classDynArray.html#m2">cur_pos</a> = oldPos;
00314             <span class="keywordflow">return</span> ret;
00315         }
00316     }
00317 
00318     <span class="keywordflow">return</span> 0;
00319 }
00320 
00321 <span class="comment">//-------- END OF FUNCTION DynArray::scan ----------//</span>
00322 
00323 <span class="comment">//------- BEGIN OF FUNCTION DynArray::compare --------//</span>
00324 <span class="comment">//</span>
00325 <span class="comment">// &lt;char*&gt; = the character string to be scanned for</span>
00326 <span class="comment">// &lt;int&gt;   = the offset of the structure containing the variable to be compared</span>
00327 <span class="comment">// &lt;char&gt;  = the type of the variable in the structure</span>
00328 <span class="comment">//           'C' = char[]</span>
00329 <span class="comment">//           'P' = char*</span>
00330 <span class="comment">//           'd' = double</span>
00331 <span class="comment">//           'i' = integer</span>
00332 <span class="comment">//           'c' = char</span>
00333 
<a name="l00334"></a><a class="code" href="classDynArray.html#a33">00334</a> <span class="keywordtype">int</span> <a class="code" href="classDynArray.html#a33">DynArray::compare</a>(<span class="keywordtype">void</span>* varChar,<span class="keywordtype">int</span> varOff,<span class="keywordtype">char</span> varType) {
00335     <span class="keywordtype">char</span> *bodyPtr,*bodyStr;
00336 
00337     bodyPtr = (<span class="keywordtype">char</span>*) <a class="code" href="classDynArray.html#a13">get</a>();
00338 
00339     <span class="keywordflow">switch</span>( varType ) {
00340     <span class="keywordflow">case</span> <span class="charliteral">'C'</span> :
00341     <span class="keywordflow">case</span> <span class="charliteral">'P'</span> :
00342         <span class="keywordflow">if</span> ( varType == <span class="charliteral">'C'</span> )
00343             bodyStr = bodyPtr + varOff;
00344         <span class="keywordflow">else</span>
00345             bodyStr = *( (<span class="keywordtype">char</span>**)(bodyPtr+varOff) );
00346 
00347         <span class="keywordflow">if</span>( bodyStr == (<span class="keywordtype">char</span>*) varChar )            <span class="comment">// the pointer is the same</span>
00348             <span class="keywordflow">return</span> 1;
00349         <span class="keywordflow">else</span>
00350             <span class="comment">// m1strcmp with exact set off</span>
00351             <span class="keywordflow">return</span> m.str_cmp(bodyStr, (<span class="keywordtype">char</span>*) varChar);
00352 
00353     <span class="keywordflow">case</span> <span class="charliteral">'c'</span> :
00354         <span class="keywordflow">return</span> *(bodyPtr + varOff ) == *((<span class="keywordtype">char</span>*)varChar);
00355 
00356     <span class="keywordflow">case</span> <span class="charliteral">'i'</span> :
00357         <span class="keywordflow">return</span> *((<span class="keywordtype">int</span>*)(bodyPtr+varOff)) == *((<span class="keywordtype">int</span>*)varChar);
00358 
00359     <span class="keywordflow">case</span> <span class="charliteral">'d'</span> :
00360         <span class="keywordflow">return</span> *((<span class="keywordtype">double</span>*)(bodyPtr+varOff)) == *((<span class="keywordtype">double</span>*)varChar);
00361     }
00362 
00363     <span class="keywordflow">return</span> <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00364 }
00365 
00366 <span class="comment">//-------- END OF FUNCTION DynArray::compare ----------//</span>
00367 
00368 <span class="comment">//---------- BEGIN OF FUNCTION DynArray::clean_up --------------//</span>
00369 <span class="comment">//</span>
00370 <span class="comment">// Description : clear up the whole dynamic array</span>
00371 <span class="comment">//</span>
00372 <span class="comment">// Syntax      : clean_up(&lt;int[]&gt;)</span>
00373 <span class="comment">//</span>
00374 <span class="comment">// &lt;int[]&gt; = the array of offset of the char*</span>
00375 <span class="comment">//</span>
00376 
<a name="l00377"></a><a class="code" href="classDynArray.html#a36">00377</a> <span class="keywordtype">void</span> <a class="code" href="classDynArray.html#a36">DynArray::clean_up</a>(<span class="keywordtype">int</span> *stringOffset) {
00378     <span class="keywordflow">if</span> ( stringOffset ) {
00379         <span class="keywordtype">int</span> i;
00380 
00381         <span class="keywordflow">for</span> ( i = 0 ; i&lt;<a class="code" href="classDynArray.html#m3">last_ele</a> ; i++ )
00382             <a class="code" href="classDynArray.html#a37">free_ptr</a>( <a class="code" href="classDynArray.html#m7">body_buf</a>+i*<a class="code" href="classDynArray.html#m4">ele_size</a>, stringOffset );
00383     }
00384 
00385     <a class="code" href="classDynArray.html#m3">last_ele</a>=0;
00386     <a class="code" href="classDynArray.html#m2">cur_pos</a> =0;
00387 
00388     <a class="code" href="classDynArray.html#a3">resize</a>( <a class="code" href="classDynArray.html#m1">block_num</a> );
00389 }
00390 
00391 <span class="comment">//---------- END OF FUNCTION DynArray::clean_up ---------//</span>
00392 
00393 <span class="comment">//------- BEGIN OF FUNCTION DynArray::free_ptr ----------//</span>
00394 
<a name="l00395"></a><a class="code" href="classDynArray.html#a37">00395</a> <span class="keywordtype">void</span> <a class="code" href="classDynArray.html#a37">DynArray::free_ptr</a>( <span class="keywordtype">void</span>* freebody, <span class="keywordtype">int</span> *stringOffset ) {
00396     <span class="keywordtype">int</span>    i,stringNum;
00397     <span class="keywordtype">char</span>** ptrPtr;
00398     <span class="keywordtype">char</span>*  charPtr;
00399 
00400     stringNum = stringOffset[0];
00401 
00402     <span class="keywordflow">for</span>(i=1 ; i&lt;=stringNum ; i++) {                 <span class="comment">// write char* allocated string</span>
00403         ptrPtr  = (<span class="keywordtype">char</span>**) ( (<span class="keywordtype">char</span>*)freebody + stringOffset[i] );
00404         charPtr = (<span class="keywordtype">char</span>*)  *ptrPtr;
00405 
00406         <span class="keywordflow">if</span> ( charPtr )
00407             <a class="code" href="ALL_8H.html#a8">mem_del</a>(charPtr);
00408     }
00409 
00410 }
00411 
00412 <span class="comment">//----------- END OF FUNCTION DynArray::free_ptr -------------//</span>
00413 
00414 <span class="comment">//---------- Begin of function DynArray::quick_sort -------------//</span>
<a name="l00420"></a><a class="code" href="classDynArray.html#a34">00420</a> <span class="comment">void DynArray::quick_sort( int(*cmpFun)(const void*, const void*) ) {</span>
00421     qsort( body_buf, last_ele, ele_size, cmpFun );
00422 }
00423 
00424 <span class="comment">//------------- End of function DynArray::quick_sort --------------//</span>
00425 
00426 <span class="comment">//---------- Begin of function DynArray::bubble_sort -------------//</span>
<a name="l00432"></a><a class="code" href="classDynArray.html#a35">00432</a> <span class="comment">void DynArray::bubble_sort( int(*cmpFun)(const void*, const void*) ) {</span>
00433     <span class="keywordtype">char</span> *tmp;
00434     tmp=<a class="code" href="ALL_8H.html#a5">mem_add</a>(ele_size);
00435 
00436     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;last_ele;i++)
00437         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=i+1;j&lt;last_ele;j++) {
00438             <span class="keywordtype">void</span> *p,*q;                                   <span class="comment">//swapping</span>
00439             p=get(i+1);
00440             q=get(j+1);
00441             <span class="keywordflow">if</span>(cmpFun(p,q)&gt;0) {
00442                 memcpy(tmp,p,ele_size);
00443                 memcpy(p,q,ele_size);
00444                 memcpy(q,tmp,ele_size);
00445             }
00446         }
00447     <a class="code" href="ALL_8H.html#a8">mem_del</a>(tmp);
00448 }
00449 
00450 <span class="comment">//------------- End of function DynArray::bubble_sort --------------//</span>
00451 
00452 <span class="comment">//---------- Begin of function DynArray::write_file --  -----------//</span>
<a name="l00462"></a><a class="code" href="classDynArray.html#a39">00462</a> <span class="comment">int DynArray::write_file(File* filePtr) {</span>
00463     <span class="keywordflow">if</span>( !filePtr-&gt;file_write( <span class="keyword">this</span>, <span class="keyword">sizeof</span>(<a class="code" href="classDynArray.html">DynArray</a>) ) )
00464         <span class="keywordflow">return</span> 0;
00465 
00466     <span class="keywordflow">if</span>( last_ele &gt; 0 ) {
00467         <span class="keywordflow">if</span>( !filePtr-&gt;file_write( body_buf, ele_size*last_ele ) )
00468             <span class="keywordflow">return</span> 0;
00469     }
00470 
00471     <span class="keywordflow">return</span> 1;
00472 }
00473 
00474 <span class="comment">//------------- End of function DynArray::write_file --------------//</span>
00475 
00476 <span class="comment">//---------- Begin of function DynArray::read_file -------------//</span>
<a name="l00485"></a><a class="code" href="classDynArray.html#a40">00485</a> <span class="comment">int DynArray::read_file(File* filePtr) {</span>
00486     <span class="keywordtype">char</span>* bodyBuf = body_buf;                       <span class="comment">// preserve body_buf which has been allocated</span>
00487 
00488     <span class="keywordflow">if</span>( !filePtr-&gt;file_read( <span class="keyword">this</span>, <span class="keyword">sizeof</span>(<a class="code" href="classDynArray.html">DynArray</a>) ) )
00489         <span class="keywordflow">return</span> 0;
00490 
00491     body_buf = <a class="code" href="ALL_8H.html#a7">mem_resize</a>( bodyBuf, ele_num*ele_size );
00492 
00493     <span class="keywordflow">if</span>( last_ele &gt; 0 ) {
00494         <span class="keywordflow">if</span>( !filePtr-&gt;file_read( body_buf, ele_size*last_ele ) )
00495             <span class="keywordflow">return</span> 0;
00496     }
00497 
00498     start();                                        <span class="comment">// go top</span>
00499 
00500     <span class="keywordflow">return</span> 1;
00501 }
00502 
00503 <span class="comment">//------------- End of function DynArray::read_file --------------//</span>
00504 
00505 <span class="comment">//--------- Begin of function DynArray::init_sort ---------//</span>
<a name="l00516"></a><a class="code" href="classDynArray.html#a11">00516</a> <span class="comment">void DynArray::init_sort(int sortOffset, char sortType) {</span>
00517     sort_offset = sortOffset;
00518     sort_type   = sortType;
00519 }
00520 
00521 <span class="comment">//----------- End of function DynArray::init_sort ---------//</span>
00522 
00523 <span class="comment">//------ BEGIN OF FUNCTION DynArray::linkin_sort_scan_from_bottom ----------//</span>
00524 <span class="comment">//</span>
00525 <span class="comment">// Description : linkin a entry to a sorted link list</span>
00526 <span class="comment">//</span>
00527 <span class="comment">// Note    : init_sort() must be called first, before using sorting function</span>
00528 <span class="comment">// Warning : DynArrayB (version B) can't use this function</span>
00529 <span class="comment">//</span>
00530 <span class="comment">// Syntax      : linkin_sort_scan_from_bottom(&lt;void*&gt;,&lt;int&gt;,&lt;char&gt;)</span>
00531 <span class="comment">//</span>
00532 <span class="comment">// &lt;void*&gt; = the structure buffer pointer</span>
00533 <span class="comment">//</span>
00534 <span class="comment">// Note : use DynArray::seek() to search quickly if the whole DynArray is</span>
00535 <span class="comment">//        built up with linkin_sort_scan_from_bottom()</span>
00536 <span class="comment">//</span>
00537 <span class="comment">// WARNING : After calling linkin() all pointers to the linklist body</span>
00538 <span class="comment">//           should be updated, because mem_resize() will move the body memory</span>
00539 <span class="comment">//</span>
<a name="l00540"></a><a class="code" href="classDynArray.html#a12">00540</a> <span class="keywordtype">void</span> <a class="code" href="classDynArray.html#a12">DynArray::linkin_sort_scan_from_bottom</a>(<span class="keywordtype">void</span>* varPtr) {
00541     <a class="code" href="ALL_8H.html#a0">err_when</a>( <a class="code" href="classDynArray.html#m5">sort_offset</a> &lt; 0 );
00542 
00543     <span class="keywordtype">int</span>   cmpRet;
00544     <span class="keywordtype">char</span>* varData,*bodyChar;
00545 
00546     <span class="keywordflow">for</span>( <span class="keywordtype">int</span> recNo=<a class="code" href="classDynArray.html#m3">last_ele</a> ; recNo&gt;0 ; recNo-- ) {
00547         <span class="comment">//-------- comparsion ---------//</span>
00548 
00549         <span class="keywordflow">switch</span>( sort_type ) {
00550         <span class="keywordflow">case</span> <a class="code" href="ODYNARR_8H.html#a6a1">SORT_INT</a>:                              <span class="comment">// &lt;int&gt;</span>
00551             cmpRet   = *((<span class="keywordtype">int</span>*)((<span class="keywordtype">char</span>*)varPtr+<a class="code" href="classDynArray.html#m5">sort_offset</a>)) &gt;
00552                 *((<span class="keywordtype">int</span>*)((<span class="keywordtype">char</span>*)<a class="code" href="classDynArray.html#a13">get</a>()+<a class="code" href="classDynArray.html#m5">sort_offset</a>));
00553             <span class="keywordflow">break</span>;
00554 
00555         <span class="keywordflow">case</span> <a class="code" href="ODYNARR_8H.html#a6a2">SORT_SHORT</a>:                            <span class="comment">// &lt;short&gt;</span>
00556             cmpRet   = *((<span class="keywordtype">short</span>*)((<span class="keywordtype">char</span>*)varPtr+<a class="code" href="classDynArray.html#m5">sort_offset</a>)) &gt;
00557                 *((<span class="keywordtype">short</span>*)((<span class="keywordtype">char</span>*)<a class="code" href="classDynArray.html#a13">get</a>()+<a class="code" href="classDynArray.html#m5">sort_offset</a>));
00558             <span class="keywordflow">break</span>;
00559 
00560         <span class="keywordflow">case</span> <a class="code" href="ODYNARR_8H.html#a6a3">SORT_CHAR</a>:                             <span class="comment">// &lt;char&gt;</span>
00561             cmpRet   = *((<span class="keywordtype">char</span>*)((<span class="keywordtype">char</span>*)varPtr+<a class="code" href="classDynArray.html#m5">sort_offset</a>)) &gt;
00562                 *((<span class="keywordtype">char</span>*)((<span class="keywordtype">char</span>*)<a class="code" href="classDynArray.html#a13">get</a>()+<a class="code" href="classDynArray.html#m5">sort_offset</a>));
00563             <span class="keywordflow">break</span>;
00564 
00565         <span class="keywordflow">case</span> <a class="code" href="ODYNARR_8H.html#a6a4">SORT_CHAR_PTR</a>:                         <span class="comment">// &lt;char*&gt;</span>
00566             varData  = *( (<span class="keywordtype">char</span>**)((<span class="keywordtype">char</span>*)varPtr + <a class="code" href="classDynArray.html#m5">sort_offset</a>) );
00567             bodyChar = *( (<span class="keywordtype">char</span>**)((<span class="keywordtype">char</span>*)<a class="code" href="classDynArray.html#a13">get</a>() + <a class="code" href="classDynArray.html#m5">sort_offset</a>) );
00568 
00569             <a class="code" href="ALL_8H.html#a0">err_when</a>( !varData || !bodyChar );
00570 
00571             cmpRet   = strcmp( varData, bodyChar );
00572             <span class="keywordflow">break</span>;
00573 
00574         <span class="keywordflow">case</span> <a class="code" href="ODYNARR_8H.html#a6a5">SORT_CHAR_STR</a>:                         <span class="comment">// &lt;char[]&gt;</span>
00575             varData  = (<span class="keywordtype">char</span>*)varPtr + <a class="code" href="classDynArray.html#m5">sort_offset</a> ;
00576             bodyChar = (<span class="keywordtype">char</span>*)<a class="code" href="classDynArray.html#a13">get</a>() + <a class="code" href="classDynArray.html#m5">sort_offset</a> ;
00577 
00578             <a class="code" href="ALL_8H.html#a0">err_when</a>( !varData || !bodyChar );
00579 
00580             cmpRet   = strcmp( varData, bodyChar );
00581             <span class="keywordflow">break</span>;
00582         }
00583 
00584         <span class="comment">//---- if equal then linkin -----------//</span>
00585 
00586         <span class="keywordflow">if</span>( cmpRet &gt;= 0 ) {
00587             <a class="code" href="classDynArray.html#a9">insert_at</a>( <a class="code" href="classDynArray.html#m3">last_ele</a>+1, varPtr) ;
00588             <span class="keywordflow">return</span>;
00589         }
00590     }
00591 
00592     <a class="code" href="classDynArray.html#a9">insert_at</a>( 1, varPtr);                          <span class="comment">// insert at the top</span>
00593 }
00594 
00595 <span class="comment">//--------- END OF FUNCTION DynArray::linkin_sort_scan_from_bottom ---------//</span>
00596 
00597 <span class="comment">/* this function has bugs and is commented out.</span>
00598 <span class="comment"></span>
00599 <span class="comment">//------ BEGIN OF FUNCTION DynArray::linkin_sort ----------//</span>
00600 <span class="comment">//</span>
00601 <span class="comment">// Description : linkin a entry to a sorted link list</span>
00602 <span class="comment">//</span>
00603 <span class="comment">// Note    : init_sort() must be called first, before using sorting function</span>
00604 <span class="comment">// Warning : DynArrayB (version B) can't use this function</span>
00605 <span class="comment">//</span>
00606 <span class="comment">// Syntax      : linkin_sort(&lt;void*&gt;,&lt;int&gt;,&lt;char&gt;)</span>
00607 <span class="comment">//</span>
00608 <span class="comment">// &lt;void*&gt; = the structure buffer pointer</span>
00609 <span class="comment">//</span>
00610 <span class="comment">// Note : use DynArray::seek() to search quickly if the whole DynArray is</span>
00611 <span class="comment">//        built up with linkin_sort()</span>
00612 <span class="comment">//</span>
00613 <span class="comment">// WARNING : After calling linkin() all pointers to the linklist body</span>
00614 <span class="comment">//           should be updated, because mem_resize() will move the body memory</span>
00615 <span class="comment">//</span>
00616 <span class="comment">void DynArray::linkin_sort(void* varPtr)</span>
00617 <span class="comment">{</span>
00618 <span class="comment">err_when( sort_offset &lt; 0 );</span>
00619 <span class="comment"></span>
00620 <span class="comment">register int jumpStep,cmpRet;</span>
00621 <span class="comment"></span>
00622 <span class="comment">char* lastVar,*lastVar2;</span>
00623 <span class="comment">char* varData,*bodyChar;</span>
00624 <span class="comment"></span>
00625 <span class="comment">jumpStep=last_ele/2+1;</span>
00626 <span class="comment"></span>
00627 <span class="comment">go(jumpStep);</span>
00628 <span class="comment"></span>
00629 <span class="comment">lastVar = lastVar2 = NULL;</span>
00630 <span class="comment"></span>
00631 <span class="comment">//------- for binary comparsion linkin_sort -------------//</span>
00632 <span class="comment"></span>
00633 <span class="comment">for (;; )</span>
00634 <span class="comment">{</span>
00635 <span class="comment">//-------- comparsion ---------//</span>
00636 <span class="comment"></span>
00637 <span class="comment">switch( sort_type )</span>
00638 <span class="comment">{</span>
00639 <span class="comment">case 'I':</span>
00640 <span class="comment">cmpRet   = *((int*)((char*)varPtr+sort_offset)) ==</span>
00641 <span class="comment">*((int*)((char*)get()+sort_offset));</span>
00642 <span class="comment">break;</span>
00643 <span class="comment"></span>
00644 <span class="comment">case 'P':       // char*</span>
00645 <span class="comment">varData  = *( (char**)((char*)varPtr + sort_offset) );</span>
00646 <span class="comment">bodyChar = *( (char**)((char*)get() + sort_offset) );</span>
00647 <span class="comment"></span>
00648 <span class="comment">err_when( !varData || !bodyChar );</span>
00649 <span class="comment"></span>
00650 <span class="comment">cmpRet   = strcmp( varData, bodyChar );</span>
00651 <span class="comment">break;</span>
00652 <span class="comment"></span>
00653 <span class="comment">case 'C':</span>
00654 <span class="comment">varData  = (char*)varPtr + sort_offset ;</span>
00655 <span class="comment">bodyChar = (char*)get() + sort_offset ;</span>
00656 <span class="comment"></span>
00657 <span class="comment">err_when( !varData || !bodyChar );</span>
00658 <span class="comment"></span>
00659 <span class="comment">cmpRet   = strcmp( varData, bodyChar );</span>
00660 <span class="comment">break;</span>
00661 <span class="comment">}</span>
00662 <span class="comment"></span>
00663 <span class="comment">//---- if equal then linkin -----------//</span>
00664 <span class="comment"></span>
00665 <span class="comment">if ( cmpRet ==0 )</span>
00666 <span class="comment">{</span>
00667 <span class="comment">linkin(varPtr) ;</span>
00668 <span class="comment">break;</span>
00669 <span class="comment">}</span>
00670 <span class="comment"></span>
00671 <span class="comment">//----- reach the end of the binary tree ----//</span>
00672 <span class="comment"></span>
00673 <span class="comment">if ( lastVar2 == bodyChar )</span>
00674 <span class="comment">{</span>
00675 <span class="comment">if ( cmpRet &lt; 0 )</span>
00676 <span class="comment">bkwd();</span>
00677 <span class="comment">linkin(varPtr);</span>
00678 <span class="comment">break;</span>
00679 <span class="comment">}</span>
00680 <span class="comment"></span>
00681 <span class="comment">//----- search through the binary tree -----//</span>
00682 <span class="comment"></span>
00683 <span class="comment">if ( jumpStep%2 == 1 )</span>
00684 <span class="comment">jumpStep=jumpStep/2+1;</span>
00685 <span class="comment">else</span>
00686 <span class="comment">jumpStep/=2;</span>
00687 <span class="comment"></span>
00688 <span class="comment">if ( jumpStep &lt; 1 )</span>
00689 <span class="comment">jumpStep = 1;</span>
00690 <span class="comment"></span>
00691 <span class="comment">if ( cmpRet &lt; 0 )</span>
00692 <span class="comment">jump( -jumpStep );</span>
00693 <span class="comment">else</span>
00694 <span class="comment">jump( jumpStep );</span>
00695 <span class="comment"></span>
00696 <span class="comment">lastVar2 = lastVar;</span>
00697 <span class="comment">lastVar  = bodyChar;</span>
00698 <span class="comment">}</span>
00699 <span class="comment"></span>
00700 <span class="comment">}</span>
00701 <span class="comment">//--------- END OF FUNCTION DynArray::linkin_sort ---------//</span>
00702 <span class="comment"></span>
00703 <span class="comment">//---------- Begin of function DynArray::resort -------------//</span>
00710 <span class="comment">void DynArray::resort(int resortRecno)</span>
00711 <span class="comment">{</span>
00712 <span class="comment">    linkin_sort(get(resortRecno));       // linkin the record for a second time, for sorting</span>
00713 <span class="comment"></span>
00714 <span class="comment">    go(resortRecno);             // delete the original record</span>
00715 <span class="comment">    linkout(resortRecno);</span>
00716 <span class="comment">}</span>
00717 <span class="comment">//------------- End of function DynArray::resort --------------//</span>
00718 <span class="comment"></span>
00719 <span class="comment">*/</span>
</pre></div><hr><address style="align: right;"><small>Generated on Fri Aug 23 01:37:26 2002 for VirtualU by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.17 </small></address>
</body>
</html>
