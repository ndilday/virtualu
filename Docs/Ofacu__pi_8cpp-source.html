<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Ofacu_pi.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.17 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>Ofacu_pi.cpp</h1><a href="Ofacu__pi_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">//Filename    : OFACULTY.cpp</span>
00002 <span class="comment">//Description : FACULTY Class Definition</span>
00003 <span class="comment">//Own:                   Fred.</span>
00004 
00005 <span class="preprocessor">#include &lt;OMATH.H&gt;</span>
00006 <span class="preprocessor">#include &lt;ODEPT.H&gt;</span>
00007 <span class="preprocessor">#include &lt;OINFO.H&gt;</span>
00008 <span class="preprocessor">#include &lt;<a class="code" href="ONAMERES_8H.html">ONAMERES.H</a>&gt;</span>
00009 <span class="preprocessor">#include &lt;<a class="code" href="OFPHOTO_8H.html">OFPHOTO.H</a>&gt;</span>
00010 <span class="preprocessor">#include &lt;OFACULTY.H&gt;</span>
00011 <span class="preprocessor">#include &lt;OFINANCE.H&gt;</span>
00012 <span class="preprocessor">#include &lt;OPSCHOOL.H&gt;</span>                             <span class="comment">// trimester_array</span>
00013 <span class="preprocessor">#include &lt;<a class="code" href="OPEERSCH_8H.html">OPEERSCH.H</a>&gt;</span>
00014 <span class="preprocessor">#include &lt;OLIBTECH.H&gt;</span>                             <span class="comment">// .faculty_incentive_using_it</span>
00015 <span class="preprocessor">#include &lt;OCHANCE.H&gt;</span>                              <span class="comment">//## chea 091199</span>
00016 
00017 <span class="comment">//---------- Begin of function Faculty::update_history -----------//</span>
<a name="l00023"></a><a class="code" href="classFaculty.html#a22">00023</a> <span class="comment">void Faculty::update_history(char update_flag) {</span>
00024     <span class="keywordflow">switch</span> (update_flag) {
00025     <span class="keywordflow">case</span> UPDATE_MONTH:
00026         satisfaction_index_last = satisfaction_index;
00027         calc_satisfaction_index();
00028         calc_performance_research();
00029         think_research();                           <span class="comment">// 1118</span>
00030         <span class="keywordflow">break</span>;
00031     <span class="keywordflow">case</span> UPDATE_TRIMESTER:
00032 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00033 <span class="preprocessor"></span>        satisfaction_index_last_tri = satisfaction_index;
00034 <span class="preprocessor">#endif</span>
00035 <span class="preprocessor"></span>        calc_performance_teaching();
00036         calc_performance_scholarship();
00037         calc_discretionary_hour_it();
00038         <span class="keywordflow">break</span>;
00039     <span class="keywordflow">case</span> UPDATE_YEAR:
00040         reaction_summer_teaching_last = reaction_summer_teaching;
00041         <span class="keywordflow">break</span>;
00042     <span class="keywordflow">case</span> UPDATE_ALL:
00043         update_history(UPDATE_MONTH);
00044         update_history(UPDATE_TRIMESTER);
00045         update_history(UPDATE_YEAR);
00046         <span class="keywordflow">break</span>;
00047     <span class="keywordflow">default</span>:
00048         <a class="code" href="ALL_8H.html#a1">err_here</a>();
00049         <span class="keywordflow">break</span>;
00050     }
00051 }
00052 
00053 <span class="comment">//---------- End of function Faculty::update_history -----------//</span>
00054 
00055 <span class="comment">//------ Begin of function Faculty::calc_all_performance -------//</span>
<a name="l00057"></a><a class="code" href="classFaculty.html#a12">00057</a> <span class="comment">void Faculty::calc_all_performance() {</span>
00058     <a class="code" href="ALL_8H.html#a1">err_here</a>();
00059 
00060     calc_performance_teaching();
00061     calc_performance_scholarship();
00062     calc_performance_research();
00063 
00064     calc_satisfaction_index();
00065 }
00066 
00067 <span class="comment">//------- End of function Faculty::calc_all_performance -------//</span>
00068 
00069 <span class="comment">//---------- Begin of function Faculty::calc_performance_teaching -----------//</span>
00071 <span class="comment">void Faculty::calc_performance_teaching() {</span>
00072     <span class="keywordtype">float</span> input7=0;
00073 
00074     <span class="comment">//-----------//</span>
00075     input7 = finance.academic_support_ratio;
00076 
00077     <span class="comment">//-----------//</span>
00078     <span class="keywordtype">float</span> talentTeaching = math.single_response_func(1, 100, 64.99f, 51.96f, talent_teaching);
00079     <span class="keywordtype">float</span> performanceScholarship = math.dual_response_func(1, 50, 100, 21.46f, 21.95f, 20.43f, 80, performance_scholarship);
00080     <span class="keywordtype">float</span> coursePrepareHour = math.single_response_func(1, 100, 13.05f, 6.85f, discretionary_hour_array[<a class="code" href="Ofaculty_8h.html#a29a15">DT_COURSE_PREPARATION</a>]);
00081     <span class="keywordtype">float</span> outOfClassContactHour = math.single_response_func(1, 100, 13.05f, 6.85f, discretionary_hour_array[<a class="code" href="Ofaculty_8h.html#a29a16">DT_OUT_OF_CLASS_STUDENT_CONTACT</a>]);
00082     <span class="keywordtype">float</span> contactHourRatio = math.dual_response_func(1, 50, 100, -0.456f, -0.461f, 1.544f, 0.452f, <span class="keywordtype">float</span>(teaching_contact_hour)/<a class="code" href="Ofaculty_8h.html#a0">NORMAL_TEACHING_CONTACT_HOUR</a>);
00083     input7 = math.dual_response_func(1, 47.34f, 100, 0.216f, 0.431f, 0.119f, 0.657f, input7);
00084 
00085     <span class="keywordtype">float</span> overallValue = talentTeaching * 0.2f +
00086         performanceScholarship * 0.25f +
00087         coursePrepareHour * 0.15f +
00088         outOfClassContactHour * 0.1f +
00089         contactHourRatio * 0.1f +
00090         satisfaction_index_last * 0.1f +
00091         input7 * 0.1f;
00092 
00093     <span class="comment">//  performance_teaching = math.latency_func( 0.79f, performance_teaching, overallValue);</span>
00094     <span class="comment">//## chea 300899 change latency_func(HE.RespF_Defs.Rev 230899 E-mail)</span>
00095     performance_teaching = player_school.latency_func( 0.65f, performance_teaching, overallValue);
00096 
00097 }
00098 
00099 <span class="comment">//---------- End of function Faculty::calc_performance_teaching -----------//</span>
00100 
00101 <span class="comment">//---------- Begin of function Faculty::calc_performance_scholarship -----------//</span>
<a name="l00103"></a><a class="code" href="classFaculty.html#a18">00103</a> <span class="comment">void Faculty::calc_performance_scholarship() {</span>
00104     <span class="keywordtype">float</span> input3 = finance.academic_support_ratio;
00105 
00106     <span class="comment">//----------------//</span>
00107     <span class="keywordtype">float</span> talentScholarship = math.single_response_func(1, 100, 64.99f, 51.96f, talent_scholarship);
00108     <span class="keywordtype">float</span> performanceResearch = math.dual_response_func(1, 50, 100, 21.02f, 34.78f, 19.75f, 75.56f, performance_research);
00109     <span class="keywordtype">float</span> scholarshipHour = math.single_response_func(1, 100, 13.23f, 6.40f, discretionary_hour_array[<a class="code" href="Ofaculty_8h.html#a29a19">DT_SCHOLARSHIP</a>]);
00110 
00111     input3 = math.dual_response_func(1, 49.62f, 100, 0.243f, 0.303f, 0.124f, 0.634f, input3);
00112 
00113     <span class="comment">//## chea 221099</span>
00114     <span class="keywordflow">if</span>(this-&gt;rank_level ==3 || this-&gt;rank_level ==4) {
00115         <span class="comment">//              talentScholarship = 0.0f;</span>
00116         <span class="comment">//              performanceResearch = 0.0f;</span>
00117         scholarshipHour = 0.0f;
00118 
00119     }
00120 
00121     <span class="keywordtype">float</span> overallValue = talentScholarship * 0.3f +
00122         performanceResearch * 0.1f +
00123         scholarshipHour * 0.3f +
00124         satisfaction_index_last * 0.1f +
00125         input3 *0.2f;
00126 
00127     <span class="comment">//  performance_scholarship = math.latency_func( 0.94f, performance_scholarship, overallValue);</span>
00128     <span class="comment">//## chea 300899 change latency_func(HE.RespF_Defs.Rev 230899 E-mail)</span>
00129     performance_scholarship = player_school.latency_func( 0.70f, performance_scholarship, overallValue);
00130 
00131     <span class="comment">//## chea 221099</span>
00132     <span class="comment">//  if(this-&gt;rank_level ==3 || this-&gt;rank_level ==4)</span>
00133     <span class="comment">//          performance_scholarship = 0.0f;</span>
00134 
00135 }
00136 
00137 <span class="comment">//---------- End of function Faculty::calc_performance_scholarship -----------//</span>
00138 
00139 <span class="comment">//---------- Begin of function Faculty::calc_performance_research -----------//</span>
<a name="l00141"></a><a class="code" href="classFaculty.html#a19">00141</a> <span class="comment">void Faculty::calc_performance_research() {</span>
00142     <span class="keywordtype">float</span> input4 = finance.academic_support_ratio;
00143 
00144     <span class="comment">//----------------//</span>
00145     <span class="keywordtype">float</span> talentResearch = math.single_response_func(1, 100, 29.02f, 60.37f, talent_research);
00146     <span class="keywordtype">float</span> performanceScholarship = math.single_response_func(1, 100, 33.39f, 31.36f, performance_scholarship);
00147     <span class="keywordtype">float</span> researchHour  = math.single_response_func(1, 100, 24.67f, 13.69f, discretionary_hour_array[<a class="code" href="Ofaculty_8h.html#a29a18">DT_RESEARCH</a>]);
00148     <span class="keywordtype">float</span> researchRatio;
00149 
00150     <span class="keywordtype">float</span> researchNorm = (float) department_array[department_recno]-&gt;research_dollar_norm;
00151 
00152     <span class="keywordflow">if</span>( researchNorm )
00153         researchRatio = math.single_response_func(1, 100, 6.57f, 1.79f, research_month_expense / researchNorm );
00154     <span class="keywordflow">else</span>
00155         researchRatio = 0;
00156 
00157     <span class="comment">//## chea 221099</span>
00158     <span class="keywordflow">if</span>(rank_level ==3 || rank_level ==4) {
00159         researchHour = 0.0f;
00160         <span class="comment">//              talentResearch = 0.0f;</span>
00161         <span class="comment">//              performanceScholarship = 0.0f;</span>
00162         researchRatio = 0.0f;
00163     }
00164 
00165     input4 = math.dual_response_func(1, 49.81f, 100, 0.295f, 0.510f, 0.150f, 0.860f, input4);
00166 
00167     <span class="comment">//----------------//</span>
00168 
00169     <span class="keywordtype">float</span> newValue = talentResearch * 0.3f +
00170         performanceScholarship * 0.1f +
00171         researchHour * 0.2f +
00172         researchRatio * 0.35f +
00173         input4 * 0.05f;
00174 
00175     <span class="comment">//## chea 300899 change latency_func(HE.RespF_Defs.Rev 230899 E-mail)</span>
00176     performance_research = player_school.latency_func( 0.75f, performance_research, newValue);
00177 
00178     <span class="comment">//---------- extra effect brought the chance cards ------------//</span>
00179 
00180     <span class="keywordflow">if</span>( extra_effect_performance_research ) {
00181         performance_research *= extra_effect_performance_research;
00182 
00183         extra_effect_performance_research += (1.0f - extra_effect_performance_research) * 0.3f;
00184 
00185         performance_research = max(0, min(100,performance_research ) );
00186     }
00187 }
00188 
00189 <span class="comment">//---------- End of function Faculty::calc_performance_research -----------//</span>
00190 
00191 <span class="comment">//---------- Begin of function Faculty::calc_discretionary_hour_it -----------//</span>
00193 <span class="comment">void Faculty::calc_discretionary_hour_it() {</span>
00194     <span class="keywordtype">float</span> input[2];
00195 
00196     <span class="comment">//--------------//</span>
00197     input[0] = discretionary_hour_array[<a class="code" href="Ofaculty_8h.html#a29a17">DT_EDUCATIONAL_DEVELOPMENT</a>]
00198         * float( <span class="keywordtype">float</span>(finance.expense_array[<a class="code" href="Ofinance_8h.html#a104a48">AC_IT_RESOURCES</a>].total) / finance.total_operating_expense.total );
00199 
00200     input[0] *= (float) finance.cost_rise_policy_array[<a class="code" href="Ofinance_8h.html#a112a79">PL_INFO_TECH_RESOURCES</a>].penalty_multiplier2;
00201 
00202     <span class="comment">//--------------//</span>
00203     input[0] = math.dual_response_func(0,60.23f,100,0.076f,0.112f,0.033f,0.150f, input[0]);
00204     input[1] = math.dual_response_func(0,51.1f,75,32.26f,26.33f,19.66f,68.16f, library_tech_office.faculty_incentive_using_it);
00205 
00206     <span class="keywordtype">float</span> newValue = 0.5f * input[0] + 0.5f * input[1];
00207 
00208     p_discretionary_hour_it_percent = player_school.latency_func( 0.8f, p_discretionary_hour_it, newValue);
00209 
00210     <span class="comment">//--------------//</span>
00211     <span class="keywordtype">int</span> totalDTTime = 0;
00212     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="Ofaculty_8h.html#a28a14">DISCRETIONARY_TYPE_COUNT</a>; i++)
00213         totalDTTime += discretionary_hour_array[i];
00214 
00215     p_discretionary_hour_it = totalDTTime * p_discretionary_hour_it_percent / 100;
00216 
00217 }
00218 
00219 <span class="comment">//---------- End of function Faculty::calc_discretionary_hour_it -----------//</span>
00220 
00221 <span class="comment">//---------- Begin of function Faculty::calc_satisfaction_index -----------//</span>
<a name="l00223"></a><a class="code" href="classFaculty.html#a20">00223</a> <span class="comment">void Faculty::calc_satisfaction_index() {</span>
00224 <span class="preprocessor">#define VAR_COUNT   8</span>
00225 <span class="preprocessor"></span>
00226     <span class="keywordtype">float</span> input[VAR_COUNT];
00227     memset(input, 0, <span class="keyword">sizeof</span>(input));
00228 
00229     <span class="keywordtype">int</span> i;
00230 
00231     <span class="comment">//--------------//</span>
00232 
00233     <span class="keywordtype">float</span> peerAvg = (float) <a class="code" href="classPeerSchool.html#p2">PeerSchool::average_faculty_salary</a>[ rank_age_group() ];
00234 
00235     <span class="keywordflow">if</span> ( peerAvg &gt; 0 )
00236         input[0] = salary / peerAvg;
00237 
00238     <span class="comment">//--------------//</span>
00239     input[1] = float(teaching_contact_hour) / <a class="code" href="Ofaculty_8h.html#a0">NORMAL_TEACHING_CONTACT_HOUR</a>;
00240 
00241     <span class="comment">//--------------//</span>
00242     input[2] = player_school.sub_score[<a class="code" href="Opschool_8h.html#a65a43">S_FACULTY_DIVERSITY</a>][THIS_MONTH];
00243 
00244     <span class="comment">//--------------//</span>
00245     input[3] = player_school.sub_score[<a class="code" href="Opschool_8h.html#a65a42">S_STUDENT_DIVERSITY</a>][THIS_MONTH];
00246 
00247     <span class="comment">//--------------//</span>
00248     <span class="comment">/*  Equals:</span>
00249 <span class="comment"></span>
00250 <span class="comment">        50 + sum over i of:</span>
00251 <span class="comment">        weight[i] * (performance[i] - talent[i])/</span>
00252 <span class="comment">        sum of the weights,</span>
00253 <span class="comment">        truncated to be between 0 and 100.</span>
00254 <span class="comment"></span>
00255 <span class="comment">        where</span>
00256 <span class="comment">        weight[i] = institutional priority[i] amd "i" ranges over teaching, scholarship, and research.</span>
00257 <span class="comment"></span>
00258 <span class="comment">        The institutional priorities for T, S, and R are on the Faculty_Incentives sheet.</span>
00259 <span class="comment">    */</span>
00260     <span class="keyword">const</span> <span class="keywordtype">char</span> V_COUNT = 3;
00261     <span class="keywordtype">float</span> subInput[V_COUNT], weight[V_COUNT];
00262 
00263     <span class="comment">//  a percentage from 0 to 100</span>
00264     subInput[0] = performance_teaching - talent_teaching;
00265     subInput[1] = performance_scholarship - talent_scholarship;
00266     subInput[2] = performance_research - talent_research;
00267 
00268     weight[0] = department_array.weight_teaching;
00269     weight[1] = department_array.weight_scholarship;
00270     weight[2] = department_array.weight_research;
00271 
00272     <span class="keywordflow">for</span> (i=0; i&lt;V_COUNT; i++)
00273         input[4] += weight[i] * subInput[i];
00274 
00275     <span class="comment">//min &amp; max bug chea</span>
00276     input[4] = max(0.0f,min(100.0f, 50 + input[4] / (weight[0]+weight[1]+weight[2])));
00277 
00278     <a class="code" href="ALL_8H.html#a0">err_when</a>((weight[0]+weight[1]+weight[2])==0);
00279 
00280     <span class="comment">//--------------//</span>
00281     <span class="comment">// Strain on discretionary time due to institutional priorities</span>
00282     input[5] = strain_on_discretionary_time;
00283 
00284     <span class="comment">//--------------//</span>
00285     <span class="comment">// Reaction to emphasis on summer teaching</span>
00286     <span class="comment">// Let x[t] = the value of the emphasis variable (0,1,2, or 3) at month t, TIMES</span>
00287     <span class="comment">// (percent of summer teaching as part of regular faculty load)/100 ; . Then:</span>
00288 
00289     <span class="comment">//float emphasis_var, emphasis_var_last;</span>
00290     <span class="comment">//emphasis_var = emphasis_var_last = 1;             // changed monthly // to put it to "student Union"?</span>
00291 
00292     <span class="keyword">const</span> <span class="keywordtype">float</span> lamda = 0.98f;
00293 
00294     reaction_summer_teaching = max(0.0f,
00295                                    (1-lamda)*(-10)*(player_school.summer_emphasis*player_school.summer_emphasis - player_school.summer_emphasis_last*player_school.summer_emphasis_last)
00296                                    + lamda*reaction_summer_teaching_last);       <span class="comment">//min &amp; max bug chea</span>
00297 
00298     input[6] = reaction_summer_teaching;
00299 
00300     <span class="comment">//--------------//</span>
00301     <span class="comment">// -1:last year</span>
00302     input[7] = department_array[department_recno]-&gt;p_academic_standing_history[THIS_YEAR-1];
00303 
00304     <span class="comment">//--------------//</span>
00305     input[0] = math.dual_response_func(1, 50, 100, 0.123f, 0.123f, 0.863f, 1.136f, input[0]);
00306     input[1] = math.dual_response_func(1, 50, 100, -0.214f, -0.132f, 1.075f, 0.688f, input[1]);
00307     input[2] = math.dual_response_func(1,49.48f,100,20.74f,29.48f,20.30f,75.12f, input[2]);
00308     input[3] = math.dual_response_func(1,49.48f,100,20.74f,29.48f,20.30f,75.12f, input[3]);
00309     input[5] = math.single_response_func(100,0,-100.5f,49.07f, input[5]);
00310 
00311     <span class="comment">//--------------//</span>
00312     <span class="keywordtype">float</span> weightWhiteMale[VAR_COUNT] = { 0.25f,0.20f,0.05f,0.05f,0.15f,0.15f,0.05f,0.10f,};
00313     <span class="keywordtype">float</span> weightOther[VAR_COUNT] = {0.25f,0.20f,0.10f,0.10f,0.10f,0.10f,0.05f,0.10f,};
00314 
00315     <span class="keywordtype">float</span> newValue = 0;
00316 
00317     <span class="keywordflow">if</span> ( gender_ethnic_group == <a class="code" href="Gamedef_8h.html#a75a27">NONMINORITY_MALE</a> ) {
00318         <span class="keywordflow">for</span> (i=0; i&lt;VAR_COUNT; i++)
00319             newValue += weightWhiteMale[i] * input[i];
00320     }
00321     <span class="keywordflow">else</span> {
00322         <span class="keywordflow">for</span> (i=0; i&lt;VAR_COUNT; i++)
00323             newValue += weightOther[i] * input[i];
00324     }
00325 
00326 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00327 <span class="preprocessor"></span>    <span class="keywordflow">if</span> ( is_dismissed )
00328         newValue *= 0.1;
00329 <span class="preprocessor">#endif</span>
00330 <span class="preprocessor"></span>
00331     <span class="comment">//  satisfaction_index = math.latency_func( 0.80f, satisfaction_index, newValue);</span>
00332     <span class="comment">//## chea 300899 change latency_func(HE.RespF_Defs.Rev 230899 E-mail)</span>
00333     satisfaction_index = player_school.latency_func( 0.20f, satisfaction_index, newValue);
00334 
00335     <span class="comment">// var 12 in respone_func.xls</span>
00336     <span class="keywordflow">if</span> ( rank_level == <a class="code" href="Ofaculty_8h.html#a27a9">ASST_PROF</a> ) {
00337         <span class="comment">// scale to =[0,100]</span>
00338         <span class="keywordtype">int</span> promoDiff = (player_school.faculty_promotion_difficulity - <a class="code" href="Gamedef_8h.html#a73a22">INPUT_LOW</a> ) * 100 / (<a class="code" href="Gamedef_8h.html#a73a24">INPUT_HIGH</a> - <a class="code" href="Gamedef_8h.html#a73a22">INPUT_LOW</a>);
00339 
00340         satisfaction_index *= (1 - 0.2f * (promoDiff - 50) / 100 );
00341         <span class="comment">//min &amp; max bug chea</span>
00342         satisfaction_index = max(0.0f, min(100.0f, satisfaction_index));
00343     }
00344 
00345     <span class="comment">//----------------------------//</span>
00346     <span class="comment">// 1020 add penalty, if any; // 1118</span>
00347 
00348     satisfaction_index *= (float) finance.revenue_policy_array[<a class="code" href="Ofinance_8h.html#a108a67">PL_ENDOWMENT_SPENDING_RATE</a>].penalty_multiplier1;
00349     satisfaction_index *= (float) finance.revenue_policy_array[<a class="code" href="Ofinance_8h.html#a108a68">PL_INDIRECT_COST_RATE</a>].penalty_multiplier1;
00350 
00351     satisfaction_index *= (float) finance.expense_policy_array[<a class="code" href="Ofinance_8h.html#a110a70">PL_FACULTY_SALARY_INCREASES</a>].penalty_multiplier1;
00352     <span class="comment">//satisfaction_index *= (float) finance.expense_policy_array[PL_REAL_TRANSFER_TO_PLANT_GROWTH].penalty_multiplier1;</span>
00353     satisfaction_index *= (float) finance.expense_policy_array[<a class="code" href="Ofinance_8h.html#a110a72">PL_BUDGET_ADJUSTMENT</a>].penalty_multiplier1;
00354 
00355     <span class="comment">//---//</span>
00356     satisfaction_index *= (float) finance.cost_rise_policy_array[<a class="code" href="Ofinance_8h.html#a112a76">PL_FACULTY_FTE</a>].penalty_multiplier1;
00357     satisfaction_index *= (float) finance.cost_rise_policy_array[<a class="code" href="Ofinance_8h.html#a112a77">PL_NON_FACULTY_DEPARTMENTAL_EXPENSE</a>].penalty_multiplier1;
00358     satisfaction_index *= (float) finance.cost_rise_policy_array[<a class="code" href="Ofinance_8h.html#a112a78">PL_LIBRARIES</a>].penalty_multiplier1;
00359 
00360     <span class="comment">//---- chance card extra effect ------//</span>
00361 
00362     <span class="keywordflow">if</span>( extra_effect_satisfaction_index ) {
00363         satisfaction_index *= extra_effect_satisfaction_index;
00364 
00365         extra_effect_satisfaction_index += (1.0f - extra_effect_satisfaction_index) * 0.3f;
00366     }
00367 
00368     <span class="comment">//--------- cap the value ------------//</span>
00369 
00370     <span class="comment">//min &amp; max bug chea</span>
00371     satisfaction_index = max(0.0f,min(100.0f,satisfaction_index));
00372 
00373 }
00374 
00375 <span class="comment">//---------- End of function Faculty::calc_satisfaction_index -----------//</span>
</pre></div><hr><address style="align: right;"><small>Generated on Fri Aug 23 01:37:32 2002 for VirtualU by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.17 </small></address>
</body>
</html>
