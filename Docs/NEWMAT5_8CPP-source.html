<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>NEWMAT5.CPP Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.17 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>NEWMAT5.CPP</h1><a href="NEWMAT5_8CPP.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">//Owner: Fred</span>
00002 <span class="comment">//$$ newmat5.cpp         Transpose, evaluate etc</span>
00003 
00004 <span class="comment">// Copyright (C) 1991,2,3,4: R B Davies</span>
00005 
00006 <span class="preprocessor">#include "include.h"</span>
00007 
00008 <span class="preprocessor">#include "newmat.h"</span>
00009 <span class="preprocessor">#include "newmatrc.h"</span>
00010 
00011 <span class="preprocessor">#ifdef use_namespace</span>
00012 <span class="preprocessor"></span><span class="keyword">namespace </span>NEWMAT {
00013 <span class="preprocessor">#endif</span>
00014 <span class="preprocessor"></span>
00015 <span class="preprocessor">#ifdef DO_REPORT</span>
00016 <span class="preprocessor"></span><span class="preprocessor">#define REPORT { static ExeCounter ExeCount(__LINE__,5); ++ExeCount; }</span>
00017 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00018"></a><a class="code" href="NEWMAT5_8CPP.html#a0">00018</a> <span class="preprocessor"></span><span class="preprocessor">#define REPORT {}</span>
00019 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00020 <span class="preprocessor"></span>
00021     <span class="comment">/************************ carry out operations ******************************/</span>
00022 
<a name="l00023"></a><a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b19">00023</a>     <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* GeneralMatrix::Transpose(<a class="code" href="classNEWMAT_1_1TransposedMatrix.html">TransposedMatrix</a>* tm, <a class="code" href="classNEWMAT_1_1MatrixType.html">MatrixType</a> mt) {
00024         <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gm1;
00025 
00026         <span class="keywordflow">if</span> (<a class="code" href="namespaceNEWMAT.html#a45">Compare</a>(<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a1">Type</a>().<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a10">t</a>(),mt)) {
00027             <a class="code" href="NEWMAT5_8CPP.html#a0">REPORT</a>
00028                 gm1 = mt.<a class="code" href="classNEWMAT_1_1MatrixType.html#a19">New</a>(<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>,<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>,tm);
00029             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>=0; <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>&lt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>; <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>++) {
00030                 <a class="code" href="classMatrixRow.html">MatrixRow</a> mr(gm1, <a class="code" href="NEWMATRC_8H.html#a6a2">StoreOnExit</a>+<a class="code" href="NEWMATRC_8H.html#a6a3">DirectPart</a>, <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>);
00031                 <a class="code" href="classMatrixCol.html">MatrixCol</a> mc(<span class="keyword">this</span>, mr.<a class="code" href="classMatrixRowCol.html#a28">Data</a>(), <a class="code" href="NEWMATRC_8H.html#a6a1">LoadOnEntry</a>, <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>);
00032             }
00033         }
00034         <span class="keywordflow">else</span> {
00035             <a class="code" href="NEWMAT5_8CPP.html#a0">REPORT</a>
00036                 gm1 = mt.<a class="code" href="classNEWMAT_1_1MatrixType.html#a19">New</a>(<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>,<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>,tm);
00037             <a class="code" href="classMatrixRow.html">MatrixRow</a> mr(<span class="keyword">this</span>, <a class="code" href="NEWMATRC_8H.html#a6a1">LoadOnEntry</a>);
00038             <a class="code" href="classMatrixCol.html">MatrixCol</a> mc(gm1, <a class="code" href="NEWMATRC_8H.html#a6a2">StoreOnExit</a>+<a class="code" href="NEWMATRC_8H.html#a6a3">DirectPart</a>);
00039             <span class="keywordtype">int</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a> = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>;
00040             <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--) { mc.<a class="code" href="classMatrixRowCol.html#a15">Copy</a>(mr); mr.<a class="code" href="classMatrixRow.html#a2">Next</a>(); mc.<a class="code" href="classMatrixCol.html#a3">Next</a>(); }
00041         }
00042         <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a7">tDelete</a>(); gm1-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a14">ReleaseAndDelete</a>(); <span class="keywordflow">return</span> gm1;
00043     }
00044 
<a name="l00045"></a><a class="code" href="classNEWMAT_1_1SymmetricMatrix.html#a20">00045</a>     <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* SymmetricMatrix::Transpose(<a class="code" href="classNEWMAT_1_1TransposedMatrix.html">TransposedMatrix</a>*, <a class="code" href="classNEWMAT_1_1MatrixType.html">MatrixType</a> mt)
00046     { <a class="code" href="NEWMAT5_8CPP.html#a0">REPORT</a>  <span class="keywordflow">return</span> <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a0">Evaluate</a>(mt); }
00047 
<a name="l00048"></a><a class="code" href="classNEWMAT_1_1DiagonalMatrix.html#a24">00048</a>     <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* DiagonalMatrix::Transpose(<a class="code" href="classNEWMAT_1_1TransposedMatrix.html">TransposedMatrix</a>*, <a class="code" href="classNEWMAT_1_1MatrixType.html">MatrixType</a> mt)
00049     { <a class="code" href="NEWMAT5_8CPP.html#a0">REPORT</a> <span class="keywordflow">return</span> <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a0">Evaluate</a>(mt); }
00050 
<a name="l00051"></a><a class="code" href="classNEWMAT_1_1ColumnVector.html#a11">00051</a>     <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* ColumnVector::Transpose(<a class="code" href="classNEWMAT_1_1TransposedMatrix.html">TransposedMatrix</a>*, <a class="code" href="classNEWMAT_1_1MatrixType.html">MatrixType</a> mt) {
00052         <a class="code" href="NEWMAT5_8CPP.html#a0">REPORT</a>
00053             <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gmx = <span class="keyword">new</span> <a class="code" href="classNEWMAT_1_1RowVector.html">RowVector</a>; <a class="code" href="namespaceNEWMAT.html#a19">MatrixErrorNoSpace</a>(gmx);
00054         gmx-&gt;nrows = 1; gmx-&gt;ncols = gmx-&gt;storage = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a>;
00055         <span class="keywordflow">return</span> <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b14">BorrowStore</a>(gmx,mt);
00056     }
00057 
<a name="l00058"></a><a class="code" href="classNEWMAT_1_1RowVector.html#a17">00058</a>     <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* RowVector::Transpose(<a class="code" href="classNEWMAT_1_1TransposedMatrix.html">TransposedMatrix</a>*, <a class="code" href="classNEWMAT_1_1MatrixType.html">MatrixType</a> mt) {
00059         <a class="code" href="NEWMAT5_8CPP.html#a0">REPORT</a>
00060             <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gmx = <span class="keyword">new</span> <a class="code" href="classNEWMAT_1_1ColumnVector.html">ColumnVector</a>; <a class="code" href="namespaceNEWMAT.html#a19">MatrixErrorNoSpace</a>(gmx);
00061         gmx-&gt;ncols = 1; gmx-&gt;nrows = gmx-&gt;storage = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a>;
00062         <span class="keywordflow">return</span> <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b14">BorrowStore</a>(gmx,mt);
00063     }
00064 
<a name="l00065"></a><a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a0">00065</a>     <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* GeneralMatrix::Evaluate(<a class="code" href="classNEWMAT_1_1MatrixType.html">MatrixType</a> mt) {
00066         <span class="keywordflow">if</span> (<a class="code" href="namespaceNEWMAT.html#a45">Compare</a>(this-&gt;Type(),mt)) { <a class="code" href="NEWMAT5_8CPP.html#a0">REPORT</a> <span class="keywordflow">return</span> <span class="keyword">this</span>; }
00067         <a class="code" href="NEWMAT5_8CPP.html#a0">REPORT</a>
00068             <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gmx = mt.<a class="code" href="classNEWMAT_1_1MatrixType.html#a19">New</a>(<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>,<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>,<span class="keyword">this</span>);
00069         <a class="code" href="classMatrixRow.html">MatrixRow</a> mr(<span class="keyword">this</span>, <a class="code" href="NEWMATRC_8H.html#a6a1">LoadOnEntry</a>);
00070         <a class="code" href="classMatrixRow.html">MatrixRow</a> mrx(gmx, <a class="code" href="NEWMATRC_8H.html#a6a2">StoreOnExit</a>+<a class="code" href="NEWMATRC_8H.html#a6a3">DirectPart</a>);
00071         <span class="keywordtype">int</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>;
00072         <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--) { mrx.<a class="code" href="classMatrixRowCol.html#a15">Copy</a>(mr); mrx.<a class="code" href="classMatrixRow.html#a2">Next</a>(); mr.<a class="code" href="classMatrixRow.html#a2">Next</a>(); }
00073         <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a7">tDelete</a>(); gmx-&gt;ReleaseAndDelete(); <span class="keywordflow">return</span> gmx;
00074     }
00075 
<a name="l00076"></a><a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#a0">00076</a>     <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* ShiftedMatrix::Evaluate(<a class="code" href="classNEWMAT_1_1MatrixType.html">MatrixType</a> mt) {
00077         <a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n2">gm</a>=((<a class="code" href="classNEWMAT_1_1BaseMatrix.html">BaseMatrix</a>*&amp;)<a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n1">bm</a>)-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a0">Evaluate</a>();
00078         <span class="keywordtype">int</span> nr=<a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n2">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a2">Nrows</a>(); <span class="keywordtype">int</span> nc=<a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n2">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a3">Ncols</a>();
00079         <a class="code" href="namespaceNEWMAT.html#a45">Compare</a>(<a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n2">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a1">Type</a>().<a class="code" href="classNEWMAT_1_1MatrixType.html#a15">AddEqualEl</a>(),mt);
00080         <span class="keywordflow">if</span> (!(mt==<a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n2">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a1">Type</a>())) {
00081             <a class="code" href="NEWMAT5_8CPP.html#a0">REPORT</a>
00082                 <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gmx = mt.<a class="code" href="classNEWMAT_1_1MatrixType.html#a19">New</a>(nr,nc,<span class="keyword">this</span>);
00083             <a class="code" href="classMatrixRow.html">MatrixRow</a> mr(<a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n2">gm</a>, <a class="code" href="NEWMATRC_8H.html#a6a1">LoadOnEntry</a>);
00084             <a class="code" href="classMatrixRow.html">MatrixRow</a> mrx(gmx, <a class="code" href="NEWMATRC_8H.html#a6a2">StoreOnExit</a>+<a class="code" href="NEWMATRC_8H.html#a6a3">DirectPart</a>);
00085             <span class="keywordflow">while</span> (nr--) { mrx.<a class="code" href="classMatrixRowCol.html#a4">Add</a>(mr,<a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n0">f</a>); mrx.<a class="code" href="classMatrixRow.html#a2">Next</a>(); mr.<a class="code" href="classMatrixRow.html#a2">Next</a>(); }
00086             gmx-&gt;ReleaseAndDelete(); <a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n2">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a7">tDelete</a>();
00087 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
00088 <span class="preprocessor"></span>            <span class="keyword">delete</span> <span class="keyword">this</span>;
00089 <span class="preprocessor">#endif</span>
00090 <span class="preprocessor"></span>            <span class="keywordflow">return</span> gmx;
00091         }
00092         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n2">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a8">reuse</a>()) {
00093             <a class="code" href="NEWMAT5_8CPP.html#a0">REPORT</a> <a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n2">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b2">Add</a>(<a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n0">f</a>);
00094 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
00095 <span class="preprocessor"></span>            <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gmx = <a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n2">gm</a>; <span class="keyword">delete</span> <span class="keyword">this</span>; <span class="keywordflow">return</span> gmx;
00096 <span class="preprocessor">#else</span>
00097 <span class="preprocessor"></span>            <span class="keywordflow">return</span> gm;
00098 <span class="preprocessor">#endif</span>
00099 <span class="preprocessor"></span>        }
00100         <span class="keywordflow">else</span> {
00101             <a class="code" href="NEWMAT5_8CPP.html#a0">REPORT</a> <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gmy = <a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n2">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a1">Type</a>().<a class="code" href="classNEWMAT_1_1MatrixType.html#a19">New</a>(nr,nc,<span class="keyword">this</span>);
00102             gmy-&gt;ReleaseAndDelete(); gmy-&gt;Add(<a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n2">gm</a>,<a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n0">f</a>);
00103 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
00104 <span class="preprocessor"></span>            <span class="keyword">delete</span> <span class="keyword">this</span>;
00105 <span class="preprocessor">#endif</span>
00106 <span class="preprocessor"></span>            <span class="keywordflow">return</span> gmy;
00107         }
00108     }
00109 
<a name="l00110"></a><a class="code" href="classNEWMAT_1_1NegShiftedMatrix.html#a0">00110</a>     <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* NegShiftedMatrix::Evaluate(<a class="code" href="classNEWMAT_1_1MatrixType.html">MatrixType</a> mt) {
00111         <a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n2">gm</a>=((<a class="code" href="classNEWMAT_1_1BaseMatrix.html">BaseMatrix</a>*&amp;)<a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n1">bm</a>)-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a0">Evaluate</a>();
00112         <span class="keywordtype">int</span> nr=<a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n2">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a2">Nrows</a>(); <span class="keywordtype">int</span> nc=<a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n2">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a3">Ncols</a>();
00113         <a class="code" href="namespaceNEWMAT.html#a45">Compare</a>(<a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n2">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a1">Type</a>().<a class="code" href="classNEWMAT_1_1MatrixType.html#a15">AddEqualEl</a>(),mt);
00114         <span class="keywordflow">if</span> (!(mt==<a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n2">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a1">Type</a>())) {
00115             <a class="code" href="NEWMAT5_8CPP.html#a0">REPORT</a>
00116                 <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gmx = mt.<a class="code" href="classNEWMAT_1_1MatrixType.html#a19">New</a>(nr,nc,<span class="keyword">this</span>);
00117             <a class="code" href="classMatrixRow.html">MatrixRow</a> mr(<a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n2">gm</a>, <a class="code" href="NEWMATRC_8H.html#a6a1">LoadOnEntry</a>);
00118             <a class="code" href="classMatrixRow.html">MatrixRow</a> mrx(gmx, <a class="code" href="NEWMATRC_8H.html#a6a2">StoreOnExit</a>+<a class="code" href="NEWMATRC_8H.html#a6a3">DirectPart</a>);
00119             <span class="keywordflow">while</span> (nr--) { mrx.<a class="code" href="classMatrixRowCol.html#a8">NegAdd</a>(mr,<a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n0">f</a>); mrx.<a class="code" href="classMatrixRow.html#a2">Next</a>(); mr.<a class="code" href="classMatrixRow.html#a2">Next</a>(); }
00120             gmx-&gt;ReleaseAndDelete(); <a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n2">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a7">tDelete</a>();
00121 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
00122 <span class="preprocessor"></span>            <span class="keyword">delete</span> <span class="keyword">this</span>;
00123 <span class="preprocessor">#endif</span>
00124 <span class="preprocessor"></span>            <span class="keywordflow">return</span> gmx;
00125         }
00126         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n2">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a8">reuse</a>()) {
00127             <a class="code" href="NEWMAT5_8CPP.html#a0">REPORT</a> <a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n2">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b4">NegAdd</a>(<a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n0">f</a>);
00128 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
00129 <span class="preprocessor"></span>            <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gmx = <a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n2">gm</a>; <span class="keyword">delete</span> <span class="keyword">this</span>; <span class="keywordflow">return</span> gmx;
00130 <span class="preprocessor">#else</span>
00131 <span class="preprocessor"></span>            <span class="keywordflow">return</span> gm;
00132 <span class="preprocessor">#endif</span>
00133 <span class="preprocessor"></span>        }
00134         <span class="keywordflow">else</span> {
00135             <a class="code" href="NEWMAT5_8CPP.html#a0">REPORT</a> <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gmy = <a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n2">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a1">Type</a>().<a class="code" href="classNEWMAT_1_1MatrixType.html#a19">New</a>(nr,nc,<span class="keyword">this</span>);
00136             gmy-&gt;ReleaseAndDelete(); gmy-&gt;NegAdd(<a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n2">gm</a>,<a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n0">f</a>);
00137 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
00138 <span class="preprocessor"></span>            <span class="keyword">delete</span> <span class="keyword">this</span>;
00139 <span class="preprocessor">#endif</span>
00140 <span class="preprocessor"></span>            <span class="keywordflow">return</span> gmy;
00141         }
00142     }
00143 
<a name="l00144"></a><a class="code" href="classNEWMAT_1_1ScaledMatrix.html#a0">00144</a>     <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* ScaledMatrix::Evaluate(<a class="code" href="classNEWMAT_1_1MatrixType.html">MatrixType</a> mt) {
00145         <a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n2">gm</a>=((<a class="code" href="classNEWMAT_1_1BaseMatrix.html">BaseMatrix</a>*&amp;)<a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n1">bm</a>)-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a0">Evaluate</a>();
00146         <span class="keywordtype">int</span> nr=<a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n2">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a2">Nrows</a>(); <span class="keywordtype">int</span> nc=<a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n2">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a3">Ncols</a>();
00147         <span class="keywordflow">if</span> (<a class="code" href="namespaceNEWMAT.html#a45">Compare</a>(<a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n2">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a1">Type</a>(),mt)) {
00148             <span class="keywordflow">if</span> (<a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n2">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a8">reuse</a>()) {
00149                 <a class="code" href="NEWMAT5_8CPP.html#a0">REPORT</a> <a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n2">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b6">Multiply</a>(<a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n0">f</a>);
00150 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
00151 <span class="preprocessor"></span>                <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gmx = <a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n2">gm</a>; <span class="keyword">delete</span> <span class="keyword">this</span>; <span class="keywordflow">return</span> gmx;
00152 <span class="preprocessor">#else</span>
00153 <span class="preprocessor"></span>                <span class="keywordflow">return</span> gm;
00154 <span class="preprocessor">#endif</span>
00155 <span class="preprocessor"></span>            }
00156             <span class="keywordflow">else</span> {
00157                 <a class="code" href="NEWMAT5_8CPP.html#a0">REPORT</a> <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gmx = <a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n2">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a1">Type</a>().<a class="code" href="classNEWMAT_1_1MatrixType.html#a19">New</a>(nr,nc,<span class="keyword">this</span>);
00158                 gmx-&gt;ReleaseAndDelete(); gmx-&gt;Multiply(<a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n2">gm</a>,<a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n0">f</a>);
00159 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
00160 <span class="preprocessor"></span>                <span class="keyword">delete</span> <span class="keyword">this</span>;
00161 <span class="preprocessor">#endif</span>
00162 <span class="preprocessor"></span>                <span class="keywordflow">return</span> gmx;
00163             }
00164         }
00165         <span class="keywordflow">else</span> {
00166             <a class="code" href="NEWMAT5_8CPP.html#a0">REPORT</a>
00167                 <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gmx = mt.<a class="code" href="classNEWMAT_1_1MatrixType.html#a19">New</a>(nr,nc,<span class="keyword">this</span>);
00168             <a class="code" href="classMatrixRow.html">MatrixRow</a> mr(<a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n2">gm</a>, <a class="code" href="NEWMATRC_8H.html#a6a1">LoadOnEntry</a>);
00169             <a class="code" href="classMatrixRow.html">MatrixRow</a> mrx(gmx, <a class="code" href="NEWMATRC_8H.html#a6a2">StoreOnExit</a>+<a class="code" href="NEWMATRC_8H.html#a6a3">DirectPart</a>);
00170             <span class="keywordflow">while</span> (nr--) { mrx.<a class="code" href="classMatrixRowCol.html#a13">Multiply</a>(mr,<a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n0">f</a>); mrx.<a class="code" href="classMatrixRow.html#a2">Next</a>(); mr.<a class="code" href="classMatrixRow.html#a2">Next</a>(); }
00171             gmx-&gt;ReleaseAndDelete(); <a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n2">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a7">tDelete</a>();
00172 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
00173 <span class="preprocessor"></span>            <span class="keyword">delete</span> <span class="keyword">this</span>;
00174 <span class="preprocessor">#endif</span>
00175 <span class="preprocessor"></span>            <span class="keywordflow">return</span> gmx;
00176         }
00177     }
00178 
<a name="l00179"></a><a class="code" href="classNEWMAT_1_1NegatedMatrix.html#a0">00179</a>     <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* NegatedMatrix::Evaluate(<a class="code" href="classNEWMAT_1_1MatrixType.html">MatrixType</a> mt) {
00180         <a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>=((<a class="code" href="classNEWMAT_1_1BaseMatrix.html">BaseMatrix</a>*&amp;)<a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n0">bm</a>)-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a0">Evaluate</a>();
00181         <span class="keywordtype">int</span> nr=<a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a2">Nrows</a>(); <span class="keywordtype">int</span> nc=<a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a3">Ncols</a>();
00182         <span class="keywordflow">if</span> (<a class="code" href="namespaceNEWMAT.html#a45">Compare</a>(<a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a1">Type</a>(),mt)) {
00183             <span class="keywordflow">if</span> (<a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a8">reuse</a>()) {
00184                 <a class="code" href="NEWMAT5_8CPP.html#a0">REPORT</a> <a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b8">Negate</a>();
00185 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
00186 <span class="preprocessor"></span>                <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gmx = <a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>; <span class="keyword">delete</span> <span class="keyword">this</span>; <span class="keywordflow">return</span> gmx;
00187 <span class="preprocessor">#else</span>
00188 <span class="preprocessor"></span>                <span class="keywordflow">return</span> gm;
00189 <span class="preprocessor">#endif</span>
00190 <span class="preprocessor"></span>            }
00191             <span class="keywordflow">else</span> {
00192                 <a class="code" href="NEWMAT5_8CPP.html#a0">REPORT</a>
00193                     <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gmx = <a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a1">Type</a>().<a class="code" href="classNEWMAT_1_1MatrixType.html#a19">New</a>(nr,nc,<span class="keyword">this</span>);
00194                 gmx-&gt;ReleaseAndDelete(); gmx-&gt;Negate(<a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>);
00195 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
00196 <span class="preprocessor"></span>                <span class="keyword">delete</span> <span class="keyword">this</span>;
00197 <span class="preprocessor">#endif</span>
00198 <span class="preprocessor"></span>                <span class="keywordflow">return</span> gmx;
00199             }
00200         }
00201         <span class="keywordflow">else</span> {
00202             <a class="code" href="NEWMAT5_8CPP.html#a0">REPORT</a>
00203                 <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gmx = mt.<a class="code" href="classNEWMAT_1_1MatrixType.html#a19">New</a>(nr,nc,<span class="keyword">this</span>);
00204             <a class="code" href="classMatrixRow.html">MatrixRow</a> mr(<a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>, <a class="code" href="NEWMATRC_8H.html#a6a1">LoadOnEntry</a>);
00205             <a class="code" href="classMatrixRow.html">MatrixRow</a> mrx(gmx, <a class="code" href="NEWMATRC_8H.html#a6a2">StoreOnExit</a>+<a class="code" href="NEWMATRC_8H.html#a6a3">DirectPart</a>);
00206             <span class="keywordflow">while</span> (nr--) { mrx.<a class="code" href="classMatrixRowCol.html#a26">Negate</a>(mr); mrx.<a class="code" href="classMatrixRow.html#a2">Next</a>(); mr.<a class="code" href="classMatrixRow.html#a2">Next</a>(); }
00207             gmx-&gt;ReleaseAndDelete(); <a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a7">tDelete</a>();
00208 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
00209 <span class="preprocessor"></span>            <span class="keyword">delete</span> <span class="keyword">this</span>;
00210 <span class="preprocessor">#endif</span>
00211 <span class="preprocessor"></span>            <span class="keywordflow">return</span> gmx;
00212         }
00213     }
00214 
<a name="l00215"></a><a class="code" href="classNEWMAT_1_1ReversedMatrix.html#a0">00215</a>     <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* ReversedMatrix::Evaluate(<a class="code" href="classNEWMAT_1_1MatrixType.html">MatrixType</a> mt) {
00216         <a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>=((<a class="code" href="classNEWMAT_1_1BaseMatrix.html">BaseMatrix</a>*&amp;)<a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n0">bm</a>)-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a0">Evaluate</a>(); <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gmx;
00217 
00218         <span class="keywordflow">if</span> ((<a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a1">Type</a>()).IsBand() &amp;&amp; ! (<a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a1">Type</a>()).IsDiagonal()) {
00219             <a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a7">tDelete</a>();
00220 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
00221 <span class="preprocessor"></span>            <span class="keyword">delete</span> <span class="keyword">this</span>;
00222 <span class="preprocessor">#endif</span>
00223 <span class="preprocessor"></span>            Throw(<a class="code" href="classNEWMAT_1_1NotDefinedException.html">NotDefinedException</a>(<span class="stringliteral">"Reverse"</span>, <span class="stringliteral">"band matrices"</span>));
00224         }
00225 
00226         <span class="keywordflow">if</span> (<a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a8">reuse</a>()) { <a class="code" href="NEWMAT5_8CPP.html#a0">REPORT</a> <a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b10">ReverseElements</a>(); gmx = <a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>; }
00227         <span class="keywordflow">else</span> {
00228             <a class="code" href="NEWMAT5_8CPP.html#a0">REPORT</a>
00229                 gmx = <a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a1">Type</a>().<a class="code" href="classNEWMAT_1_1MatrixType.html#a19">New</a>(<a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a2">Nrows</a>(), <a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a3">Ncols</a>(), <span class="keyword">this</span>);
00230             gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b10">ReverseElements</a>(<a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>); gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a14">ReleaseAndDelete</a>();
00231         }
00232 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
00233 <span class="preprocessor"></span>        <span class="keyword">delete</span> <span class="keyword">this</span>;
00234 <span class="preprocessor">#endif</span>
00235 <span class="preprocessor"></span>        <span class="keywordflow">return</span> gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a0">Evaluate</a>(mt);                     <span class="comment">// target matrix is different type?</span>
00236 
00237     }
00238 
<a name="l00239"></a><a class="code" href="classNEWMAT_1_1TransposedMatrix.html#a0">00239</a>     <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* TransposedMatrix::Evaluate(<a class="code" href="classNEWMAT_1_1MatrixType.html">MatrixType</a> mt) {
00240         <a class="code" href="NEWMAT5_8CPP.html#a0">REPORT</a>
00241             <a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>=((<a class="code" href="classNEWMAT_1_1BaseMatrix.html">BaseMatrix</a>*&amp;)<a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n0">bm</a>)-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a0">Evaluate</a>();
00242         <a class="code" href="namespaceNEWMAT.html#a45">Compare</a>(<a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a1">Type</a>().<a class="code" href="classNEWMAT_1_1MatrixType.html#a14">t</a>(),mt);
00243         <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gmx=<a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b19">Transpose</a>(<span class="keyword">this</span>, mt);
00244 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
00245 <span class="preprocessor"></span>        <span class="keyword">delete</span> <span class="keyword">this</span>;
00246 <span class="preprocessor">#endif</span>
00247 <span class="preprocessor"></span>        <span class="keywordflow">return</span> gmx;
00248     }
00249 
<a name="l00250"></a><a class="code" href="classNEWMAT_1_1RowedMatrix.html#a0">00250</a>     <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* RowedMatrix::Evaluate(<a class="code" href="classNEWMAT_1_1MatrixType.html">MatrixType</a> mt) {
00251         <a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a> = ((<a class="code" href="classNEWMAT_1_1BaseMatrix.html">BaseMatrix</a>*&amp;)<a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n0">bm</a>)-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a0">Evaluate</a>();
00252         <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gmx = <span class="keyword">new</span> <a class="code" href="classNEWMAT_1_1RowVector.html">RowVector</a>; <a class="code" href="namespaceNEWMAT.html#a19">MatrixErrorNoSpace</a>(gmx);
00253         gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a> = 1; gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a> = gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a> = <a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a>;
00254 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
00255 <span class="preprocessor"></span>        <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gmy = <a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>; <span class="keyword">delete</span> <span class="keyword">this</span>; <span class="keywordflow">return</span> gmy-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b14">BorrowStore</a>(gmx,mt);
00256 <span class="preprocessor">#else</span>
00257 <span class="preprocessor"></span>        <span class="keywordflow">return</span> gm-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b14">BorrowStore</a>(gmx,mt);
00258 <span class="preprocessor">#endif</span>
00259 <span class="preprocessor"></span>    }
00260 
<a name="l00261"></a><a class="code" href="classNEWMAT_1_1ColedMatrix.html#a0">00261</a>     <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* ColedMatrix::Evaluate(<a class="code" href="classNEWMAT_1_1MatrixType.html">MatrixType</a> mt) {
00262         <a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a> = ((<a class="code" href="classNEWMAT_1_1BaseMatrix.html">BaseMatrix</a>*&amp;)<a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n0">bm</a>)-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a0">Evaluate</a>();
00263         <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gmx = <span class="keyword">new</span> <a class="code" href="classNEWMAT_1_1ColumnVector.html">ColumnVector</a>; <a class="code" href="namespaceNEWMAT.html#a19">MatrixErrorNoSpace</a>(gmx);
00264         gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a> = 1; gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a> = gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a> = <a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a>;
00265 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
00266 <span class="preprocessor"></span>        <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gmy = <a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>; <span class="keyword">delete</span> <span class="keyword">this</span>; <span class="keywordflow">return</span> gmy-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b14">BorrowStore</a>(gmx,mt);
00267 <span class="preprocessor">#else</span>
00268 <span class="preprocessor"></span>        <span class="keywordflow">return</span> gm-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b14">BorrowStore</a>(gmx,mt);
00269 <span class="preprocessor">#endif</span>
00270 <span class="preprocessor"></span>    }
00271 
<a name="l00272"></a><a class="code" href="classNEWMAT_1_1DiagedMatrix.html#a0">00272</a>     <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* DiagedMatrix::Evaluate(<a class="code" href="classNEWMAT_1_1MatrixType.html">MatrixType</a> mt) {
00273         <a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a> = ((<a class="code" href="classNEWMAT_1_1BaseMatrix.html">BaseMatrix</a>*&amp;)<a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n0">bm</a>)-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a0">Evaluate</a>();
00274         <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gmx = <span class="keyword">new</span> <a class="code" href="classNEWMAT_1_1DiagonalMatrix.html">DiagonalMatrix</a>; <a class="code" href="namespaceNEWMAT.html#a19">MatrixErrorNoSpace</a>(gmx);
00275         gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a> = gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a> = gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a> = <a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a>;
00276 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
00277 <span class="preprocessor"></span>        <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gmy = <a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>; <span class="keyword">delete</span> <span class="keyword">this</span>; <span class="keywordflow">return</span> gmy-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b14">BorrowStore</a>(gmx,mt);
00278 <span class="preprocessor">#else</span>
00279 <span class="preprocessor"></span>        <span class="keywordflow">return</span> gm-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b14">BorrowStore</a>(gmx,mt);
00280 <span class="preprocessor">#endif</span>
00281 <span class="preprocessor"></span>    }
00282 
<a name="l00283"></a><a class="code" href="classNEWMAT_1_1MatedMatrix.html#a0">00283</a>     <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* MatedMatrix::Evaluate(<a class="code" href="classNEWMAT_1_1MatrixType.html">MatrixType</a> mt) {
00284         <a class="code" href="classTracer.html">Tracer</a> tr(<span class="stringliteral">"MatedMatrix::Evaluate"</span>);
00285         <a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a> = ((<a class="code" href="classNEWMAT_1_1BaseMatrix.html">BaseMatrix</a>*&amp;)<a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n0">bm</a>)-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a0">Evaluate</a>();
00286         <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gmx = <span class="keyword">new</span> <a class="code" href="classNEWMAT_1_1Matrix.html">Matrix</a>; <a class="code" href="namespaceNEWMAT.html#a19">MatrixErrorNoSpace</a>(gmx);
00287         gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a> = nr; gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a> = nc; gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a> = <a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a>;
00288         <span class="keywordflow">if</span> (nr*nc != gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a>)
00289             Throw(<a class="code" href="classNEWMAT_1_1IncompatibleDimensionsException.html">IncompatibleDimensionsException</a>());
00290 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
00291 <span class="preprocessor"></span>        <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gmy = <a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>; <span class="keyword">delete</span> <span class="keyword">this</span>; <span class="keywordflow">return</span> gmy-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b14">BorrowStore</a>(gmx,mt);
00292 <span class="preprocessor">#else</span>
00293 <span class="preprocessor"></span>        <span class="keywordflow">return</span> gm-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b14">BorrowStore</a>(gmx,mt);
00294 <span class="preprocessor">#endif</span>
00295 <span class="preprocessor"></span>    }
00296 
<a name="l00297"></a><a class="code" href="classNEWMAT_1_1GetSubMatrix.html#a0">00297</a>     <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* GetSubMatrix::Evaluate(<a class="code" href="classNEWMAT_1_1MatrixType.html">MatrixType</a> mt) {
00298         <a class="code" href="NEWMAT5_8CPP.html#a0">REPORT</a>
00299             <a class="code" href="classTracer.html">Tracer</a> tr(<span class="stringliteral">"SubMatrix(evaluate)"</span>);
00300         <a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a> = ((<a class="code" href="classNEWMAT_1_1BaseMatrix.html">BaseMatrix</a>*&amp;)<a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n0">bm</a>)-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a0">Evaluate</a>();
00301         <span class="keywordflow">if</span> (row_number &lt; 0) row_number = <a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a2">Nrows</a>();
00302         <span class="keywordflow">if</span> (col_number &lt; 0) col_number = <a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a3">Ncols</a>();
00303         <span class="keywordflow">if</span> (row_skip+row_number &gt; <a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a2">Nrows</a>() || col_skip+col_number &gt; <a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a3">Ncols</a>()) {
00304             <a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a7">tDelete</a>();
00305 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
00306 <span class="preprocessor"></span>            <span class="keyword">delete</span> <span class="keyword">this</span>;
00307 <span class="preprocessor">#endif</span>
00308 <span class="preprocessor"></span>            Throw(<a class="code" href="classNEWMAT_1_1SubMatrixDimensionException.html">SubMatrixDimensionException</a>());
00309         }
00310         <span class="keywordflow">if</span> (IsSym) <a class="code" href="namespaceNEWMAT.html#a45">Compare</a>(<a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a1">Type</a>().<a class="code" href="classNEWMAT_1_1MatrixType.html#a18">ssub</a>(), mt);
00311         <span class="keywordflow">else</span> <a class="code" href="namespaceNEWMAT.html#a45">Compare</a>(<a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a1">Type</a>().<a class="code" href="classNEWMAT_1_1MatrixType.html#a17">sub</a>(), mt);
00312         <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gmx = mt.<a class="code" href="classNEWMAT_1_1MatrixType.html#a19">New</a>(row_number, col_number, <span class="keyword">this</span>);
00313         <span class="keywordtype">int</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a> = row_number;
00314         <a class="code" href="classMatrixRow.html">MatrixRow</a> mr(<a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>, <a class="code" href="NEWMATRC_8H.html#a6a1">LoadOnEntry</a>, row_skip);
00315         <a class="code" href="classMatrixRow.html">MatrixRow</a> mrx(gmx, <a class="code" href="NEWMATRC_8H.html#a6a2">StoreOnExit</a>+<a class="code" href="NEWMATRC_8H.html#a6a3">DirectPart</a>);
00316         <a class="code" href="classMatrixRowCol.html">MatrixRowCol</a> sub;
00317         <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--) {
00318             mr.<a class="code" href="classMatrixRowCol.html#a35">SubRowCol</a>(sub, col_skip, col_number);    <span class="comment">// put values in sub</span>
00319             mrx.<a class="code" href="classMatrixRowCol.html#a15">Copy</a>(sub); mrx.<a class="code" href="classMatrixRow.html#a2">Next</a>(); mr.<a class="code" href="classMatrixRow.html#a2">Next</a>();
00320         }
00321         gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a14">ReleaseAndDelete</a>(); <a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a7">tDelete</a>();
00322 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
00323 <span class="preprocessor"></span>        <span class="keyword">delete</span> <span class="keyword">this</span>;
00324 <span class="preprocessor">#endif</span>
00325 <span class="preprocessor"></span>        <span class="keywordflow">return</span> gmx;
00326     }
00327 
<a name="l00328"></a><a class="code" href="classNEWMAT_1_1ReturnMatrixX.html#a0">00328</a>     <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* ReturnMatrixX::Evaluate(<a class="code" href="classNEWMAT_1_1MatrixType.html">MatrixType</a> mt) {
00329 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY_R</span>
00330 <span class="preprocessor"></span>        <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gmx = gm; <span class="keyword">delete</span> <span class="keyword">this</span>; <span class="keywordflow">return</span> gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a0">Evaluate</a>(mt);
00331 <span class="preprocessor">#else</span>
00332 <span class="preprocessor"></span>        <span class="keywordflow">return</span> gm-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a0">Evaluate</a>(mt);
00333 <span class="preprocessor">#endif</span>
00334 <span class="preprocessor"></span>    }
00335 
<a name="l00336"></a><a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b2">00336</a>     <span class="keywordtype">void</span> GeneralMatrix::Add(<a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gm1, <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a> f) {
00337         <a class="code" href="NEWMAT5_8CPP.html#a0">REPORT</a>
00338             <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* s1=gm1-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>; <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* s=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>; <span class="keywordtype">int</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>=(<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a> &gt;&gt; 2);
00339             <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--)
00340             { *s++ = *s1++ + f; *s++ = *s1++ + f; *s++ = *s1++ + f; *s++ = *s1++ + f; }
00341             <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a> = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a> &amp; 3; <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--) *s++ = *s1++ + f;
00342     }
00343 
<a name="l00344"></a><a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b3">00344</a>     <span class="keywordtype">void</span> GeneralMatrix::Add(<a class="code" href="namespaceRBD__COMMON.html#a0">Real</a> f) {
00345         <a class="code" href="NEWMAT5_8CPP.html#a0">REPORT</a>
00346             <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* s=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>; <span class="keywordtype">int</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>=(<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a> &gt;&gt; 2);
00347         <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--) { *s++ += f; *s++ += f; *s++ += f; *s++ += f; }
00348         <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a> = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a> &amp; 3; <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--) *s++ += f;
00349     }
00350 
<a name="l00351"></a><a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b4">00351</a>     <span class="keywordtype">void</span> GeneralMatrix::NegAdd(<a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gm1, <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a> f) {
00352         <a class="code" href="NEWMAT5_8CPP.html#a0">REPORT</a>
00353             <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* s1=gm1-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>; <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* s=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>; <span class="keywordtype">int</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>=(<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a> &gt;&gt; 2);
00354             <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--)
00355             { *s++ = f - *s1++; *s++ = f - *s1++; *s++ = f - *s1++; *s++ = f - *s1++; }
00356             <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a> = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a> &amp; 3; <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--) *s++ = f - *s1++;
00357     }
00358 
<a name="l00359"></a><a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b5">00359</a>     <span class="keywordtype">void</span> GeneralMatrix::NegAdd(<a class="code" href="namespaceRBD__COMMON.html#a0">Real</a> f) {
00360         <a class="code" href="NEWMAT5_8CPP.html#a0">REPORT</a>
00361             <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* s=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>; <span class="keywordtype">int</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>=(<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a> &gt;&gt; 2);
00362         <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--) {
00363             *s = f - *s; s++; *s = f - *s; s++;
00364             *s = f - *s; s++; *s = f - *s; s++;
00365         }
00366         <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a> = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a> &amp; 3; <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--)  { *s = f - *s; s++; }
00367     }
00368 
<a name="l00369"></a><a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b8">00369</a>     <span class="keywordtype">void</span> GeneralMatrix::Negate(<a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gm1) {
00370         <span class="comment">// change sign of elements</span>
00371         <a class="code" href="NEWMAT5_8CPP.html#a0">REPORT</a>
00372             <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* s1=gm1-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>; <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* s=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>; <span class="keywordtype">int</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>=(<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a> &gt;&gt; 2);
00373             <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--)
00374             { *s++ = -(*s1++); *s++ = -(*s1++); *s++ = -(*s1++); *s++ = -(*s1++); }
00375             <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a> = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a> &amp; 3; <span class="keywordflow">while</span>(<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--) *s++ = -(*s1++);
00376     }
00377 
<a name="l00378"></a><a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b9">00378</a>     <span class="keywordtype">void</span> GeneralMatrix::Negate() {
00379         <a class="code" href="NEWMAT5_8CPP.html#a0">REPORT</a>
00380             <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* s=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>; <span class="keywordtype">int</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>=(<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a> &gt;&gt; 2);
00381         <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--)
00382         { *s = -(*s); s++; *s = -(*s); s++; *s = -(*s); s++; *s = -(*s); s++; }
00383         <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a> = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a> &amp; 3; <span class="keywordflow">while</span>(<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--) { *s = -(*s); s++; }
00384     }
00385 
<a name="l00386"></a><a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b6">00386</a>     <span class="keywordtype">void</span> GeneralMatrix::Multiply(<a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gm1, <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a> f) {
00387         <a class="code" href="NEWMAT5_8CPP.html#a0">REPORT</a>
00388             <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* s1=gm1-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>; <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* s=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>;  <span class="keywordtype">int</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>=(<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a> &gt;&gt; 2);
00389             <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--)
00390             { *s++ = *s1++ * f; *s++ = *s1++ * f; *s++ = *s1++ * f; *s++ = *s1++ * f; }
00391             <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a> = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a> &amp; 3; <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--) *s++ = *s1++ * f;
00392     }
00393 
<a name="l00394"></a><a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b7">00394</a>     <span class="keywordtype">void</span> GeneralMatrix::Multiply(<a class="code" href="namespaceRBD__COMMON.html#a0">Real</a> f) {
00395         <a class="code" href="NEWMAT5_8CPP.html#a0">REPORT</a>
00396             <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* s=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>; <span class="keywordtype">int</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>=(<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a> &gt;&gt; 2);
00397         <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--) { *s++ *= f; *s++ *= f; *s++ *= f; *s++ *= f; }
00398         <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a> = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a> &amp; 3; <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--) *s++ *= f;
00399     }
00400 
00401     <span class="comment">/************************ MatrixInput routines ****************************/</span>
00402 
00403     <span class="keywordtype">int</span> MatrixInput::n;                             <span class="comment">// number values still to be read</span>
00404     <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* MatrixInput::r;                           <span class="comment">// pointer to last thing read</span>
00405     <span class="keywordtype">int</span> MatrixInput::depth;                         <span class="comment">// number of objects of this class in existence</span>
00406 
<a name="l00407"></a><a class="code" href="classNEWMAT_1_1MatrixInput.html#a3">00407</a>     <a class="code" href="classNEWMAT_1_1MatrixInput.html">MatrixInput</a> <a class="code" href="NEWMAT9_8CPP.html#a77">MatrixInput::operator&lt;&lt;</a>(<a class="code" href="namespaceRBD__COMMON.html#a0">Real</a> f) {
00408         <a class="code" href="NEWMAT5_8CPP.html#a0">REPORT</a>
00409             <span class="keywordflow">if</span> (!(n--))
00410             { depth=0;  n=0; Throw(<a class="code" href="classNEWMAT_1_1ProgramException.html">ProgramException</a>(<span class="stringliteral">"List of values too long"</span>)); }
00411         *(++r) = f;
00412         <span class="keywordflow">return</span> <a class="code" href="classNEWMAT_1_1MatrixInput.html#a0">MatrixInput</a>();
00413     }
00414 
<a name="l00415"></a><a class="code" href="classNEWMAT_1_1BandMatrix.html#a27">00415</a>     <a class="code" href="classNEWMAT_1_1MatrixInput.html">MatrixInput</a> <a class="code" href="NEWMAT9_8CPP.html#a77">BandMatrix::operator&lt;&lt;</a>(<a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>) {
00416         Throw(<a class="code" href="classNEWMAT_1_1ProgramException.html">ProgramException</a>(<span class="stringliteral">"Cannot use list read with a BandMatrix"</span>));
00417         <span class="keywordflow">return</span> <a class="code" href="classNEWMAT_1_1MatrixInput.html">MatrixInput</a>();
00418     }
00419 
<a name="l00420"></a><a class="code" href="classNEWMAT_1_1BandMatrix.html#a28">00420</a>     <span class="keywordtype">void</span> <a class="code" href="NEWMAT9_8CPP.html#a77">BandMatrix::operator&lt;&lt;</a>(<span class="keyword">const</span> <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>*)
00421     { Throw(<a class="code" href="classNEWMAT_1_1ProgramException.html">ProgramException</a>(<span class="stringliteral">"Cannot use array read with a BandMatrix"</span>)); }
00422 
<a name="l00423"></a><a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a50">00423</a>     <a class="code" href="classNEWMAT_1_1MatrixInput.html">MatrixInput</a> <a class="code" href="NEWMAT9_8CPP.html#a77">GeneralMatrix::operator&lt;&lt;</a>(<a class="code" href="namespaceRBD__COMMON.html#a0">Real</a> f) {
00424         <a class="code" href="NEWMAT5_8CPP.html#a0">REPORT</a>
00425             <span class="keywordflow">if</span> (MatrixInput::n) {
00426                 MatrixInput::depth=0;                       <span class="comment">// so we can recover</span>
00427                 MatrixInput::n=0;                           <span class="comment">// so we can recover</span>
00428                 Throw(<a class="code" href="classNEWMAT_1_1ProgramException.html">ProgramException</a>(<span class="stringliteral">"A list of values was too short"</span>));
00429             }
00430         MatrixInput::n = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a4">Storage</a>();
00431         <span class="keywordflow">if</span> (MatrixInput::n&lt;=0)
00432             Throw(<a class="code" href="classNEWMAT_1_1ProgramException.html">ProgramException</a>(<span class="stringliteral">"Loading data to zero dimension matrix"</span>));
00433         MatrixInput::r = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a5">Store</a>(); *(MatrixInput::r) = f; MatrixInput::n--;
00434         <span class="keywordflow">return</span> <a class="code" href="classNEWMAT_1_1MatrixInput.html">MatrixInput</a>();
00435     }
00436 
00437     <span class="comment">// fred 0512</span>
<a name="l00438"></a><a class="code" href="classNEWMAT_1_1DiagonalMatrix.html#a26">00438</a>     <span class="keywordtype">void</span> DiagonalMatrix::set_diagonal(<span class="keyword">const</span> <a class="code" href="classNEWMAT_1_1ColumnVector.html">ColumnVector</a>&amp; cv) {
00439         <span class="comment">//int rows = Nrows();</span>
00440         <span class="keywordflow">if</span> ( <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a> != cv.<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a2">Nrows</a>() )
00441             Throw(<a class="code" href="classNEWMAT_1_1ProgramException.html">ProgramException</a>(<span class="stringliteral">"DiagonalMatrix::set_diagonal: wrong Nrows"</span>));
00442 
00443         <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* s=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>;
00444         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> idx=0; idx&lt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>; idx++) {
00445             s[idx] = cv(idx+1);                         <span class="comment">// store just keep the values of the matrix's diagonal</span>
00446         }
00447     }
00448 
<a name="l00449"></a><a class="code" href="classNEWMAT_1_1MatrixInput.html#a2">00449</a>     MatrixInput::~MatrixInput() {
00450         <a class="code" href="NEWMAT5_8CPP.html#a0">REPORT</a>
00451             <span class="keywordflow">if</span> (depth  == 1 &amp;&amp; n != 0) {
00452                 depth = 0; n = 0;                           <span class="comment">// so we can recover</span>
00453                 Throw(<a class="code" href="classNEWMAT_1_1ProgramException.html">ProgramException</a>(<span class="stringliteral">"A list of values was too short"</span>));
00454             }
00455             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (depth&gt;0) depth--;
00456     }
00457 
00458     <span class="comment">// ************************* Reverse order of elements ***********************</span>
00459 
<a name="l00460"></a><a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b11">00460</a>     <span class="keywordtype">void</span> GeneralMatrix::ReverseElements(<a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gm) {
00461         <span class="comment">// reversing into a new matrix</span>
00462         <a class="code" href="NEWMAT5_8CPP.html#a0">REPORT</a>
00463             <span class="keywordtype">int</span> n = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a4">Storage</a>(); <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* rx = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a5">Store</a>() + n; <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* x = gm-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a5">Store</a>();
00464             <span class="keywordflow">while</span> (n--) *(--rx) = *(x++);
00465     }
00466 
<a name="l00467"></a><a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b10">00467</a>     <span class="keywordtype">void</span> GeneralMatrix::ReverseElements() {
00468         <span class="comment">// reversing in place</span>
00469         <a class="code" href="NEWMAT5_8CPP.html#a0">REPORT</a>
00470             <span class="keywordtype">int</span> n = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a4">Storage</a>(); <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* x = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a5">Store</a>(); <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* rx = x + n;
00471             n /= 2;
00472             <span class="keywordflow">while</span> (n--) { <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a> <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a10">t</a> = *(--rx); *rx = *x; *(x++) = <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a10">t</a>; }
00473     }
00474 
00475 <span class="preprocessor">#ifdef use_namespace</span>
00476 <span class="preprocessor"></span>}
00477 <span class="preprocessor">#endif</span>
</pre></div><hr><address style="align: right;"><small>Generated on Fri Aug 23 01:37:08 2002 for VirtualU by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.17 </small></address>
</body>
</html>
