<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>ODYNARRB.CPP Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.17 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>ODYNARRB.CPP</h1><a href="ODYNARRB_8CPP.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">//Filename    : ODYNARRB.CPP</span>
00002 <span class="comment">//Description : Object Dynamic Array Version B</span>
00003 
00004 <span class="preprocessor">#include &lt;OINFO.H&gt;</span>
00005 <span class="preprocessor">#include &lt;<a class="code" href="ODYNARRB_8H.html">ODYNARRB.H</a>&gt;</span>
00006 <span class="preprocessor">#include &lt;<a class="code" href="OFILE_8H.html">OFILE.H</a>&gt;</span>
00007 
00008 <span class="comment">//----------------------------------------------------------//</span>
00009 <span class="comment">//</span>
00010 <span class="comment">// Version B is different from Version A as :</span>
00011 <span class="comment">//</span>
00012 <span class="comment">// - when linkout() it doesn't not physically shift the memory</span>
00013 <span class="comment">//   upwards.</span>
00014 <span class="comment">//</span>
00015 <span class="comment">// - when linkin() it will search for empty rooms in the array</span>
00016 <span class="comment">//   before appending space at the end of the array.</span>
00017 <span class="comment">//</span>
00018 <span class="comment">//----------------------------------------------------------//</span>
00019 
<a name="l00020"></a><a class="code" href="ODYNARRB_8CPP.html#a0">00020</a> <span class="preprocessor">#define EMPTY_ROOM_ALLOC_STEP    5</span>
00021 <span class="preprocessor"></span>
00022 <span class="comment">//--------- BEGIN OF FUNCTION DynArrayB::DynArrayB -------//</span>
00023 <span class="comment">//</span>
00024 <span class="comment">// &lt;int&gt; eleSize  = size of each element</span>
00025 <span class="comment">// [int] blockNum = number of entity of each block of element</span>
00026 <span class="comment">//                       increased ( default : 30 )</span>
00027 <span class="comment">// [int] reuseIntervalDays = no. of game days deleted records needed to be kept before reusing them.</span>
00028 <span class="comment">//                                                                        (default: 0)</span>
00029 <span class="comment">//</span>
<a name="l00030"></a><a class="code" href="classDynArrayB.html#a0">00030</a> <a class="code" href="classDynArrayB.html#a0">DynArrayB::DynArrayB</a>(<span class="keywordtype">int</span> eleSize,<span class="keywordtype">int</span> blockNum,<span class="keywordtype">int</span> reuseIntervalDays) : <a class="code" href="classDynArray.html">DynArray</a>(eleSize, blockNum) {
00031     <a class="code" href="classDynArrayB.html#m0">empty_room_array</a> = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00032     <a class="code" href="classDynArrayB.html#m1">empty_room_num</a>   = 0;
00033     <a class="code" href="classDynArrayB.html#m2">empty_room_count</a> = 0;
00034 
00035     <a class="code" href="classDynArrayB.html#m3">reuse_interval_days</a> = reuseIntervalDays;
00036 }
00037 
00038 <span class="comment">//----------- END OF FUNCTION DynArrayB::DynArrayB -----//</span>
00039 
00040 <span class="comment">//--------- BEGIN OF FUNCTION DynArrayB::~DynArrayB -------//</span>
00041 <span class="comment">//</span>
<a name="l00042"></a><a class="code" href="classDynArrayB.html#a1">00042</a> <a class="code" href="classDynArrayB.html#a1">DynArrayB::~DynArrayB</a>() {
00043     <span class="keywordflow">if</span>( empty_room_array )
00044         <a class="code" href="ALL_8H.html#a8">mem_del</a>( <a class="code" href="classDynArrayB.html#m0">empty_room_array</a> );
00045 }
00046 
00047 <span class="comment">//----------- END OF FUNCTION DynArrayB::DynArrayB -----//</span>
00048 
00049 <span class="comment">//---------- BEGIN OF FUNCTION DynArrayB::linkin -----------//</span>
00050 <span class="comment">//</span>
00051 <span class="comment">// &lt;void*&gt; ent</span>
00052 <span class="comment">// &lt;int&gt;</span>
00053 <span class="comment">//</span>
00054 <span class="comment">// - when linkin() it will search for empty rooms in the array</span>
00055 <span class="comment">//   before appending space at the end of the array.</span>
00056 <span class="comment">//</span>
00057 <span class="comment">// - If found, then it will use that room</span>
00058 <span class="comment">//</span>
00059 <span class="comment">// - Otherwise, it will link a record at the END of the array</span>
00060 <span class="comment">//</span>
00061 <span class="comment">// WARNING : After calling linkin() all pointers to the linklist body</span>
00062 <span class="comment">//           should be updated, because mem_resize() will move the body memory</span>
00063 <span class="comment">//</span>
<a name="l00064"></a><a class="code" href="classDynArrayB.html#a4">00064</a> <span class="keywordtype">void</span> <a class="code" href="classDynArrayB.html#a4">DynArrayB::linkin</a>(<span class="keywordtype">void</span>* ent) {
00065     <span class="comment">//------- detect for empty rooms --------//</span>
00066 
00067     <span class="keywordtype">int</span> reusedFlag=0;
00068 
00069     <span class="keywordflow">if</span>( <a class="code" href="classDynArrayB.html#m2">empty_room_count</a> &gt; 0 ) {
00070         <span class="keywordflow">if</span>( reuse_interval_days ) {
00071             <span class="comment">//------ first in, first out approach -----//</span>
00072 
00073             <span class="keywordflow">if</span>( info.game_date &gt;= <a class="code" href="classDynArrayB.html#m0">empty_room_array</a>[0].<a class="code" href="structEmptyRoom.html#m1">deleted_game_date</a> + <a class="code" href="classDynArrayB.html#m3">reuse_interval_days</a> ) {
00074                 <a class="code" href="classDynArray.html#m2">cur_pos</a> = <a class="code" href="classDynArrayB.html#m0">empty_room_array</a>[0].<a class="code" href="structEmptyRoom.html#m0">recno</a>;
00075 
00076                 memmove( <a class="code" href="classDynArrayB.html#m0">empty_room_array</a>, <a class="code" href="classDynArrayB.html#m0">empty_room_array</a>+1, <span class="keyword">sizeof</span>(<a class="code" href="classDynArrayB.html#m0">empty_room_array</a>[0]) * (<a class="code" href="classDynArrayB.html#m2">empty_room_count</a>-1) );
00077 
00078                 <a class="code" href="classDynArrayB.html#m2">empty_room_count</a>--;
00079                 reusedFlag = 1;
00080             }
00081         }
00082         <span class="keywordflow">else</span> {
00083             <span class="comment">//------ last in, first out approach -----//</span>
00084 
00085             <a class="code" href="classDynArray.html#m2">cur_pos</a> = <a class="code" href="classDynArrayB.html#m0">empty_room_array</a>[<a class="code" href="classDynArrayB.html#m2">empty_room_count</a>-1].recno;
00086 
00087             <a class="code" href="classDynArrayB.html#m2">empty_room_count</a>--;
00088             reusedFlag = 1;
00089         }
00090     }
00091 
00092     <span class="keywordflow">if</span>( !reusedFlag ) {
00093         <a class="code" href="classDynArray.html#m3">last_ele</a>++;
00094         <a class="code" href="classDynArray.html#m2">cur_pos</a>=<a class="code" href="classDynArray.html#m3">last_ele</a>;
00095     }
00096 
00097     <span class="comment">//---------- regular link in -----------//</span>
00098 
00099     <span class="keywordflow">if</span> ( <a class="code" href="classDynArray.html#m3">last_ele</a> &gt; <a class="code" href="classDynArray.html#m0">ele_num</a> )                       <span class="comment">// not enough empty element left to hold the new entity</span>
00100         <a class="code" href="classDynArray.html#a3">resize</a>( <a class="code" href="classDynArray.html#m0">ele_num</a> + <a class="code" href="classDynArray.html#m1">block_num</a> );
00101 
00102     <span class="keywordflow">if</span> ( ent )
00103         memcpy(<a class="code" href="classDynArray.html#m7">body_buf</a>+(<a class="code" href="classDynArray.html#m2">cur_pos</a>-1)*<a class="code" href="classDynArray.html#m4">ele_size</a>, ent, <a class="code" href="classDynArray.html#m4">ele_size</a> );
00104     <span class="keywordflow">else</span>
00105         *(<a class="code" href="classDynArray.html#m7">body_buf</a>+(<a class="code" href="classDynArray.html#m2">cur_pos</a>-1)*<a class="code" href="classDynArray.html#m4">ele_size</a>) = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00106 }
00107 
00108 <span class="comment">//---------- END OF FUNCTION DynArrayB::linkin ------------//</span>
00109 
00110 <span class="comment">//----------- BEGIN OF FUNCTION DynArrayB::linkout ---------//</span>
00111 <span class="comment">//</span>
00112 <span class="comment">// - when linkout() it doesn't not physically shift the memory</span>
00113 <span class="comment">//   upwards.</span>
00114 <span class="comment">//</span>
00115 <span class="comment">// - it record the address of this empty room at empty room list</span>
00116 <span class="comment">//</span>
00117 <span class="comment">// [int] delPos = the position (recno) of the item to be deleted</span>
00118 <span class="comment">//                ( default : recno() current record no. )</span>
00119 <span class="comment">//</span>
<a name="l00120"></a><a class="code" href="classDynArrayB.html#a5">00120</a> <span class="keywordtype">void</span> <a class="code" href="classDynArrayB.html#a5">DynArrayB::linkout</a>(<span class="keywordtype">int</span> delPos) {
00121     <span class="keywordflow">if</span>( delPos &lt; 0 )
00122         delPos = <a class="code" href="classDynArray.html#m2">cur_pos</a>;
00123 
00124     <span class="keywordflow">if</span>( delPos == 0 || delPos &gt; <a class="code" href="classDynArray.html#m3">last_ele</a> )
00125         <span class="keywordflow">return</span>;
00126 
00127     <span class="comment">//-------- add to the empty room list ---------//</span>
00128 
00129     <span class="keywordflow">if</span>( ++<a class="code" href="classDynArrayB.html#m2">empty_room_count</a> &gt; <a class="code" href="classDynArrayB.html#m1">empty_room_num</a> ) {
00130         <a class="code" href="classDynArrayB.html#m0">empty_room_array</a> = (<a class="code" href="structEmptyRoom.html">EmptyRoom</a>*) <a class="code" href="ALL_8H.html#a7">mem_resize</a>( <a class="code" href="classDynArrayB.html#m0">empty_room_array</a>,
00131                                                     (<a class="code" href="classDynArrayB.html#m1">empty_room_num</a>+<a class="code" href="ODYNARRB_8CPP.html#a0">EMPTY_ROOM_ALLOC_STEP</a>) * <span class="keyword">sizeof</span>(*<a class="code" href="classDynArrayB.html#m0">empty_room_array</a>) );
00132 
00133         <a class="code" href="classDynArrayB.html#m1">empty_room_num</a>  += <a class="code" href="ODYNARRB_8CPP.html#a0">EMPTY_ROOM_ALLOC_STEP</a>;
00134     }
00135 
00136     <a class="code" href="classDynArrayB.html#m0">empty_room_array</a>[<a class="code" href="classDynArrayB.html#m2">empty_room_count</a>-1].recno = delPos;
00137     <a class="code" href="classDynArrayB.html#m0">empty_room_array</a>[<a class="code" href="classDynArrayB.html#m2">empty_room_count</a>-1].deleted_game_date = info.game_date;
00138 
00139     memset( <a class="code" href="classDynArray.html#m7">body_buf</a>+(delPos-1)*<a class="code" href="classDynArray.html#m4">ele_size</a>, 0, <a class="code" href="classDynArray.html#m4">ele_size</a> );
00140 }
00141 
00142 <span class="comment">//------------ END OF FUNCTION DynArrayB::linkout ----------//</span>
00143 
00144 <span class="comment">//---------- Begin of function DynArrayB::write_file -------------//</span>
<a name="l00154"></a><a class="code" href="classDynArrayB.html#a7">00154</a> <span class="comment">int DynArrayB::write_file(File* filePtr) {</span>
00155     <span class="keywordflow">if</span>( !filePtr-&gt;file_write( <span class="keyword">this</span>, <span class="keyword">sizeof</span>(<a class="code" href="classDynArray.html">DynArray</a>) ) )
00156         <span class="keywordflow">return</span> 0;
00157 
00158     <span class="comment">//---------- write body_buf ---------//</span>
00159 
00160     <span class="keywordflow">if</span>( last_ele &gt; 0 ) {
00161         <span class="keywordflow">if</span>( !filePtr-&gt;file_write( body_buf, ele_size*last_ele ) )
00162             <span class="keywordflow">return</span> 0;
00163     }
00164 
00165     <span class="comment">//---------- write empty_room_array ---------//</span>
00166 
00167     write_empty_room(filePtr);
00168 
00169     <span class="keywordflow">return</span> 1;
00170 }
00171 
00172 <span class="comment">//------------- End of function DynArrayB::write_file --------------//</span>
00173 
00174 <span class="comment">//---------- Begin of function DynArrayB::read_file -------------//</span>
<a name="l00183"></a><a class="code" href="classDynArrayB.html#a8">00183</a> <span class="comment">int DynArrayB::read_file(File* filePtr) {</span>
00184     <span class="keywordtype">char</span>* bodyBuf = body_buf;                       <span class="comment">// preserve body_buf which has been allocated</span>
00185 
00186     <span class="keywordflow">if</span>( !filePtr-&gt;file_read( <span class="keyword">this</span>, <span class="keyword">sizeof</span>(<a class="code" href="classDynArray.html">DynArray</a>) ) )
00187         <span class="keywordflow">return</span> 0;
00188 
00189     <span class="comment">//---------- read body_buf ---------//</span>
00190 
00191     body_buf = <a class="code" href="ALL_8H.html#a7">mem_resize</a>( bodyBuf, ele_size*ele_num );
00192 
00193     <span class="keywordflow">if</span>( last_ele &gt; 0 ) {
00194         <span class="keywordflow">if</span>( !filePtr-&gt;file_read( body_buf, ele_size*last_ele ) )
00195             <span class="keywordflow">return</span> 0;
00196     }
00197 
00198     <span class="comment">//---------- read empty_room_array ---------//</span>
00199 
00200     read_empty_room(filePtr);
00201 
00202     <span class="comment">//------------------------------------------//</span>
00203 
00204     start();                                        <span class="comment">// go top</span>
00205 
00206     <span class="keywordflow">return</span> 1;
00207 }
00208 
00209 <span class="comment">//------------- End of function DynArrayB::read_file --------------//</span>
00210 
00211 <span class="comment">//---------- Begin of function DynArrayB::write_empty_room -------------//</span>
<a name="l00221"></a><a class="code" href="classDynArrayB.html#a9">00221</a> <span class="comment">int DynArrayB::write_empty_room(File* filePtr) {</span>
00222     filePtr-&gt;file_put_short( empty_room_count );
00223 
00224     <span class="comment">//---------- write empty_room_array ---------//</span>
00225 
00226     <span class="keywordflow">if</span>( empty_room_count &gt; 0 ) {
00227         <span class="keywordflow">if</span>( !filePtr-&gt;file_write( empty_room_array,
00228                                   <span class="keyword">sizeof</span>(<a class="code" href="structEmptyRoom.html">EmptyRoom</a>) * empty_room_count ) ) {
00229             <span class="keywordflow">return</span> 0;
00230         }
00231     }
00232 
00233     <span class="keywordflow">return</span> 1;
00234 }
00235 
00236 <span class="comment">//------------- End of function DynArrayB::write_empty_room --------------//</span>
00237 
00238 <span class="comment">//---------- Begin of function DynArrayB::read_empty_room -------------//</span>
<a name="l00247"></a><a class="code" href="classDynArrayB.html#a10">00247</a> <span class="comment">int DynArrayB::read_empty_room(File* filePtr) {</span>
00248     <span class="comment">// set both to the same</span>
00249     empty_room_num = empty_room_count = filePtr-&gt;file_get_short();
00250 
00251     <span class="comment">//---------- read empty_room_array ---------//</span>
00252 
00253     <span class="keywordflow">if</span>( empty_room_count &gt; 0 ) {
00254         empty_room_array = (<a class="code" href="structEmptyRoom.html">EmptyRoom</a>*) <a class="code" href="ALL_8H.html#a7">mem_resize</a>( empty_room_array,
00255                                                     <span class="keyword">sizeof</span>(<a class="code" href="structEmptyRoom.html">EmptyRoom</a>) * empty_room_count );
00256 
00257         <span class="keywordflow">if</span>( !filePtr-&gt;file_read( empty_room_array,
00258                                  <span class="keyword">sizeof</span>(*empty_room_array) * empty_room_count ) ) {
00259             <span class="keywordflow">return</span> 0;
00260         }
00261     }
00262     <span class="keywordflow">else</span> {                                          <span class="comment">// when empty_room_count == 0</span>
00263         <span class="keywordflow">if</span>( empty_room_array ) {
00264             <a class="code" href="ALL_8H.html#a8">mem_del</a>( empty_room_array );
00265             empty_room_array = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00266         }
00267     }
00268 
00269     <span class="comment">//------------------------------------------//</span>
00270 
00271     <span class="keywordflow">return</span> 1;
00272 }
00273 
00274 <span class="comment">//------------- End of function DynArrayB::read_empty_room --------------//</span>
00275 
00276 <span class="comment">//---------- Begin of function DynArrayB::packed_recno -------------//</span>
<a name="l00287"></a><a class="code" href="classDynArrayB.html#a3">00287</a> <span class="comment">int DynArrayB::packed_recno(int recNo) {</span>
00288     <span class="keywordtype">int</span> i, packedRecno = recNo;
00289 
00290     <span class="keywordflow">for</span>( i=0 ; i&lt;empty_room_count ; i++ ) {
00291         <span class="keywordflow">if</span>( empty_room_array[i].recno &lt; recNo )
00292             packedRecno--;
00293     }
00294 
00295     <span class="keywordflow">return</span> packedRecno;
00296 }
00297 
00298 <span class="comment">//------------- End of function DynArrayB::packed_recno --------------//</span>
00299 
00300 <span class="comment">//---------- Begin of function DynArrayB::zap -------------//</span>
<a name="l00304"></a><a class="code" href="classDynArrayB.html#a6">00304</a> <span class="comment">void DynArrayB::zap() {</span>
00305     <a class="code" href="classDynArray.html#a38">DynArray::zap</a>();
00306 
00307     empty_room_count=0;                             <span class="comment">// reset empty rooms</span>
00308 }
00309 
00310 <span class="comment">//------------- End of function DynArrayB::zap --------------//</span>
00311 
00312 <span class="comment">//-------- Start of function DynArrayB::write_ptr_array --------//</span>
00313 <span class="comment">//</span>
00314 <span class="comment">// Write a DynArrayB with pointer data elements.</span>
00315 <span class="comment">//</span>
00316 <span class="comment">// &lt;File*&gt; filePtr       - pointer to the file object.</span>
00317 <span class="comment">// &lt;int&gt;   objectSize - size of the objects pointed to by the pointers.</span>
00318 <span class="comment">//</span>
<a name="l00319"></a><a class="code" href="classDynArrayB.html#a11">00319</a> <span class="keywordtype">int</span> <a class="code" href="classDynArrayB.html#a11">DynArrayB::write_ptr_array</a>(<a class="code" href="classFile.html">File</a>* filePtr, <span class="keywordtype">int</span> objectSize) {
00320     <span class="keywordtype">int</span>   i;
00321     <span class="keywordtype">char</span>* elePtr;
00322 
00323     filePtr-&gt;<a class="code" href="classFile.html#a12">file_put_short</a>( <a class="code" href="classDynArray.html#a28">size</a>() );
00324 
00325     <span class="keywordflow">for</span>( i=1; i&lt;=<a class="code" href="classDynArray.html#a28">size</a>() ; i++ ) {
00326         elePtr = (<span class="keywordtype">char</span>*) <a class="code" href="classDynArray.html#a15">get_ptr</a>(i);
00327 
00328         <span class="comment">//----- write 0 if the monster is deleted -----//</span>
00329 
00330         <span class="keywordflow">if</span>( !elePtr ) {                               <span class="comment">// the monster is deleted</span>
00331             filePtr-&gt;<a class="code" href="classFile.html#a12">file_put_short</a>(0);
00332         }
00333         <span class="keywordflow">else</span> {
00334             filePtr-&gt;<a class="code" href="classFile.html#a12">file_put_short</a>(1);                 <span class="comment">// the monster exists</span>
00335 
00336             <span class="keywordflow">if</span>( !filePtr-&gt;<a class="code" href="classFile.html#a10">file_write</a>(elePtr, objectSize) )
00337                 <span class="keywordflow">return</span> 0;
00338         }
00339     }
00340 
00341     <span class="comment">//------- write empty room array --------//</span>
00342 
00343     <a class="code" href="classDynArrayB.html#a9">write_empty_room</a>(filePtr);
00344 
00345     <span class="keywordflow">return</span> 1;
00346 }
00347 
00348 <span class="comment">//--------- End of function DynArrayB::write_ptr_array ---------------//</span>
00349 
00350 <span class="comment">//-------- Start of function DynArrayB::read_ptr_array -------------//</span>
00351 <span class="comment">//</span>
00352 <span class="comment">// Read a DynArrayB with pointer data elements previously saved by</span>
00353 <span class="comment">// write_ptr_array().</span>
00354 <span class="comment">//</span>
00355 <span class="comment">// &lt;File*&gt; filePtr                               - pointer to the file object.</span>
00356 <span class="comment">// &lt;int&gt;   objectSize                    - size of the objects pointed to by the pointers.</span>
00357 <span class="comment">// &lt;CreateEleFP&gt; createEleFunc - function for creating a blank object.</span>
00358 <span class="comment">//</span>
<a name="l00359"></a><a class="code" href="classDynArrayB.html#a12">00359</a> <span class="keywordtype">int</span> <a class="code" href="classDynArrayB.html#a12">DynArrayB::read_ptr_array</a>(<a class="code" href="classFile.html">File</a>* filePtr, <span class="keywordtype">int</span> objectSize, <a class="code" href="ODYNARRB_8H.html#a1">CreateEleFP</a> createEleFunc) {
00360     <span class="keywordtype">int</span>   i;
00361     <span class="keywordtype">char</span>* elePtr;
00362 
00363     <span class="keywordtype">int</span> eleCount = filePtr-&gt;<a class="code" href="classFile.html#a11">file_get_short</a>();       <span class="comment">// get no. of monsters from file</span>
00364 
00365     <span class="keywordflow">for</span>( i=1 ; i&lt;=eleCount ; i++ ) {
00366         <span class="keywordflow">if</span>( filePtr-&gt;<a class="code" href="classFile.html#a11">file_get_short</a>()==0 ) {          <span class="comment">// the monster has been deleted</span>
00367             <a class="code" href="classDynArray.html#a10">add_blank</a>(1);                               <span class="comment">// it's a DynArrayB function</span>
00368         }
00369         <span class="keywordflow">else</span> {
00370             elePtr = (*createEleFunc)();
00371 
00372             <span class="keywordflow">if</span>( !filePtr-&gt;<a class="code" href="classFile.html#a9">file_read</a>(elePtr, objectSize) )
00373                 <span class="keywordflow">return</span> 0;
00374         }
00375     }
00376 
00377     <span class="comment">//-------- linkout() those record added by add_blank() ----------//</span>
00378     <span class="comment">//-- So they will be marked deleted in DynArrayB and can be -----//</span>
00379     <span class="comment">//-- undeleted and used when a new record is going to be added --//</span>
00380 
00381     <span class="keywordflow">for</span>( i=<a class="code" href="classDynArray.html#a28">size</a>() ; i&gt;0 ; i-- ) {
00382         <a class="code" href="classDynArray.html#a26">DynArrayB::go</a>(i);                             <span class="comment">// since DynArrayB has its own go() which will call GroupArray::go()</span>
00383 
00384         <span class="keywordflow">if</span>( <a class="code" href="classDynArray.html#a15">get_ptr</a>() == <a class="code" href="OHELP_8H.html#a0">NULL</a> )                       <span class="comment">// add_blank() record</span>
00385             <a class="code" href="classDynArrayB.html#a5">linkout</a>();
00386     }
00387 
00388     <span class="comment">//------- read empty room array --------//</span>
00389 
00390     <a class="code" href="classDynArrayB.html#a10">read_empty_room</a>(filePtr);
00391 
00392     <span class="keywordflow">return</span> 1;
00393 }
00394 
00395 <span class="comment">//--------- End of function DynArrayB::read_ptr_array ---------------//</span>
</pre></div><hr><address style="align: right;"><small>Generated on Fri Aug 23 01:37:26 2002 for VirtualU by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.17 </small></address>
</body>
</html>
