<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>OHELP_IF.CPP Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.17 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>OHELP_IF.CPP</h1><a href="OHELP__IF_8CPP.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">// Filename    : OHELP_IF.CPP</span>
00002 <span class="comment">// Description : The screen of help topic and help desc.</span>
00003 <span class="comment">// owner                        : Kevin(Ho)</span>
00004 <span class="comment">// Notes:       Steps to introduce a new class of user interface</span>
00005 <span class="comment">//                              1.      construct the new class</span>
00006 <span class="comment">//                              2.      in sys.h, add the new MODE, e.g. MODE_ADMISSIONS_AND_FINANCIAL_OFFICE</span>
00007 <span class="comment">//                              3.      include the new header file in cc.cpp, osysdisp.cpp, osysdet.cpp</span>
00008 <span class="comment">//                              4.      in cc.cpp, declare a global object of the new class, with the name matching the 'extern' statement in the header file</span>
00009 <span class="comment">//                              5.      in osysdisp.cpp, under switch(view_mode), add the redirection to the display function</span>
00010 <span class="comment">//                              6.      in osysdet.cpp, under Sys::detect_view, add the redirection to the detect function</span>
00011 <span class="comment">//                              7.      in osysdet.cpp, under Sys::process_key, add the new hot key (optional)</span>
00012 <span class="comment">//                              8.      in osysdet.cpp, under Sys::detect_button, modify if necessary (see the comments there)</span>
00013 <span class="comment">//                              9.      the deinit function (AdmOffice::deinit()) can be called when the view_mode in 'sys' object is switched</span>
00014 <span class="comment">//                                      the function frees memory occupied by this object</span>
00015 <span class="comment">//                                      the report function would re-allocate memory when it is called (note the report_init_flag)</span>
00016 <span class="comment">//                                      notice the beginning section of Sys::disp_frame()</span>
00017 <span class="comment">// Kevin 0723</span>
00018 
00019 <span class="preprocessor">#include &lt;OSYS.H&gt;</span>
00020 <span class="preprocessor">#include &lt;<a class="code" href="OSTR_8H.html">OSTR.H</a>&gt;</span>
00021 <span class="preprocessor">#include &lt;OMISC.H&gt;</span>
00022 <span class="preprocessor">#include &lt;<a class="code" href="OGAMESET_8H.html">OGAMESET.H</a>&gt;</span>
00023 <span class="preprocessor">#include &lt;OWORLDMT.H&gt;</span>
00024 <span class="preprocessor">#include &lt;<a class="code" href="OVGA_8H.html">OVGA.H</a>&gt;</span>
00025 <span class="preprocessor">#include &lt;OIFACE.H&gt;</span>
00026 <span class="preprocessor">#include &lt;OINFO.H&gt;</span>
00027 <span class="preprocessor">#include &lt;<a class="code" href="COLOR_8H.html">COLOR.H</a>&gt;</span>
00028 <span class="preprocessor">#include &lt;OFONT.H&gt;</span>
00029 <span class="preprocessor">#include &lt;OGAMESTR.H&gt;</span>
00030 <span class="preprocessor">#include &lt;OMOUSE.H&gt;</span>
00031 <span class="preprocessor">#include &lt;OBUTTON.H&gt;</span>
00032 <span class="preprocessor">#include &lt;OFINANCE.H&gt;</span>
00033 <span class="comment">//#include &lt;OTXTBOX.H&gt;</span>
00034 <span class="preprocessor">#include &lt;<a class="code" href="OTXTLIST_8H.html">OTXTLIST.H</a>&gt;</span>
00035 <span class="preprocessor">#include  &lt;<a class="code" href="OHELPIF_8H.html">OHELPIF.H</a>&gt;</span>
00036 
00037 <span class="keyword">enum</span> {                                            <span class="comment">// screen coordinates</span>
00038     <a class="code" href="OHELP__IF_8CPP.html#a24a10">REPORT_X1</a> = <a class="code" href="Oworldmt_8h.html#a12">ZOOM_X1</a>+15,
00039     <a class="code" href="OHELP__IF_8CPP.html#a24a11">REPORT_Y1</a> = <a class="code" href="Oworldmt_8h.html#a13">ZOOM_Y1</a>+25,
00040     <a class="code" href="OHELP__IF_8CPP.html#a24a12">REPORT_X2</a> = <a class="code" href="Oworldmt_8h.html#a14">ZOOM_X2</a>-15,
00041     <a class="code" href="OHELP__IF_8CPP.html#a24a13">REPORT_Y2</a> = <a class="code" href="Oworldmt_8h.html#a15">ZOOM_Y2</a>-55
00042 };
00043 
00044 <span class="keyword">enum</span> {
00045     <a class="code" href="OHELP__IF_8CPP.html#a25a14">BOTTOM_BUTTON_X0</a> = <a class="code" href="OHELP__IF_8CPP.html#a24a10">REPORT_X1</a>+70,
00046     <a class="code" href="OHELP__IF_8CPP.html#a25a15">BOTTOM_BUTTON_X1</a> = <a class="code" href="OHELP__IF_8CPP.html#a24a10">REPORT_X1</a>+170,
00047     <a class="code" href="OHELP__IF_8CPP.html#a25a16">BOTTOM_BUTTON_Y1</a> = <a class="code" href="OHELP__IF_8CPP.html#a24a13">REPORT_Y2</a>+15,
00048     <a class="code" href="OHELP__IF_8CPP.html#a25a17">BOTTOM_BUTTON_X2</a> = <a class="code" href="OHELP__IF_8CPP.html#a24a12">REPORT_X2</a>-20,
00049     <a class="code" href="OHELP__IF_8CPP.html#a25a18">BOTTOM_BUTTON_Y2</a> = <a class="code" href="OHELP__IF_8CPP.html#a24a13">REPORT_Y2</a>+40
00050 };
00051 
00052 <span class="keyword">enum</span> {
00053     <a class="code" href="OHELP__IF_8CPP.html#a26a19">BOTTOM_BUTTON_WIDTH</a> = 125,
00054     <a class="code" href="OHELP__IF_8CPP.html#a26a20">BOTTOM_BUTTON_HEIGHT</a> = 25,
00055     <a class="code" href="OHELP__IF_8CPP.html#a26a21">HELP_BUTTON_COUNT</a> = 3,
00056     <a class="code" href="OHELP__IF_8CPP.html#a26a22">BOTTOM_BUTTON_DISTANCE</a>
00057     = (<a class="code" href="OHELP__IF_8CPP.html#a25a17">BOTTOM_BUTTON_X2</a>-<a class="code" href="OHELP__IF_8CPP.html#a25a15">BOTTOM_BUTTON_X1</a>-<a class="code" href="OHELP__IF_8CPP.html#a26a19">BOTTOM_BUTTON_WIDTH</a>*2)/3
00058 };
00059 
00060 <span class="keyword">enum</span> {                                            <span class="comment">// the bg image id</span>
00061     <a class="code" href="OHELP__IF_8CPP.html#a27a23">BG_PIC_ID</a> = 2
00062 };
00063 
00064 <span class="keyword">static</span> <a class="code" href="classButtonGroup.html">ButtonGroup</a> help_topic_bottom_button_group(2);
00065 <span class="keyword">static</span> <a class="code" href="classButtonGroup.html">ButtonGroup</a> help_desc_bottom_button_group(3);
00066 <span class="keyword">static</span> <span class="keywordtype">short</span> *bottom_button_up_bitmap[<a class="code" href="OHELP__IF_8CPP.html#a26a21">HELP_BUTTON_COUNT</a>];
00067 <span class="keyword">static</span> <span class="keywordtype">short</span> *bottom_button_down_bitmap[<a class="code" href="OHELP__IF_8CPP.html#a26a21">HELP_BUTTON_COUNT</a>];
00068 <span class="keyword">static</span> <span class="keywordtype">char</span> *help_desc_bottom_button_label[] = {
00069     <span class="stringliteral">"Help Topics"</span>,<span class="stringliteral">"Back"</span>,<span class="stringliteral">"Close"</span>
00070 };
00071 <span class="keyword">static</span> <span class="keywordtype">char</span> *help_topic_bottom_button_label[] = {
00072     <span class="stringliteral">"Open"</span>,<span class="stringliteral">"Cancel"</span>
00073 };
00074 <span class="keyword">static</span> <span class="keywordtype">int</span> help_topic_report_init_flag;
00075 <span class="keyword">static</span> <span class="keywordtype">int</span> help_desc_report_init_flag;
00076 
00077 <span class="keyword">static</span> <span class="keywordtype">int</span> help_topic_current_mode=-1;
00078 <span class="keyword">static</span> <span class="keywordtype">int</span> help_desc_current_mode=-1;
00079 <span class="comment">//------- Begin of function HelpIf::HelpIf -----------//</span>
<a name="l00081"></a><a class="code" href="classHelpIf.html#a0">00081</a> <span class="comment">HelpIf::HelpIf() {</span>
00082     init();
00083 }
00084 
00085 <span class="comment">//--------- End of function HelpIf::HelpIf -----------//</span>
00086 
00087 <span class="comment">//------- Begin of function HelpIf::~HelpIf -----------//</span>
<a name="l00089"></a><a class="code" href="classHelpIf.html#a1">00089</a> <span class="comment">HelpIf::~HelpIf() {</span>
00090     deinit();
00091 }
00092 
00093 <span class="comment">//--------- End of function HelpIf::~HelpIf -----------//</span>
00094 
00095 <span class="comment">//------- Begin of function HelpIf::deinit ---------------//</span>
<a name="l00097"></a><a class="code" href="classHelpIf.html#a3">00097</a> <span class="comment">void HelpIf::deinit() {</span>
00098     <span class="comment">//--------- deallocate memory -------------//</span>
00099     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="OHELP__IF_8CPP.html#a26a21">HELP_BUTTON_COUNT</a>; i++) {
00100         <span class="keywordflow">if</span> (bottom_button_up_bitmap[i]) {
00101             <a class="code" href="ALL_8H.html#a8">mem_del</a>(bottom_button_up_bitmap[i]);
00102             <a class="code" href="ALL_8H.html#a8">mem_del</a>(bottom_button_down_bitmap[i]);
00103             bottom_button_up_bitmap[i] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00104             bottom_button_down_bitmap[i] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00105         }
00106     }
00107     help_textlist.deinit();
00108     help_topic_report_init_flag = 0;
00109     help_desc_report_init_flag = 0;
00110 }
00111 
00112 <span class="comment">//--------- End of function HelpIf::deinit ---------------//</span>
00113 
00114 <span class="comment">//------- Begin of function HelpIf::init -----------------//</span>
<a name="l00116"></a><a class="code" href="classHelpIf.html#a2">00116</a> <span class="comment">void HelpIf::init() {</span>
00117     memset(<span class="keyword">this</span>,0,<span class="keyword">sizeof</span>(<a class="code" href="classHelpIf.html">HelpIf</a>));
00118     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="OHELP__IF_8CPP.html#a26a21">HELP_BUTTON_COUNT</a>; i++) {
00119         bottom_button_up_bitmap[i] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00120         bottom_button_down_bitmap[i] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00121     }
00122 
00123     help_topic_report_init_flag = 0;
00124     help_desc_report_init_flag = 0;
00125 }
00126 
00127 <span class="comment">//--------- End of function HelpIf::init -----------------//</span>
00128 
00129 <span class="comment">//------- Begin of function HelpIf::help_topic_report ---------------//</span>
<a name="l00131"></a><a class="code" href="classHelpIf.html#a4">00131</a> <span class="comment">void HelpIf::help_topic_report(int refreshFlag) {</span>
00132     vga.use_back();
00133 
00134     <span class="keywordflow">if</span> (refreshFlag == <a class="code" href="Gamedef_8h.html#a71a16">INFO_REPAINT</a>) {
00135         <span class="keywordflow">if</span>(help_topic_report_init_flag )
00136             <span class="comment">// deinit it first if it has already been initialized</span>
00137             deinit();
00138         help_topic_current_mode=-1;
00139         <span class="comment">//------------- paint the background ----------------//</span>
00140         user_interface.bg_img(<a class="code" href="OHELP__IF_8CPP.html#a27a23">BG_PIC_ID</a>, &amp;vga_back);
00141 
00142         <span class="comment">//----- initialize the bottom sub-menus buttons -----//</span>
00143         <span class="keywordflow">if</span> (!help_topic_report_init_flag) {
00144             <span class="keywordtype">short</span> x = <a class="code" href="OHELP__IF_8CPP.html#a25a15">BOTTOM_BUTTON_X1</a>;
00145             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 2; i++, x+=<a class="code" href="OHELP__IF_8CPP.html#a26a19">BOTTOM_BUTTON_WIDTH</a>+<a class="code" href="OHELP__IF_8CPP.html#a26a22">BOTTOM_BUTTON_DISTANCE</a>) {
00146                 user_interface.create_button_bitmap(x, <a class="code" href="OHELP__IF_8CPP.html#a25a16">BOTTOM_BUTTON_Y1</a>,
00147                                                     x+<a class="code" href="OHELP__IF_8CPP.html#a26a19">BOTTOM_BUTTON_WIDTH</a>, <a class="code" href="OHELP__IF_8CPP.html#a25a16">BOTTOM_BUTTON_Y1</a>+<a class="code" href="OHELP__IF_8CPP.html#a26a20">BOTTOM_BUTTON_HEIGHT</a>,
00148                                                     help_topic_bottom_button_label[i], &amp;bottom_button_up_bitmap[i],
00149                                                     &amp;bottom_button_down_bitmap[i], &amp;vga_back);
00150 
00151                 help_topic_bottom_button_group[i].create_bitmapW(x, <a class="code" href="OHELP__IF_8CPP.html#a25a16">BOTTOM_BUTTON_Y1</a>,
00152                                                                  x+<a class="code" href="OHELP__IF_8CPP.html#a26a19">BOTTOM_BUTTON_WIDTH</a>, <a class="code" href="OHELP__IF_8CPP.html#a25a16">BOTTOM_BUTTON_Y1</a>+<a class="code" href="OHELP__IF_8CPP.html#a26a20">BOTTOM_BUTTON_HEIGHT</a>,
00153                                                                  ((i == help_topic_current_mode) ? bottom_button_down_bitmap[i] :
00154                                                                   bottom_button_up_bitmap[i])+4);
00155             }
00156 
00157             help_topic_report_init_flag = 1;
00158             font_charts.put(<a class="code" href="OHELP__IF_8CPP.html#a24a10">REPORT_X1</a>+300,<a class="code" href="OHELP__IF_8CPP.html#a24a11">REPORT_Y1</a>-15,<span class="stringliteral">"Help Topics"</span>);
00159 
00160             <a class="code" href="classString.html">String</a> str;
00161             str  = <a class="code" href="Gamedef_8h.html#a4">DIR_RES</a>;
00162             str += <span class="stringliteral">"SCORE"</span>;
00163             help_textlist.init(<a class="code" href="OHELP__IF_8CPP.html#a24a10">REPORT_X1</a>,<a class="code" href="OHELP__IF_8CPP.html#a24a11">REPORT_Y1</a>+5,<a class="code" href="OHELP__IF_8CPP.html#a24a12">REPORT_X2</a>,<a class="code" href="OHELP__IF_8CPP.html#a24a13">REPORT_Y2</a>,str);
00164             help_textlist.init_list(<a class="code" href="OHELP__IF_8CPP.html#a24a10">REPORT_X1</a>,<a class="code" href="OHELP__IF_8CPP.html#a24a11">REPORT_Y1</a>+5,<a class="code" href="OHELP__IF_8CPP.html#a24a12">REPORT_X2</a>,<a class="code" href="OHELP__IF_8CPP.html#a24a13">REPORT_Y2</a>);
00165         }
00166         <span class="comment">//----------- paint the bottom button group ---------//</span>
00167         help_topic_bottom_button_group.<a class="code" href="classButtonGroup.html#a3">paint</a>(help_topic_current_mode);
00168     }
00169 
00170     help_textlist.disp(refreshFlag,help_textlist.topic_id); {
00171 
00172         <span class="comment">//      if (refreshFlag == INFO_REPAINT)</span>
00173         <span class="comment">//------- blt the back buffer to front buffer -------//</span>
00174         vga.blt_buf(<a class="code" href="Oworldmt_8h.html#a12">ZOOM_X1</a>, <a class="code" href="Oworldmt_8h.html#a13">ZOOM_Y1</a>, <a class="code" href="Oworldmt_8h.html#a14">ZOOM_X2</a>, <a class="code" href="Oworldmt_8h.html#a15">ZOOM_Y2</a>);
00175     }
00176     vga.use_front();
00177 }
00178 
00179 <span class="comment">//---------- End of function HelpIf::help_topic_report ------------//</span>
00180 
00181 <span class="comment">//---------- Begin of function HelpIf::help_desc_report ------------//</span>
<a name="l00183"></a><a class="code" href="classHelpIf.html#a5">00183</a> <span class="comment">void HelpIf::help_desc_report(int refreshFlag) {</span>
00184     vga.use_back();
00185 
00186     <span class="keywordflow">if</span> (refreshFlag == <a class="code" href="Gamedef_8h.html#a71a16">INFO_REPAINT</a>) {
00187         <span class="keywordflow">if</span>(help_desc_report_init_flag )
00188             <span class="comment">// deinit it first if it has already been initialized</span>
00189             deinit();
00190 
00191         <span class="comment">//------------- paint the background ----------------//</span>
00192         user_interface.bg_img(<a class="code" href="OHELP__IF_8CPP.html#a27a23">BG_PIC_ID</a>, &amp;vga_back);
00193 
00194         <span class="comment">//----- initialize the bottom sub-menus buttons -----//</span>
00195         <span class="keywordflow">if</span> (!help_desc_report_init_flag) {
00196             <span class="keywordtype">short</span> x = <a class="code" href="OHELP__IF_8CPP.html#a25a14">BOTTOM_BUTTON_X0</a>;
00197             help_desc_current_mode=-1;
00198             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 3; i++, x+=<a class="code" href="OHELP__IF_8CPP.html#a26a19">BOTTOM_BUTTON_WIDTH</a>+<a class="code" href="OHELP__IF_8CPP.html#a26a22">BOTTOM_BUTTON_DISTANCE</a>) {
00199                 user_interface.create_button_bitmap(x, <a class="code" href="OHELP__IF_8CPP.html#a25a16">BOTTOM_BUTTON_Y1</a>,
00200                                                     x+<a class="code" href="OHELP__IF_8CPP.html#a26a19">BOTTOM_BUTTON_WIDTH</a>, <a class="code" href="OHELP__IF_8CPP.html#a25a16">BOTTOM_BUTTON_Y1</a>+<a class="code" href="OHELP__IF_8CPP.html#a26a20">BOTTOM_BUTTON_HEIGHT</a>,
00201                                                     help_desc_bottom_button_label[i], &amp;bottom_button_up_bitmap[i],
00202                                                     &amp;bottom_button_down_bitmap[i], &amp;vga_back);
00203 
00204                 help_desc_bottom_button_group[i].create_bitmapW(x, <a class="code" href="OHELP__IF_8CPP.html#a25a16">BOTTOM_BUTTON_Y1</a>,
00205                                                                 x+<a class="code" href="OHELP__IF_8CPP.html#a26a19">BOTTOM_BUTTON_WIDTH</a>, <a class="code" href="OHELP__IF_8CPP.html#a25a16">BOTTOM_BUTTON_Y1</a>+<a class="code" href="OHELP__IF_8CPP.html#a26a20">BOTTOM_BUTTON_HEIGHT</a>,
00206                                                                 ( ((i==1)&amp;&amp;(!help_textlist.can_back))||
00207                                                                   (i == help_desc_current_mode) ? bottom_button_down_bitmap[i] :
00208                                                                   bottom_button_up_bitmap[i])+4);
00209             }
00210 
00211             help_desc_bottom_button_group[1].enable_flag=help_textlist.can_back;
00212             <span class="keywordflow">if</span>(!help_textlist.can_back) {
00213                 <span class="comment">//help_desc_bottom_button_group[1].is_pushed=1;</span>
00214                 <span class="comment">//help_desc_bottom_button_group[1].enable_flag=0;</span>
00215                 help_desc_bottom_button_group[1].body_ptr = (<span class="keywordtype">void</span> *) (bottom_button_down_bitmap[1] + 4);
00216             }
00217 
00218             help_desc_report_init_flag = 1;
00219             <a class="code" href="classString.html">String</a> str;
00220             str  = <a class="code" href="Gamedef_8h.html#a4">DIR_RES</a>;
00221             str += <span class="stringliteral">"SCORE"</span>;
00222             <span class="comment">//                  if(!help_textlist.init_flag)</span>
00223             help_textlist.init(<a class="code" href="OHELP__IF_8CPP.html#a24a10">REPORT_X1</a>,<a class="code" href="OHELP__IF_8CPP.html#a24a11">REPORT_Y1</a>+5,<a class="code" href="OHELP__IF_8CPP.html#a24a12">REPORT_X2</a>,<a class="code" href="OHELP__IF_8CPP.html#a24a13">REPORT_Y2</a>,str);
00224             help_textlist.init_list_flag=0;
00225         }
00226 
00227         <a class="code" href="classString.html">String</a> help_title;
00228         help_title=help_textlist.res_txt.get_title(help_textlist.topic_id);
00229         <span class="keywordtype">int</span> ww=help_title.<a class="code" href="classString.html#a5">len</a>()*(font_charts.width()+3);
00230         <span class="keywordtype">int</span> wx=(<a class="code" href="OHELP__IF_8CPP.html#a24a12">REPORT_X2</a>+<a class="code" href="OHELP__IF_8CPP.html#a24a10">REPORT_X1</a>-ww)/2;
00231         user_interface.brighten(wx-20,<a class="code" href="OHELP__IF_8CPP.html#a24a11">REPORT_Y1</a>-25,wx+ww+10,<a class="code" href="OHELP__IF_8CPP.html#a24a11">REPORT_Y1</a>+font_charts.height()-18);
00232         user_interface.rect(wx-20,<a class="code" href="OHELP__IF_8CPP.html#a24a11">REPORT_Y1</a>-25,wx+ww+10,<a class="code" href="OHELP__IF_8CPP.html#a24a11">REPORT_Y1</a>+font_charts.height()-18,2);
00233         font_charts.put((wx&gt;0)?wx:0,<a class="code" href="OHELP__IF_8CPP.html#a24a11">REPORT_Y1</a>-18,help_title);
00234 
00235         <span class="comment">//----------- paint the bottom button group ---------//</span>
00236         help_desc_bottom_button_group.<a class="code" href="classButtonGroup.html#a3">paint</a>(help_desc_current_mode);
00237         <span class="comment">//              help_textlist.back_history();</span>
00238         <span class="keywordflow">if</span>(!help_textlist.can_back) {
00239             <span class="keywordtype">short</span> x=<a class="code" href="OHELP__IF_8CPP.html#a25a14">BOTTOM_BUTTON_X0</a>+<a class="code" href="OHELP__IF_8CPP.html#a26a19">BOTTOM_BUTTON_WIDTH</a>+<a class="code" href="OHELP__IF_8CPP.html#a26a22">BOTTOM_BUTTON_DISTANCE</a>;
00240             user_interface.darken(x, <a class="code" href="OHELP__IF_8CPP.html#a25a16">BOTTOM_BUTTON_Y1</a>,
00241                                   x+<a class="code" href="OHELP__IF_8CPP.html#a26a19">BOTTOM_BUTTON_WIDTH</a>, <a class="code" href="OHELP__IF_8CPP.html#a25a16">BOTTOM_BUTTON_Y1</a>+<a class="code" href="OHELP__IF_8CPP.html#a26a20">BOTTOM_BUTTON_HEIGHT</a>);
00242         }
00243     }
00244 
00245     help_textlist.disp(refreshFlag,help_textlist.topic_id);
00246 
00247     <span class="keywordflow">if</span> (refreshFlag == <a class="code" href="Gamedef_8h.html#a71a16">INFO_REPAINT</a>) {
00248         <span class="comment">//------- blt the back buffer to front buffer -------//</span>
00249         vga.blt_buf(<a class="code" href="Oworldmt_8h.html#a12">ZOOM_X1</a>, <a class="code" href="Oworldmt_8h.html#a13">ZOOM_Y1</a>, <a class="code" href="Oworldmt_8h.html#a14">ZOOM_X2</a>, <a class="code" href="Oworldmt_8h.html#a15">ZOOM_Y2</a>);
00250         sys.blt_virtual_buf();
00251     }
00252     vga.use_front();
00253 }
00254 
00255 <span class="comment">//---------- End of function Development::help_desc_report ------------//</span>
00256 
<a name="l00257"></a><a class="code" href="classHelpIf.html#a6">00257</a> <span class="keywordtype">int</span> <a class="code" href="classHelpIf.html#a6">HelpIf::help_topic_detect</a>() {
00258     <span class="keywordflow">if</span> (!help_topic_report_init_flag)
00259         <span class="keywordflow">return</span> 0;
00260 
00261     <span class="keywordtype">int</span> help_topic_bottomButtonGroupDetect;
00262 
00263     <span class="keywordflow">if</span> ((help_topic_bottomButtonGroupDetect = help_topic_bottom_button_group.<a class="code" href="classButtonGroup.html#a4">detect</a>()) &gt;= 0) {
00264         <span class="comment">//-------- change display mode ------------//</span>
00265         <span class="keywordflow">if</span>(help_topic_current_mode&gt;=0)
00266             help_topic_bottom_button_group[help_topic_current_mode].body_ptr = (<span class="keywordtype">void</span> *) (bottom_button_up_bitmap[help_topic_current_mode] + 4);
00267         <span class="keywordflow">else</span>
00268             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;2;i++)
00269                 help_topic_bottom_button_group[i].body_ptr = (<span class="keywordtype">void</span> *) (bottom_button_up_bitmap[i] + 4);
00270 
00271         help_topic_current_mode = help_topic_bottomButtonGroupDetect;
00272         help_topic_bottom_button_group[help_topic_current_mode].body_ptr = (<span class="keywordtype">void</span> *) (bottom_button_down_bitmap[help_topic_current_mode] + 4);
00273 
00274         <span class="comment">//-------- post display redraw flag -------//</span>
00275         <span class="keywordflow">if</span>(help_topic_bottomButtonGroupDetect==0) {
00276             <span class="comment">// add current topic id to the history</span>
00277             <a class="code" href="classHelpIf.html#m0">help_textlist</a>.<a class="code" href="classTxtList.html#a8">add_history</a>(<a class="code" href="classHelpIf.html#m0">help_textlist</a>.<a class="code" href="classTxtList.html#m21">topic_id</a>);
00278             sys.set_view_mode(<a class="code" href="Osys_8h.html#a45a31">MODE_HELP_DESC</a>);
00279         }
00280         <span class="keywordflow">if</span>((sys.back_view_mode==<a class="code" href="Osys_8h.html#a45a30">MODE_HELP_TOPIC</a>)||
00281            (sys.back_view_mode==<a class="code" href="Osys_8h.html#a45a31">MODE_HELP_DESC</a>))
00282             sys.back_view_mode=<a class="code" href="Osys_8h.html#a45a9">MODE_NORMAL</a>;
00283 
00284         <span class="keywordflow">if</span>(help_topic_bottomButtonGroupDetect==1)
00285             sys.set_view_mode(sys.back_view_mode);
00286         sys.redraw_all_flag = 1;
00287 
00288         <span class="keywordflow">return</span> 1;
00289     }
00290 
00291     vga.use_front();
00292     <a class="code" href="classHelpIf.html#m0">help_textlist</a>.<a class="code" href="classTxtList.html#a6">detect</a>();
00293     <span class="keywordflow">if</span>(<a class="code" href="classHelpIf.html#m0">help_textlist</a>.<a class="code" href="classTxtList.html#m26">double_clicked</a>) {
00294         <span class="comment">// add current topic id to the history</span>
00295         <a class="code" href="classHelpIf.html#m0">help_textlist</a>.<a class="code" href="classTxtList.html#a8">add_history</a>(<a class="code" href="classHelpIf.html#m0">help_textlist</a>.<a class="code" href="classTxtList.html#m21">topic_id</a>);
00296         sys.set_view_mode(<a class="code" href="Osys_8h.html#a45a31">MODE_HELP_DESC</a>);
00297         <a class="code" href="classHelpIf.html#m0">help_textlist</a>.<a class="code" href="classTxtList.html#m26">double_clicked</a>=0;
00298     }
00299 
00300     <span class="keywordflow">return</span> 0;
00301 }
00302 
00304 
<a name="l00305"></a><a class="code" href="classHelpIf.html#a7">00305</a> <span class="keywordtype">int</span> <a class="code" href="classHelpIf.html#a7">HelpIf::help_desc_detect</a>() {
00306     <span class="keywordflow">if</span> (!help_desc_report_init_flag)
00307         <span class="keywordflow">return</span> 0;
00308 
00309     <span class="keywordtype">int</span> help_desc_bottomButtonGroupDetect;
00310 
00311     <span class="keywordflow">if</span> ((help_desc_bottomButtonGroupDetect = help_desc_bottom_button_group.<a class="code" href="classButtonGroup.html#a4">detect</a>()) &gt;= 0) {
00312         <span class="keywordflow">if</span>((!<a class="code" href="classHelpIf.html#m0">help_textlist</a>.<a class="code" href="classTxtList.html#m23">can_back</a>)&amp;&amp;(help_desc_bottomButtonGroupDetect==1))<span class="keywordflow">return</span> 0;
00313 
00314         <span class="keywordflow">if</span>(help_desc_current_mode&gt;=0)
00315             <span class="comment">//-------- change display mode ------------//</span>
00316             help_desc_bottom_button_group[help_desc_current_mode].body_ptr = (<span class="keywordtype">void</span> *) (bottom_button_up_bitmap[help_desc_current_mode] + 4);
00317         <span class="keywordflow">else</span>
00318             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;3;i++)
00319                 help_desc_bottom_button_group[i].body_ptr = (<span class="keywordtype">void</span> *) (bottom_button_up_bitmap[i] + 4);
00320 
00321         help_desc_current_mode = help_desc_bottomButtonGroupDetect;
00322         help_desc_bottom_button_group[help_desc_current_mode].body_ptr = (<span class="keywordtype">void</span> *) (bottom_button_down_bitmap[help_desc_current_mode] + 4);
00323 
00324         <span class="comment">//-------- post display redraw flag -------//</span>
00325         <span class="keywordflow">if</span>(help_desc_bottomButtonGroupDetect==0)sys.set_view_mode(<a class="code" href="Osys_8h.html#a45a30">MODE_HELP_TOPIC</a>);
00326         <span class="keywordflow">if</span>(help_desc_bottomButtonGroupDetect==1)<a class="code" href="classHelpIf.html#m0">help_textlist</a>.<a class="code" href="classTxtList.html#a9">back_history</a>();
00327         <span class="keywordflow">if</span>(help_desc_bottomButtonGroupDetect==2) {
00328             <span class="keywordflow">if</span>((sys.back_view_mode==<a class="code" href="Osys_8h.html#a45a30">MODE_HELP_TOPIC</a>)||
00329                (sys.back_view_mode==<a class="code" href="Osys_8h.html#a45a31">MODE_HELP_DESC</a>))
00330                 sys.back_view_mode=<a class="code" href="Osys_8h.html#a45a9">MODE_NORMAL</a>;
00331             sys.set_view_mode(sys.back_view_mode);
00332         }
00333         <span class="keywordflow">if</span>(help_desc_bottomButtonGroupDetect==0 ||
00334            help_desc_bottomButtonGroupDetect==1 ||
00335            help_desc_bottomButtonGroupDetect==2)<a class="code" href="classHelpIf.html#m0">help_textlist</a>.<a class="code" href="classTxtList.html#m22">top_line</a>=1;
00336 
00337         sys.redraw_all_flag = 1;
00338         <span class="keywordflow">return</span> 1;
00339     }
00340     <a class="code" href="classHelpIf.html#m0">help_textlist</a>.<a class="code" href="classTxtList.html#a6">detect</a>();
00341     <span class="keywordflow">return</span> 0;
00342 }
00343 
</pre></div><hr><address style="align: right;"><small>Generated on Fri Aug 23 01:37:58 2002 for VirtualU by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.17 </small></address>
</body>
</html>
