<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>OPARKING.CPP Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.17 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>OPARKING.CPP</h1><a href="OPARKING_8CPP.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="preprocessor">#include &lt;OSYS.H&gt;</span>
00002 <span class="preprocessor">#include &lt;OCONFIG.H&gt;</span>
00003 <span class="preprocessor">#include &lt;<a class="code" href="OPARKING_8H.html">OPARKING.H</a>&gt;</span>
00004 <span class="preprocessor">#include &lt;OWORLDMT.H&gt;</span>
00005 <span class="preprocessor">#include &lt;<a class="code" href="OVGA_8H.html">OVGA.H</a>&gt;</span>
00006 <span class="preprocessor">#include &lt;<a class="code" href="COLOR_8H.html">COLOR.H</a>&gt;</span>
00007 <span class="preprocessor">#include &lt;OFONT.H&gt;</span>
00008 <span class="preprocessor">#include &lt;OMOUSE.H&gt;</span>
00009 <span class="preprocessor">#include &lt;<a class="code" href="OMOUSE2_8H.html">OMOUSE2.H</a>&gt;</span>
00010 <span class="preprocessor">#include &lt;OIFACE.H&gt;</span>
00011 <span class="preprocessor">#include &lt;OINFO.H&gt;</span>
00012 <span class="preprocessor">#include &lt;OBUTTON.H&gt;</span>
00013 <span class="preprocessor">#include &lt;<a class="code" href="OGRPHYR_8H.html">OGRPHYR.H</a>&gt;</span>
00014 <span class="preprocessor">#include &lt;OFACILIT.H&gt;</span>
00015 
00016 <span class="keyword">enum</span> {                                            <span class="comment">// screen coordinates</span>
00017     <a class="code" href="OPARKING_8CPP.html#a13a3">REPORT_X1</a> = <a class="code" href="Oworldmt_8h.html#a12">ZOOM_X1</a>+15,
00018     <a class="code" href="OPARKING_8CPP.html#a13a4">REPORT_Y1</a> = <a class="code" href="Oworldmt_8h.html#a13">ZOOM_Y1</a>+25,
00019     <a class="code" href="OPARKING_8CPP.html#a13a5">REPORT_X2</a> = <a class="code" href="Oworldmt_8h.html#a14">ZOOM_X2</a>-15,
00020     <a class="code" href="OPARKING_8CPP.html#a13a6">REPORT_Y2</a> = <a class="code" href="Oworldmt_8h.html#a15">ZOOM_Y2</a>-55
00021 };
00022 
00023 <span class="keyword">enum</span> {
00024     <a class="code" href="OPARKING_8CPP.html#a14a7">BUTTON_X0</a> = <a class="code" href="OPARKING_8CPP.html#a13a3">REPORT_X1</a>+100,
00025     <a class="code" href="OPARKING_8CPP.html#a14a8">BOTTOM_Y1</a> = <a class="code" href="OPARKING_8CPP.html#a13a6">REPORT_Y2</a>+25,
00026 };
00027 
00028 <span class="keyword">enum</span> {
00029     <a class="code" href="OPARKING_8CPP.html#a15a9">BOTTOM_BUTTON_WIDTH</a> = 80,
00030     <a class="code" href="OPARKING_8CPP.html#a15a10">BOTTOM_BUTTON_HEIGHT</a> = 25,
00031     <a class="code" href="OPARKING_8CPP.html#a15a11">BOTTOM_BUTTON_DISTANCE</a> = 10,
00032 };
00033 
00034 <span class="keyword">enum</span> {                                            <span class="comment">// the bg image id</span>
00035     <a class="code" href="OPARKING_8CPP.html#a16a12">BG_PIC_ID</a> = 3
00036 };
00037 
00038 <span class="keyword">static</span> <span class="keywordtype">char</span> parking_init_flag;
00039 <span class="keyword">static</span> <a class="code" href="classGraphYear.html">GraphYear</a> parking_demand;
00040 
00041 <span class="keyword">static</span> <span class="keywordtype">char</span> *legend_label[] = {
00042     <span class="comment">//  "Parking Demand",</span>
00043     <span class="comment">//  "Parking Supply",</span>
00044     <span class="stringliteral">"Parking Supply"</span>,
00045     <span class="stringliteral">"Parking Demand"</span>,                               <span class="comment">//## chea 120899 change them around (break @ ofaci_st.cpp ln884 can prove)</span>
00046 };
00047 
00048 <span class="comment">//------- Begin of function Parking::Parking -----------//</span>
<a name="l00050"></a><a class="code" href="classParking.html#a0">00050</a> <span class="comment">Parking::Parking() {</span>
00051     init();
00052 }
00053 
00054 <span class="comment">//--------- End of function Parking::Parking -----------//</span>
00055 
00056 <span class="comment">//------- Begin of function Parking::~Parking -----------//</span>
<a name="l00058"></a><a class="code" href="classParking.html#a1">00058</a> <span class="comment">Parking::~Parking() {</span>
00059     deinit();
00060 }
00061 
00062 <span class="comment">//--------- End of function Parking::~Parking -----------//</span>
00063 
00064 <span class="comment">//------- Begin of function Parking::deinit ---------------//</span>
<a name="l00066"></a><a class="code" href="classParking.html#a3">00066</a> <span class="comment">void Parking::deinit() {</span>
00067     parking_init_flag = 0;
00068     parking_demand.<a class="code" href="classGraphYear.html#a7">deinit</a>();
00069 }
00070 
00071 <span class="comment">//--------- End of function Parking::deinit ---------------//</span>
00072 
00073 <span class="comment">//------- Begin of function Parking::init -----------------//</span>
<a name="l00075"></a><a class="code" href="classParking.html#a2">00075</a> <span class="comment">void Parking::init() {</span>
00076     parking_init_flag = 0;
00077 }
00078 
00079 <span class="comment">//--------- End of function Parking::init -----------------//</span>
00080 
00081 <span class="comment">//---------- Begin of function Parking::eval_letter_report ------------//</span>
<a name="l00083"></a><a class="code" href="classParking.html#a4">00083</a> <span class="comment">void Parking::parking_report(int refreshFlag) {</span>
00084     <span class="keywordtype">int</span> tab1=<a class="code" href="OPARKING_8CPP.html#a13a3">REPORT_X1</a>,tab2=<a class="code" href="OPARKING_8CPP.html#a13a3">REPORT_X1</a>+100,
00085         tab3=<a class="code" href="OPARKING_8CPP.html#a13a3">REPORT_X1</a>+200,tab4=<a class="code" href="OPARKING_8CPP.html#a13a3">REPORT_X1</a>+700;
00086     <span class="keywordtype">int</span> vtab1=<a class="code" href="OPARKING_8CPP.html#a13a4">REPORT_Y1</a>+15,vtab2=<a class="code" href="OPARKING_8CPP.html#a13a4">REPORT_Y1</a>+70,
00087         vtab3=<a class="code" href="OPARKING_8CPP.html#a13a4">REPORT_Y1</a>+100,vtab4=<a class="code" href="OPARKING_8CPP.html#a13a4">REPORT_Y1</a>+350;
00088 
00089     <span class="keyword">static</span> <span class="keywordtype">int</span> data_num=HISTORY_YEAR_COUNT;
00090     <span class="keywordtype">int</span> dataArray1[HISTORY_YEAR_COUNT*2];
00091 
00092     vga.use_back();
00093 
00094     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;HISTORY_YEAR_COUNT;i++) {
00095         dataArray1[i]=facility_office.parking_demand[i];
00096         dataArray1[i+HISTORY_YEAR_COUNT]=facility_office.parking_supply[i];
00097     }
00098 
00099     sys.is_institution_report=1;
00100     <span class="keywordflow">if</span> (refreshFlag == <a class="code" href="Gamedef_8h.html#a71a16">INFO_REPAINT</a>) {
00101         <span class="keywordflow">if</span>(parking_init_flag )
00102             deinit();
00103 
00104         <span class="comment">//------------- paint the background ----------------//</span>
00105         <span class="keywordflow">if</span> (!parking_init_flag) {
00106             user_interface.bg_img(<a class="code" href="OPARKING_8CPP.html#a16a12">BG_PIC_ID</a>, &amp;vga_back);
00107             info.disp_column_bitmap(&amp;vga_back);
00108             parking_init_flag = 1;
00109             font_charts.put(tab3+120,<a class="code" href="OPARKING_8CPP.html#a13a4">REPORT_Y1</a>,<span class="stringliteral">"Parking Report"</span>);
00110             <span class="comment">//-------- graph title --------------//</span>
00111 
00112             user_interface.brighten(
00113                 <a class="code" href="OPARKING_8CPP.html#a13a3">REPORT_X1</a>+100, <a class="code" href="OPARKING_8CPP.html#a13a4">REPORT_Y1</a>+50,
00114                 <a class="code" href="OPARKING_8CPP.html#a13a5">REPORT_X2</a>-100, <a class="code" href="OPARKING_8CPP.html#a13a6">REPORT_Y2</a>-50);
00115 
00116             parking_demand.<a class="code" href="classGraphYear.html#a2">init</a>(
00117                 <a class="code" href="OPARKING_8CPP.html#a13a3">REPORT_X1</a>+100, <a class="code" href="OPARKING_8CPP.html#a13a4">REPORT_Y1</a>+50,
00118                 <a class="code" href="OPARKING_8CPP.html#a13a5">REPORT_X2</a>-100, <a class="code" href="OPARKING_8CPP.html#a13a6">REPORT_Y2</a>-50,
00119                 2, &amp;data_num, dataArray1,1,
00120                 <a class="code" href="OHELP_8H.html#a0">NULL</a>, <a class="code" href="OHELP_8H.html#a0">NULL</a>, legend_label, 1, 1, 1, 4);
00121             parking_demand.<a class="code" href="classGraphYear.html#a8">paint</a>();
00122         }
00123     }
00124     parking_demand.<a class="code" href="classGraphYear.html#a9">refresh</a>();
00125     <span class="comment">//------- blt the back buffer to front buffer -------//</span>
00126     vga.blt_buf(<a class="code" href="Oworldmt_8h.html#a12">ZOOM_X1</a>, <a class="code" href="Oworldmt_8h.html#a13">ZOOM_Y1</a>, <a class="code" href="Oworldmt_8h.html#a14">ZOOM_X2</a>, <a class="code" href="Oworldmt_8h.html#a15">ZOOM_Y2</a>);
00127 }
00128 
00129 <span class="comment">//---------- End of function Development::eval_letter_report ------------//</span>
00130 
00132 
<a name="l00133"></a><a class="code" href="classParking.html#a5">00133</a> <span class="keywordtype">int</span> <a class="code" href="classParking.html#a5">Parking::parking_detect</a>() {
00134     <span class="keywordtype">int</span> tab1=<a class="code" href="OPARKING_8CPP.html#a13a3">REPORT_X1</a>,tab2=<a class="code" href="OPARKING_8CPP.html#a13a3">REPORT_X1</a>+100,
00135         tab3=<a class="code" href="OPARKING_8CPP.html#a13a3">REPORT_X1</a>+200,tab4=<a class="code" href="OPARKING_8CPP.html#a13a3">REPORT_X1</a>+600;
00136     <span class="keywordtype">int</span> vtab1=<a class="code" href="OPARKING_8CPP.html#a13a4">REPORT_Y1</a>+15,vtab2=<a class="code" href="OPARKING_8CPP.html#a13a4">REPORT_Y1</a>+70,
00137         vtab3=<a class="code" href="OPARKING_8CPP.html#a13a4">REPORT_Y1</a>+100,vtab4=<a class="code" href="OPARKING_8CPP.html#a13a4">REPORT_Y1</a>+350;
00138     <span class="keywordflow">if</span> (!parking_init_flag)
00139         <span class="keywordflow">return</span> 0;
00140 
00141     <span class="keywordflow">return</span> 0;
00142 }
</pre></div><hr><address style="align: right;"><small>Generated on Fri Aug 23 01:38:10 2002 for VirtualU by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.17 </small></address>
</body>
</html>
