<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>SUBMAT.CPP Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.17 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>SUBMAT.CPP</h1><a href="SUBMAT_8CPP.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">//Owner: Fred</span>
00002 <span class="comment">//$$ submat.cpp                         submatrices</span>
00003 
00004 <span class="comment">// Copyright (C) 1991,2,3,4: R B Davies</span>
00005 
00006 <span class="preprocessor">#include "include.h"</span>
00007 
00008 <span class="preprocessor">#include "newmat.h"</span>
00009 <span class="preprocessor">#include "newmatrc.h"</span>
00010 
00011 <span class="preprocessor">#ifdef use_namespace</span>
00012 <span class="preprocessor"></span><span class="keyword">namespace </span>NEWMAT {
00013 <span class="preprocessor">#endif</span>
00014 <span class="preprocessor"></span>
00015 <span class="preprocessor">#ifdef DO_REPORT</span>
00016 <span class="preprocessor"></span><span class="preprocessor">#define REPORT { static ExeCounter ExeCount(__LINE__,11); ++ExeCount; }</span>
00017 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00018"></a><a class="code" href="SUBMAT_8CPP.html#a0">00018</a> <span class="preprocessor"></span><span class="preprocessor">#define REPORT {}</span>
00019 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00020 <span class="preprocessor"></span>
00021     <span class="comment">/****************************** submatrices *********************************/</span>
00022 
00023 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
<a name="l00024"></a><a class="code" href="classNEWMAT_1_1BaseMatrix.html#a18">00024</a> <span class="preprocessor"></span>    <a class="code" href="classNEWMAT_1_1GetSubMatrix.html">GetSubMatrix</a>&amp; BaseMatrix::SubMatrix(<span class="keywordtype">int</span> first_row, <span class="keywordtype">int</span> last_row, <span class="keywordtype">int</span> first_col,
00025                                         <span class="keywordtype">int</span> last_col) <span class="keyword">const</span>
00026 <span class="preprocessor">#else</span>
00027 <span class="preprocessor"></span>        <a class="code" href="classNEWMAT_1_1GetSubMatrix.html">GetSubMatrix</a> BaseMatrix::SubMatrix(<span class="keywordtype">int</span> first_row, <span class="keywordtype">int</span> last_row, <span class="keywordtype">int</span> first_col,
00028                                            <span class="keywordtype">int</span> last_col) <span class="keyword">const</span>
00029 <span class="preprocessor">#endif</span>
00030 <span class="preprocessor"></span>    {
00031         <a class="code" href="SUBMAT_8CPP.html#a0">REPORT</a>
00032             <a class="code" href="classTracer.html">Tracer</a> tr(<span class="stringliteral">"SubMatrix"</span>);
00033         <span class="keywordtype">int</span> a = first_row - 1; <span class="keywordtype">int</span> b = last_row - first_row + 1;
00034         <span class="keywordtype">int</span> c = first_col - 1; <span class="keywordtype">int</span> d = last_col - first_col + 1;
00035         <span class="keywordflow">if</span> (a&lt;0 || b&lt;0 || c&lt;0 || d&lt;0) Throw(<a class="code" href="classNEWMAT_1_1SubMatrixDimensionException.html">SubMatrixDimensionException</a>());
00036         <span class="comment">// allow zero rows or columns</span>
00037 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
00038 <span class="preprocessor"></span>        <a class="code" href="classNEWMAT_1_1GetSubMatrix.html">GetSubMatrix</a>* x = <span class="keyword">new</span> <a class="code" href="classNEWMAT_1_1GetSubMatrix.html">GetSubMatrix</a>(<span class="keyword">this</span>, a, b, c, d, <span class="keyword">false</span>);
00039         <a class="code" href="namespaceNEWMAT.html#a19">MatrixErrorNoSpace</a>(x);
00040         <span class="keywordflow">return</span> *x;
00041 <span class="preprocessor">#else</span>
00042 <span class="preprocessor"></span>        <span class="keywordflow">return</span> GetSubMatrix(<span class="keyword">this</span>, a, b, c, d, <span class="keyword">false</span>);
00043 <span class="preprocessor">#endif</span>
00044 <span class="preprocessor"></span>    }
00045 
00046 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
<a name="l00047"></a><a class="code" href="classNEWMAT_1_1BaseMatrix.html#a19">00047</a> <span class="preprocessor"></span>    <a class="code" href="classNEWMAT_1_1GetSubMatrix.html">GetSubMatrix</a>&amp; BaseMatrix::SymSubMatrix(<span class="keywordtype">int</span> first_row, <span class="keywordtype">int</span> last_row) <span class="keyword">const</span>
00048 <span class="preprocessor">#else</span>
00049 <span class="preprocessor"></span>        <a class="code" href="classNEWMAT_1_1GetSubMatrix.html">GetSubMatrix</a> BaseMatrix::SymSubMatrix(<span class="keywordtype">int</span> first_row, <span class="keywordtype">int</span> last_row) <span class="keyword">const</span>
00050 <span class="preprocessor">#endif</span>
00051 <span class="preprocessor"></span>    {
00052         <a class="code" href="SUBMAT_8CPP.html#a0">REPORT</a>
00053             <a class="code" href="classTracer.html">Tracer</a> tr(<span class="stringliteral">"SubMatrix(symmetric)"</span>);
00054         <span class="keywordtype">int</span> a = first_row - 1; <span class="keywordtype">int</span> b = last_row - first_row + 1;
00055         <span class="keywordflow">if</span> (a&lt;0 || b&lt;0) Throw(<a class="code" href="classNEWMAT_1_1SubMatrixDimensionException.html">SubMatrixDimensionException</a>());
00056         <span class="comment">// allow zero rows or columns</span>
00057 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
00058 <span class="preprocessor"></span>        <a class="code" href="classNEWMAT_1_1GetSubMatrix.html">GetSubMatrix</a>* x = <span class="keyword">new</span> <a class="code" href="classNEWMAT_1_1GetSubMatrix.html">GetSubMatrix</a>(<span class="keyword">this</span>, a, b, a, b, <span class="keyword">true</span>);
00059         <a class="code" href="namespaceNEWMAT.html#a19">MatrixErrorNoSpace</a>(x);
00060         <span class="keywordflow">return</span> *x;
00061 <span class="preprocessor">#else</span>
00062 <span class="preprocessor"></span>        <span class="keywordflow">return</span> GetSubMatrix( <span class="keyword">this</span>, a, b, a, b, <span class="keyword">true</span>);
00063 <span class="preprocessor">#endif</span>
00064 <span class="preprocessor"></span>    }
00065 
00066 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
<a name="l00067"></a><a class="code" href="classNEWMAT_1_1BaseMatrix.html#a20">00067</a> <span class="preprocessor"></span>    <a class="code" href="classNEWMAT_1_1GetSubMatrix.html">GetSubMatrix</a>&amp; BaseMatrix::Row(<span class="keywordtype">int</span> first_row) <span class="keyword">const</span>
00068 <span class="preprocessor">#else</span>
00069 <span class="preprocessor"></span>        <a class="code" href="classNEWMAT_1_1GetSubMatrix.html">GetSubMatrix</a> BaseMatrix::Row(<span class="keywordtype">int</span> first_row) <span class="keyword">const</span>
00070 <span class="preprocessor">#endif</span>
00071 <span class="preprocessor"></span>    {
00072         <a class="code" href="SUBMAT_8CPP.html#a0">REPORT</a>
00073             <a class="code" href="classTracer.html">Tracer</a> tr(<span class="stringliteral">"SubMatrix(row)"</span>);
00074         <span class="keywordtype">int</span> a = first_row - 1;
00075         <span class="keywordflow">if</span> (a&lt;0) Throw(<a class="code" href="classNEWMAT_1_1SubMatrixDimensionException.html">SubMatrixDimensionException</a>());
00076 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
00077 <span class="preprocessor"></span>        <a class="code" href="classNEWMAT_1_1GetSubMatrix.html">GetSubMatrix</a>* x = <span class="keyword">new</span> <a class="code" href="classNEWMAT_1_1GetSubMatrix.html">GetSubMatrix</a>(<span class="keyword">this</span>, a, 1, 0, -1, <span class="keyword">false</span>);
00078         <a class="code" href="namespaceNEWMAT.html#a19">MatrixErrorNoSpace</a>(x);
00079         <span class="keywordflow">return</span> *x;
00080 <span class="preprocessor">#else</span>
00081 <span class="preprocessor"></span>        <span class="keywordflow">return</span> GetSubMatrix(<span class="keyword">this</span>, a, 1, 0, -1, <span class="keyword">false</span>);
00082 <span class="preprocessor">#endif</span>
00083 <span class="preprocessor"></span>    }
00084 
00085 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
<a name="l00086"></a><a class="code" href="classNEWMAT_1_1BaseMatrix.html#a21">00086</a> <span class="preprocessor"></span>    <a class="code" href="classNEWMAT_1_1GetSubMatrix.html">GetSubMatrix</a>&amp; BaseMatrix::Rows(<span class="keywordtype">int</span> first_row, <span class="keywordtype">int</span> last_row) <span class="keyword">const</span>
00087 <span class="preprocessor">#else</span>
00088 <span class="preprocessor"></span>        <a class="code" href="classNEWMAT_1_1GetSubMatrix.html">GetSubMatrix</a> BaseMatrix::Rows(<span class="keywordtype">int</span> first_row, <span class="keywordtype">int</span> last_row) <span class="keyword">const</span>
00089 <span class="preprocessor">#endif</span>
00090 <span class="preprocessor"></span>    {
00091         <a class="code" href="SUBMAT_8CPP.html#a0">REPORT</a>
00092             <a class="code" href="classTracer.html">Tracer</a> tr(<span class="stringliteral">"SubMatrix(rows)"</span>);
00093         <span class="keywordtype">int</span> a = first_row - 1; <span class="keywordtype">int</span> b = last_row - first_row + 1;
00094         <span class="keywordflow">if</span> (a&lt;0 || b&lt;0) Throw(<a class="code" href="classNEWMAT_1_1SubMatrixDimensionException.html">SubMatrixDimensionException</a>());
00095         <span class="comment">// allow zero rows or columns</span>
00096 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
00097 <span class="preprocessor"></span>        <a class="code" href="classNEWMAT_1_1GetSubMatrix.html">GetSubMatrix</a>* x = <span class="keyword">new</span> <a class="code" href="classNEWMAT_1_1GetSubMatrix.html">GetSubMatrix</a>(<span class="keyword">this</span>, a, b, 0, -1, <span class="keyword">false</span>);
00098         <a class="code" href="namespaceNEWMAT.html#a19">MatrixErrorNoSpace</a>(x);
00099         <span class="keywordflow">return</span> *x;
00100 <span class="preprocessor">#else</span>
00101 <span class="preprocessor"></span>        <span class="keywordflow">return</span> GetSubMatrix(<span class="keyword">this</span>, a, b, 0, -1, <span class="keyword">false</span>);
00102 <span class="preprocessor">#endif</span>
00103 <span class="preprocessor"></span>    }
00104 
00105 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
<a name="l00106"></a><a class="code" href="classNEWMAT_1_1BaseMatrix.html#a22">00106</a> <span class="preprocessor"></span>    <a class="code" href="classNEWMAT_1_1GetSubMatrix.html">GetSubMatrix</a>&amp; BaseMatrix::Column(<span class="keywordtype">int</span> first_col) <span class="keyword">const</span>
00107 <span class="preprocessor">#else</span>
00108 <span class="preprocessor"></span>        <a class="code" href="classNEWMAT_1_1GetSubMatrix.html">GetSubMatrix</a> BaseMatrix::Column(<span class="keywordtype">int</span> first_col) <span class="keyword">const</span>
00109 <span class="preprocessor">#endif</span>
00110 <span class="preprocessor"></span>    {
00111         <a class="code" href="SUBMAT_8CPP.html#a0">REPORT</a>
00112             <a class="code" href="classTracer.html">Tracer</a> tr(<span class="stringliteral">"SubMatrix(column)"</span>);
00113         <span class="keywordtype">int</span> c = first_col - 1;
00114         <span class="keywordflow">if</span> (c&lt;0) Throw(<a class="code" href="classNEWMAT_1_1SubMatrixDimensionException.html">SubMatrixDimensionException</a>());
00115 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
00116 <span class="preprocessor"></span>        <a class="code" href="classNEWMAT_1_1GetSubMatrix.html">GetSubMatrix</a>* x = <span class="keyword">new</span> <a class="code" href="classNEWMAT_1_1GetSubMatrix.html">GetSubMatrix</a>(<span class="keyword">this</span>, 0, -1, c, 1, <span class="keyword">false</span>);
00117         <a class="code" href="namespaceNEWMAT.html#a19">MatrixErrorNoSpace</a>(x);
00118         <span class="keywordflow">return</span> *x;
00119 <span class="preprocessor">#else</span>
00120 <span class="preprocessor"></span>        <span class="keywordflow">return</span> GetSubMatrix(<span class="keyword">this</span>, 0, -1, c, 1, <span class="keyword">false</span>);
00121 <span class="preprocessor">#endif</span>
00122 <span class="preprocessor"></span>    }
00123 
00124 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
<a name="l00125"></a><a class="code" href="classNEWMAT_1_1BaseMatrix.html#a23">00125</a> <span class="preprocessor"></span>    <a class="code" href="classNEWMAT_1_1GetSubMatrix.html">GetSubMatrix</a>&amp; BaseMatrix::Columns(<span class="keywordtype">int</span> first_col, <span class="keywordtype">int</span> last_col) <span class="keyword">const</span>
00126 <span class="preprocessor">#else</span>
00127 <span class="preprocessor"></span>        <a class="code" href="classNEWMAT_1_1GetSubMatrix.html">GetSubMatrix</a> BaseMatrix::Columns(<span class="keywordtype">int</span> first_col, <span class="keywordtype">int</span> last_col) <span class="keyword">const</span>
00128 <span class="preprocessor">#endif</span>
00129 <span class="preprocessor"></span>    {
00130         <a class="code" href="SUBMAT_8CPP.html#a0">REPORT</a>
00131             <a class="code" href="classTracer.html">Tracer</a> tr(<span class="stringliteral">"SubMatrix(columns)"</span>);
00132         <span class="keywordtype">int</span> c = first_col - 1; <span class="keywordtype">int</span> d = last_col - first_col + 1;
00133         <span class="keywordflow">if</span> (c&lt;0 || d&lt;0) Throw(<a class="code" href="classNEWMAT_1_1SubMatrixDimensionException.html">SubMatrixDimensionException</a>());
00134         <span class="comment">// allow zero rows or columns</span>
00135 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
00136 <span class="preprocessor"></span>        <a class="code" href="classNEWMAT_1_1GetSubMatrix.html">GetSubMatrix</a>* x = <span class="keyword">new</span> <a class="code" href="classNEWMAT_1_1GetSubMatrix.html">GetSubMatrix</a>(<span class="keyword">this</span>, 0, -1, c, d, <span class="keyword">false</span>);
00137         <a class="code" href="namespaceNEWMAT.html#a19">MatrixErrorNoSpace</a>(x);
00138         <span class="keywordflow">return</span> *x;
00139 <span class="preprocessor">#else</span>
00140 <span class="preprocessor"></span>        <span class="keywordflow">return</span> GetSubMatrix(<span class="keyword">this</span>, 0, -1, c, d, <span class="keyword">false</span>);
00141 <span class="preprocessor">#endif</span>
00142 <span class="preprocessor"></span>    }
00143 
00144     <span class="keywordtype">void</span> GetSubMatrix::SetUpLHS() {
00145         <a class="code" href="SUBMAT_8CPP.html#a0">REPORT</a>
00146             <a class="code" href="classTracer.html">Tracer</a> tr(<span class="stringliteral">"SubMatrix(LHS)"</span>);
00147         <span class="keyword">const</span> BaseMatrix* bm1 = bm;
00148         <a class="code" href="classNEWMAT_1_1BaseMatrix.html#l0">GeneralMatrix</a>* gm1 = ((BaseMatrix*&amp;)bm)-&gt;Evaluate();
00149         <span class="keywordflow">if</span> ((BaseMatrix*)gm1!=bm1)
00150             Throw(ProgramException(<span class="stringliteral">"Invalid LHS"</span>));
00151         <span class="keywordflow">if</span> (row_number &lt; 0) row_number = gm1-&gt;Nrows();
00152         <span class="keywordflow">if</span> (col_number &lt; 0) col_number = gm1-&gt;Ncols();
00153         <span class="keywordflow">if</span> (row_skip+row_number &gt; gm1-&gt;Nrows()
00154             || col_skip+col_number &gt; gm1-&gt;Ncols())
00155             Throw(SubMatrixDimensionException());
00156     }
00157 
<a name="l00158"></a><a class="code" href="classNEWMAT_1_1GetSubMatrix.html#a5">00158</a>     <span class="keywordtype">void</span> <a class="code" href="NEWMAT9_8CPP.html#a77">GetSubMatrix::operator&lt;&lt;</a>(<span class="keyword">const</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html">BaseMatrix</a>&amp; bmx) {
00159         <a class="code" href="SUBMAT_8CPP.html#a0">REPORT</a>
00160             <a class="code" href="classTracer.html">Tracer</a> tr(<span class="stringliteral">"SubMatrix(&lt;&lt;)"</span>); <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gmx = 0;
00161         Try {
00162             SetUpLHS(); gmx = ((<a class="code" href="classNEWMAT_1_1BaseMatrix.html">BaseMatrix</a>&amp;)bmx).<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a0">Evaluate</a>();
00163             <span class="keywordflow">if</span> (row_number != gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a2">Nrows</a>() || col_number != gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a3">Ncols</a>())
00164                 Throw(<a class="code" href="classNEWMAT_1_1IncompatibleDimensionsException.html">IncompatibleDimensionsException</a>());
00165             <a class="code" href="classMatrixRow.html">MatrixRow</a> mrx(gmx, <a class="code" href="NEWMATRC_8H.html#a6a1">LoadOnEntry</a>);
00166             <a class="code" href="classMatrixRow.html">MatrixRow</a> mr(<a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>, <a class="code" href="NEWMATRC_8H.html#a6a1">LoadOnEntry</a>+<a class="code" href="NEWMATRC_8H.html#a6a2">StoreOnExit</a>+<a class="code" href="NEWMATRC_8H.html#a6a3">DirectPart</a>, row_skip);
00167             <span class="comment">// do need LoadOnEntry</span>
00168             <a class="code" href="classMatrixRowCol.html">MatrixRowCol</a> sub; <span class="keywordtype">int</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a> = row_number;
00169             <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--) {
00170                 mr.<a class="code" href="classMatrixRowCol.html#a35">SubRowCol</a>(sub, col_skip, col_number);  <span class="comment">// put values in sub</span>
00171                 sub.<a class="code" href="classMatrixRowCol.html#a15">Copy</a>(mrx); mr.<a class="code" href="classMatrixRow.html#a2">Next</a>(); mrx.<a class="code" href="classMatrixRow.html#a2">Next</a>();
00172             }
00173             gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a7">tDelete</a>();
00174 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
00175 <span class="preprocessor"></span>            <span class="keyword">delete</span> <span class="keyword">this</span>;
00176 <span class="preprocessor">#endif</span>
00177 <span class="preprocessor"></span>        }
00178 
00179         CatchAll {
00180             <span class="keywordflow">if</span> (gmx) gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a7">tDelete</a>();
00181 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
00182 <span class="preprocessor"></span>            <span class="keyword">delete</span> <span class="keyword">this</span>;
00183 <span class="preprocessor">#endif</span>
00184 <span class="preprocessor"></span>            ReThrow;
00185         }
00186     }
00187 
<a name="l00188"></a><a class="code" href="classNEWMAT_1_1GetSubMatrix.html#a1">00188</a>     <span class="keywordtype">void</span> GetSubMatrix::operator=(<span class="keyword">const</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html">BaseMatrix</a>&amp; bmx) {
00189         <a class="code" href="SUBMAT_8CPP.html#a0">REPORT</a>
00190             <a class="code" href="classTracer.html">Tracer</a> tr(<span class="stringliteral">"SubMatrix(=)"</span>); <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gmx = 0;
00191         <a class="code" href="classNEWMAT_1_1MatrixConversionCheck.html">MatrixConversionCheck</a> mcc;                    <span class="comment">// Check for loss of info</span>
00192         Try {
00193             SetUpLHS(); gmx = ((<a class="code" href="classNEWMAT_1_1BaseMatrix.html">BaseMatrix</a>&amp;)bmx).<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a0">Evaluate</a>();
00194             <span class="keywordflow">if</span> (row_number != gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a2">Nrows</a>() || col_number != gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a3">Ncols</a>())
00195                 Throw(<a class="code" href="classNEWMAT_1_1IncompatibleDimensionsException.html">IncompatibleDimensionsException</a>());
00196             <a class="code" href="classMatrixRow.html">MatrixRow</a> mrx(gmx, <a class="code" href="NEWMATRC_8H.html#a6a1">LoadOnEntry</a>);
00197             <a class="code" href="classMatrixRow.html">MatrixRow</a> mr(<a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>, <a class="code" href="NEWMATRC_8H.html#a6a1">LoadOnEntry</a>+<a class="code" href="NEWMATRC_8H.html#a6a2">StoreOnExit</a>+<a class="code" href="NEWMATRC_8H.html#a6a3">DirectPart</a>, row_skip);
00198             <span class="comment">// do need LoadOnEntry</span>
00199             <a class="code" href="classMatrixRowCol.html">MatrixRowCol</a> sub; <span class="keywordtype">int</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a> = row_number;
00200             <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--) {
00201                 mr.<a class="code" href="classMatrixRowCol.html#a35">SubRowCol</a>(sub, col_skip, col_number);  <span class="comment">// put values in sub</span>
00202                 sub.<a class="code" href="classMatrixRowCol.html#a16">CopyCheck</a>(mrx); mr.<a class="code" href="classMatrixRow.html#a2">Next</a>(); mrx.<a class="code" href="classMatrixRow.html#a2">Next</a>();
00203             }
00204             gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a7">tDelete</a>();
00205 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
00206 <span class="preprocessor"></span>            <span class="keyword">delete</span> <span class="keyword">this</span>;
00207 <span class="preprocessor">#endif</span>
00208 <span class="preprocessor"></span>        }
00209 
00210         CatchAll {
00211             <span class="keywordflow">if</span> (gmx) gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a7">tDelete</a>();
00212 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
00213 <span class="preprocessor"></span>            <span class="keyword">delete</span> <span class="keyword">this</span>;
00214 <span class="preprocessor">#endif</span>
00215 <span class="preprocessor"></span>            ReThrow;
00216         }
00217     }
00218 
<a name="l00219"></a><a class="code" href="classNEWMAT_1_1GetSubMatrix.html#a6">00219</a>     <span class="keywordtype">void</span> <a class="code" href="NEWMAT9_8CPP.html#a77">GetSubMatrix::operator&lt;&lt;</a>(<span class="keyword">const</span> <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* r) {
00220         <a class="code" href="SUBMAT_8CPP.html#a0">REPORT</a>
00221             <a class="code" href="classTracer.html">Tracer</a> tr(<span class="stringliteral">"SubMatrix(&lt;&lt;Real*)"</span>);
00222         SetUpLHS();
00223         <span class="keywordflow">if</span> (row_skip+row_number &gt; <a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a2">Nrows</a>() || col_skip+col_number &gt; <a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a3">Ncols</a>())
00224             Throw(<a class="code" href="classNEWMAT_1_1SubMatrixDimensionException.html">SubMatrixDimensionException</a>());
00225         <a class="code" href="classMatrixRow.html">MatrixRow</a> mr(<a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>, <a class="code" href="NEWMATRC_8H.html#a6a1">LoadOnEntry</a>+<a class="code" href="NEWMATRC_8H.html#a6a2">StoreOnExit</a>+<a class="code" href="NEWMATRC_8H.html#a6a3">DirectPart</a>, row_skip);
00226         <span class="comment">// do need LoadOnEntry</span>
00227         <a class="code" href="classMatrixRowCol.html">MatrixRowCol</a> sub; <span class="keywordtype">int</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a> = row_number;
00228         <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--) {
00229             mr.<a class="code" href="classMatrixRowCol.html#a35">SubRowCol</a>(sub, col_skip, col_number);    <span class="comment">// put values in sub</span>
00230             sub.<a class="code" href="classMatrixRowCol.html#a15">Copy</a>(r); mr.<a class="code" href="classMatrixRow.html#a2">Next</a>();
00231         }
00232 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
00233 <span class="preprocessor"></span>        <span class="keyword">delete</span> <span class="keyword">this</span>;
00234 <span class="preprocessor">#endif</span>
00235 <span class="preprocessor"></span>    }
00236 
<a name="l00237"></a><a class="code" href="classNEWMAT_1_1GetSubMatrix.html#a7">00237</a>     <span class="keywordtype">void</span> GetSubMatrix::operator=(<a class="code" href="namespaceRBD__COMMON.html#a0">Real</a> r) {
00238         <a class="code" href="SUBMAT_8CPP.html#a0">REPORT</a>
00239             <a class="code" href="classTracer.html">Tracer</a> tr(<span class="stringliteral">"SubMatrix(=Real)"</span>);
00240         SetUpLHS();
00241         <a class="code" href="classMatrixRow.html">MatrixRow</a> mr(<a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>, <a class="code" href="NEWMATRC_8H.html#a6a1">LoadOnEntry</a>+<a class="code" href="NEWMATRC_8H.html#a6a2">StoreOnExit</a>+<a class="code" href="NEWMATRC_8H.html#a6a3">DirectPart</a>, row_skip);
00242         <span class="comment">// do need LoadOnEntry</span>
00243         <a class="code" href="classMatrixRowCol.html">MatrixRowCol</a> sub; <span class="keywordtype">int</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a> = row_number;
00244         <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--) {
00245             mr.<a class="code" href="classMatrixRowCol.html#a35">SubRowCol</a>(sub, col_skip, col_number);    <span class="comment">// put values in sub</span>
00246             sub.<a class="code" href="classMatrixRowCol.html#a15">Copy</a>(r); mr.<a class="code" href="classMatrixRow.html#a2">Next</a>();
00247         }
00248 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
00249 <span class="preprocessor"></span>        <span class="keyword">delete</span> <span class="keyword">this</span>;
00250 <span class="preprocessor">#endif</span>
00251 <span class="preprocessor"></span>    }
00252 
<a name="l00253"></a><a class="code" href="classNEWMAT_1_1GetSubMatrix.html#a12">00253</a>     <span class="keywordtype">void</span> GetSubMatrix::Inject(<span class="keyword">const</span> <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>&amp; gmx) {
00254         <a class="code" href="SUBMAT_8CPP.html#a0">REPORT</a>
00255             <a class="code" href="classTracer.html">Tracer</a> tr(<span class="stringliteral">"SubMatrix(inject)"</span>);
00256         SetUpLHS();
00257         <span class="keywordflow">if</span> (row_number != gmx.<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a2">Nrows</a>() || col_number != gmx.<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a3">Ncols</a>())
00258             Throw(<a class="code" href="classNEWMAT_1_1IncompatibleDimensionsException.html">IncompatibleDimensionsException</a>());
00259         <a class="code" href="classMatrixRow.html">MatrixRow</a> mrx((<a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>*)(&amp;gmx), <a class="code" href="NEWMATRC_8H.html#a6a1">LoadOnEntry</a>);
00260         <a class="code" href="classMatrixRow.html">MatrixRow</a> mr(<a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>, <a class="code" href="NEWMATRC_8H.html#a6a1">LoadOnEntry</a>+<a class="code" href="NEWMATRC_8H.html#a6a2">StoreOnExit</a>+<a class="code" href="NEWMATRC_8H.html#a6a3">DirectPart</a>, row_skip);
00261         <span class="comment">// do need LoadOnEntry</span>
00262         <a class="code" href="classMatrixRowCol.html">MatrixRowCol</a> sub; <span class="keywordtype">int</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a> = row_number;
00263         <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--) {
00264             mr.<a class="code" href="classMatrixRowCol.html#a35">SubRowCol</a>(sub, col_skip, col_number);    <span class="comment">// put values in sub</span>
00265             sub.<a class="code" href="classMatrixRowCol.html#a25">Inject</a>(mrx); mr.<a class="code" href="classMatrixRow.html#a2">Next</a>(); mrx.<a class="code" href="classMatrixRow.html#a2">Next</a>();
00266         }
00267 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
00268 <span class="preprocessor"></span>        <span class="keyword">delete</span> <span class="keyword">this</span>;
00269 <span class="preprocessor">#endif</span>
00270 <span class="preprocessor"></span>    }
00271 
<a name="l00272"></a><a class="code" href="classNEWMAT_1_1GetSubMatrix.html#a2">00272</a>     <span class="keywordtype">void</span> GetSubMatrix::operator+=(<span class="keyword">const</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html">BaseMatrix</a>&amp; bmx) {
00273         <a class="code" href="SUBMAT_8CPP.html#a0">REPORT</a>
00274             <a class="code" href="classTracer.html">Tracer</a> tr(<span class="stringliteral">"SubMatrix(+=)"</span>); <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gmx = 0;
00275         <a class="code" href="classNEWMAT_1_1MatrixConversionCheck.html">MatrixConversionCheck</a> mcc;                    <span class="comment">// Check for loss of info</span>
00276         Try {
00277             SetUpLHS(); gmx = ((<a class="code" href="classNEWMAT_1_1BaseMatrix.html">BaseMatrix</a>&amp;)bmx).<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a0">Evaluate</a>();
00278             <span class="keywordflow">if</span> (row_number != gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a2">Nrows</a>() || col_number != gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a3">Ncols</a>())
00279                 Throw(<a class="code" href="classNEWMAT_1_1IncompatibleDimensionsException.html">IncompatibleDimensionsException</a>());
00280             <a class="code" href="classMatrixRow.html">MatrixRow</a> mrx(gmx, <a class="code" href="NEWMATRC_8H.html#a6a1">LoadOnEntry</a>);
00281             <a class="code" href="classMatrixRow.html">MatrixRow</a> mr(<a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>, <a class="code" href="NEWMATRC_8H.html#a6a1">LoadOnEntry</a>+<a class="code" href="NEWMATRC_8H.html#a6a2">StoreOnExit</a>+<a class="code" href="NEWMATRC_8H.html#a6a3">DirectPart</a>, row_skip);
00282             <span class="comment">// do need LoadOnEntry</span>
00283             <a class="code" href="classMatrixRowCol.html">MatrixRowCol</a> sub; <span class="keywordtype">int</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a> = row_number;
00284             <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--) {
00285                 mr.<a class="code" href="classMatrixRowCol.html#a35">SubRowCol</a>(sub, col_skip, col_number);  <span class="comment">// put values in sub</span>
00286                 sub.<a class="code" href="classMatrixRowCol.html#a17">Check</a>(mrx);                           <span class="comment">// check for loss of info</span>
00287                 sub.<a class="code" href="classMatrixRowCol.html#a4">Add</a>(mrx); mr.<a class="code" href="classMatrixRow.html#a2">Next</a>(); mrx.<a class="code" href="classMatrixRow.html#a2">Next</a>();
00288             }
00289             gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a7">tDelete</a>();
00290 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
00291 <span class="preprocessor"></span>            <span class="keyword">delete</span> <span class="keyword">this</span>;
00292 <span class="preprocessor">#endif</span>
00293 <span class="preprocessor"></span>        }
00294 
00295         CatchAll {
00296             <span class="keywordflow">if</span> (gmx) gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a7">tDelete</a>();
00297 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
00298 <span class="preprocessor"></span>            <span class="keyword">delete</span> <span class="keyword">this</span>;
00299 <span class="preprocessor">#endif</span>
00300 <span class="preprocessor"></span>            ReThrow;
00301         }
00302     }
00303 
<a name="l00304"></a><a class="code" href="classNEWMAT_1_1GetSubMatrix.html#a3">00304</a>     <span class="keywordtype">void</span> GetSubMatrix::operator-=(<span class="keyword">const</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html">BaseMatrix</a>&amp; bmx) {
00305         <a class="code" href="SUBMAT_8CPP.html#a0">REPORT</a>
00306             <a class="code" href="classTracer.html">Tracer</a> tr(<span class="stringliteral">"SubMatrix(-=)"</span>); <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gmx = 0;
00307         <a class="code" href="classNEWMAT_1_1MatrixConversionCheck.html">MatrixConversionCheck</a> mcc;                    <span class="comment">// Check for loss of info</span>
00308         Try {
00309             SetUpLHS(); gmx = ((<a class="code" href="classNEWMAT_1_1BaseMatrix.html">BaseMatrix</a>&amp;)bmx).<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a0">Evaluate</a>();
00310             <span class="keywordflow">if</span> (row_number != gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a2">Nrows</a>() || col_number != gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a3">Ncols</a>())
00311                 Throw(<a class="code" href="classNEWMAT_1_1IncompatibleDimensionsException.html">IncompatibleDimensionsException</a>());
00312             <a class="code" href="classMatrixRow.html">MatrixRow</a> mrx(gmx, <a class="code" href="NEWMATRC_8H.html#a6a1">LoadOnEntry</a>);
00313             <a class="code" href="classMatrixRow.html">MatrixRow</a> mr(<a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>, <a class="code" href="NEWMATRC_8H.html#a6a1">LoadOnEntry</a>+<a class="code" href="NEWMATRC_8H.html#a6a2">StoreOnExit</a>+<a class="code" href="NEWMATRC_8H.html#a6a3">DirectPart</a>, row_skip);
00314             <span class="comment">// do need LoadOnEntry</span>
00315             <a class="code" href="classMatrixRowCol.html">MatrixRowCol</a> sub; <span class="keywordtype">int</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a> = row_number;
00316             <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--) {
00317                 mr.<a class="code" href="classMatrixRowCol.html#a35">SubRowCol</a>(sub, col_skip, col_number);  <span class="comment">// put values in sub</span>
00318                 sub.<a class="code" href="classMatrixRowCol.html#a17">Check</a>(mrx);                           <span class="comment">// check for loss of info</span>
00319                 sub.<a class="code" href="classMatrixRowCol.html#a9">Sub</a>(mrx); mr.<a class="code" href="classMatrixRow.html#a2">Next</a>(); mrx.<a class="code" href="classMatrixRow.html#a2">Next</a>();
00320             }
00321             gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a7">tDelete</a>();
00322 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
00323 <span class="preprocessor"></span>            <span class="keyword">delete</span> <span class="keyword">this</span>;
00324 <span class="preprocessor">#endif</span>
00325 <span class="preprocessor"></span>        }
00326 
00327         CatchAll {
00328             <span class="keywordflow">if</span> (gmx) gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a7">tDelete</a>();
00329 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
00330 <span class="preprocessor"></span>            <span class="keyword">delete</span> <span class="keyword">this</span>;
00331 <span class="preprocessor">#endif</span>
00332 <span class="preprocessor"></span>            ReThrow;
00333         }
00334     }
00335 
<a name="l00336"></a><a class="code" href="classNEWMAT_1_1GetSubMatrix.html#a8">00336</a>     <span class="keywordtype">void</span> GetSubMatrix::operator+=(<a class="code" href="namespaceRBD__COMMON.html#a0">Real</a> r) {
00337         <a class="code" href="SUBMAT_8CPP.html#a0">REPORT</a>
00338             <a class="code" href="classTracer.html">Tracer</a> tr(<span class="stringliteral">"SubMatrix(+= or -= Real)"</span>);
00339         <a class="code" href="classNEWMAT_1_1MatrixConversionCheck.html">MatrixConversionCheck</a> mcc;                    <span class="comment">// Check for loss of info</span>
00340         Try {
00341             SetUpLHS();
00342             <a class="code" href="classMatrixRow.html">MatrixRow</a> mr(<a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>, <a class="code" href="NEWMATRC_8H.html#a6a1">LoadOnEntry</a>+<a class="code" href="NEWMATRC_8H.html#a6a2">StoreOnExit</a>+<a class="code" href="NEWMATRC_8H.html#a6a3">DirectPart</a>, row_skip);
00343             <span class="comment">// do need LoadOnEntry</span>
00344             <a class="code" href="classMatrixRowCol.html">MatrixRowCol</a> sub; <span class="keywordtype">int</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a> = row_number;
00345             <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--) {
00346                 mr.<a class="code" href="classMatrixRowCol.html#a35">SubRowCol</a>(sub, col_skip, col_number);  <span class="comment">// put values in sub</span>
00347                 sub.<a class="code" href="classMatrixRowCol.html#a17">Check</a>();                              <span class="comment">// check for loss of info</span>
00348                 sub.<a class="code" href="classMatrixRowCol.html#a4">Add</a>(r); mr.<a class="code" href="classMatrixRow.html#a2">Next</a>();
00349             }
00350 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
00351 <span class="preprocessor"></span>            <span class="keyword">delete</span> <span class="keyword">this</span>;
00352 <span class="preprocessor">#endif</span>
00353 <span class="preprocessor"></span>        }
00354 
00355         CatchAll {
00356 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
00357 <span class="preprocessor"></span>            <span class="keyword">delete</span> <span class="keyword">this</span>;
00358 <span class="preprocessor">#endif</span>
00359 <span class="preprocessor"></span>            ReThrow;
00360         }
00361     }
00362 
<a name="l00363"></a><a class="code" href="classNEWMAT_1_1GetSubMatrix.html#a10">00363</a>     <span class="keywordtype">void</span> GetSubMatrix::operator*=(<a class="code" href="namespaceRBD__COMMON.html#a0">Real</a> r) {
00364         <a class="code" href="SUBMAT_8CPP.html#a0">REPORT</a>
00365             <a class="code" href="classTracer.html">Tracer</a> tr(<span class="stringliteral">"SubMatrix(*= or /= Real)"</span>);
00366         <a class="code" href="classNEWMAT_1_1MatrixConversionCheck.html">MatrixConversionCheck</a> mcc;                    <span class="comment">// Check for loss of info</span>
00367         Try {
00368             SetUpLHS();
00369             <a class="code" href="classMatrixRow.html">MatrixRow</a> mr(<a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>, <a class="code" href="NEWMATRC_8H.html#a6a1">LoadOnEntry</a>+<a class="code" href="NEWMATRC_8H.html#a6a2">StoreOnExit</a>+<a class="code" href="NEWMATRC_8H.html#a6a3">DirectPart</a>, row_skip);
00370             <span class="comment">// do need LoadOnEntry</span>
00371             <a class="code" href="classMatrixRowCol.html">MatrixRowCol</a> sub; <span class="keywordtype">int</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a> = row_number;
00372             <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--) {
00373                 mr.<a class="code" href="classMatrixRowCol.html#a35">SubRowCol</a>(sub, col_skip, col_number);  <span class="comment">// put values in sub</span>
00374                 sub.<a class="code" href="classMatrixRowCol.html#a13">Multiply</a>(r); mr.<a class="code" href="classMatrixRow.html#a2">Next</a>();
00375             }
00376 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
00377 <span class="preprocessor"></span>            <span class="keyword">delete</span> <span class="keyword">this</span>;
00378 <span class="preprocessor">#endif</span>
00379 <span class="preprocessor"></span>        }
00380 
00381         CatchAll {
00382 <span class="preprocessor">#ifdef TEMPS_DESTROYED_QUICKLY</span>
00383 <span class="preprocessor"></span>            <span class="keyword">delete</span> <span class="keyword">this</span>;
00384 <span class="preprocessor">#endif</span>
00385 <span class="preprocessor"></span>            ReThrow;
00386         }
00387     }
00388 
00389 <span class="preprocessor">#ifdef use_namespace</span>
00390 <span class="preprocessor"></span>}
00391 <span class="preprocessor">#endif</span>
</pre></div><hr><address style="align: right;"><small>Generated on Fri Aug 23 01:38:37 2002 for VirtualU by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.17 </small></address>
</body>
</html>
