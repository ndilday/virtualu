<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>OGFILE3.CPP Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.17 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>OGFILE3.CPP</h1><a href="OGFILE3_8CPP.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">//Filename    : OGFILE3.CPP</span>
00002 <span class="comment">//Description : Object Game file, save game and restore game, part 3.1</span>
00003 
00004 <span class="comment">//=================================================================================//</span>
00005 <span class="comment">// for write_file_1</span>
00006 
00007 <span class="preprocessor">#include &lt;<a class="code" href="ODEPTRES_8H.html">ODEPTRES.H</a>&gt;</span>
00008 <span class="preprocessor">#include &lt;<a class="code" href="OPEERSCH_8H.html">OPEERSCH.H</a>&gt;</span>
00009 <span class="preprocessor">#include &lt;<a class="code" href="OSCHLRES_8H.html">OSCHLRES.H</a>&gt;</span>
00010 <span class="preprocessor">#include &lt;OENROLL.H&gt;</span>
00011 <span class="preprocessor">#include &lt;OLETTER.H&gt;</span>                              <span class="comment">//## chea 990519</span>
00012 <span class="preprocessor">#include &lt;OFACURES.H&gt;</span>                             <span class="comment">//## chea 090699</span>
00013 
00014 <span class="comment">//=================================================================================//</span>
00015 <span class="comment">// for write_file_2</span>
00016 
00017 <span class="preprocessor">#include &lt;OCONFIG.H&gt;</span>
00018 <span class="preprocessor">#include &lt;<a class="code" href="OGAME_8H.html">OGAME.H</a>&gt;</span>
00019 <span class="preprocessor">#include &lt;OINFO.H&gt;</span>
00020 <span class="preprocessor">#include &lt;OFINANCE.H&gt;</span>
00021 <span class="preprocessor">#include &lt;OPSCHOOL.H&gt;</span>
00022 
00023 <span class="comment">//=================================================================================//</span>
00024 <span class="comment">// for write_file_3</span>
00025 
00026 <span class="preprocessor">#include &lt;ODEPT.H&gt;</span>
00027 <span class="preprocessor">#include &lt;ONEWS.H&gt;</span>
00028 <span class="preprocessor">#include &lt;<a class="code" href="OTASK_8H.html">OTASK.H</a>&gt;</span>
00029 <span class="preprocessor">#include &lt;OCHANCE.H&gt;</span>
00030 
00031 <span class="preprocessor">#include &lt;OATHLETI.H&gt;</span>
00032 <span class="preprocessor">#include &lt;ODEVELOP.H&gt;</span>
00033 <span class="preprocessor">#include &lt;OFACILIT.H&gt;</span>
00034 <span class="preprocessor">#include &lt;OLIBTECH.H&gt;</span>
00035 <span class="preprocessor">#include &lt;OINVEST.H&gt;</span>
00036 <span class="preprocessor">#include &lt;<a class="code" href="OSTUOFF_8H.html">OSTUOFF.H</a>&gt;</span>
00037 
00038 <span class="comment">//=================================================================================//</span>
00039 <span class="preprocessor">#include &lt;OGFILE.H&gt;</span>
00040 
00041 <span class="comment">//=================================================================================//</span>
00042 <span class="comment">//============================ section 1/3 ========================================//</span>
00043 <span class="comment">//=================================================================================//</span>
00044 
00045 <span class="comment">//--------- Begin of function DepartmentRes::write_file ---------------//</span>
<a name="l00046"></a><a class="code" href="classDepartmentRes.html#a4">00046</a> <span class="keywordtype">int</span> <a class="code" href="classDepartmentRes.html#a4">DepartmentRes::write_file</a>(<a class="code" href="classFile.html">File</a>* filePtr) {
00047     <span class="comment">//char                      init_flag;</span>
00048 
00049     <span class="comment">//short                     department_count;</span>
00050     <span class="comment">//DepartmentInfo*   info_array;</span>
00051 
00052     <span class="comment">//DepartmentInfo            general_dept_info;      // = general_education_department, although we just need GeneralDepartmentInfo, we still use DepartmentInfo for ease of programming</span>
00053     <span class="comment">//GeneralDepartment general_dept;                   // year 1 ug student without major</span>
00054 
00055     <span class="keywordtype">int</span> rc;
00056 
00057     rc = filePtr-&gt;<a class="code" href="classFile.html#a12">file_put_short</a>(<a class="code" href="classDepartmentRes.html#m0">init_flag</a>);
00058     rc &amp;= filePtr-&gt;<a class="code" href="classFile.html#a12">file_put_short</a>(<a class="code" href="classDepartmentRes.html#m1">department_count</a>);
00059 
00060     <span class="keywordflow">if</span> ( !rc )
00061         <span class="keywordflow">return</span> 0;
00062 
00063     <a class="code" href="ALL_8H.html#a0">err_when</a>(!<a class="code" href="classDepartmentRes.html#m2">info_array</a>);
00064 
00065     <span class="keywordflow">if</span>( !filePtr-&gt;<a class="code" href="classFile.html#a10">file_write</a>( <a class="code" href="classDepartmentRes.html#m2">info_array</a>, <a class="code" href="classDepartmentRes.html#m1">department_count</a>*<span class="keyword">sizeof</span>(<a class="code" href="structDepartmentInfo.html">DepartmentInfo</a>) ) )
00066         <span class="keywordflow">return</span> 0;
00067 
00068     <span class="keywordflow">if</span>( !filePtr-&gt;<a class="code" href="classFile.html#a10">file_write</a>(&amp;<a class="code" href="classDepartmentRes.html#m3">general_dept_info</a>, <span class="keyword">sizeof</span>(<a class="code" href="classDepartmentRes.html#m3">general_dept_info</a>)) )
00069         <span class="keywordflow">return</span> 0;
00070 
00071     <span class="keywordflow">return</span> <a class="code" href="classDepartmentRes.html#m4">general_dept</a>.<a class="code" href="classGeneralDepartment.html#a2">write_file</a>(filePtr);
00072 }
00073 
<a name="l00074"></a><a class="code" href="classDepartmentRes.html#a5">00074</a> <span class="keywordtype">int</span> <a class="code" href="classDepartmentRes.html#a5">DepartmentRes::read_file</a>(<a class="code" href="classFile.html">File</a>* filePtr) {
00075     <a class="code" href="classDepartmentRes.html#m0">init_flag</a> = (char) filePtr-&gt;<a class="code" href="classFile.html#a11">file_get_short</a>();
00076     <a class="code" href="classDepartmentRes.html#m1">department_count</a> = filePtr-&gt;<a class="code" href="classFile.html#a11">file_get_short</a>();
00077 
00078     <a class="code" href="ALL_8H.html#a0">err_when</a>(!<a class="code" href="classDepartmentRes.html#m2">info_array</a>);
00079 
00080     <span class="keywordflow">if</span>( !filePtr-&gt;<a class="code" href="classFile.html#a9">file_read</a>( <a class="code" href="classDepartmentRes.html#m2">info_array</a>, <a class="code" href="classDepartmentRes.html#m1">department_count</a>*<span class="keyword">sizeof</span>(<a class="code" href="structDepartmentInfo.html">DepartmentInfo</a>) ) )
00081         <span class="keywordflow">return</span> 0;
00082 
00083     <span class="keywordflow">if</span>( !filePtr-&gt;<a class="code" href="classFile.html#a9">file_read</a>(&amp;<a class="code" href="classDepartmentRes.html#m3">general_dept_info</a>, <span class="keyword">sizeof</span>(<a class="code" href="classDepartmentRes.html#m3">general_dept_info</a>)) )
00084         <span class="keywordflow">return</span> 0;
00085 
00086     <span class="keywordflow">return</span> <a class="code" href="classDepartmentRes.html#m4">general_dept</a>.<a class="code" href="classGeneralDepartment.html#a3">read_file</a>(filePtr);
00087 }
00088 
00089 <span class="comment">//--------- End of function DepartmentRes::write_file ---------------//</span>
00090 
00091 <span class="comment">//## chea 090699 begin try to save the FacultyRes()</span>
00092 <span class="comment">//--------- Begin of function FacultyRes::write_file ---------------//</span>
<a name="l00093"></a><a class="code" href="classFacultyRes.html#a3">00093</a> <span class="keywordtype">int</span> <a class="code" href="classFacultyRes.html#a3">FacultyRes::write_file</a>(<a class="code" href="classFile.html">File</a>* filePtr) {
00094 
00095     <span class="comment">//char                init_flag;</span>
00096     <span class="comment">//short                      faculty_template_count;</span>
00097     <span class="comment">//FacultyTemplate* faculty_template_array;</span>
00098 
00099     <span class="keywordtype">int</span> rc;
00100 
00101     rc = filePtr-&gt;<a class="code" href="classFile.html#a12">file_put_short</a>(<a class="code" href="classFacultyRes.html#m0">init_flag</a>);
00102     rc &amp;= filePtr-&gt;<a class="code" href="classFile.html#a12">file_put_short</a>(<a class="code" href="classFacultyRes.html#m6">faculty_template_count</a>);
00103 
00104     <span class="keywordflow">if</span> ( !rc )
00105         <span class="keywordflow">return</span> 0;
00106 
00107     <a class="code" href="ALL_8H.html#a0">err_when</a>(!<a class="code" href="classFacultyRes.html#m7">faculty_template_array</a>);
00108 
00109     <span class="keywordflow">if</span>( !filePtr-&gt;<a class="code" href="classFile.html#a10">file_write</a>( <a class="code" href="classFacultyRes.html#m7">faculty_template_array</a>, <a class="code" href="classFacultyRes.html#m6">faculty_template_count</a>*<span class="keyword">sizeof</span>(<a class="code" href="structFacultyTemplate.html">FacultyTemplate</a>) ) )
00110         <span class="keywordflow">return</span> 0;
00111 
00112     <span class="keywordflow">return</span> 1;
00113 }
00114 
<a name="l00115"></a><a class="code" href="classFacultyRes.html#a4">00115</a> <span class="keywordtype">int</span> <a class="code" href="classFacultyRes.html#a4">FacultyRes::read_file</a>(<a class="code" href="classFile.html">File</a>* filePtr) {
00116     <a class="code" href="classFacultyRes.html#m0">init_flag</a> = (char) filePtr-&gt;<a class="code" href="classFile.html#a11">file_get_short</a>();
00117     <a class="code" href="classFacultyRes.html#m6">faculty_template_count</a> = filePtr-&gt;<a class="code" href="classFile.html#a11">file_get_short</a>();
00118 
00119     <a class="code" href="ALL_8H.html#a0">err_when</a>(!<a class="code" href="classFacultyRes.html#m7">faculty_template_array</a>);
00120 
00121     <span class="keywordflow">if</span>( !filePtr-&gt;<a class="code" href="classFile.html#a9">file_read</a>( <a class="code" href="classFacultyRes.html#m7">faculty_template_array</a>, <a class="code" href="classFacultyRes.html#m6">faculty_template_count</a>*<span class="keyword">sizeof</span>(<a class="code" href="structFacultyTemplate.html">FacultyTemplate</a>) ) )
00122         <span class="keywordflow">return</span> 0;
00123 
00124     <span class="keywordflow">return</span> 1;
00125 }
00126 
00127 <span class="comment">//--------- End of function FacultyRes::write_file ---------------//</span>
00128 <span class="comment">//## chea 090699 end try to save the FacultyRes()</span>
00129 
00130 <span class="comment">//--------- Begin of function SchoolRes::write_file ---------------//</span>
<a name="l00131"></a><a class="code" href="classSchoolRes.html#a2">00131</a> <span class="keywordtype">int</span> <a class="code" href="classSchoolRes.html#a2">SchoolRes::write_file</a>(<a class="code" href="classFile.html">File</a>* filePtr) {
00132     <a class="code" href="ALL_8H.html#a0">err_when</a>(<a class="code" href="classSchoolRes.html#m1">db_school_array</a>);
00133     <a class="code" href="ALL_8H.html#a0">err_when</a>(<a class="code" href="classSchoolRes.html#m3">peer_info_array</a>);
00134 
00135     <span class="comment">//PeerSchool*                       player_peer_school;</span>
00136     <span class="comment">//short                                     peer_school_count;</span>
00137     <span class="comment">//PeerSchool*                       peer_school_array;      // includes player_peer_school after battle.create_object()</span>
00138 
00139     <span class="keywordflow">if</span> ( !filePtr-&gt;<a class="code" href="classFile.html#a10">file_write</a>(<span class="keyword">this</span>, <span class="keyword">sizeof</span>(<a class="code" href="classSchoolRes.html">SchoolRes</a>)) )
00140         <span class="keywordflow">return</span> 0;
00141 
00142     <span class="comment">//-------------------//</span>
00143 
00144     <a class="code" href="ALL_8H.html#a0">err_when</a>(!<a class="code" href="classSchoolRes.html#m7">peer_school_array</a>);
00145 
00146     <span class="keywordflow">if</span>( !filePtr-&gt;<a class="code" href="classFile.html#a10">file_write</a>( <a class="code" href="classSchoolRes.html#m7">peer_school_array</a>, <a class="code" href="classSchoolRes.html#m6">peer_school_count</a>*<span class="keyword">sizeof</span>(<a class="code" href="classPeerSchool.html">PeerSchool</a>) ) )
00147         <span class="keywordflow">return</span> 0;
00148 
00149     <span class="comment">//-------------------//</span>
00150 
00151     <span class="keywordtype">short</span> playerPeerIndex = -1;
00152 
00153     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classSchoolRes.html#m6">peer_school_count</a>; i++)
00154         <span class="keywordflow">if</span> ( <a class="code" href="classSchoolRes.html#m7">peer_school_array</a>+i == <a class="code" href="classSchoolRes.html#m5">player_peer_school</a> ) {
00155             playerPeerIndex = i;
00156             <span class="keywordflow">break</span>;
00157         }
00158 
00159     <a class="code" href="ALL_8H.html#a0">err_when</a>(playerPeerIndex &lt;0);
00160 
00161     filePtr-&gt;<a class="code" href="classFile.html#a12">file_put_short</a>(playerPeerIndex);
00162 
00163     <span class="comment">//-------------------//</span>
00164     <span class="comment">// write PeerSchool::</span>
00165     <span class="comment">// static float pref_vars_average_array[PREFERECNE_COUNT2];</span>
00166     <span class="comment">// static float pref_vars_average_array_last[PREFERECNE_COUNT2];</span>
00167     <span class="comment">// static int       average_faculty_salary[MAX_RANK_AGE_GROUP];             // not $000</span>
00168 
00169     <span class="keywordflow">if</span>( !filePtr-&gt;<a class="code" href="classFile.html#a10">file_write</a>(<a class="code" href="classPeerSchool.html#p0">PeerSchool::pref_vars_average_array</a>, <span class="keyword">sizeof</span>(<a class="code" href="classPeerSchool.html#p0">PeerSchool::pref_vars_average_array</a>) ) )
00170         <span class="keywordflow">return</span> 0;
00171 
00172     <span class="keywordflow">if</span>( !filePtr-&gt;<a class="code" href="classFile.html#a10">file_write</a>(<a class="code" href="classPeerSchool.html#p1">PeerSchool::pref_vars_average_array_last</a>, <span class="keyword">sizeof</span>(<a class="code" href="classPeerSchool.html#p1">PeerSchool::pref_vars_average_array_last</a>) ) )
00173         <span class="keywordflow">return</span> 0;
00174 
00175     <span class="keywordflow">if</span>( !filePtr-&gt;<a class="code" href="classFile.html#a10">file_write</a>(<a class="code" href="classPeerSchool.html#p2">PeerSchool::average_faculty_salary</a>, <span class="keyword">sizeof</span>(<a class="code" href="classPeerSchool.html#p2">PeerSchool::average_faculty_salary</a>) ) )
00176         <span class="keywordflow">return</span> 0;
00177 
00178     <span class="keywordflow">return</span> 1;
00179 }
00180 
00181 <span class="comment">//-------------------//</span>
<a name="l00182"></a><a class="code" href="classSchoolRes.html#a3">00182</a> <span class="keywordtype">int</span> <a class="code" href="classSchoolRes.html#a3">SchoolRes::read_file</a>(<a class="code" href="classFile.html">File</a>* filePtr) {
00183     free_db_info();
00184 
00185 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00186 <span class="preprocessor"></span>    <a class="code" href="classSchool.html">School</a>* schoolPtr = desired_school_array;
00187     <span class="keywordtype">int</span>   schoolCount = desired_school_count;
00188 <span class="preprocessor">#endif</span>
00189 <span class="preprocessor"></span>
00190     <span class="comment">//-------------------//</span>
00191 
00192     <span class="keywordflow">if</span> ( !filePtr-&gt;<a class="code" href="classFile.html#a9">file_read</a>(<span class="keyword">this</span>, <span class="keyword">sizeof</span>(<a class="code" href="classSchoolRes.html">SchoolRes</a>)) )
00193         <span class="keywordflow">return</span> 0;
00194 
00195 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00196 <span class="preprocessor"></span>    desired_school_array = schoolPtr;
00197     desired_school_count = schoolCount;
00198 <span class="preprocessor">#endif</span>
00199 <span class="preprocessor"></span>
00200     <span class="comment">//-------------------//</span>
00201 
00202     <a class="code" href="classSchoolRes.html#m7">peer_school_array</a> = (<a class="code" href="classPeerSchool.html">PeerSchool</a> *) <a class="code" href="ALL_8H.html#a5">mem_add</a>(<a class="code" href="classSchoolRes.html#m6">peer_school_count</a>*<span class="keyword">sizeof</span>(<a class="code" href="classPeerSchool.html">PeerSchool</a>));
00203 
00204     <span class="keywordflow">if</span>( !filePtr-&gt;<a class="code" href="classFile.html#a9">file_read</a>( <a class="code" href="classSchoolRes.html#m7">peer_school_array</a>, <a class="code" href="classSchoolRes.html#m6">peer_school_count</a>*<span class="keyword">sizeof</span>(<a class="code" href="classPeerSchool.html">PeerSchool</a>) ) )
00205         <span class="keywordflow">return</span> 0;
00206 
00207     <span class="comment">//-------------------//</span>
00208 
00209     <span class="keywordtype">short</span> playerPeerIndex = -1;
00210 
00211     playerPeerIndex = filePtr-&gt;<a class="code" href="classFile.html#a11">file_get_short</a>();
00212 
00213     <a class="code" href="ALL_8H.html#a0">err_when</a>(playerPeerIndex &lt; 0 || playerPeerIndex &gt;= <a class="code" href="classSchoolRes.html#m6">peer_school_count</a>);
00214 
00215     <a class="code" href="classSchoolRes.html#m5">player_peer_school</a> = <a class="code" href="classSchoolRes.html#m7">peer_school_array</a>+playerPeerIndex;
00216 
00217     <span class="comment">//-------------------//</span>
00218 
00219     <span class="keywordflow">if</span>( !filePtr-&gt;<a class="code" href="classFile.html#a9">file_read</a>(<a class="code" href="classPeerSchool.html#p0">PeerSchool::pref_vars_average_array</a>, <span class="keyword">sizeof</span>(<a class="code" href="classPeerSchool.html#p0">PeerSchool::pref_vars_average_array</a>) ) )
00220         <span class="keywordflow">return</span> 0;
00221 
00222     <span class="keywordflow">if</span>( !filePtr-&gt;<a class="code" href="classFile.html#a9">file_read</a>(<a class="code" href="classPeerSchool.html#p1">PeerSchool::pref_vars_average_array_last</a>, <span class="keyword">sizeof</span>(<a class="code" href="classPeerSchool.html#p1">PeerSchool::pref_vars_average_array_last</a>) ) )
00223         <span class="keywordflow">return</span> 0;
00224 
00225     <span class="keywordflow">if</span>( !filePtr-&gt;<a class="code" href="classFile.html#a9">file_read</a>(<a class="code" href="classPeerSchool.html#p2">PeerSchool::average_faculty_salary</a>, <span class="keyword">sizeof</span>(<a class="code" href="classPeerSchool.html#p2">PeerSchool::average_faculty_salary</a>) ) )
00226         <span class="keywordflow">return</span> 0;
00227 
00228     <span class="keywordflow">return</span> 1;
00229 }
00230 
00231 <span class="comment">//--------- End of function SchoolRes::write_file ---------------//</span>
00232 
00233 <span class="comment">//--------- Begin of function EnrollRes::write_file ---------------//</span>
<a name="l00234"></a><a class="code" href="classEnrollRes.html#a3">00234</a> <span class="keywordtype">int</span> <a class="code" href="classEnrollRes.html#a3">EnrollRes::write_file</a>(<a class="code" href="classFile.html">File</a>* filePtr) {
00235     <span class="keywordflow">return</span> filePtr-&gt;<a class="code" href="classFile.html#a10">file_write</a>(<span class="keyword">this</span>, <span class="keyword">sizeof</span>(<a class="code" href="classEnrollRes.html">EnrollRes</a>));
00236 }
00237 
<a name="l00238"></a><a class="code" href="classEnrollRes.html#a4">00238</a> <span class="keywordtype">int</span> <a class="code" href="classEnrollRes.html#a4">EnrollRes::read_file</a>(<a class="code" href="classFile.html">File</a>* filePtr) {
00239     <span class="keywordflow">return</span> filePtr-&gt;<a class="code" href="classFile.html#a9">file_read</a>(<span class="keyword">this</span>, <span class="keyword">sizeof</span>(<a class="code" href="classEnrollRes.html">EnrollRes</a>));
00240 }
00241 
00242 <span class="comment">//--------- End of function EnrollRes::write_file ---------------//</span>
00243 
00244 <span class="comment">//--------- Begin of function EnrollRes::write_file ---------------//  //## chea begin 990519</span>
<a name="l00245"></a><a class="code" href="classLetter.html#a2">00245</a> <span class="keywordtype">int</span> <a class="code" href="classLetter.html#a2">Letter::write_file</a>(<a class="code" href="classFile.html">File</a>* filePtr) {
00246     <span class="keywordflow">return</span> filePtr-&gt;<a class="code" href="classFile.html#a10">file_write</a>(<span class="keyword">this</span>, <span class="keyword">sizeof</span>(<a class="code" href="classLetter.html">Letter</a>));
00247 }
00248 
<a name="l00249"></a><a class="code" href="classLetter.html#a3">00249</a> <span class="keywordtype">int</span> <a class="code" href="classLetter.html#a3">Letter::read_file</a>(<a class="code" href="classFile.html">File</a>* filePtr) {
00250     <span class="keywordflow">return</span> filePtr-&gt;<a class="code" href="classFile.html#a9">file_read</a>(<span class="keyword">this</span>, <span class="keyword">sizeof</span>(<a class="code" href="classLetter.html">Letter</a>));
00251 }
00252 
00253 <span class="comment">//--------- End of function EnrollRes::write_file ---------------//    //## chea end 990519</span>
00254 
00255 <span class="comment">//=================================================================================//</span>
00256 <span class="comment">//============================ section 2/3 ========================================//</span>
00257 <span class="comment">//=================================================================================//</span>
00258 
00259 <span class="comment">//--------- Begin of function Config::write_file ---------------//</span>
<a name="l00260"></a><a class="code" href="classConfig.html#a2">00260</a> <span class="keywordtype">int</span> <a class="code" href="classConfig.html#a2">Config::write_file</a>(<a class="code" href="classFile.html">File</a>* filePtr) {
00261     <span class="keywordflow">return</span> filePtr-&gt;<a class="code" href="classFile.html#a10">file_write</a>(<span class="keyword">this</span>, <span class="keyword">sizeof</span>(<a class="code" href="classConfig.html">Config</a>));
00262 }
00263 
00264 <span class="comment">// keepSysSettings:     default = 1</span>
00265 <span class="comment">//</span>
<a name="l00266"></a><a class="code" href="classConfig.html#a3">00266</a> <span class="keywordtype">int</span> <a class="code" href="classConfig.html#a3">Config::read_file</a>(<a class="code" href="classFile.html">File</a>* filePtr, <span class="keywordtype">int</span> keepSavedSysSettings) {
00267     <span class="keywordflow">if</span> ( keepSavedSysSettings )
00268         <span class="keywordflow">return</span> filePtr-&gt;<a class="code" href="classFile.html#a9">file_read</a>(<span class="keyword">this</span>, <span class="keyword">sizeof</span>(<a class="code" href="classConfig.html">Config</a>));
00269     <span class="keywordflow">else</span> {
00270         <a class="code" href="classConfig.html#a4">default_game_setting</a>();
00271         <span class="keywordflow">return</span> 1;
00272     }
00273 }
00274 
00275 <span class="comment">//--------- End of function Config::write_file ---------------//</span>
00276 
00277 <span class="comment">//--------- Begin of function Info::write_file ---------------//</span>
<a name="l00278"></a><a class="code" href="classInfo.html#a5">00278</a> <span class="keywordtype">int</span> <a class="code" href="classInfo.html#a5">Info::write_file</a>(<a class="code" href="classFile.html">File</a>* filePtr) {
00279 
00280     <a class="code" href="classInfo.html#m15">random_seed_4_save</a> = m.random_seed;             <span class="comment">//## chea 210899 to save the random seed before save</span>
00281 
00282     <span class="keywordtype">int</span> writeSize = (<span class="keywordtype">char</span>*)(&amp;last_write_offset) - (<span class="keywordtype">char</span>*)(this);
00283 
00284     <span class="comment">//---------- write the info data -----------//</span>
00285 
00286     <span class="keywordflow">return</span> filePtr-&gt;<a class="code" href="classFile.html#a10">file_write</a>( <span class="keyword">this</span>, writeSize );
00287 }
00288 
<a name="l00289"></a><a class="code" href="classInfo.html#a6">00289</a> <span class="keywordtype">int</span> <a class="code" href="classInfo.html#a6">Info::read_file</a>(<a class="code" href="classFile.html">File</a>* filePtr) {
00290     <span class="keywordtype">int</span> readSize = (<span class="keywordtype">char</span>*)(&amp;last_write_offset) - (<span class="keywordtype">char</span>*)(this);
00291 
00292     <span class="comment">//------- read the info data ----------//</span>
00293 
00294     <span class="keywordflow">return</span> filePtr-&gt;<a class="code" href="classFile.html#a9">file_read</a>( <span class="keyword">this</span>, readSize );
00295 }
00296 
00297 <span class="comment">//--------- End of function Info::write_file ---------------//</span>
00298 
00299 <span class="comment">//--------- Begin of function Info::write_file ---------------//</span>
<a name="l00300"></a><a class="code" href="classGame.html#a4">00300</a> <span class="keywordtype">int</span> <a class="code" href="classGame.html#a4">Game::write_file</a>(<a class="code" href="classFile.html">File</a>* filePtr) {
00301     <span class="keywordflow">return</span> filePtr-&gt;<a class="code" href="classFile.html#a10">file_write</a>( <span class="keyword">this</span>, <span class="keyword">sizeof</span>(<a class="code" href="classGame.html">Game</a>) );
00302 }
00303 
<a name="l00304"></a><a class="code" href="classGame.html#a5">00304</a> <span class="keywordtype">int</span> <a class="code" href="classGame.html#a5">Game::read_file</a>(<a class="code" href="classFile.html">File</a>* filePtr) {
00305     <span class="keywordflow">return</span> filePtr-&gt;<a class="code" href="classFile.html#a9">file_read</a>( <span class="keyword">this</span>, <span class="keyword">sizeof</span>(<a class="code" href="classGame.html">Game</a>) );
00306 }
00307 
00308 <span class="comment">//--------- End of function Info::write_file ---------------//</span>
00309 
00310 <span class="comment">//--------- Begin of function Finance::write_file ---------------//</span>
<a name="l00311"></a><a class="code" href="classFinance.html#a4">00311</a> <span class="keywordtype">int</span> <a class="code" href="classFinance.html#a4">Finance::write_file</a>(<a class="code" href="classFile.html">File</a>* filePtr) {
00312     <span class="keywordflow">return</span> filePtr-&gt;<a class="code" href="classFile.html#a10">file_write</a>( <span class="keyword">this</span>, <span class="keyword">sizeof</span>(<a class="code" href="classFinance.html">Finance</a>) );
00313 }
00314 
<a name="l00315"></a><a class="code" href="classFinance.html#a5">00315</a> <span class="keywordtype">int</span> <a class="code" href="classFinance.html#a5">Finance::read_file</a>(<a class="code" href="classFile.html">File</a>* filePtr) {
00316     <span class="keywordflow">return</span> filePtr-&gt;<a class="code" href="classFile.html#a9">file_read</a>( <span class="keyword">this</span>, <span class="keyword">sizeof</span>(<a class="code" href="classFinance.html">Finance</a>) );
00317 }
00318 
00319 <span class="comment">//--------- End of function Finance::write_file ---------------//</span>
00320 
00321 <span class="comment">//--------- Begin of function PlayerSchool::write_file ---------------//</span>
<a name="l00322"></a><a class="code" href="classPlayerSchool.html#a14">00322</a> <span class="keywordtype">int</span> <a class="code" href="classPlayerSchool.html#a14">PlayerSchool::write_file</a>(<a class="code" href="classFile.html">File</a>* filePtr) {
00323     <span class="keywordflow">return</span> filePtr-&gt;<a class="code" href="classFile.html#a10">file_write</a>( <span class="keyword">this</span>, <span class="keyword">sizeof</span>(<a class="code" href="classPlayerSchool.html">PlayerSchool</a>) );
00324 }
00325 
<a name="l00326"></a><a class="code" href="classPlayerSchool.html#a15">00326</a> <span class="keywordtype">int</span> <a class="code" href="classPlayerSchool.html#a15">PlayerSchool::read_file</a>(<a class="code" href="classFile.html">File</a>* filePtr) {
00327     <span class="keywordflow">return</span> filePtr-&gt;<a class="code" href="classFile.html#a9">file_read</a>( <span class="keyword">this</span>, <span class="keyword">sizeof</span>(<a class="code" href="classPlayerSchool.html">PlayerSchool</a>) );
00328 }
00329 
00330 <span class="comment">//--------- End of function PlayerSchool::write_file ---------------//</span>
00331 
00332 <span class="comment">//=================================================================================//</span>
00333 <span class="comment">//============================ section 3/3 ========================================//</span>
00334 <span class="comment">//=================================================================================//</span>
00335 
00336 <span class="comment">//--------- Begin of function NewsArray::write_file ---------------//</span>
<a name="l00337"></a><a class="code" href="classNewsArray.html#a3">00337</a> <span class="keywordtype">int</span> <a class="code" href="classNewsArray.html#a3">NewsArray::write_file</a>(<a class="code" href="classFile.html">File</a>* filePtr) {
00338     <span class="comment">//------ write info in NewsArray ------//</span>
00339 
00340     <span class="keywordflow">if</span>( !filePtr-&gt;<a class="code" href="classFile.html#a10">file_write</a>( (<span class="keywordtype">char</span>*) <span class="keyword">this</span> + <span class="keyword">sizeof</span>(<a class="code" href="classDynArray.html">DynArray</a>), <span class="keyword">sizeof</span>(<a class="code" href="classNewsArray.html">NewsArray</a>)-<span class="keyword">sizeof</span>(<a class="code" href="classDynArray.html">DynArray</a>) ) )
00341         <span class="keywordflow">return</span> 0;
00342 
00343     <span class="keywordflow">return</span> <a class="code" href="classDynArray.html#a39">DynArray::write_file</a>( filePtr );
00344 }
00345 
<a name="l00346"></a><a class="code" href="classNewsArray.html#a4">00346</a> <span class="keywordtype">int</span> <a class="code" href="classNewsArray.html#a4">NewsArray::read_file</a>(<a class="code" href="classFile.html">File</a>* filePtr) {
00347     <span class="keywordflow">if</span>( !filePtr-&gt;<a class="code" href="classFile.html#a9">file_read</a>( (<span class="keywordtype">char</span>*) <span class="keyword">this</span> + <span class="keyword">sizeof</span>(<a class="code" href="classDynArray.html">DynArray</a>), <span class="keyword">sizeof</span>(<a class="code" href="classNewsArray.html">NewsArray</a>)-<span class="keyword">sizeof</span>(<a class="code" href="classDynArray.html">DynArray</a>) ) )
00348         <span class="keywordflow">return</span> 0;
00349 
00350     <span class="keywordflow">return</span> <a class="code" href="classDynArray.html#a40">DynArray::read_file</a>( filePtr );
00351 }
00352 
00353 <span class="comment">//--------- End of function NewsArray::write_file ---------------//</span>
00354 
00355 <span class="comment">//--------- Begin of function TaskArray::write_file ---------------//</span>
<a name="l00356"></a><a class="code" href="classTaskArray.html#a3">00356</a> <span class="keywordtype">int</span> <a class="code" href="classTaskArray.html#a3">TaskArray::write_file</a>(<a class="code" href="classFile.html">File</a>* filePtr) {
00357     <span class="keywordflow">if</span>( !filePtr-&gt;<a class="code" href="classFile.html#a10">file_write</a>( (<span class="keywordtype">char</span>*) <span class="keyword">this</span> + <span class="keyword">sizeof</span>(<a class="code" href="classDynArray.html">DynArray</a>), <span class="keyword">sizeof</span>(<a class="code" href="classTaskArray.html">TaskArray</a>)-<span class="keyword">sizeof</span>(<a class="code" href="classDynArray.html">DynArray</a>) ) )
00358         <span class="keywordflow">return</span> 0;
00359 
00360     <span class="keywordflow">return</span> <a class="code" href="classDynArray.html#a39">DynArray::write_file</a>( filePtr );
00361 }
00362 
<a name="l00363"></a><a class="code" href="classTaskArray.html#a4">00363</a> <span class="keywordtype">int</span> <a class="code" href="classTaskArray.html#a4">TaskArray::read_file</a>(<a class="code" href="classFile.html">File</a>* filePtr) {
00364     <span class="keywordflow">if</span>( !filePtr-&gt;<a class="code" href="classFile.html#a9">file_read</a>( (<span class="keywordtype">char</span>*) <span class="keyword">this</span> + <span class="keyword">sizeof</span>(<a class="code" href="classDynArray.html">DynArray</a>), <span class="keyword">sizeof</span>(<a class="code" href="classTaskArray.html">TaskArray</a>)-<span class="keyword">sizeof</span>(<a class="code" href="classDynArray.html">DynArray</a>) ) )
00365         <span class="keywordflow">return</span> 0;
00366 
00367     <span class="keywordflow">return</span> <a class="code" href="classDynArray.html#a40">DynArray::read_file</a>( filePtr );
00368 }
00369 
00370 <span class="comment">//--------- End of function TaskArray::write_file ---------------//</span>
00371 
00372 <span class="comment">//--------- Begin of function ChanceEvent::write_file ---------------//</span>
<a name="l00373"></a><a class="code" href="classChanceEvent.html#a2">00373</a> <span class="keywordtype">int</span> <a class="code" href="classChanceEvent.html#a2">ChanceEvent::write_file</a>(<a class="code" href="classFile.html">File</a>* filePtr) {
00374     <span class="keywordflow">return</span> filePtr-&gt;<a class="code" href="classFile.html#a10">file_write</a>(<span class="keyword">this</span>, <span class="keyword">sizeof</span>(<a class="code" href="classChanceEvent.html">ChanceEvent</a>));
00375 }
00376 
<a name="l00377"></a><a class="code" href="classChanceEvent.html#a3">00377</a> <span class="keywordtype">int</span> <a class="code" href="classChanceEvent.html#a3">ChanceEvent::read_file</a>(<a class="code" href="classFile.html">File</a>* filePtr) {
00378     <span class="keywordflow">return</span> filePtr-&gt;<a class="code" href="classFile.html#a9">file_read</a>(<span class="keyword">this</span>, <span class="keyword">sizeof</span>(<a class="code" href="classChanceEvent.html">ChanceEvent</a>));
00379 }
00380 
00381 <span class="comment">//--------- End of function ChanceEvent::write_file ---------------//</span>
00382 
00383 <span class="comment">//--------- Begin of function Development::write_file ---------------//</span>
<a name="l00384"></a><a class="code" href="classDevelopment.html#a7">00384</a> <span class="keywordtype">int</span> <a class="code" href="classDevelopment.html#a7">Development::write_file</a>(<a class="code" href="classFile.html">File</a>* filePtr) {
00385     <span class="keywordflow">return</span> filePtr-&gt;<a class="code" href="classFile.html#a10">file_write</a>(<span class="keyword">this</span>, <span class="keyword">sizeof</span>(<a class="code" href="classDevelopment.html">Development</a>));
00386 }
00387 
<a name="l00388"></a><a class="code" href="classDevelopment.html#a8">00388</a> <span class="keywordtype">int</span> <a class="code" href="classDevelopment.html#a8">Development::read_file</a>(<a class="code" href="classFile.html">File</a>* filePtr) {
00389     <span class="keywordflow">return</span> filePtr-&gt;<a class="code" href="classFile.html#a9">file_read</a>(<span class="keyword">this</span>, <span class="keyword">sizeof</span>(<a class="code" href="classDevelopment.html">Development</a>));
00390 }
00391 
00392 <span class="comment">//--------- End of function Development::write_file ---------------//</span>
00393 
00394 <span class="comment">//--------- Begin of function Athletics::write_file ---------------//</span>
<a name="l00395"></a><a class="code" href="classAthletics.html#a7">00395</a> <span class="keywordtype">int</span> <a class="code" href="classAthletics.html#a7">Athletics::write_file</a>(<a class="code" href="classFile.html">File</a>* filePtr) {
00396     <span class="keywordflow">return</span> filePtr-&gt;<a class="code" href="classFile.html#a10">file_write</a>(<span class="keyword">this</span>, <span class="keyword">sizeof</span>(<a class="code" href="classAthletics.html">Athletics</a>));
00397 }
00398 
<a name="l00399"></a><a class="code" href="classAthletics.html#a8">00399</a> <span class="keywordtype">int</span> <a class="code" href="classAthletics.html#a8">Athletics::read_file</a>(<a class="code" href="classFile.html">File</a>* filePtr) {
00400     <span class="keywordflow">return</span> filePtr-&gt;<a class="code" href="classFile.html#a9">file_read</a>(<span class="keyword">this</span>, <span class="keyword">sizeof</span>(<a class="code" href="classAthletics.html">Athletics</a>));
00401 }
00402 
00403 <span class="comment">//--------- End of function Athletics::write_file ---------------//</span>
00404 
00405 <span class="comment">//--------- Begin of function LibTech::write_file ---------------//</span>
<a name="l00406"></a><a class="code" href="classLibTech.html#a7">00406</a> <span class="keywordtype">int</span> <a class="code" href="classLibTech.html#a7">LibTech::write_file</a>(<a class="code" href="classFile.html">File</a>* filePtr) {
00407     <span class="keywordflow">return</span> filePtr-&gt;<a class="code" href="classFile.html#a10">file_write</a>(<span class="keyword">this</span>, <span class="keyword">sizeof</span>(<a class="code" href="classLibTech.html">LibTech</a>));
00408 }
00409 
<a name="l00410"></a><a class="code" href="classLibTech.html#a8">00410</a> <span class="keywordtype">int</span> <a class="code" href="classLibTech.html#a8">LibTech::read_file</a>(<a class="code" href="classFile.html">File</a>* filePtr) {
00411     <span class="keywordflow">return</span> filePtr-&gt;<a class="code" href="classFile.html#a9">file_read</a>(<span class="keyword">this</span>, <span class="keyword">sizeof</span>(<a class="code" href="classLibTech.html">LibTech</a>));
00412 }
00413 
00414 <span class="comment">//--------- End of function LibTech::write_file ---------------//</span>
00415 
00416 <span class="comment">//--------- Begin of function Facility::write_file ---------------//</span>
<a name="l00417"></a><a class="code" href="classFacility.html#a7">00417</a> <span class="keywordtype">int</span> <a class="code" href="classFacility.html#a7">Facility::write_file</a>(<a class="code" href="classFile.html">File</a>* filePtr) {
00418     <span class="keywordflow">return</span> filePtr-&gt;<a class="code" href="classFile.html#a10">file_write</a>(<span class="keyword">this</span>, <span class="keyword">sizeof</span>(<a class="code" href="classFacility.html">Facility</a>));
00419 }
00420 
<a name="l00421"></a><a class="code" href="classFacility.html#a8">00421</a> <span class="keywordtype">int</span> <a class="code" href="classFacility.html#a8">Facility::read_file</a>(<a class="code" href="classFile.html">File</a>* filePtr) {
00422     <span class="keywordflow">return</span> filePtr-&gt;<a class="code" href="classFile.html#a9">file_read</a>(<span class="keyword">this</span>, <span class="keyword">sizeof</span>(<a class="code" href="classFacility.html">Facility</a>));
00423 }
00424 
00425 <span class="comment">//--------- End of function Facility::write_file ---------------//</span>
00426 
00427 <span class="comment">//--------- Begin of function Facility::write_file ---------------//</span>
<a name="l00428"></a><a class="code" href="classInvestment.html#a7">00428</a> <span class="keywordtype">int</span> <a class="code" href="classInvestment.html#a7">Investment::write_file</a>(<a class="code" href="classFile.html">File</a>* filePtr) {
00429     <span class="keywordflow">return</span> filePtr-&gt;<a class="code" href="classFile.html#a10">file_write</a>(<span class="keyword">this</span>, <span class="keyword">sizeof</span>(<a class="code" href="classInvestment.html">Investment</a>));
00430 }
00431 
<a name="l00432"></a><a class="code" href="classInvestment.html#a8">00432</a> <span class="keywordtype">int</span> <a class="code" href="classInvestment.html#a8">Investment::read_file</a>(<a class="code" href="classFile.html">File</a>* filePtr) {
00433     <span class="keywordflow">return</span> filePtr-&gt;<a class="code" href="classFile.html#a9">file_read</a>(<span class="keyword">this</span>, <span class="keyword">sizeof</span>(<a class="code" href="classInvestment.html">Investment</a>));
00434 }
00435 
00436 <span class="comment">//--------- End of function Facility::write_file ---------------//</span>
00437 
00438 <span class="comment">//--------- Begin of function Facility::write_file ---------------//</span>
<a name="l00439"></a><a class="code" href="classStudentOffice.html#a2">00439</a> <span class="keywordtype">int</span> <a class="code" href="classStudentOffice.html#a2">StudentOffice::write_file</a>(<a class="code" href="classFile.html">File</a>* filePtr) {
00440     <span class="keywordflow">return</span> filePtr-&gt;<a class="code" href="classFile.html#a10">file_write</a>(<span class="keyword">this</span>, <span class="keyword">sizeof</span>(<a class="code" href="classStudentOffice.html">StudentOffice</a>));
00441 }
00442 
<a name="l00443"></a><a class="code" href="classStudentOffice.html#a3">00443</a> <span class="keywordtype">int</span> <a class="code" href="classStudentOffice.html#a3">StudentOffice::read_file</a>(<a class="code" href="classFile.html">File</a>* filePtr) {
00444     <span class="keywordflow">return</span> filePtr-&gt;<a class="code" href="classFile.html#a9">file_read</a>(<span class="keyword">this</span>, <span class="keyword">sizeof</span>(<a class="code" href="classStudentOffice.html">StudentOffice</a>));
00445 }
00446 
00447 <span class="comment">//--------- End of function Facility::write_file ---------------//</span>
</pre></div><hr><address style="align: right;"><small>Generated on Fri Aug 23 01:37:46 2002 for VirtualU by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.17 </small></address>
</body>
</html>
