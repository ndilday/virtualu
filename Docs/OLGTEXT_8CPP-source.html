<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>OLGTEXT.CPP Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.17 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>OLGTEXT.CPP</h1><a href="OLGTEXT_8CPP.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="preprocessor">#include &lt;<a class="code" href="ALL_8H.html">ALL.H</a>&gt;</span>
00002 <span class="preprocessor">#include &lt;OSYS.H&gt;</span>
00003 <span class="preprocessor">#include  &lt;OFONT.H&gt;</span>
00004 <span class="preprocessor">#include  &lt;<a class="code" href="OSTR_8H.html">OSTR.H</a>&gt;</span>
00005 <span class="preprocessor">#include &lt;OLgTEXT.H&gt;</span>
00006 
00007 <span class="comment">//-------- Begin of function LargeText::LargeText ----//</span>
<a name="l00009"></a><a class="code" href="classLargeText.html#a0">00009</a> <span class="comment">LargeText::LargeText() {</span>
00010     text_refresh_bitmap = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00011     init_flag = 0;
00012     pointer_flag=NIL;
00013     <a class="code" href="classString.html">String</a> disp_string;
00014 }
00015 
00016 <span class="comment">//---------- End of function LargeText::LargeText ----//</span>
00017 
00018 <span class="comment">//-------- Begin of function LargeText::~LargeText ---//</span>
<a name="l00020"></a><a class="code" href="classLargeText.html#a1">00020</a> <span class="comment">LargeText::~LargeText() {</span>
00021     deinit();
00022 }
00023 
00024 <span class="comment">//---------- End of function LargeText::~LargeText ---//</span>
00025 
00026 <span class="comment">//-------- Begin of function LargeText::deinit ------------//</span>
<a name="l00028"></a><a class="code" href="classLargeText.html#a26">00028</a> <span class="comment">void LargeText::deinit() {</span>
00029 
00030     <span class="keywordflow">if</span> (text_refresh_bitmap) {
00031         <a class="code" href="ALL_8H.html#a8">mem_del</a>(text_refresh_bitmap);
00032         text_refresh_bitmap = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00033     }
00034 
00035     init_flag = 0;
00036 }
00037 
00038 <span class="comment">//------------- End of function LargeText::deinit ---------//</span>
00039 
<a name="l00040"></a><a class="code" href="classLargeText.html#a2">00040</a> <span class="keywordtype">void</span> <a class="code" href="classLargeText.html#a2">LargeText::init</a>(<span class="keywordtype">int</span> x,<span class="keywordtype">int</span> y,<span class="keywordtype">char</span>* str) {
00041     <a class="code" href="classLargeText.html#m4">text_x1</a>=x;
00042     <a class="code" href="classLargeText.html#m5">text_y1</a>=y;
00043 
00044     <a class="code" href="classLargeText.html#m6">pointer_flag</a>=CHAR_TYPE;
00045     <a class="code" href="classLargeText.html#m7">char_data_ptr</a>=str;
00046 
00047     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;str[i]!=0;i++);
00048     disp_string=<a class="code" href="ALL_8H.html#a5">mem_add</a>(<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>)*i);
00049     <a class="code" href="classLargeText.html#m14">font_type</a>=&amp;font_charts;
00050 }
00051 
<a name="l00052"></a><a class="code" href="classLargeText.html#a3">00052</a> <span class="keywordtype">void</span> <a class="code" href="classLargeText.html#a2">LargeText::init</a>(<span class="keywordtype">int</span> x,<span class="keywordtype">int</span> y,<span class="keywordtype">int</span>* valptr,<span class="keywordtype">int</span> fmt) {
00053     <a class="code" href="classLargeText.html#m4">text_x1</a>=x;
00054     <a class="code" href="classLargeText.html#m5">text_y1</a>=y;
00055 
00056     <a class="code" href="classLargeText.html#m6">pointer_flag</a>=INT_TYPE;
00057     <a class="code" href="classLargeText.html#m8">int_data_ptr</a>=valptr;
00058     <a class="code" href="classLargeText.html#m12">data_fmt</a>=fmt;
00059 
00060     disp_string=m.format(*valptr,fmt);
00061 
00062     <span class="keywordflow">if</span>(*valptr&gt;=0)
00063         <a class="code" href="classLargeText.html#m14">font_type</a>=&amp;font_charts;
00064     <span class="keywordflow">else</span>
00065         <a class="code" href="classLargeText.html#m14">font_type</a>=&amp;font_charts;
00066 }
00067 
<a name="l00068"></a><a class="code" href="classLargeText.html#a6">00068</a> <span class="keywordtype">void</span> <a class="code" href="classLargeText.html#a2">LargeText::init</a>(<span class="keywordtype">int</span> x,<span class="keywordtype">int</span> y,<span class="keywordtype">long</span> val,<span class="keywordtype">int</span> fmt) {
00069     <a class="code" href="classLargeText.html#m4">text_x1</a>=x;
00070     <a class="code" href="classLargeText.html#m5">text_y1</a>=y;
00071 
00072     disp_string=m.format(val,fmt);
00073 
00074     <span class="keywordflow">if</span>(val&gt;=0)
00075         <a class="code" href="classLargeText.html#m14">font_type</a>=&amp;font_charts;
00076     <span class="keywordflow">else</span>
00077         <a class="code" href="classLargeText.html#m14">font_type</a>=&amp;font_charts;
00078 }
00079 
<a name="l00080"></a><a class="code" href="classLargeText.html#a5">00080</a> <span class="keywordtype">void</span> <a class="code" href="classLargeText.html#a2">LargeText::init</a>(<span class="keywordtype">int</span> x,<span class="keywordtype">int</span> y,<span class="keywordtype">long</span>* valptr,<span class="keywordtype">int</span> fmt) {
00081     <a class="code" href="classLargeText.html#m4">text_x1</a>=x;
00082     <a class="code" href="classLargeText.html#m5">text_y1</a>=y;
00083 
00084     <a class="code" href="classLargeText.html#m6">pointer_flag</a>=LONG_TYPE;
00085     <a class="code" href="classLargeText.html#m9">long_data_ptr</a>=valptr;
00086     <a class="code" href="classLargeText.html#m12">data_fmt</a>=fmt;
00087     disp_string=m.format(*valptr,fmt);
00088 
00089     <span class="keywordflow">if</span>(*valptr&gt;=0)
00090         <a class="code" href="classLargeText.html#m14">font_type</a>=&amp;font_charts;
00091     <span class="keywordflow">else</span>
00092         <a class="code" href="classLargeText.html#m14">font_type</a>=&amp;font_charts;
00093 }
00094 
<a name="l00095"></a><a class="code" href="classLargeText.html#a4">00095</a> <span class="keywordtype">void</span> <a class="code" href="classLargeText.html#a2">LargeText::init</a>(<span class="keywordtype">int</span> x,<span class="keywordtype">int</span> y,<span class="keywordtype">int</span> val,<span class="keywordtype">int</span> fmt) {
00096     <a class="code" href="classLargeText.html#m4">text_x1</a>=x;
00097     <a class="code" href="classLargeText.html#m5">text_y1</a>=y;
00098 
00099     disp_string=m.format(val,fmt);
00100 
00101     <span class="keywordflow">if</span>(val&gt;=0)
00102         <a class="code" href="classLargeText.html#m14">font_type</a>=&amp;font_charts;
00103     <span class="keywordflow">else</span>
00104         <a class="code" href="classLargeText.html#m14">font_type</a>=&amp;font_charts;
00105 }
00106 
<a name="l00107"></a><a class="code" href="classLargeText.html#a7">00107</a> <span class="keywordtype">void</span> <a class="code" href="classLargeText.html#a2">LargeText::init</a>(<span class="keywordtype">int</span> x,<span class="keywordtype">int</span> y,<span class="keywordtype">float</span>* valptr,<span class="keywordtype">int</span> fmt) {
00108     <a class="code" href="classLargeText.html#m4">text_x1</a>=x;
00109     <a class="code" href="classLargeText.html#m5">text_y1</a>=y;
00110 
00111     <a class="code" href="classLargeText.html#m6">pointer_flag</a>=FLOAT_TYPE;
00112     <a class="code" href="classLargeText.html#m10">float_data_ptr</a>=valptr;
00113     <a class="code" href="classLargeText.html#m12">data_fmt</a>=fmt;
00114 
00115     disp_string=m.format(*valptr,fmt);
00116 
00117     <span class="keywordflow">if</span>(*valptr&gt;=0)
00118         <a class="code" href="classLargeText.html#m14">font_type</a>=&amp;font_charts;
00119     <span class="keywordflow">else</span>
00120         <a class="code" href="classLargeText.html#m14">font_type</a>=&amp;font_charts;
00121 }
00122 
<a name="l00123"></a><a class="code" href="classLargeText.html#a8">00123</a> <span class="keywordtype">void</span> <a class="code" href="classLargeText.html#a2">LargeText::init</a>(<span class="keywordtype">int</span> x,<span class="keywordtype">int</span> y,<span class="keywordtype">float</span> val,<span class="keywordtype">int</span> fmt) {
00124     <a class="code" href="classLargeText.html#m4">text_x1</a>=x;
00125     <a class="code" href="classLargeText.html#m5">text_y1</a>=y;
00126 
00127     disp_string=m.format(val,fmt);
00128 
00129     <span class="keywordflow">if</span>(val&gt;=0)
00130         <a class="code" href="classLargeText.html#m14">font_type</a>=&amp;font_charts;
00131     <span class="keywordflow">else</span>
00132         <a class="code" href="classLargeText.html#m14">font_type</a>=&amp;font_charts;
00133 }
00134 
<a name="l00135"></a><a class="code" href="classLargeText.html#a9">00135</a> <span class="keywordtype">void</span> <a class="code" href="classLargeText.html#a2">LargeText::init</a>(<span class="keywordtype">int</span> x,<span class="keywordtype">int</span> y,<span class="keywordtype">double</span>* valptr,<span class="keywordtype">int</span> fmt) {
00136     <a class="code" href="classLargeText.html#m4">text_x1</a>=x;
00137     <a class="code" href="classLargeText.html#m5">text_y1</a>=y;
00138 
00139     <a class="code" href="classLargeText.html#m6">pointer_flag</a>=DOUBLE_TYPE;
00140     <a class="code" href="classLargeText.html#m11">double_data_ptr</a>=valptr;
00141     <a class="code" href="classLargeText.html#m12">data_fmt</a>=fmt;
00142 
00143     disp_string=m.format(*valptr,fmt);
00144     <span class="keywordflow">if</span>(*valptr&gt;=0)
00145         <a class="code" href="classLargeText.html#m14">font_type</a>=&amp;font_charts;
00146     <span class="keywordflow">else</span>
00147         <a class="code" href="classLargeText.html#m14">font_type</a>=&amp;font_charts;
00148 }
00149 
<a name="l00150"></a><a class="code" href="classLargeText.html#a10">00150</a> <span class="keywordtype">void</span> <a class="code" href="classLargeText.html#a2">LargeText::init</a>(<span class="keywordtype">int</span> x,<span class="keywordtype">int</span> y,<span class="keywordtype">double</span> val,<span class="keywordtype">int</span> fmt) {
00151     <a class="code" href="classLargeText.html#m4">text_x1</a>=x;
00152     <a class="code" href="classLargeText.html#m4">text_x1</a>=y;
00153 
00154     disp_string=m.format(val,fmt);
00155 
00156     <span class="keywordflow">if</span>(val&gt;=0)
00157         <a class="code" href="classLargeText.html#m14">font_type</a>=&amp;font_charts;
00158     <span class="keywordflow">else</span>
00159         <a class="code" href="classLargeText.html#m14">font_type</a>=&amp;font_charts;
00160 }
00161 
<a name="l00162"></a><a class="code" href="classLargeText.html#a24">00162</a> <span class="keywordtype">void</span> <a class="code" href="classLargeText.html#a24">LargeText::paint</a>() {
00163     <span class="keywordflow">if</span>(<a class="code" href="classLargeText.html#m0">init_flag</a> != 1) {
00164         <span class="keywordflow">if</span>(text_refresh_bitmap)<a class="code" href="classLargeText.html#a26">deinit</a>();
00165         <span class="keywordtype">int</span> text_space=50;
00166         <span class="keywordflow">if</span> (<a class="code" href="classLargeText.html#m14">font_type</a>-&gt;<a class="code" href="classFont.html#a8">text_width</a>(disp_string)&gt;text_space)
00167             text_space=<a class="code" href="classLargeText.html#m14">font_type</a>-&gt;<a class="code" href="classFont.html#a8">text_width</a>(disp_string);
00168         <span class="comment">//              (font_type-&gt;max_font_width)*disp_string.len()</span>
00169         <a class="code" href="classLargeText.html#m3">text_refresh_bitmap</a> = vga_back.save_area(
00170             <a class="code" href="classLargeText.html#m4">text_x1</a>-((<a class="code" href="classLargeText.html#m2">right_flag</a>==1)?text_space:0),
00171             <a class="code" href="classLargeText.html#m5">text_y1</a>,
00172             <a class="code" href="classLargeText.html#m4">text_x1</a>+((<a class="code" href="classLargeText.html#m2">right_flag</a>==1)?0:text_space),
00173             <a class="code" href="classLargeText.html#m5">text_y1</a>+<a class="code" href="classLargeText.html#m14">font_type</a>-&gt;<a class="code" href="classFont.html#a4">height</a>()+3,
00174             <a class="code" href="classLargeText.html#m3">text_refresh_bitmap</a>);
00175         <a class="code" href="classLargeText.html#m0">init_flag</a> = 1;
00176     }
00177     <a class="code" href="classLargeText.html#a25">refresh</a>();
00178 }
00179 
<a name="l00180"></a><a class="code" href="classLargeText.html#a25">00180</a> <span class="keywordtype">void</span> <a class="code" href="classLargeText.html#a25">LargeText::refresh</a>() {
00181     <span class="keywordflow">if</span>(<a class="code" href="classLargeText.html#m0">init_flag</a> == 0)<span class="keywordflow">return</span>;
00182 
00183     <span class="comment">// update disp_string</span>
00184 
00185     <span class="keywordflow">if</span>(<a class="code" href="classLargeText.html#m6">pointer_flag</a>==CHAR_TYPE)
00186         disp_string=m.format(*<a class="code" href="classLargeText.html#m7">char_data_ptr</a>,<a class="code" href="classLargeText.html#m12">data_fmt</a>);
00187 
00188     <span class="keywordflow">if</span>(<a class="code" href="classLargeText.html#m6">pointer_flag</a>==INT_TYPE) {
00189         disp_string=m.format(*<a class="code" href="classLargeText.html#m8">int_data_ptr</a>,<a class="code" href="classLargeText.html#m12">data_fmt</a>);
00190         <span class="keywordflow">if</span>(*<a class="code" href="classLargeText.html#m8">int_data_ptr</a>&gt;=0)
00191             <a class="code" href="classLargeText.html#m14">font_type</a>=&amp;font_charts;
00192         <span class="keywordflow">else</span>
00193             <a class="code" href="classLargeText.html#m14">font_type</a>=&amp;font_charts;
00194     }
00195 
00196     <span class="keywordflow">if</span>(<a class="code" href="classLargeText.html#m6">pointer_flag</a>==LONG_TYPE) {
00197         disp_string=m.format(*<a class="code" href="classLargeText.html#m9">long_data_ptr</a>,<a class="code" href="classLargeText.html#m12">data_fmt</a>);
00198         <span class="keywordflow">if</span>(*<a class="code" href="classLargeText.html#m9">long_data_ptr</a>&gt;=0)
00199             <a class="code" href="classLargeText.html#m14">font_type</a>=&amp;font_charts;
00200         <span class="keywordflow">else</span>
00201             <a class="code" href="classLargeText.html#m14">font_type</a>=&amp;font_charts;
00202     }
00203 
00204     <span class="keywordflow">if</span>(<a class="code" href="classLargeText.html#m6">pointer_flag</a>==FLOAT_TYPE) {
00205         disp_string=m.format(*<a class="code" href="classLargeText.html#m10">float_data_ptr</a>,<a class="code" href="classLargeText.html#m12">data_fmt</a>);
00206         <span class="keywordflow">if</span>(*<a class="code" href="classLargeText.html#m10">float_data_ptr</a>&gt;=0)
00207             <a class="code" href="classLargeText.html#m14">font_type</a>=&amp;font_charts;
00208         <span class="keywordflow">else</span>
00209             <a class="code" href="classLargeText.html#m14">font_type</a>=&amp;font_charts;
00210     }
00211 
00212     <span class="keywordflow">if</span>(<a class="code" href="classLargeText.html#m6">pointer_flag</a>==DOUBLE_TYPE) {
00213         disp_string=m.format(*<a class="code" href="classLargeText.html#m11">double_data_ptr</a>,<a class="code" href="classLargeText.html#m12">data_fmt</a>);
00214         <span class="keywordflow">if</span>(*<a class="code" href="classLargeText.html#m11">double_data_ptr</a>&gt;=0)
00215             <a class="code" href="classLargeText.html#m14">font_type</a>=&amp;font_charts;
00216         <span class="keywordflow">else</span>
00217             <a class="code" href="classLargeText.html#m14">font_type</a>=&amp;font_charts;
00218     }
00219 
00220     vga_back.rest_area(<a class="code" href="classLargeText.html#m3">text_refresh_bitmap</a>,0,0);
00221     <span class="keywordflow">if</span>(right_flag)
00222         <a class="code" href="classLargeText.html#m14">font_type</a>-&gt;<a class="code" href="classFont.html#a13">right_put</a>(<a class="code" href="classLargeText.html#m4">text_x1</a>,<a class="code" href="classLargeText.html#m5">text_y1</a>,disp_string);
00223     <span class="keywordflow">else</span>
00224         <a class="code" href="classLargeText.html#m14">font_type</a>-&gt;<a class="code" href="classFont.html#a10">put</a>(<a class="code" href="classLargeText.html#m4">text_x1</a>,<a class="code" href="classLargeText.html#m5">text_y1</a>,disp_string);
00225 }
</pre></div><hr><address style="align: right;"><small>Generated on Fri Aug 23 01:38:01 2002 for VirtualU by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.17 </small></address>
</body>
</html>
