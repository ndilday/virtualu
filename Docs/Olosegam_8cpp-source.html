<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Olosegam.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.17 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>Olosegam.cpp</h1><a href="Olosegam_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="preprocessor">#include &lt;OSYS.H&gt;</span>
00002 <span class="preprocessor">#include &lt;OCONFIG.H&gt;</span>
00003 <span class="preprocessor">#include &lt;OPSCHOOL.H&gt;</span>
00004 <span class="preprocessor">#include &lt;OLOSEGAM.H&gt;</span>
00005 <span class="preprocessor">#include &lt;<a class="code" href="OGAMESET_8H.html">OGAMESET.H</a>&gt;</span>
00006 <span class="preprocessor">#include &lt;OWORLDMT.H&gt;</span>
00007 <span class="preprocessor">#include &lt;<a class="code" href="OVGA_8H.html">OVGA.H</a>&gt;</span>
00008 <span class="preprocessor">#include &lt;<a class="code" href="COLOR_8H.html">COLOR.H</a>&gt;</span>
00009 <span class="preprocessor">#include &lt;OFONT.H&gt;</span>
00010 <span class="preprocessor">#include &lt;OGAMESTR.H&gt;</span>
00011 <span class="preprocessor">#include &lt;OMOUSE.H&gt;</span>
00012 <span class="preprocessor">#include &lt;<a class="code" href="OMOUSE2_8H.html">OMOUSE2.H</a>&gt;</span>
00013 <span class="preprocessor">#include &lt;OIFACE.H&gt;</span>
00014 <span class="preprocessor">#include &lt;OINFO.H&gt;</span>
00015 <span class="preprocessor">#include &lt;OBUTTON.H&gt;</span>
00016 
00017 <span class="keyword">enum</span> {                                            <span class="comment">// screen coordinates</span>
00018     <a class="code" href="Olosegam_8cpp.html#a11a1">REPORT_X1</a> = <a class="code" href="Oworldmt_8h.html#a12">ZOOM_X1</a>+15,
00019     <a class="code" href="Olosegam_8cpp.html#a11a2">REPORT_Y1</a> = <a class="code" href="Oworldmt_8h.html#a13">ZOOM_Y1</a>+25,
00020     <a class="code" href="Olosegam_8cpp.html#a11a3">REPORT_X2</a> = <a class="code" href="Oworldmt_8h.html#a14">ZOOM_X2</a>-15,
00021     <a class="code" href="Olosegam_8cpp.html#a11a4">REPORT_Y2</a> = <a class="code" href="Oworldmt_8h.html#a15">ZOOM_Y2</a>-55
00022 };
00023 
00024 <span class="keyword">enum</span> {
00025     <a class="code" href="Olosegam_8cpp.html#a12a5">BUTTON_X0</a> = <a class="code" href="Olosegam_8cpp.html#a11a1">REPORT_X1</a>+100,
00026     <a class="code" href="Olosegam_8cpp.html#a12a6">BOTTOM_Y1</a> = <a class="code" href="Olosegam_8cpp.html#a11a4">REPORT_Y2</a>+25,
00027 };
00028 
00029 <span class="keyword">enum</span> {
00030     <a class="code" href="Olosegam_8cpp.html#a13a7">BOTTOM_BUTTON_WIDTH</a> = 80,
00031     <a class="code" href="Olosegam_8cpp.html#a13a8">BOTTOM_BUTTON_HEIGHT</a> = 25,
00032     <a class="code" href="Olosegam_8cpp.html#a13a9">BOTTOM_BUTTON_DISTANCE</a> = 10,
00033 };
00034 
00035 <span class="keyword">enum</span> {                                            <span class="comment">// the bg image id</span>
00036     <a class="code" href="Olosegam_8cpp.html#a14a10">BG_PIC_ID</a> = 17
00037 };
00038 
00039 <span class="keyword">static</span> <span class="keywordtype">char</span> lose_game_report_init_flag;
00040 <span class="comment">//------- Begin of function LoseGameReport::LoseGameReport -----------//</span>
<a name="l00042"></a><a class="code" href="classLoseGameReport.html#a0">00042</a> <span class="comment">LoseGameReport::LoseGameReport() {</span>
00043     init();
00044 }
00045 
00046 <span class="comment">//--------- End of function LoseGameReport::LoseGameReport -----------//</span>
00047 
00048 <span class="comment">//------- Begin of function LoseGameReport::~LoseGameReport -----------//</span>
<a name="l00050"></a><a class="code" href="classLoseGameReport.html#a1">00050</a> <span class="comment">LoseGameReport::~LoseGameReport() {</span>
00051     deinit();
00052 }
00053 
00054 <span class="comment">//--------- End of function LoseGameReport::~LoseGameReport -----------//</span>
00055 
00056 <span class="comment">//------- Begin of function LoseGameReport::deinit ---------------//</span>
<a name="l00058"></a><a class="code" href="classLoseGameReport.html#a3">00058</a> <span class="comment">void LoseGameReport::deinit() {</span>
00059     lose_game_report_init_flag = 0;
00060 }
00061 
00062 <span class="comment">//--------- End of function LoseGameReport::deinit ---------------//</span>
00063 
00064 <span class="comment">//------- Begin of function LoseGameReport::init -----------------//</span>
<a name="l00066"></a><a class="code" href="classLoseGameReport.html#a2">00066</a> <span class="comment">void LoseGameReport::init() {</span>
00067     lose_game_report_init_flag = 0;
00068 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00069 <span class="preprocessor"></span>    lose_reason_id = LOSE_REASON_TIME_UP;
00070     reason_para0 = 0;
00071     reason_para1 = 0;
00072     reason_para2 = 0;
00073     reason_para3 = 0;
00074     reason_para4 = 0;
00075 <span class="preprocessor">#endif</span>
00076 <span class="preprocessor"></span>}
00077 
00078 <span class="comment">//--------- End of function LoseGameReport::init -----------------//</span>
00079 
00080 <span class="comment">//---------- Begin of function LoseGameReport::eval_letter_report ------------//</span>
<a name="l00082"></a><a class="code" href="classLoseGameReport.html#a4">00082</a> <span class="comment">void LoseGameReport::lose_game_report(int refreshFlag) {</span>
00083     <span class="keywordtype">int</span> tab1=<a class="code" href="Olosegam_8cpp.html#a11a1">REPORT_X1</a>+317;
00084     <span class="keywordtype">int</span> vtab1=<a class="code" href="Olosegam_8cpp.html#a11a2">REPORT_Y1</a>+135;
00085     vga.use_back();
00086 
00087     sys.is_institution_report=1;
00088     <span class="keywordflow">if</span> (refreshFlag == <a class="code" href="Gamedef_8h.html#a71a16">INFO_REPAINT</a>) {
00089         <span class="keywordflow">if</span>(lose_game_report_init_flag )
00090             deinit();
00091 
00092         <span class="comment">//------------- paint the background ----------------//</span>
00093         <span class="keywordflow">if</span> (!lose_game_report_init_flag) {
00094             user_interface.bg_img(<a class="code" href="Olosegam_8cpp.html#a14a10">BG_PIC_ID</a>, &amp;vga_back);
00095             info.disp_column_bitmap(&amp;vga_back);
00096             lose_game_report_init_flag=1;
00097             <span class="comment">// BUGHERE ## chwg030299</span>
00098 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00099 <span class="preprocessor"></span>            <span class="keywordflow">switch</span>( lose_reason_id ) {
00100             <span class="keywordflow">case</span> LOSE_REASON_PROTAGONIST:
00101                 font_letter.put_paragraph( tab1+6, vtab1+6, tab1+184, vtab1+120,
00102                                            get_reason_str_protagonist() );       <span class="comment">// get_reason_str_protagonist() defined in OPSCH_PO.CPP</span>
00103                 <span class="keywordflow">break</span>;
00104 
00105             <span class="keywordflow">case</span> LOSE_REASON_UNACCEPTABLE:
00106                 font_letter.put_paragraph( tab1+6, vtab1+6, tab1+184, vtab1+120, <span class="stringliteral">"You're fired!"</span> );
00107                 <span class="keywordflow">break</span>;
00108 
00109             <span class="keywordflow">case</span> LOSE_REASON_TIME_UP:                 <span class="comment">// fall through</span>
00110             <span class="keywordflow">default</span>:
00111                 image_interface.put_back( tab1,vtab1,<span class="stringliteral">"LOSETXT2"</span> );
00112             }
00113 <span class="preprocessor">#else</span>
00114 <span class="preprocessor"></span>            <span class="keywordtype">int</span> lose=4;
00115             <span class="comment">//3-player_school.plaque_granted[0]-player_school.plaque_granted[1]-player_school.plaque_granted[2];</span>
00116             <span class="keywordflow">if</span>(lose&gt;1)
00117                 image_interface.put_back( tab1,vtab1,<span class="stringliteral">"LOSETXT2"</span> );
00118             <span class="keywordflow">else</span>
00119                 image_interface.put_back( tab1,vtab1,<span class="stringliteral">"LOSETXT1"</span> );
00120 <span class="preprocessor">#endif</span>
00121 <span class="preprocessor"></span>        }
00122     }
00123     <span class="comment">//------- blt the back buffer to front buffer -------//</span>
00124     vga.blt_buf(<a class="code" href="Oworldmt_8h.html#a12">ZOOM_X1</a>, <a class="code" href="Oworldmt_8h.html#a13">ZOOM_Y1</a>, <a class="code" href="Oworldmt_8h.html#a14">ZOOM_X2</a>, <a class="code" href="Oworldmt_8h.html#a15">ZOOM_Y2</a>);
00125 }
00126 
00127 <span class="comment">//---------- End of function Development::eval_letter_report ------------//</span>
00128 
00130 
<a name="l00131"></a><a class="code" href="classLoseGameReport.html#a5">00131</a> <span class="keywordtype">int</span> <a class="code" href="classLoseGameReport.html#a5">LoseGameReport::lose_game_detect</a>() {
00132     <span class="keywordtype">int</span> tab1=<a class="code" href="Olosegam_8cpp.html#a11a1">REPORT_X1</a>,tab2=<a class="code" href="Olosegam_8cpp.html#a11a1">REPORT_X1</a>+100,
00133         tab3=<a class="code" href="Olosegam_8cpp.html#a11a1">REPORT_X1</a>+200,tab4=<a class="code" href="Olosegam_8cpp.html#a11a1">REPORT_X1</a>+600;
00134     <span class="keywordtype">int</span> vtab1=<a class="code" href="Olosegam_8cpp.html#a11a2">REPORT_Y1</a>+15,vtab2=<a class="code" href="Olosegam_8cpp.html#a11a2">REPORT_Y1</a>+70,
00135         vtab3=<a class="code" href="Olosegam_8cpp.html#a11a2">REPORT_Y1</a>+100,vtab4=<a class="code" href="Olosegam_8cpp.html#a11a2">REPORT_Y1</a>+350;
00136 
00137     <span class="keywordflow">if</span> (!lose_game_report_init_flag)
00138         <span class="keywordflow">return</span> 0;
00139     <span class="keywordflow">if</span> (mouse.single_click(2))
00140         sys.set_staying_view_mode(<a class="code" href="Osys_8h.html#a45a25">MODE_FINAL_SCORE</a>);
00141 
00142     <span class="keywordflow">return</span> 0;
00143 }
00144 
00145 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00146 <span class="preprocessor"></span><span class="keywordtype">void</span> LoseGameReport::set_reason(<span class="keywordtype">int</span> reasonId, <span class="keywordtype">int</span> para0, <span class="keywordtype">int</span> para1, <span class="keywordtype">int</span> para2, <span class="keywordtype">int</span> para3, <span class="keywordtype">int</span> para4 ) {
00147     lose_reason_id = reasonId;
00148     reason_para0 = para0;
00149     reason_para1 = para1;
00150     reason_para2 = para2;
00151     reason_para3 = para3;
00152     reason_para4 = para4;
00153 }
00154 <span class="preprocessor">#endif</span>
</pre></div><hr><address style="align: right;"><small>Generated on Fri Aug 23 01:38:04 2002 for VirtualU by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.17 </small></address>
</body>
</html>
