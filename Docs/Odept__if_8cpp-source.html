<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Odept_if.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.17 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>Odept_if.cpp</h1><a href="Odept__if_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">//Filename    : ODEPT_IF.CPP</span>
00002 <span class="comment">//Description : Modeling_academic (Modeling_academic Operation) class</span>
00003 <span class="comment">// owner                        : Kevin(Ho)</span>
00004 <span class="comment">// Notes:       Steps to introduce a new class of user interface</span>
00005 <span class="comment">//                              1.      construct the new class</span>
00006 <span class="comment">//                              2.      in sys.h, add the new MODE, e.g. MODE_ADMISSIONS_AND_FINANCIAL_OFFICE</span>
00007 <span class="comment">//                              3.      include the new header file in cc.cpp, osysdisp.cpp, osysdet.cpp</span>
00008 <span class="comment">//                              4.      in cc.cpp, declare a global object of the new class, with the name matching the 'extern' statement in the header file</span>
00009 <span class="comment">//                              5.      in osysdisp.cpp, under switch(view_mode), add the redirection to the display function</span>
00010 <span class="comment">//                              6.      in osysdet.cpp, under Sys::detect_view, add the redirection to the detect function</span>
00011 <span class="comment">//                              7.      in osysdet.cpp, under Sys::process_key, add the new hot key (optional)</span>
00012 <span class="comment">//                              8.      in osysdet.cpp, under Sys::detect_button, modify if necessary (see the comments there)</span>
00013 <span class="comment">//                              9.      the deinit function (AdmOffice::deinit()) can be called when the view_mode in 'sys' object is switched</span>
00014 <span class="comment">//                                      the function frees memory occupied by this object</span>
00015 <span class="comment">//                                      the report function would re-allocate memory when it is called (note the init_flag)</span>
00016 <span class="comment">//                                      notice the beginning section of Sys::disp_frame()</span>
00017 <span class="comment">// Kevin 0811</span>
00018 
00019 <span class="preprocessor">#include &lt;OSYS.H&gt;</span>
00020 <span class="preprocessor">#include &lt;<a class="code" href="OSTR_8H.html">OSTR.H</a>&gt;</span>
00021 <span class="preprocessor">#include &lt;OMISC.H&gt;</span>
00022 <span class="preprocessor">#include &lt;<a class="code" href="OGAMESET_8H.html">OGAMESET.H</a>&gt;</span>
00023 <span class="preprocessor">#include &lt;OWORLDMT.H&gt;</span>
00024 <span class="preprocessor">#include &lt;ODEPT.H&gt;</span>
00025 <span class="preprocessor">#include &lt;<a class="code" href="OVGA_8H.html">OVGA.H</a>&gt;</span>
00026 <span class="preprocessor">#include &lt;OIFACE.H&gt;</span>
00027 <span class="preprocessor">#include &lt;OINFO.H&gt;</span>
00028 <span class="preprocessor">#include &lt;<a class="code" href="COLOR_8H.html">COLOR.H</a>&gt;</span>
00029 <span class="preprocessor">#include &lt;OFONT.H&gt;</span>
00030 <span class="preprocessor">#include &lt;OGAMESTR.H&gt;</span>
00031 <span class="preprocessor">#include &lt;OMOUSE.H&gt;</span>
00032 <span class="preprocessor">#include &lt;OBUTTON.H&gt;</span>
00033 <span class="preprocessor">#include &lt;<a class="code" href="OTEXT_8H.html">OTEXT.H</a>&gt;</span>
00034 <span class="preprocessor">#include &lt;<a class="code" href="OHELPIF_8H.html">OHELPIF.H</a>&gt;</span>
00035 <span class="preprocessor">#include &lt;<a class="code" href="OGRPHYR_8H.html">OGRPHYR.H</a>&gt;</span>
00036 <span class="preprocessor">#include &lt;<a class="code" href="OGRPHMTH_8H.html">OGRPHMTH.H</a>&gt;</span>
00037 <span class="preprocessor">#include &lt;<a class="code" href="OGRPHTRI_8H.html">OGRPHTRI.H</a>&gt;</span>
00038 <span class="preprocessor">#include &lt;<a class="code" href="OGRPNFYR_8H.html">OGRPNFYR.H</a>&gt;</span>
00039 <span class="preprocessor">#include &lt;<a class="code" href="OGRPNFM_8H.html">OGRPNFM.H</a>&gt;</span>
00040 <span class="preprocessor">#include &lt;<a class="code" href="OGRPNFT_8H.html">OGRPNFT.H</a>&gt;</span>
00041 <span class="preprocessor">#include &lt;<a class="code" href="OGRPH__PY_8H.html">OGRPH_PY.H</a>&gt;</span>
00042 <span class="preprocessor">#include &lt;<a class="code" href="OGRPH__PT_8H.html">OGRPH_PT.H</a>&gt;</span>
00043 <span class="preprocessor">#include &lt;<a class="code" href="OGRPH__PM_8H.html">OGRPH_PM.H</a>&gt;</span>
00044 <span class="preprocessor">#include &lt;<a class="code" href="ORESTXT_8H.html">ORESTXT.H</a>&gt;</span>
00045 <span class="preprocessor">#include &lt;<a class="code" href="OVBROW98_8H.html">OVBROW98.H</a>&gt;</span>
00046 <span class="preprocessor">#include &lt;<a class="code" href="OVGALOCK_8H.html">OVGALOCK.H</a>&gt;</span>
00047 <span class="preprocessor">#include &lt;OPRINT.H&gt;</span>
00048 <span class="preprocessor">#include &lt;<a class="code" href="ODATE_8H.html">ODATE.H</a>&gt;</span>
00049 <span class="preprocessor">#include &lt;OPSCHOOL.H&gt;</span>
00050 <span class="preprocessor">#include &lt;OAUDIO.H&gt;</span>
00051 <span class="preprocessor">#include &lt;OCONFIG.H&gt;</span>
00052 
00053 <span class="comment">//----------------- Departmental academic standing --------------------//</span>
00054 <span class="comment">//-------------------- Main screen Configuration ----------------------//</span>
00055 
00056 <span class="keyword">enum</span> {                                            <span class="comment">// the bg image id</span>
00057     <a class="code" href="Odept__if_8cpp.html#a134a68">BG_PIC_ID</a> = 11
00058 };
00059 
00060 <span class="keyword">enum</span> {                                            <span class="comment">// screen coordinates</span>
00061     <a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a> = <a class="code" href="Oworldmt_8h.html#a12">ZOOM_X1</a>+15,
00062     <a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a> = <a class="code" href="Oworldmt_8h.html#a13">ZOOM_Y1</a>+25,
00063     <a class="code" href="Odept__if_8cpp.html#a135a71">REPORT_X2</a> = <a class="code" href="Oworldmt_8h.html#a14">ZOOM_X2</a>-15,
00064     <a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a> = <a class="code" href="Oworldmt_8h.html#a15">ZOOM_Y2</a>-25
00065 };
00066 
00067 <span class="keyword">enum</span> {
00068     <a class="code" href="Odept__if_8cpp.html#a136a73">BUTTON_WIDTH</a> = 50,
00069     <a class="code" href="Odept__if_8cpp.html#a136a74">BUTTON_HEIGHT</a> = 25,
00070     <a class="code" href="Odept__if_8cpp.html#a136a75">BUTTON_DIST</a> = 230,
00071     <a class="code" href="Odept__if_8cpp.html#a136a76">BUTTON_VDIST</a> = 170
00072 };
00073 
00074 <span class="keyword">enum</span> {
00075     <a class="code" href="Odept__if_8cpp.html#a137a77">MODE_DEPT_GRAPH_WIDTH</a> = 215,
00076     <a class="code" href="Odept__if_8cpp.html#a137a78">MODE_DEPT_GRAPH_HEIGHT</a> = 120,
00077 
00078     <a class="code" href="Odept__if_8cpp.html#a137a79">MODE_DEPT_TAB0</a> = 15,
00079     <a class="code" href="Odept__if_8cpp.html#a137a80">MODE_DEPT_TAB1</a> = 245,
00080     <a class="code" href="Odept__if_8cpp.html#a137a81">MODE_DEPT_TAB2</a> = 475,
00081     <a class="code" href="Odept__if_8cpp.html#a137a82">MODE_DEPT_TAB3</a> = 705,
00082 
00083     <a class="code" href="Odept__if_8cpp.html#a137a83">MODE_DEPT_VTAB1</a> = 10,
00084     <a class="code" href="Odept__if_8cpp.html#a137a84">MODE_DEPT_VTAB2</a> = 163,
00085     <a class="code" href="Odept__if_8cpp.html#a137a85">MODE_DEPT_VTAB3</a> = 397,
00086 };
00087 
00088 <span class="keyword">enum</span> {
00089     <a class="code" href="Odept__if_8cpp.html#a138a86">MODE_INSTITUTION</a>  = 0,
00090     <a class="code" href="Odept__if_8cpp.html#a138a87">MODE_DEPARTMENT</a> = 1,
00091     <a class="code" href="Odept__if_8cpp.html#a138a88">MODE_RANK</a>     = 2,
00092 };
00093 
00094 <span class="keyword">static</span> <a class="code" href="classButton.html">Button</a> help_button_array[9];
00095 <span class="keyword">static</span> <a class="code" href="classButton.html">Button</a> mode_dept_button[15];
00096 <span class="keyword">static</span> <span class="keywordtype">short</span> *mode_dept_button_up_bitmap[15];
00097 <span class="keyword">static</span> <span class="keywordtype">short</span> *mode_dept_button_down_bitmap[15];
00098 <span class="comment">/*</span>
00099 <span class="comment">static GraphTrimester mode_dept_graph0;</span>
00100 <span class="comment">static GraphYear mode_dept_graph1;</span>
00101 <span class="comment">static GraphTrimester mode_dept_graph2;</span>
00102 <span class="comment">static GraphMonth mode_dept_graph3;</span>
00103 <span class="comment">static GraphMonth mode_dept_graph4;</span>
00104 <span class="comment">static GraphYear mode_dept_graph5;</span>
00105 <span class="comment">*/</span>
00106 <span class="keyword">static</span> <a class="code" href="classGraphNonFinancialTrimester.html">GraphNonFinancialTrimester</a> mode_dept_graph0;
00107 <span class="keyword">static</span> <a class="code" href="classGraphNonFinancialYear.html">GraphNonFinancialYear</a> mode_dept_graph1;
00108 <span class="keyword">static</span> <a class="code" href="classGraphNonFinancialTrimester.html">GraphNonFinancialTrimester</a> mode_dept_graph2;
00109 <span class="keyword">static</span> <a class="code" href="classGraphNonFinancialMonth.html">GraphNonFinancialMonth</a> mode_dept_graph3;
00110 <span class="keyword">static</span> <a class="code" href="classGraphNonFinancialMonth.html">GraphNonFinancialMonth</a> mode_dept_graph4;
00111 <span class="keyword">static</span> <a class="code" href="classGraphNonFinancialYear.html">GraphNonFinancialYear</a> mode_dept_graph5;
00112 
00113 <span class="keyword">static</span> <span class="keywordtype">char</span> *mode_dept_title = <span class="stringliteral">"Academic Operations"</span>;
00114 <span class="keyword">static</span> <span class="keywordtype">char</span> *mode_dept_str[] = {
00115     <span class="stringliteral">"Educational quality"</span>,
00116     <span class="stringliteral">"Departmental prestige"</span>,
00117     <span class="stringliteral">"Student morale"</span>,
00118     <span class="stringliteral">"Faculty research performance"</span>,
00119     <span class="stringliteral">"Faculty morale"</span>,
00120     <span class="stringliteral">"Faculty diversity index"</span>,
00121 };
00122 
00123 <span class="keyword">static</span> <span class="keywordtype">char</span> report_init_flag = 0;
00124 <span class="comment">//------------------------------------------------------------------//</span>
00125 
00126 <span class="comment">//-------------------- sub-windows Configuration ----------------------//</span>
00127 
00128 <span class="keyword">enum</span> {
00129     <a class="code" href="Odept__if_8cpp.html#a139a89">MODE_DEPT_MAIN</a> = 0,
00130     <a class="code" href="Odept__if_8cpp.html#a139a90">MODE_DEPT_EDUCATIONAL_QUALITY</a>=1,
00131     <a class="code" href="Odept__if_8cpp.html#a139a91">MODE_DEPT_DEPARTMENTAL_ACADEMIC_STANDING</a>=2,
00132     <a class="code" href="Odept__if_8cpp.html#a139a92">MODE_DEPT_STUDENT_MORALE</a>=3,
00133     <a class="code" href="Odept__if_8cpp.html#a139a93">MODE_DEPT_FACULTY_RESEARCH_PERFORMANCE</a>=4,
00134     <a class="code" href="Odept__if_8cpp.html#a139a94">MODE_DEPT_FACULTY_MORALE</a>=5,
00135     <a class="code" href="Odept__if_8cpp.html#a139a95">MODE_DEPT_FACULTY_DIVERSITY_INDEX</a>=6,
00136     <a class="code" href="Odept__if_8cpp.html#a139a96">MODE_DEPT_EDUCATIONAL_QUALITY2</a>=7,
00137     <a class="code" href="Odept__if_8cpp.html#a139a97">MODE_DEPT_RANK</a>=8,
00138 };
00139 
00140 <span class="comment">//-------- define static functions ------//</span>
00141 
00142 <span class="comment">// Notes:       the deinit_x functions should deallocate memory used by the</span>
00143 <span class="comment">//                              GraphA, ValueSlider, RadioButton, etc. objects</span>
00144 <span class="comment">//                              the functions are called when a mode-switching is triggered</span>
00145 <span class="comment">//      Norris 0716</span>
00146 
00147 <span class="keyword">static</span> <span class="keywordtype">void</span> report_main(<span class="keywordtype">int</span>);
00148 <span class="keyword">static</span> <span class="keywordtype">void</span> report_educational_quality(<span class="keywordtype">int</span>);
00149 <span class="keyword">static</span> <span class="keywordtype">void</span> report_educational_quality2(<span class="keywordtype">int</span>);
00150 <span class="keyword">static</span> <span class="keywordtype">void</span> report_departmental_academic(<span class="keywordtype">int</span>);
00151 <span class="keyword">static</span> <span class="keywordtype">void</span> report_student_morale(<span class="keywordtype">int</span>);
00152 <span class="keyword">static</span> <span class="keywordtype">void</span> report_faculty_research_preformance(<span class="keywordtype">int</span>);
00153 <span class="keyword">static</span> <span class="keywordtype">void</span> report_faculty_morale(<span class="keywordtype">int</span>);
00154 <span class="keyword">static</span> <span class="keywordtype">void</span> report_diversity_index(<span class="keywordtype">int</span>);
00155 <span class="keyword">static</span> <span class="keywordtype">void</span> report_rank(<span class="keywordtype">int</span>);
00156 
00157 <span class="keyword">static</span> <span class="keywordtype">int</span> detect_main();
00158 <span class="keyword">static</span> <span class="keywordtype">int</span> detect_main2();
00159 <span class="keyword">static</span> <span class="keywordtype">int</span> detect_educational_quality();
00160 <span class="keyword">static</span> <span class="keywordtype">int</span> detect_educational_quality2();
00161 <span class="keyword">static</span> <span class="keywordtype">int</span> detect_departmental_academic();
00162 <span class="keyword">static</span> <span class="keywordtype">int</span> detect_student_morale();
00163 <span class="keyword">static</span> <span class="keywordtype">int</span> detect_faculty_research_preformance();
00164 <span class="keyword">static</span> <span class="keywordtype">int</span> detect_faculty_morale();
00165 <span class="keyword">static</span> <span class="keywordtype">int</span> detect_diversity_index();
00166 <span class="keyword">static</span> <span class="keywordtype">int</span> detect_rank();
00167 
00168 <span class="keyword">static</span> <span class="keywordtype">void</span> deinit_main();
00169 <span class="keyword">static</span> <span class="keywordtype">void</span> deinit_educational_quality();
00170 <span class="keyword">static</span> <span class="keywordtype">void</span> deinit_educational_quality2();
00171 <span class="keyword">static</span> <span class="keywordtype">void</span> deinit_departmental_academic();
00172 <span class="keyword">static</span> <span class="keywordtype">void</span> deinit_student_morale();
00173 <span class="keyword">static</span> <span class="keywordtype">void</span> deinit_faculty_research_preformance();
00174 <span class="keyword">static</span> <span class="keywordtype">void</span> deinit_faculty_morale();
00175 <span class="keyword">static</span> <span class="keywordtype">void</span> deinit_diversity_index();
00176 <span class="keyword">static</span> <span class="keywordtype">void</span> deinit_rank();
00177 
00178 <span class="keyword">static</span> <span class="keywordtype">void</span> eq_disp_rep_row(<span class="keywordtype">int</span> recNo, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> refreshFlag);
00179 <span class="keyword">static</span> <span class="keywordtype">void</span> da_disp_rep_row(<span class="keywordtype">int</span> recNo, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> refreshFlag);
00180 <span class="keyword">static</span> <span class="keywordtype">void</span> sm_disp_rep_row(<span class="keywordtype">int</span> recNo, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> refreshFlag);
00181 <span class="keyword">static</span> <span class="keywordtype">void</span> fp_disp_rep_row(<span class="keywordtype">int</span> recNo, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> refreshFlag);
00182 <span class="keyword">static</span> <span class="keywordtype">void</span> fm_disp_rep_row(<span class="keywordtype">int</span> recNo, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> refreshFlag);
00183 <span class="keyword">static</span> <span class="keywordtype">void</span> di_disp_rep_row(<span class="keywordtype">int</span> recNo, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> refreshFlag);
00184 <span class="keyword">static</span> <span class="keywordtype">void</span> rk_disp_rep_row(<span class="keywordtype">int</span> recNo, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> refreshFlag);
00185 
<a name="l00186"></a><a class="code" href="Odept__if_8cpp.html#a16">00186</a> <span class="keyword">typedef</span> void (*<a class="code" href="Odept__if_8cpp.html#a16">ReportFP</a>)(<span class="keywordtype">int</span> refreshFlag);
<a name="l00187"></a><a class="code" href="Odept__if_8cpp.html#a17">00187</a> <span class="keyword">typedef</span> int (*<a class="code" href="Odept__if_8cpp.html#a17">DetectFP</a>)();
<a name="l00188"></a><a class="code" href="Odept__if_8cpp.html#a18">00188</a> <span class="keyword">typedef</span> void (*<a class="code" href="Odept__if_8cpp.html#a18">DeinitFP</a>)();
00189 
00190 <span class="keyword">static</span> <a class="code" href="Odept__if_8cpp.html#a16">ReportFP</a> report_func_ptr[] = {
00191     &amp;report_main,
00192     &amp;report_educational_quality,
00193     &amp;report_departmental_academic,
00194     &amp;report_student_morale,
00195     &amp;report_faculty_research_preformance,
00196     &amp;report_faculty_morale,
00197     &amp;report_diversity_index,
00198     &amp;report_educational_quality2,
00199     &amp;report_rank,
00200 };
00201 
00202 <span class="keyword">static</span> <a class="code" href="Odept__if_8cpp.html#a17">DetectFP</a> detect_func_ptr[] = {
00203     &amp;detect_main,
00204     &amp;detect_educational_quality,
00205     &amp;detect_departmental_academic,
00206     &amp;detect_student_morale,
00207     &amp;detect_faculty_research_preformance,
00208     &amp;detect_faculty_morale,
00209     &amp;detect_diversity_index,
00210     &amp;detect_educational_quality2,
00211     &amp;detect_rank,
00212 };
00213 
00214 <span class="keyword">static</span> <a class="code" href="Odept__if_8cpp.html#a18">DeinitFP</a> deinit_func_ptr[] = {
00215     &amp;deinit_main,
00216     &amp;deinit_educational_quality,
00217     &amp;deinit_departmental_academic,
00218     &amp;deinit_student_morale,
00219     &amp;deinit_faculty_research_preformance,
00220     &amp;deinit_faculty_morale,
00221     &amp;deinit_diversity_index,
00222     &amp;deinit_educational_quality2,
00223     &amp;deinit_rank,
00224 };
00225 
<a name="l00226"></a><a class="code" href="classDepartment.html#a14">00226</a> <span class="keywordtype">void</span> <a class="code" href="classDepartment.html#a14">Department::set_report_init_flag</a>(<span class="keywordtype">int</span> flag) {
00227     report_init_flag=flag;
00228 }
00229 
00230 <span class="comment">//-------- Begin of function Department::main_report ---------//</span>
<a name="l00232"></a><a class="code" href="classDepartment.html#a4">00232</a> <span class="comment">void Department::main_report(int refreshFlag) {</span>
00233     (*report_func_ptr[department_array.current_screen_mode])(refreshFlag);
00234 }
00235 
<a name="l00236"></a><a class="code" href="classDepartment.html#a5">00236</a> <span class="keywordtype">void</span> <a class="code" href="classDepartment.html#a5">Department::main_report_deinit</a>() {
00237 
00238     <span class="comment">//  (*deinit_func_ptr[department_array.current_screen_mode])();</span>
00239 
00240     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;9;i++)
00241         (*deinit_func_ptr[i])();
00242 
00243     report_init_flag = 0;
00244 }
00245 
<a name="l00246"></a><a class="code" href="classDepartment.html#a6">00246</a> <span class="keywordtype">int</span> <a class="code" href="classDepartment.html#a6">Department::main_report_detect</a>() {
00247     <span class="keywordflow">return</span> (*detect_func_ptr[department_array.current_screen_mode])();
00248 }
00249 
00250 <span class="comment">//-------- End of function Department::main_report ---------//</span>
00251 
00252 <span class="comment">//-------- Begin of function deinit_main ---------//</span>
00254 <span class="comment">void deinit_main() {</span>
00255     <span class="keywordflow">if</span> (report_init_flag==0)<span class="keywordflow">return</span>;
00256 
00257     <span class="comment">//--------- deallocate memory -------------//</span>
00258     <span class="keywordflow">if</span> (mode_dept_button_up_bitmap[0]) {
00259         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=0;k&lt;2;k++) {
00260             <span class="comment">// ##### begin Gilbert 25/04/2001 ######//</span>
00261             mode_dept_button[k].<a class="code" href="classButton.html#a2">deinit</a>();
00262             <span class="comment">// ##### end Gilbert 25/04/2001 ######//</span>
00263             <a class="code" href="ALL_8H.html#a8">mem_del</a>(mode_dept_button_up_bitmap[k]);
00264             <a class="code" href="ALL_8H.html#a8">mem_del</a>(mode_dept_button_down_bitmap[k]);
00265             mode_dept_button_up_bitmap[k] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00266             mode_dept_button_down_bitmap[k] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00267         }
00268     }
00269     <span class="keywordflow">if</span> (mode_dept_button_up_bitmap[6]) {
00270         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=6;k&lt;15;k++) {
00271             <span class="comment">// ##### begin Gilbert 25/04/2001 ######//</span>
00272             mode_dept_button[k].<a class="code" href="classButton.html#a2">deinit</a>();
00273             <span class="comment">// ##### end Gilbert 25/04/2001 ######//</span>
00274             <a class="code" href="ALL_8H.html#a8">mem_del</a>(mode_dept_button_up_bitmap[k]);
00275             <a class="code" href="ALL_8H.html#a8">mem_del</a>(mode_dept_button_down_bitmap[k]);
00276             mode_dept_button_up_bitmap[k] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00277             mode_dept_button_down_bitmap[k] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00278         }
00279     }
00280     <span class="keywordflow">if</span> (report_init_flag) {
00281         mode_dept_graph0.<a class="code" href="classGraphNonFinancialTrimester.html#a7">deinit</a>();
00282         mode_dept_graph1.<a class="code" href="classGraphNonFinancialYear.html#a7">deinit</a>();
00283         mode_dept_graph2.<a class="code" href="classGraphNonFinancialTrimester.html#a7">deinit</a>();
00284         mode_dept_graph3.<a class="code" href="classGraphNonFinancialMonth.html#a7">deinit</a>();
00285         mode_dept_graph4.<a class="code" href="classGraphNonFinancialMonth.html#a7">deinit</a>();
00286         mode_dept_graph5.<a class="code" href="classGraphNonFinancialYear.html#a7">deinit</a>();
00287     }
00288 
00289     <span class="keywordflow">if</span>(department_array.current_screen_mode&gt;0)
00290         (*deinit_func_ptr[department_array.current_screen_mode])();
00291     report_init_flag=0;
00292 }
00293 
00294 <span class="comment">//</span>
00295 <span class="comment">//-------- End of function deinit_main ---------//</span>
00296 
00297 <span class="comment">//-------- Begin of function Department::main_report ---------//</span>
00299 <span class="comment">void report_main(int refreshFlag) {</span>
00300 
00301     <span class="keyword">static</span> <span class="keywordtype">int</span>  numSeriesData36 = HISTORY_MONTH_COUNT;
00302     <span class="keyword">static</span> <span class="keywordtype">int</span>  numSeriesData24 = HISTORY_TRIMESTER_COUNT;
00303     <span class="keyword">static</span> <span class="keywordtype">int</span>  numSeriesData8 = HISTORY_YEAR_COUNT;
00304 
00305     <span class="keyword">static</span> <span class="keywordtype">float</span> xStart0,xEnd0;
00306     <span class="keyword">static</span> <span class="keywordtype">int</span> xStart1,xEnd1;
00307     <span class="keyword">static</span> <span class="keywordtype">float</span> xStart2,xEnd2;
00308     <span class="keyword">static</span> <span class="keywordtype">float</span> xStart3,xEnd3;
00309     <span class="keyword">static</span> <span class="keywordtype">float</span> xStart4,xEnd4;
00310     <span class="keyword">static</span> <span class="keywordtype">int</span> xStart5,xEnd5;
00311 
00312     <span class="keyword">static</span> <span class="keywordtype">float</span> *dataArray1;
00313     <span class="keyword">static</span> <span class="keywordtype">float</span> *dataArray2;
00314     <span class="keyword">static</span> <span class="keywordtype">float</span> *dataArray3;
00315     <span class="keyword">static</span> <span class="keywordtype">float</span> *dataArray4;
00316     <span class="keyword">static</span> <span class="keywordtype">float</span> *dataArray5;
00317     <span class="keyword">static</span> <span class="keywordtype">float</span> *dataArray0;
00318 
00319     <span class="keywordtype">int</span> deptRecno = department_array.selected_recno;
00320     <a class="code" href="classDepartment.html">Department</a>* cur_dept_ptr = department_array[deptRecno];
00321 
00322     <span class="keywordflow">if</span>(department_array.current_data_mode==<a class="code" href="Odept__if_8cpp.html#a138a87">MODE_DEPARTMENT</a>) {
00323         dataArray0=cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#m52">p_educational_quality_history</a>;
00324         dataArray1=cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#m53">p_academic_standing_history</a>;
00325         dataArray2=cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#m54">p_student_morale_history</a>;
00326         dataArray3=cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#m55">p_faculty_research_history</a>;
00327         dataArray4=cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#m56">p_faculty_morale_history</a>;
00328         dataArray5=cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#m57">p_faculty_diversity_history</a>;
00329         sys.is_institution_report=0;
00330     }
00331     <span class="keywordflow">else</span> {
00332         dataArray0=department_array.<a class="code" href="classDepartment.html#m52">p_educational_quality_history</a>;
00333         dataArray1=department_array.<a class="code" href="classDepartment.html#m53">p_academic_standing_history</a>;
00334         dataArray2=department_array.<a class="code" href="classDepartment.html#m54">p_student_morale_history</a>;
00335         dataArray3=department_array.<a class="code" href="classDepartment.html#m55">p_faculty_research_history</a>;
00336         dataArray4=department_array.<a class="code" href="classDepartment.html#m56">p_faculty_morale_history</a>;
00337         dataArray5=department_array.<a class="code" href="classDepartment.html#m57">p_faculty_diversity_history</a>;
00338         sys.is_institution_report=1;
00339 
00340         <span class="comment">// update institutional prestige as sub_score[] is updated monthly while p_academic_standing_history[] is updated yearly. We do this to sync the values.</span>
00341 
00342         department_array.<a class="code" href="classDepartment.html#m53">p_academic_standing_history</a>[THIS_YEAR] = player_school.sub_score[<a class="code" href="Opschool_8h.html#a65a39">S_PRESTIGE</a>][THIS_MONTH];
00343     }
00344     <span class="comment">//-----------initial data-----------//</span>
00345 
00346     xEnd0 = float(info.game_year)+float(info.game_month)/12.0f;
00347     xStart0 = xEnd0-6.0f;
00348     xEnd1 = (info.game_year);
00349     xStart1 = (info.game_year-numSeriesData8+1);
00350     xEnd2 = float(info.game_year)+float(info.game_month)/12.0f;
00351     xStart2 = xEnd2-6.0f;
00352     xEnd3 = float(info.game_year)+float(info.game_month)/12.0f;
00353     xStart3 = xEnd3-3.0f;
00354     xEnd4 = float(info.game_year)+float(info.game_month)/12.0f;
00355     xStart4 = xEnd4-3.0f;
00356     xEnd5 = (info.game_year);
00357     xStart5 = (info.game_year-numSeriesData8+1);
00358 
00359     vga.use_back();
00360     <span class="keywordflow">if</span> (refreshFlag == <a class="code" href="Gamedef_8h.html#a71a16">INFO_REPAINT</a>) {
00361         <span class="keywordflow">if</span>( report_init_flag )                        <span class="comment">// deinit it first if it has already been initialized</span>
00362             deinit_main();
00363 
00364         <span class="comment">//------------- paint the background ----------------//</span>
00365 
00366         <span class="comment">//              static short callTime=0;</span>
00367 
00368         <span class="comment">//              if( ++callTime%2==0 )</span>
00369         user_interface.bg_img(<a class="code" href="Odept__if_8cpp.html#a134a68">BG_PIC_ID</a>, &amp;vga_back);
00370         <span class="comment">//              else</span>
00371         <span class="comment">//                      user_interface.bg_img(BG_PIC_ID-1, &amp;vga_back);</span>
00372 
00373         user_interface.brighten(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+100,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>-25,<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+630,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>-4);
00374         user_interface.rect(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+100,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>-25,<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+630,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>-4,1);
00375         <span class="keywordflow">if</span>(department_array.current_data_mode==<a class="code" href="Odept__if_8cpp.html#a138a87">MODE_DEPARTMENT</a>)
00376             font_charts.put(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+270,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>-19,<span class="stringliteral">"Departmental Performance"</span>);
00377         <span class="keywordflow">else</span>
00378             font_charts.put(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+270,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>-19,<span class="stringliteral">"Institutional Performance"</span>);
00379 
00380         user_interface.brighten(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>-2,<a class="code" href="Odept__if_8cpp.html#a135a71">REPORT_X2</a>,<a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>-20);
00381         user_interface.brighten(100,<a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>-10,250,<a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>-10+<a class="code" href="Odept__if_8cpp.html#a136a74">BUTTON_HEIGHT</a>);
00382         user_interface.brighten(330,<a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>-10,480,<a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>-10+<a class="code" href="Odept__if_8cpp.html#a136a74">BUTTON_HEIGHT</a>);
00383         user_interface.brighten(550,<a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>-10,700,<a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>-10+<a class="code" href="Odept__if_8cpp.html#a136a74">BUTTON_HEIGHT</a>);
00384         user_interface.rect(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>-2,<a class="code" href="Odept__if_8cpp.html#a135a71">REPORT_X2</a>,<a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>-20,1);
00385         <span class="comment">//              font_chartsm.put(REPORT_X2/2-70,REPORT_Y1-25,mode_dept_title);</span>
00386 
00387         <span class="comment">//----- initialize the buttons and the graph -----//</span>
00388         <span class="keywordflow">if</span> (!report_init_flag) {
00389             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> y = <a class="code" href="Odept__if_8cpp.html#a137a83">MODE_DEPT_VTAB1</a>+<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+15,i=0,k=0;i&lt;2;i++,y+=<a class="code" href="Odept__if_8cpp.html#a136a76">BUTTON_VDIST</a>)
00390                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> x = <a class="code" href="Odept__if_8cpp.html#a137a79">MODE_DEPT_TAB0</a>+<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>,j=0;j&lt;3;j++,x+=<a class="code" href="Odept__if_8cpp.html#a136a75">BUTTON_DIST</a>,k++) {
00391                     <span class="keywordflow">if</span>((k&gt;=0)&amp;&amp;(k&lt;=1)) {
00392                         <span class="comment">//## chea 200999 get rid of the "rank" and  "detail" same code but diff.pos. ORG.</span>
00393                         <span class="comment">/*</span>
00394 <span class="comment">                          // detail button</span>
00395 <span class="comment">                          mode_dept_button_up_bitmap[k] = NULL;</span>
00396 <span class="comment">                          mode_dept_button_down_bitmap[k] = NULL;</span>
00397 <span class="comment"></span>
00398 <span class="comment">                          user_interface.create_button_bitmap(</span>
00399 <span class="comment">                          x+MODE_DEPT_GRAPH_WIDTH-BUTTON_WIDTH,</span>
00400 <span class="comment">                          y+MODE_DEPT_GRAPH_HEIGHT+7,</span>
00401 <span class="comment">                          x+MODE_DEPT_GRAPH_WIDTH,</span>
00402 <span class="comment">                          y+MODE_DEPT_GRAPH_HEIGHT+BUTTON_HEIGHT+2,</span>
00403 <span class="comment">                          "Detail", &amp;mode_dept_button_up_bitmap[k],</span>
00404 <span class="comment">                          &amp;mode_dept_button_down_bitmap[k], &amp;vga_back);</span>
00405 <span class="comment"></span>
00406 <span class="comment">                          mode_dept_button[k].create_bitmapW(</span>
00407 <span class="comment">                          x+MODE_DEPT_GRAPH_WIDTH-BUTTON_WIDTH,</span>
00408 <span class="comment">                          y+MODE_DEPT_GRAPH_HEIGHT+7,</span>
00409 <span class="comment">                          x+MODE_DEPT_GRAPH_WIDTH,</span>
00410 <span class="comment">                          y+MODE_DEPT_GRAPH_HEIGHT+BUTTON_HEIGHT+2,</span>
00411 <span class="comment">                          mode_dept_button_down_bitmap[k]+4);</span>
00412 <span class="comment"></span>
00413 <span class="comment">                          if(department_array.current_data_mode==MODE_DEPARTMENT)</span>
00414 <span class="comment">                          mode_dept_button[k].paint();</span>
00415 <span class="comment">                          else</span>
00416 <span class="comment">                          {</span>
00417 <span class="comment"></span>
00418 <span class="comment">                          vga.blt_buf(</span>
00419 <span class="comment">                          x+MODE_DEPT_GRAPH_WIDTH-BUTTON_WIDTH,</span>
00420 <span class="comment">                          y+MODE_DEPT_GRAPH_HEIGHT+7,</span>
00421 <span class="comment">                          x+MODE_DEPT_GRAPH_WIDTH,</span>
00422 <span class="comment">                          y+MODE_DEPT_GRAPH_HEIGHT+BUTTON_HEIGHT+7,0);</span>
00423 <span class="comment">                          vga.blt_buf(</span>
00424 <span class="comment">                          x+MODE_DEPT_GRAPH_WIDTH-BUTTON_WIDTH,</span>
00425 <span class="comment">                          y+MODE_DEPT_GRAPH_HEIGHT+7,</span>
00426 <span class="comment">                          x+MODE_DEPT_GRAPH_WIDTH,</span>
00427 <span class="comment">                          y+MODE_DEPT_GRAPH_HEIGHT+BUTTON_HEIGHT+7,0);</span>
00428 <span class="comment"></span>
00429 <span class="comment">                          }</span>
00430 <span class="comment">                        */</span>
00431                         <span class="comment">//## chea 200999 end get rid of the "rank" and  "detail" same code but diff.pos. ORG.</span>
00432 
00433                         <span class="comment">// detail button</span>
00434                         mode_dept_button_up_bitmap[k] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00435                         mode_dept_button_down_bitmap[k] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00436 
00437                         user_interface.create_button_bitmap(
00438                             x+<a class="code" href="Odept__if_8cpp.html#a137a77">MODE_DEPT_GRAPH_WIDTH</a>-5*<a class="code" href="Odept__if_8cpp.html#a136a73">BUTTON_WIDTH</a>/2,
00439                             y+<a class="code" href="Odept__if_8cpp.html#a137a78">MODE_DEPT_GRAPH_HEIGHT</a>+7,
00440                             x+<a class="code" href="Odept__if_8cpp.html#a137a77">MODE_DEPT_GRAPH_WIDTH</a>-3*<a class="code" href="Odept__if_8cpp.html#a136a73">BUTTON_WIDTH</a>/2,
00441                             y+<a class="code" href="Odept__if_8cpp.html#a137a78">MODE_DEPT_GRAPH_HEIGHT</a>+<a class="code" href="Odept__if_8cpp.html#a136a74">BUTTON_HEIGHT</a>+2,
00442                             <span class="stringliteral">"Detail"</span>, &amp;mode_dept_button_up_bitmap[k],
00443                             &amp;mode_dept_button_down_bitmap[k], &amp;vga_back);
00444 
00445                         mode_dept_button[k].<a class="code" href="classButton.html#a16">create_bitmapW</a>(
00446                             x+<a class="code" href="Odept__if_8cpp.html#a137a77">MODE_DEPT_GRAPH_WIDTH</a>-5*<a class="code" href="Odept__if_8cpp.html#a136a73">BUTTON_WIDTH</a>/2,
00447                             y+<a class="code" href="Odept__if_8cpp.html#a137a78">MODE_DEPT_GRAPH_HEIGHT</a>+7,
00448                             x+<a class="code" href="Odept__if_8cpp.html#a137a77">MODE_DEPT_GRAPH_WIDTH</a>-3*<a class="code" href="Odept__if_8cpp.html#a136a73">BUTTON_WIDTH</a>/2,
00449                             y+<a class="code" href="Odept__if_8cpp.html#a137a78">MODE_DEPT_GRAPH_HEIGHT</a>+<a class="code" href="Odept__if_8cpp.html#a136a74">BUTTON_HEIGHT</a>+2,
00450                             mode_dept_button_down_bitmap[k]+4);
00451 
00452                         <span class="keywordflow">if</span>(department_array.current_data_mode==<a class="code" href="Odept__if_8cpp.html#a138a87">MODE_DEPARTMENT</a>)
00453                             mode_dept_button[k].<a class="code" href="classButton.html#a20">paint</a>();
00454                         <span class="keywordflow">else</span> {
00455 
00456                             vga.blt_buf(
00457                                 x+<a class="code" href="Odept__if_8cpp.html#a137a77">MODE_DEPT_GRAPH_WIDTH</a>-5*<a class="code" href="Odept__if_8cpp.html#a136a73">BUTTON_WIDTH</a>/2,
00458                                 y+<a class="code" href="Odept__if_8cpp.html#a137a78">MODE_DEPT_GRAPH_HEIGHT</a>+7,
00459                                 x+<a class="code" href="Odept__if_8cpp.html#a137a77">MODE_DEPT_GRAPH_WIDTH</a>-3*<a class="code" href="Odept__if_8cpp.html#a136a73">BUTTON_WIDTH</a>/2,
00460                                 y+<a class="code" href="Odept__if_8cpp.html#a137a78">MODE_DEPT_GRAPH_HEIGHT</a>+<a class="code" href="Odept__if_8cpp.html#a136a74">BUTTON_HEIGHT</a>+2,
00461                                 0);
00462                             vga.blt_buf(
00463                                 x+<a class="code" href="Odept__if_8cpp.html#a137a77">MODE_DEPT_GRAPH_WIDTH</a>-5*<a class="code" href="Odept__if_8cpp.html#a136a73">BUTTON_WIDTH</a>/2,
00464                                 y+<a class="code" href="Odept__if_8cpp.html#a137a78">MODE_DEPT_GRAPH_HEIGHT</a>+7,
00465                                 x+<a class="code" href="Odept__if_8cpp.html#a137a77">MODE_DEPT_GRAPH_WIDTH</a>-3*<a class="code" href="Odept__if_8cpp.html#a136a73">BUTTON_WIDTH</a>/2,
00466                                 y+<a class="code" href="Odept__if_8cpp.html#a137a78">MODE_DEPT_GRAPH_HEIGHT</a>+<a class="code" href="Odept__if_8cpp.html#a136a74">BUTTON_HEIGHT</a>+2,
00467                                 0);
00468 
00469                         }
00470 
00471                     }
00472 
00473                     <span class="comment">// rank button</span>
00474                     mode_dept_button_up_bitmap[k+6] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00475                     mode_dept_button_down_bitmap[k+6] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00476 
00477                     user_interface.create_button_bitmap(
00478                         x+<a class="code" href="Odept__if_8cpp.html#a137a77">MODE_DEPT_GRAPH_WIDTH</a>-5*<a class="code" href="Odept__if_8cpp.html#a136a73">BUTTON_WIDTH</a>/2,
00479                         y+<a class="code" href="Odept__if_8cpp.html#a137a78">MODE_DEPT_GRAPH_HEIGHT</a>+7,
00480                         x+<a class="code" href="Odept__if_8cpp.html#a137a77">MODE_DEPT_GRAPH_WIDTH</a>-3*<a class="code" href="Odept__if_8cpp.html#a136a73">BUTTON_WIDTH</a>/2,
00481                         y+<a class="code" href="Odept__if_8cpp.html#a137a78">MODE_DEPT_GRAPH_HEIGHT</a>+<a class="code" href="Odept__if_8cpp.html#a136a74">BUTTON_HEIGHT</a>+2,
00482                         <span class="stringliteral">"Rank"</span>, &amp;mode_dept_button_up_bitmap[k+6],
00483                         &amp;mode_dept_button_down_bitmap[k+6], &amp;vga_back);
00484 
00485                     mode_dept_button[k+6].<a class="code" href="classButton.html#a16">create_bitmapW</a>(
00486                         x+<a class="code" href="Odept__if_8cpp.html#a137a77">MODE_DEPT_GRAPH_WIDTH</a>-5*<a class="code" href="Odept__if_8cpp.html#a136a73">BUTTON_WIDTH</a>/2,
00487                         y+<a class="code" href="Odept__if_8cpp.html#a137a78">MODE_DEPT_GRAPH_HEIGHT</a>+7,
00488                         x+<a class="code" href="Odept__if_8cpp.html#a137a77">MODE_DEPT_GRAPH_WIDTH</a>-3*<a class="code" href="Odept__if_8cpp.html#a136a73">BUTTON_WIDTH</a>/2,
00489                         y+<a class="code" href="Odept__if_8cpp.html#a137a78">MODE_DEPT_GRAPH_HEIGHT</a>+<a class="code" href="Odept__if_8cpp.html#a136a74">BUTTON_HEIGHT</a>+2,
00490                         mode_dept_button_down_bitmap[k+6]+4);
00491 
00492                     <span class="comment">//                                  mode_dept_button[k+6].paint();  //## chea 200999 get rid of the "rank" and  "detail"</span>
00493 
00494                     <span class="keywordflow">if</span>(k==0)
00495                         mode_dept_graph0.<a class="code" href="classGraphNonFinancialTrimester.html#a2">init</a>(
00496                             x, y,
00497                             x+<a class="code" href="Odept__if_8cpp.html#a137a77">MODE_DEPT_GRAPH_WIDTH</a>, y+<a class="code" href="Odept__if_8cpp.html#a137a78">MODE_DEPT_GRAPH_HEIGHT</a>,
00498                             1, &amp;numSeriesData24, dataArray0, 0,
00499                             <a class="code" href="OHELP_8H.html#a0">NULL</a>, <a class="code" href="OHELP_8H.html#a0">NULL</a>, <a class="code" href="OHELP_8H.html#a0">NULL</a>, 1, 1, 1, 3);
00500 
00501                     <span class="keywordflow">if</span>(k==1)
00502                         mode_dept_graph1.<a class="code" href="classGraphNonFinancialYear.html#a2">init</a>(
00503                             x, y,
00504                             x+<a class="code" href="Odept__if_8cpp.html#a137a77">MODE_DEPT_GRAPH_WIDTH</a>, y+<a class="code" href="Odept__if_8cpp.html#a137a78">MODE_DEPT_GRAPH_HEIGHT</a>,
00505                             1, &amp;numSeriesData8, dataArray1, 0,
00506                             <a class="code" href="OHELP_8H.html#a0">NULL</a>, <a class="code" href="OHELP_8H.html#a0">NULL</a>, <a class="code" href="OHELP_8H.html#a0">NULL</a>, 1, 1, 1, 3);
00507 
00508                     <span class="keywordflow">if</span>(k==2)
00509                         mode_dept_graph2.<a class="code" href="classGraphNonFinancialTrimester.html#a2">init</a>(
00510                             x, y,
00511                             x+<a class="code" href="Odept__if_8cpp.html#a137a77">MODE_DEPT_GRAPH_WIDTH</a>, y+<a class="code" href="Odept__if_8cpp.html#a137a78">MODE_DEPT_GRAPH_HEIGHT</a>,
00512                             1, &amp;numSeriesData24, dataArray2, 0,
00513                             <a class="code" href="OHELP_8H.html#a0">NULL</a>, <a class="code" href="OHELP_8H.html#a0">NULL</a>, <a class="code" href="OHELP_8H.html#a0">NULL</a>, 1, 1, 1, 3);
00514 
00515                     <span class="keywordflow">if</span>(k==3)
00516                         mode_dept_graph3.<a class="code" href="classGraphNonFinancialMonth.html#a2">init</a>(
00517                             x, y,
00518                             x+<a class="code" href="Odept__if_8cpp.html#a137a77">MODE_DEPT_GRAPH_WIDTH</a>, y+<a class="code" href="Odept__if_8cpp.html#a137a78">MODE_DEPT_GRAPH_HEIGHT</a>,
00519                             1, &amp;numSeriesData36, dataArray3,
00520                             0,
00521                             <a class="code" href="OHELP_8H.html#a0">NULL</a>, <a class="code" href="OHELP_8H.html#a0">NULL</a>, <a class="code" href="OHELP_8H.html#a0">NULL</a>, 1,
00522                             1, 1, 3);
00523 
00524                     <span class="keywordflow">if</span>(k==4)
00525                         mode_dept_graph4.<a class="code" href="classGraphNonFinancialMonth.html#a2">init</a>(
00526                             x, y,
00527                             x+<a class="code" href="Odept__if_8cpp.html#a137a77">MODE_DEPT_GRAPH_WIDTH</a>, y+<a class="code" href="Odept__if_8cpp.html#a137a78">MODE_DEPT_GRAPH_HEIGHT</a>,
00528                             1, &amp;numSeriesData36, dataArray4,
00529                             0,
00530                             <a class="code" href="OHELP_8H.html#a0">NULL</a>, <a class="code" href="OHELP_8H.html#a0">NULL</a>, <a class="code" href="OHELP_8H.html#a0">NULL</a>, 1, 1, 1, 3);
00531 
00532                     <span class="keywordflow">if</span>(k==5)
00533                         mode_dept_graph5.<a class="code" href="classGraphNonFinancialYear.html#a2">init</a>(
00534                             x, y,
00535                             x+<a class="code" href="Odept__if_8cpp.html#a137a77">MODE_DEPT_GRAPH_WIDTH</a>, y+<a class="code" href="Odept__if_8cpp.html#a137a78">MODE_DEPT_GRAPH_HEIGHT</a>,
00536                             1, &amp;numSeriesData8, dataArray5,
00537                             0,
00538                             <a class="code" href="OHELP_8H.html#a0">NULL</a>, <a class="code" href="OHELP_8H.html#a0">NULL</a>, <a class="code" href="OHELP_8H.html#a0">NULL</a>, 1, 1, 1, 3);
00539 
00540                 }
00541             report_init_flag = 1;
00542         }
00543 
00544         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=0;k&lt;3;k++) {
00545             mode_dept_button_up_bitmap[k+12] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00546             mode_dept_button_down_bitmap[k+12] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00547         }
00548 
00549         user_interface.create_button_bitmap(
00550             100,<a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>-10,
00551             250,<a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>-10+<a class="code" href="Odept__if_8cpp.html#a136a74">BUTTON_HEIGHT</a>,
00552             <span class="stringliteral">"Institution"</span>, &amp;mode_dept_button_up_bitmap[12],
00553             &amp;mode_dept_button_down_bitmap[12], &amp;vga_back);
00554 
00555         mode_dept_button[12].<a class="code" href="classButton.html#a16">create_bitmapW</a>(
00556             100,<a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>-10,
00557             250,<a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>-10+<a class="code" href="Odept__if_8cpp.html#a136a74">BUTTON_HEIGHT</a>,
00558             mode_dept_button_down_bitmap[12]+4);
00559 
00560         user_interface.create_button_bitmap(
00561             330,<a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>-10,
00562             480,<a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>-10+<a class="code" href="Odept__if_8cpp.html#a136a74">BUTTON_HEIGHT</a>,
00563             <span class="stringliteral">"Department"</span>, &amp;mode_dept_button_up_bitmap[13],
00564             &amp;mode_dept_button_down_bitmap[13], &amp;vga_back);
00565 
00566         mode_dept_button[13].<a class="code" href="classButton.html#a16">create_bitmapW</a>(
00567             330,<a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>-10,
00568             480,<a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>-10+<a class="code" href="Odept__if_8cpp.html#a136a74">BUTTON_HEIGHT</a>,
00569             mode_dept_button_down_bitmap[13]+4);
00570 
00571         user_interface.create_button_bitmap(
00572             550,<a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>-10,
00573             700,<a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>-10+<a class="code" href="Odept__if_8cpp.html#a136a74">BUTTON_HEIGHT</a>,
00574             <span class="stringliteral">"Rank by department"</span>, &amp;mode_dept_button_up_bitmap[14],
00575             &amp;mode_dept_button_down_bitmap[14], &amp;vga_back);
00576 
00577         mode_dept_button[14].<a class="code" href="classButton.html#a16">create_bitmapW</a>(
00578             550,<a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>-10,
00579             700,<a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>-10+<a class="code" href="Odept__if_8cpp.html#a136a74">BUTTON_HEIGHT</a>,
00580             mode_dept_button_down_bitmap[14]+4);
00581 
00582         <span class="keywordflow">for</span>(k=12;k&lt;15;k++) {
00583             mode_dept_button[k].<a class="code" href="classButton.html#a20">paint</a>();
00584         }
00585 
00586         mode_dept_button[department_array.current_data_mode+12].body_ptr=(<span class="keywordtype">void</span>*)(mode_dept_button_down_bitmap[department_array.current_data_mode+12]+4);
00587         mode_dept_button[department_array.current_data_mode+12].push();
00588 
00589         mode_dept_graph0.<a class="code" href="classGraphNonFinancialTrimester.html#a8">paint</a>();
00590         mode_dept_graph1.<a class="code" href="classGraphNonFinancialYear.html#a8">paint</a>();
00591         mode_dept_graph2.<a class="code" href="classGraphNonFinancialTrimester.html#a8">paint</a>();
00592         mode_dept_graph3.<a class="code" href="classGraphNonFinancialMonth.html#a8">paint</a>();
00593         mode_dept_graph4.<a class="code" href="classGraphNonFinancialMonth.html#a8">paint</a>();
00594         mode_dept_graph5.<a class="code" href="classGraphNonFinancialYear.html#a8">paint</a>();
00595     }
00596     <span class="keywordflow">else</span> {
00597         <span class="comment">//----repaint---///</span>
00598         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=0;k&lt;15;k++) {
00599             <span class="comment">//------------- paint the background ----------------//</span>
00600 
00601             <span class="comment">//## chea 200999 get rid of the "rank" and  "detail"</span>
00602             <span class="comment">/*</span>
00603 <span class="comment">              if((k&gt;=2)&amp;&amp;(k&lt;=5))continue;</span>
00604 <span class="comment">              if(department_array.current_data_mode==MODE_DEPARTMENT)</span>
00605 <span class="comment">              mode_dept_button[k].paint();</span>
00606 <span class="comment">              else</span>
00607 <span class="comment">              {</span>
00608 <span class="comment"></span>
00609 <span class="comment">              vga.blt_buf(</span>
00610 <span class="comment">              mode_dept_button[0].x1,</span>
00611 <span class="comment">              mode_dept_button[0].y1,</span>
00612 <span class="comment">              mode_dept_button[0].x2,</span>
00613 <span class="comment">              mode_dept_button[0].y2+5,0);</span>
00614 <span class="comment">              vga.blt_buf(</span>
00615 <span class="comment">              mode_dept_button[1].x1,</span>
00616 <span class="comment">              mode_dept_button[1].y1,</span>
00617 <span class="comment">              mode_dept_button[1].x2,</span>
00618 <span class="comment">              mode_dept_button[1].y2+5,0);</span>
00619 <span class="comment"></span>
00620 <span class="comment">              }</span>
00621 <span class="comment">            */</span>
00622         }
00623 
00624         mode_dept_button[department_array.current_data_mode+12].body_ptr=(<span class="keywordtype">void</span>*)(mode_dept_button_down_bitmap[department_array.current_data_mode+12]+4);
00625         mode_dept_button[department_array.current_data_mode+12].push();
00626 
00627         mode_dept_graph0.<a class="code" href="classGraphNonFinancialTrimester.html#a9">refresh</a>();
00628         mode_dept_graph1.<a class="code" href="classGraphNonFinancialYear.html#a9">refresh</a>();
00629         mode_dept_graph2.<a class="code" href="classGraphNonFinancialTrimester.html#a9">refresh</a>();
00630         mode_dept_graph3.<a class="code" href="classGraphNonFinancialMonth.html#a9">refresh</a>();
00631         mode_dept_graph4.<a class="code" href="classGraphNonFinancialMonth.html#a9">refresh</a>();
00632         mode_dept_graph5.<a class="code" href="classGraphNonFinancialYear.html#a9">refresh</a>();
00633     }
00634     <span class="comment">//---------------//</span>
00635     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> y = <a class="code" href="Odept__if_8cpp.html#a137a83">MODE_DEPT_VTAB1</a>+<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+15,i=0,k=0;i&lt;2;i++,y+=<a class="code" href="Odept__if_8cpp.html#a136a76">BUTTON_VDIST</a>) {
00636         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> x = <a class="code" href="Odept__if_8cpp.html#a137a79">MODE_DEPT_TAB0</a>+<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>,j=0;j&lt;3;j++,x+=<a class="code" href="Odept__if_8cpp.html#a136a75">BUTTON_DIST</a>,k++) {
00637             <span class="keywordtype">char</span>* str = mode_dept_str[k];
00638 
00639             <span class="comment">// k==1 is Prestige display</span>
00640             <span class="keywordflow">if</span>( k==1 &amp;&amp; department_array.current_data_mode==<a class="code" href="Odept__if_8cpp.html#a138a86">MODE_INSTITUTION</a> )
00641                 str = <span class="stringliteral">"Institutional prestige"</span>;
00642 
00643             font_chartsm.center_put(x,y-<a class="code" href="Odept__if_8cpp.html#a136a74">BUTTON_HEIGHT</a>+7,x+<a class="code" href="Odept__if_8cpp.html#a137a77">MODE_DEPT_GRAPH_WIDTH</a>,y-<a class="code" href="Odept__if_8cpp.html#a136a74">BUTTON_HEIGHT</a>+23,str);
00644         }
00645     }
00646 
00647     vga.blt_buf(<a class="code" href="Oworldmt_8h.html#a12">ZOOM_X1</a>, <a class="code" href="Oworldmt_8h.html#a13">ZOOM_Y1</a>, <a class="code" href="Oworldmt_8h.html#a14">ZOOM_X2</a>, <a class="code" href="Oworldmt_8h.html#a15">ZOOM_Y2</a>);
00648 
00649     <span class="comment">//------- blt the back buffer to front buffer -------//</span>
00650     vga.use_front();
00651 }
00652 
00653 <span class="comment">//</span>
00654 <span class="comment">//-------- End of function Department::main_report ---------//</span>
00655 
00656 <span class="comment">//-------- Begin of function dept_rep_detect ---------//</span>
00658 <span class="comment">int detect_main() {</span>
00659     vga.use_back();
00660 
00661     <span class="keywordtype">int</span> rc = detect_main2();
00662 
00663     vga.use_front();
00664 
00665     <span class="keywordflow">return</span> rc;
00666 }
00667 
00668 <span class="comment">//</span>
00669 <span class="comment">//-------- End of function dept_rep_detect ---------//</span>
00670 
00671 <span class="comment">//-------- Begin of function dept_rep_detect2 ---------//</span>
00673 <span class="comment">int detect_main2() {</span>
00674     vga.use_front();
00675 
00676     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=0;k&lt;15;k++) {
00677         <span class="comment">//              if(k&gt;=2&amp;&amp;k&lt;=5)continue;    //## chea 200999 org.</span>
00678         <span class="keywordflow">if</span>(k&gt;=2&amp;&amp;k&lt;=11)<span class="keywordflow">continue</span>;                      <span class="comment">//## chea 200999 get rid of the "rank" and  "detail"</span>
00679 
00680         <span class="comment">//## chea 200999 get rid of the "rank" and  datail</span>
00681         <span class="keywordflow">if</span>(department_array.current_data_mode != <a class="code" href="Odept__if_8cpp.html#a138a87">MODE_DEPARTMENT</a> &amp;&amp; (k&gt;=0 &amp;&amp; k&lt;=1))<span class="keywordflow">continue</span>;
00682 
00683         <span class="keywordflow">if</span>(mode_dept_button[k].<a class="code" href="classButton.html#a21">detect</a>()) {
00684 
00685             mode_dept_button[k].<a class="code" href="classButton.html#m12">body_ptr</a>=(<span class="keywordtype">void</span>*)(mode_dept_button_down_bitmap[k]+4);
00686             mode_dept_button[k].<a class="code" href="classButton.html#a24">push</a>();
00687 
00688             (*deinit_func_ptr[department_array.current_screen_mode])();
00689 
00690             <span class="keywordflow">if</span>((k&gt;=0)&amp;&amp;(k&lt;2)) {
00691                 department_array.current_screen_mode=k+1;
00692                 department_array.current_pref_report_type=k+1;
00693             }
00694 
00695             <span class="keywordflow">if</span>((k&gt;=6)&amp;&amp;(k&lt;12)) {
00696                 department_array.current_screen_mode=<a class="code" href="Odept__if_8cpp.html#a139a97">MODE_DEPT_RANK</a>;
00697                 department_array.current_pref_report_type=k-5;
00698             }
00699             <span class="keywordflow">if</span>(k==12||k==13) {
00700                 department_array.current_screen_mode=<a class="code" href="Odept__if_8cpp.html#a139a89">MODE_DEPT_MAIN</a>;
00701                 department_array.current_data_mode=k-12;
00702             }
00703 
00704             <span class="keywordflow">if</span>(k==14) {
00705                 department_array.current_screen_mode=<a class="code" href="Odept__if_8cpp.html#a139a97">MODE_DEPT_RANK</a>;
00706                 department_array.current_pref_report_type=1;
00707 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00708 <span class="preprocessor"></span>                sys.is_institution_report = 1;
00709 <span class="preprocessor">#endif</span>
00710 <span class="preprocessor"></span>            }
00711 
00712             sys.redraw_all_flag = 1;
00713             <span class="keywordflow">return</span> 1;
00714         }
00715     }
00716     <span class="keywordflow">return</span> 0;
00717 }
00718 
00719 <span class="comment">//</span>
00720 <span class="comment">//-------- End of function dept_rep_detect2 ---------//</span>
00721 
<a name="l00723"></a><a class="code" href="Odept__if_8cpp.html#a0">00723</a> <span class="preprocessor">#define REC_HEIGHT 20</span>
<a name="l00724"></a><a class="code" href="Odept__if_8cpp.html#a1">00724</a> <span class="preprocessor"></span><span class="preprocessor">#define REC_COUNT 15</span>
<a name="l00725"></a><a class="code" href="Odept__if_8cpp.html#a2">00725</a> <span class="preprocessor"></span><span class="preprocessor">#define SHEET_COLOR Vga::active_buf-&gt;color_down</span>
00726 <span class="preprocessor"></span>
00727 <span class="keyword">static</span> <a class="code" href="classButton.html">Button</a> eq_button_para,button_back;
00728 <span class="keyword">static</span> <a class="code" href="classGraphPerformanceIndicatorTrimester.html">GraphPerformanceIndicatorTrimester</a> eq_graphiconA;
00729 <span class="keyword">static</span> <a class="code" href="classGraphPerformanceIndicatorTrimester.html">GraphPerformanceIndicatorTrimester</a> eq_graphicon[<a class="code" href="Odept_8h.html#a17a2">EDUCATIONAL_QUALITY_VAR_COUNT</a>];
00730 <span class="keyword">static</span> <a class="code" href="classText.html">Text</a> eq_text[<a class="code" href="Odept_8h.html#a17a2">EDUCATIONAL_QUALITY_VAR_COUNT</a>],eq_textA;
00731 <span class="keyword">static</span> <a class="code" href="classText.html">Text</a> eq_text2[<a class="code" href="Odept_8h.html#a17a2">EDUCATIONAL_QUALITY_VAR_COUNT</a>];
00732 <span class="keyword">static</span> <a class="code" href="classText.html">Text</a> eq_text_chg[<a class="code" href="Odept_8h.html#a17a2">EDUCATIONAL_QUALITY_VAR_COUNT</a>],eq_text_chgA;
00733 
00734 <span class="keyword">static</span> <a class="code" href="classGraphPerformanceIndicatorYear.html">GraphPerformanceIndicatorYear</a> as_graphiconA;
00735 <span class="keyword">static</span> <a class="code" href="classGraphPerformanceIndicatorYear.html">GraphPerformanceIndicatorYear</a> as_graphicon[<a class="code" href="Odept_8h.html#a17a3">ACADEMIC_STANDING_VAR_COUNT</a>];
00736 <span class="keyword">static</span> <a class="code" href="classText.html">Text</a> da_text[<a class="code" href="Odept_8h.html#a17a3">ACADEMIC_STANDING_VAR_COUNT</a>],da_textA;
00737 <span class="keyword">static</span> <a class="code" href="classText.html">Text</a> da_text2[<a class="code" href="Odept_8h.html#a17a3">ACADEMIC_STANDING_VAR_COUNT</a>];
00738 <span class="keyword">static</span> <a class="code" href="classText.html">Text</a> da_text_chg[<a class="code" href="Odept_8h.html#a17a3">ACADEMIC_STANDING_VAR_COUNT</a>],da_text_chgA;
00739 
00740 <span class="keyword">static</span> <a class="code" href="classGraphPerformanceIndicatorTrimester.html">GraphPerformanceIndicatorTrimester</a> sm_graphiconA;
00741 <span class="keyword">static</span> <a class="code" href="classGraphPerformanceIndicatorTrimester.html">GraphPerformanceIndicatorTrimester</a> sm_graphicon[4];
00742 <span class="keyword">static</span> <a class="code" href="classText.html">Text</a> sm_text[4],sm_textA;
00743 <span class="keyword">static</span> <a class="code" href="classText.html">Text</a> sm_text_chg[4],sm_text_chgA;
00744 
00745 <span class="keyword">static</span> <a class="code" href="classGraphPerformanceIndicatorMonth.html">GraphPerformanceIndicatorMonth</a> fp_graphiconA;
00746 <span class="keyword">static</span> <a class="code" href="classGraphPerformanceIndicatorMonth.html">GraphPerformanceIndicatorMonth</a> fp_graphicon;
00747 <span class="keyword">static</span> <a class="code" href="classText.html">Text</a> fp_text,fp_textA;
00748 <span class="keyword">static</span> <a class="code" href="classText.html">Text</a> fp_text_chg,fp_text_chgA;
00749 
00750 <span class="keyword">static</span> <a class="code" href="classGraphPerformanceIndicatorMonth.html">GraphPerformanceIndicatorMonth</a> fm_graphiconA;
00751 <span class="keyword">static</span> <a class="code" href="classGraphPerformanceIndicatorMonth.html">GraphPerformanceIndicatorMonth</a> fm_graphicon;
00752 <span class="keyword">static</span> <a class="code" href="classText.html">Text</a> fm_text,fm_textA;
00753 <span class="keyword">static</span> <a class="code" href="classText.html">Text</a> fm_text_chg,fm_text_chgA;
00754 
00755 <span class="keyword">static</span> <a class="code" href="classGraphPerformanceIndicatorYear.html">GraphPerformanceIndicatorYear</a> di_graphiconA;
00756 <span class="keyword">static</span> <a class="code" href="classGraphPerformanceIndicatorYear.html">GraphPerformanceIndicatorYear</a> di_graphicon;
00757 <span class="keyword">static</span> <a class="code" href="classText.html">Text</a> di_text,di_textA;
00758 <span class="keyword">static</span> <a class="code" href="classText.html">Text</a> di_text_chg,di_text_chgA;
00759 
00760 <span class="keyword">static</span> <a class="code" href="classVBrowse98.html">VBrowse98</a>  eq_browser;
00761 <span class="keyword">static</span> <a class="code" href="classVBrowse98.html">VBrowse98</a>  rk_browser;
00762 
00764 
00765 <span class="comment">//-------- Begin of functions report/detect/deinit educational_quality ---------//</span>
00767 <span class="comment">static char* educational_quality_label[]= {</span>
00768     <span class="stringliteral">"Faculty teaching performance rating"</span>,
00769     <span class="stringliteral">"Faculty educational development time (hours per week)"</span>,
00770     <span class="stringliteral">"Faculty scholarship performance"</span>,
00771     <span class="stringliteral">"Faculty research performance"</span>,
00772     <span class="stringliteral">"Use of information technology in teaching"</span>,
00773     <span class="stringliteral">"Deviation of class size from its norm"</span>,
00774     <span class="stringliteral">"Deviation of teaching method mix from its norm"</span>,
00775 };
00776 
00777 <span class="keywordtype">void</span> report_educational_quality(<span class="keywordtype">int</span> refreshFlag) {
00778 
00779     <span class="keyword">const</span> <span class="keyword">static</span> tab1=30,tab2=320,tab3=420,tab4=490;
00780     <span class="keyword">const</span> <span class="keyword">static</span> tab5=620,tab6=680,tab7=660,tab8=760;
00781     <span class="keyword">const</span> <span class="keyword">static</span> vtab1=32,vtab2=47,vtab3=210,vtab4=360,vtab5=320;
00782     <span class="keyword">static</span> <span class="keywordtype">float</span> v[<a class="code" href="Odept_8h.html#a17a2">EDUCATIONAL_QUALITY_VAR_COUNT</a>];
00783     <span class="keyword">static</span> <span class="keywordtype">float</span> v2[<a class="code" href="Odept_8h.html#a17a2">EDUCATIONAL_QUALITY_VAR_COUNT</a>];
00784     <span class="keyword">static</span> <span class="keywordtype">float</span> v3[<a class="code" href="Odept_8h.html#a17a2">EDUCATIONAL_QUALITY_VAR_COUNT</a>];
00785     <span class="keyword">static</span> <span class="keywordtype">int</span> data_num=HISTORY_TRIMESTER_COUNT;
00786     <span class="keyword">static</span> <span class="keywordtype">float</span> * dataArray[<a class="code" href="Odept_8h.html#a17a2">EDUCATIONAL_QUALITY_VAR_COUNT</a>];
00787     <span class="keyword">static</span> <span class="keywordtype">float</span> * dataArrayA;
00788     <span class="keyword">static</span> <span class="keywordtype">float</span> eq_chg;
00789 
00790     <span class="comment">//-----communication with sim engine's Output-----//</span>
00791     <span class="keywordtype">int</span> deptRecno = department_array.selected_recno;
00792     <a class="code" href="classDepartment.html">Department</a>* cur_dept_ptr = department_array[deptRecno];
00793 
00794     <span class="keywordflow">if</span>(department_array.current_data_mode==<a class="code" href="Odept__if_8cpp.html#a138a87">MODE_DEPARTMENT</a>) {
00795         sys.is_institution_report=0;
00796         dataArrayA=cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#m52">p_educational_quality_history</a>;
00797         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;<a class="code" href="Odept_8h.html#a17a2">EDUCATIONAL_QUALITY_VAR_COUNT</a>;i++) {
00798             dataArray[i]=cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#m58">var_educational_quality_history</a>[i];
00799             v[i]=dataArray[i][data_num-1];
00800             v3[i]=cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#p0">var_educational_quality_weight</a>[i]*100;
00801             v2[i]=cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#m61">var_change_educational_quality</a>[i];
00802         }
00803     }
00804     <span class="keywordflow">else</span> {
00805         sys.is_institution_report=1;
00806         dataArrayA=department_array.<a class="code" href="classDepartment.html#m52">p_educational_quality_history</a>;
00807         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;<a class="code" href="Odept_8h.html#a17a2">EDUCATIONAL_QUALITY_VAR_COUNT</a>;i++) {
00808             <span class="comment">// BUGHERE -- wait for Fred's preparation</span>
00809             <span class="comment">//                  dataArray[i]=department_array.var_educational_quality_history[i];</span>
00810             dataArray[i]=cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#m58">var_educational_quality_history</a>[i];
00811             <span class="comment">//                  v[i]=(float)i;</span>
00812             v[i]=dataArray[i][data_num-1];
00813             v3[i]=cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#p0">var_educational_quality_weight</a>[i]*100;
00814             v2[i]=cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#m61">var_change_educational_quality</a>[i];
00815         }
00816     }
00817 
00818     <span class="keywordflow">if</span>(info.graph_trimester_passed&gt;1) {
00819         eq_chg=(float)(100.0*((double)dataArrayA[data_num-1]-dataArrayA[data_num-2])/dataArrayA[data_num-2]);
00820         <span class="keywordflow">if</span>((eq_chg&lt;0.0)&amp;&amp;(eq_chg&gt;-0.01))
00821             eq_chg=0.0;
00822     }
00823     <span class="keywordflow">else</span>
00824         eq_chg=0.0;
00825 
00826     vga.use_back();
00827     <span class="keywordflow">if</span> (refreshFlag == <a class="code" href="Gamedef_8h.html#a71a16">INFO_REPAINT</a>) {
00828         <span class="comment">//------------- paint the background ----------------//</span>
00829         user_interface.bg_img(<a class="code" href="Odept__if_8cpp.html#a134a68">BG_PIC_ID</a>, &amp;vga_back);
00830         user_interface.brighten(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+100,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>-25,<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+630,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>);
00831         user_interface.rect(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+100,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>-25,<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+630,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>,1);
00832         font_charts.put(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+270,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>-19,<span class="stringliteral">"Departmental Performance"</span>);
00833         user_interface.brighten(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1-30,<a class="code" href="Odept__if_8cpp.html#a135a71">REPORT_X2</a>,<a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>-10);
00834         user_interface.rect(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1-30,<a class="code" href="Odept__if_8cpp.html#a135a71">REPORT_X2</a>,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1-10);
00835         user_interface.rect(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1-10,<a class="code" href="Odept__if_8cpp.html#a135a71">REPORT_X2</a>,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1+30);
00836         user_interface.rect( <a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1+30,<a class="code" href="Odept__if_8cpp.html#a135a71">REPORT_X2</a>,<a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>-10);
00837 
00838         <span class="comment">//--------------Initialize buttons-------------------//</span>
00839         button_back.<a class="code" href="classButton.html#a10">create_text</a>( <a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab1+250,
00840                                  <a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>-1, <a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab1+440, <a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>+19, <span class="stringliteral">"Back"</span> );
00841         <span class="comment">//              button_back.set_key( 'B' );</span>
00842 
00843         <span class="comment">//--------------Initialize eq_graph-------------------//</span>
00844         eq_graphiconA.<a class="code" href="classGraphPerformanceIndicatorTrimester.html#a2">init</a>(
00845             <a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab5-5,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1-8,
00846             <a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab6+5,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1+28,
00847             1 ,&amp;data_num ,dataArrayA, 1, 0, 3);
00848 
00849         eq_textA.<a class="code" href="classText.html#a17">right_put</a>(
00850             <a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab2+80,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1+5,&amp;(dataArrayA[data_num-1]),4);
00851 
00852         eq_text_chgA.<a class="code" href="classText.html#a17">right_put</a>(
00853             <a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab4+85,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1+5,
00854             eq_chg,4);
00855 
00856         font_chartsm.put(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab1,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1+5,<span class="stringliteral">"E d u c a t i o n a l   q u a l i t y"</span>);
00857 
00858         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;<a class="code" href="Odept_8h.html#a17a2">EDUCATIONAL_QUALITY_VAR_COUNT</a>;i++) {
00859             eq_graphicon[i].<a class="code" href="classGraphPerformanceIndicatorTrimester.html#a2">init</a>(
00860                 <a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab5,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1+i*42+40,
00861                 <a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab6,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1+i*42+68,
00862                 1 ,&amp;data_num ,dataArray[i], 1, 0, 3);
00863         }
00864 
00865         <span class="keywordflow">for</span>(i=0;i&lt;<a class="code" href="Odept_8h.html#a17a2">EDUCATIONAL_QUALITY_VAR_COUNT</a>;i++) {
00866 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00867 <span class="preprocessor"></span>            font_chart_purple_sm.right_put( <a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab2+50, <a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1+i*42+50, m.format(cur_dept_ptr-&gt;initial_education_equality[i],4) );
00868 <span class="preprocessor">#endif</span>
00869 <span class="preprocessor"></span>
00870             <span class="keywordflow">if</span>(i==0||i&gt;1&amp;&amp;i&lt;5)
00871                 eq_text[i].<a class="code" href="classText.html#a17">right_put</a>(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab2+80,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1+i*42+50,v+i,4);
00872             <span class="keywordflow">else</span>
00873                 eq_text[i].<a class="code" href="classText.html#a17">right_put</a>(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab2+80,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1+i*42+50,v+i,4);
00874 
00875             eq_text2[i].<a class="code" href="classText.html#a17">right_put</a>(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab3+55,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1+i*42+50,v3+i,3);
00876             eq_text_chg[i].<a class="code" href="classText.html#a17">right_put</a>(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab4+85,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1+i*42+50,v2+i,4);
00877 
00878             help_button_array[i].<a class="code" href="classButton.html#a10">create_text</a>(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab1-21,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab2+i*42+30,<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab1-7,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab2+i*42+44,<span class="stringliteral">"?"</span>);
00879             image_interface.put_back(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab1-21,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab2+i*42+30,<span class="stringliteral">"QUEST_UP"</span>);
00880         }
00881 
00882         <span class="comment">//-------------- Show Text --------------//</span>
00883         <span class="comment">//              font_chartsm.put(REPORT_X1+tab1,REPORT_Y1+vtab1-27,"Contributing factors");</span>
00884         font_chartsm.put(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab2+15,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1-25,<span class="stringliteral">"Current value"</span>);
00885         font_chartsm.put(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab3+15,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1-25,<span class="stringliteral">"Weight"</span>);
00886         font_chartsm.put(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab4+5,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1-25,<span class="stringliteral">"Last trimester change"</span>);
00887         font_chartsm.put(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab5+20,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1-25,<span class="stringliteral">"Trend"</span>);
00888 
00889         <span class="keywordflow">for</span>(i=0;i&lt;<a class="code" href="Odept_8h.html#a17a2">EDUCATIONAL_QUALITY_VAR_COUNT</a>;i++) {
00890             font_chartsm.put_paragraph(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab1+5,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1+i*42+49,<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab2+30,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1+i*42+94,educational_quality_label[i]);
00891         }
00892         eq_graphiconA.<a class="code" href="classGraphPerformanceIndicatorTrimester.html#a8">paint</a>();
00893         eq_textA.<a class="code" href="classText.html#a24">paint</a>();
00894 
00895         <span class="keywordflow">for</span>(i=0;i&lt;<a class="code" href="Odept_8h.html#a17a2">EDUCATIONAL_QUALITY_VAR_COUNT</a>;i++) {
00896             eq_graphicon[i].<a class="code" href="classGraphPerformanceIndicatorTrimester.html#a8">paint</a>();
00897             eq_text[i].<a class="code" href="classText.html#a24">paint</a>();
00898             eq_text2[i].<a class="code" href="classText.html#a24">paint</a>();
00899             eq_text_chg[i].<a class="code" href="classText.html#a24">paint</a>();
00900         }
00901     }
00902     <span class="keywordflow">else</span> {
00903         eq_graphiconA.<a class="code" href="classGraphPerformanceIndicatorTrimester.html#a9">refresh</a>();
00904         eq_textA.<a class="code" href="classText.html#a25">refresh</a>();
00905         eq_text_chgA.<a class="code" href="classText.html#a25">refresh</a>();
00906         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;<a class="code" href="Odept_8h.html#a17a2">EDUCATIONAL_QUALITY_VAR_COUNT</a>;i++) {
00907             eq_graphicon[i].<a class="code" href="classGraphPerformanceIndicatorTrimester.html#a9">refresh</a>();
00908             eq_text[i].<a class="code" href="classText.html#a25">refresh</a>();
00909             eq_text_chg[i].<a class="code" href="classText.html#a25">refresh</a>();
00910         }
00911     }
00912 
00913     button_back.<a class="code" href="classButton.html#a20">paint</a>();
00914 
00915     vga.blt_buf(<a class="code" href="Oworldmt_8h.html#a12">ZOOM_X1</a>, <a class="code" href="Oworldmt_8h.html#a13">ZOOM_Y1</a>, <a class="code" href="Oworldmt_8h.html#a14">ZOOM_X2</a>, <a class="code" href="Oworldmt_8h.html#a15">ZOOM_Y2</a>);
00916     vga.use_front();
00917 };
00918 
00919 <span class="keywordtype">int</span> detect_educational_quality() {
00920     <span class="keyword">const</span> <span class="keyword">static</span> tab1=30,tab2=320,tab3=420,tab4=490;
00921     <span class="keyword">const</span> <span class="keyword">static</span> tab5=620,tab6=680,tab7=660,tab8=760;
00922     <span class="keyword">const</span> <span class="keyword">static</span> vtab1=22,vtab2=37,vtab3=200,vtab4=350,vtab5=320;
00923     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;<a class="code" href="Odept_8h.html#a17a2">EDUCATIONAL_QUALITY_VAR_COUNT</a>;i++) {
00924         <span class="keywordflow">if</span>(help_button_array[i].<a class="code" href="classButton.html#a21">detect</a>()) {
00925             <span class="comment">// ## begin chwg1022  create the global ResTxt help_resource later //</span>
00926             <a class="code" href="classString.html">String</a> str;
00927             str  = <a class="code" href="Gamedef_8h.html#a4">DIR_RES</a>;
00928             str += <span class="stringliteral">"SCORE"</span>;
00929 
00930             <a class="code" href="classResTxt.html">ResTxt</a> rs;
00931             rs.<a class="code" href="classResTxt.html#a2">init</a>(str);
00932             <span class="comment">// ## chwg1022 end ////////////////////////</span>
00933 
00934             image_interface.put_back(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab1-21,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab2+i*42+40,<span class="stringliteral">"QUEST_DN"</span>);
00935             vga.blt_buf(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab1-21,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab2+i*42+40,<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab1-3,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab2+i*42+58);
00936             sys.back_view_mode=sys.view_mode;
00937             help_if.help_textlist.topic_id=rs.<a class="code" href="classResTxt.html#a7">locate_topic</a>(educational_quality_label[i]);
00938             <span class="keywordflow">if</span>(help_if.help_textlist.topic_id&gt;0) {
00939                 help_if.help_textlist.add_history(help_if.help_textlist.topic_id);
00940                 sys.set_view_mode(<a class="code" href="Osys_8h.html#a45a31">MODE_HELP_DESC</a>);
00941                 sys.redraw_all_flag = 1;
00942                 audio.play_wav(<span class="stringliteral">"BEEPS-1"</span>,audio.int_to_DsVolume(config.sound_effect_volume));
00943             }
00944             <span class="keywordflow">return</span> 1;
00945 
00946         }
00947     }
00948 
00949     <span class="keywordflow">if</span>(button_back.<a class="code" href="classButton.html#a21">detect</a>()) {
00950         (*deinit_func_ptr[department_array.current_screen_mode])();
00951         <span class="comment">//-------- post display redraw flag -------//</span>
00952         sys.redraw_all_flag = 1;
00953         department_array.current_screen_mode=<a class="code" href="Odept__if_8cpp.html#a139a89">MODE_DEPT_MAIN</a>;
00954         <span class="keywordflow">return</span> 1;
00955     }
00956     <span class="keywordflow">return</span> 0;
00957 };
00958 
00959 <span class="keywordtype">void</span> deinit_educational_quality() {
00960     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;<a class="code" href="Odept_8h.html#a17a2">EDUCATIONAL_QUALITY_VAR_COUNT</a>;i++)
00961         eq_graphicon[i].<a class="code" href="classGraphPerformanceIndicatorTrimester.html#a7">deinit</a>();
00962     eq_graphiconA.<a class="code" href="classGraphPerformanceIndicatorTrimester.html#a7">deinit</a>();
00963     eq_textA.<a class="code" href="classText.html#a26">deinit</a>();
00964     eq_text_chgA.<a class="code" href="classText.html#a26">deinit</a>();
00965     <span class="keywordflow">for</span>(i=0;i&lt;<a class="code" href="Odept_8h.html#a17a2">EDUCATIONAL_QUALITY_VAR_COUNT</a>;i++) {
00966         eq_text[i].<a class="code" href="classText.html#a26">deinit</a>();
00967         eq_text2[i].<a class="code" href="classText.html#a26">deinit</a>();
00968         eq_text_chg[i].<a class="code" href="classText.html#a26">deinit</a>();
00969         <span class="comment">// ##### begin Gilbert 28/04/2001 ######//</span>
00970         help_button_array[i].<a class="code" href="classButton.html#a2">deinit</a>();
00971         <span class="comment">// ##### end Gilbert 28/04/2001 ######//</span>
00972     }
00973     <span class="comment">// ##### begin Gilbert 28/04/2001 ######//</span>
00974     button_back.<a class="code" href="classButton.html#a2">deinit</a>();
00975     <span class="comment">// ##### end Gilbert 28/04/2001 ######//</span>
00976 };
00977 <span class="comment">//</span>
00978 <span class="comment">//-------- End of functions report/detect/deinit educational_quality ---------//</span>
00979 
00980 <span class="comment">//-------- Begin of functions report/detect/deinit educational_quality2 page 2---------//</span>
00982 <span class="comment"></span>
00983 <span class="keywordtype">void</span> report_educational_quality2(<span class="keywordtype">int</span> refreshFlag) {
00984     <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">int</span> tab1=10;
00985     <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">int</span> tab2=600;
00986     <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">int</span> tab3=650;
00987     <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">int</span> tab4=700;
00988     <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">int</span> vtab1=-20;
00989     <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">int</span> vtab2=200;
00990     <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">int</span> vtab3=225;
00991     <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">int</span> vtab4=360;
00992     <span class="keywordtype">int</span> report_recno=1;
00993     <span class="keyword">static</span> <span class="keywordtype">int</span> reccount=<a class="code" href="Odept__if_8cpp.html#a1">REC_COUNT</a>;
00994     vga.use_back();
00995     <span class="keywordflow">if</span> (refreshFlag == <a class="code" href="Gamedef_8h.html#a71a16">INFO_REPAINT</a>) {
00996         <span class="comment">//------------- paint the background ----------------//</span>
00997         user_interface.bg_img(<a class="code" href="Odept__if_8cpp.html#a134a68">BG_PIC_ID</a>, &amp;vga_back);
00998         user_interface.rect(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1,<a class="code" href="Odept__if_8cpp.html#a135a71">REPORT_X2</a>,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab4);
00999         user_interface.brighten(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1,<a class="code" href="Odept__if_8cpp.html#a135a71">REPORT_X2</a>,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab4);
01000 
01001         <span class="comment">//--------------Initialize buttons-------------------//</span>
01002         eq_button_para.<a class="code" href="classButton.html#a10">create_text</a>( <a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab1+200,
01003                                     <a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>+2, <a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab1+350, <a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>+22, <span class="stringliteral">"Variables"</span> );
01004         <span class="comment">//              eq_button_para.set_key( 'V' );</span>
01005 
01006         button_back.<a class="code" href="classButton.html#a10">create_text</a>( <a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab1+450,
01007                                  <a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>+2, <a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab1+500, <a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>+22, <span class="stringliteral">"Back"</span> );
01008 
01009         <span class="comment">//              button_back.set_key( 'B' );</span>
01010 
01011         <span class="comment">//--------------Initialize Vbroswer-------------------//</span>
01012         eq_browser.<a class="code" href="classVBrowse98.html#a2">init</a>(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1,<a class="code" href="Odept__if_8cpp.html#a135a71">REPORT_X2</a>,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab4,
01013                         0, <a class="code" href="Odept__if_8cpp.html#a0">REC_HEIGHT</a>, reccount, eq_disp_rep_row,<a class="code" href="OHELP_8H.html#a0">NULL</a>,0);
01014         eq_browser.<a class="code" href="classVBrowse98.html#a4">open</a>(report_recno);
01015 
01016         <span class="comment">//-------------- Show Text --------------//</span>
01017     }
01018     <span class="keywordflow">else</span> {
01019     }
01020 
01021     report_recno=eq_browser.<a class="code" href="classVBrowse98.html#a6">recno</a>();
01022 
01023     vga.use_back();
01024     eq_button_para.<a class="code" href="classButton.html#a20">paint</a>();
01025     button_back.<a class="code" href="classButton.html#a20">paint</a>();
01026 
01027     vga.blt_buf(<a class="code" href="Oworldmt_8h.html#a12">ZOOM_X1</a>, <a class="code" href="Oworldmt_8h.html#a13">ZOOM_Y1</a>, <a class="code" href="Oworldmt_8h.html#a14">ZOOM_X2</a>, <a class="code" href="Oworldmt_8h.html#a15">ZOOM_Y2</a>);
01028     eq_browser.<a class="code" href="classVBrowse98.html#a11">update</a>();
01029     vga.use_front();
01030 };
01031 
01032 <span class="keywordtype">int</span> detect_educational_quality2() {
01033 
01034     vga.use_front();
01035     eq_browser.<a class="code" href="classVBrowse98.html#a8">detect</a>();
01036 
01037     <span class="keywordflow">if</span>(eq_button_para.<a class="code" href="classButton.html#a21">detect</a>()) {
01038         (*deinit_func_ptr[department_array.current_screen_mode])();
01039         <span class="comment">//-------- post display redraw flag -------//</span>
01040         sys.redraw_all_flag = 1;
01041         department_array.current_screen_mode=<a class="code" href="Odept__if_8cpp.html#a139a90">MODE_DEPT_EDUCATIONAL_QUALITY</a>;
01042         <span class="keywordflow">return</span> 1;
01043     }
01044 
01045     <span class="keywordflow">if</span>(button_back.<a class="code" href="classButton.html#a21">detect</a>()) {
01046         (*deinit_func_ptr[department_array.current_screen_mode])();
01047         <span class="comment">//-------- post display redraw flag -------//</span>
01048         sys.redraw_all_flag = 1;
01049         department_array.current_screen_mode=<a class="code" href="Odept__if_8cpp.html#a139a89">MODE_DEPT_MAIN</a>;
01050         <span class="keywordflow">return</span> 1;
01051     }
01052 
01053     <span class="keywordflow">return</span> 0;
01054 };
01055 
01056 <span class="keywordtype">void</span> deinit_educational_quality2() {
01057     <span class="comment">// #### begin Gilbert 28/04/2001 #####//</span>
01058     eq_browser.<a class="code" href="classVBrowse98.html#a3">deinit</a>();
01059     button_back.<a class="code" href="classButton.html#a2">deinit</a>();
01060     eq_button_para.<a class="code" href="classButton.html#a2">deinit</a>();
01061     <span class="comment">// #### end Gilbert 28/04/2001 #####//</span>
01062 };
01063 
01064 <span class="keyword">static</span> <span class="keywordtype">void</span> eq_disp_rep_row(<span class="keywordtype">int</span> recNo, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> refreshFlag) {
01065     <span class="comment">//----- display financial report -----//</span>
01066     <span class="keywordflow">if</span>( refreshFlag == <a class="code" href="Gamedef_8h.html#a71a16">INFO_REPAINT</a> ) {
01067         vga.use_back();
01068         <span class="comment">//              user_interface.bar(x, y, REPORT_X2-40, y+REC_HEIGHT,SHEET_COLOR);</span>
01069         <span class="comment">//              vga.blt_buf( x, y, REPORT_X2-45, y+REC_HEIGHT-2, 0 );</span>
01070     }
01071 
01072     <span class="keywordflow">if</span>(recNo==1) {
01073         font_chartsm.put_paragraph
01074             (
01075                 x, y, <a class="code" href="Odept__if_8cpp.html#a135a71">REPORT_X2</a>-45, y+<a class="code" href="Odept__if_8cpp.html#a0">REC_HEIGHT</a>-2,
01076                 <span class="stringliteral">"Text here..."</span>
01077                 );
01078     }
01079 
01080 };
01081 
01082 <span class="comment">//</span>
01083 <span class="comment">//-------- End of functions report/detect/deinit educational_quality2 page 2 ---------//</span>
01084 
01085 <span class="comment">//-------- Begin of functions report/detect/deinit departmental_academic ---------//</span>
01087 <span class="comment">static char* departmental_academic_label[]= {</span>
01088     <span class="stringliteral">"Faculty research performance"</span>,
01089     <span class="stringliteral">"Sponsored research"</span>,
01090     <span class="stringliteral">"Quality rating for doctoral students"</span>,
01091     <span class="stringliteral">"Doctoral students per regular faculty member"</span>
01092 };
01093 
01094 <span class="keywordtype">void</span> report_departmental_academic(<span class="keywordtype">int</span> refreshFlag) {
01095     <span class="keyword">const</span> <span class="keyword">static</span> tab1=30,tab2=320,tab3=420,tab4=490;
01096     <span class="keyword">const</span> <span class="keyword">static</span> tab5=620,tab6=680,tab7=660,tab8=760;
01097     <span class="keyword">const</span> <span class="keyword">static</span> vtab1=32,vtab2=47,vtab3=210,vtab4=360,vtab5=320;
01098     <span class="keyword">static</span> <span class="keywordtype">float</span> v[<a class="code" href="Odept_8h.html#a17a3">ACADEMIC_STANDING_VAR_COUNT</a>];
01099     <span class="keyword">static</span> <span class="keywordtype">float</span> v2[<a class="code" href="Odept_8h.html#a17a3">ACADEMIC_STANDING_VAR_COUNT</a>];
01100     <span class="keyword">static</span> <span class="keywordtype">float</span> v3[<a class="code" href="Odept_8h.html#a17a3">ACADEMIC_STANDING_VAR_COUNT</a>];
01101     <span class="keyword">static</span> <span class="keywordtype">int</span> data_num=HISTORY_YEAR_COUNT;
01102     <span class="keyword">static</span> <span class="keywordtype">float</span> *dataArray[<a class="code" href="Odept_8h.html#a17a3">ACADEMIC_STANDING_VAR_COUNT</a>];
01103     <span class="keyword">static</span> <span class="keywordtype">float</span> *dataArrayA;
01104     <span class="keyword">static</span> <span class="keywordtype">float</span> da_chg;
01105 
01106     <span class="comment">//-----communication with sim engine's Output-----//</span>
01107     <span class="keywordtype">int</span> deptRecno = department_array.selected_recno;
01108     <a class="code" href="classDepartment.html">Department</a>* cur_dept_ptr = department_array[deptRecno];
01109 
01110     <span class="keywordflow">if</span>(department_array.current_data_mode==<a class="code" href="Odept__if_8cpp.html#a138a87">MODE_DEPARTMENT</a>) {
01111         sys.is_institution_report=0;
01112         dataArrayA=cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#m53">p_academic_standing_history</a>;
01113         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;<a class="code" href="Odept_8h.html#a17a3">ACADEMIC_STANDING_VAR_COUNT</a>;i++) {
01114             dataArray[i]=cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#m59">var_academic_standing_history</a>[i];
01115             v[i]=dataArray[i][data_num-1];
01116             v2[i]=cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#m62">var_change_academic_standing</a>[i];
01117             v3[i]=cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#p1">var_academic_standing_weight</a>[i]*100;
01118         }
01119     }
01120     <span class="keywordflow">else</span> {
01121         sys.is_institution_report=1;
01122         dataArrayA=department_array.<a class="code" href="classDepartment.html#m53">p_academic_standing_history</a>;
01123         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;<a class="code" href="Odept_8h.html#a17a3">ACADEMIC_STANDING_VAR_COUNT</a>;i++) {
01124             <span class="comment">// BUGHERE -- wait for Fred's preparation</span>
01125             <span class="comment">//                  dataArray[i]=department_array.var_educational_quality_history[i];</span>
01126             <span class="comment">//                  v[i]=dataArray[i][data_num-1];</span>
01127             dataArray[i]=cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#m59">var_academic_standing_history</a>[i];
01128             <span class="comment">//                  v[i]=(float)i;</span>
01129             <span class="comment">//                  v2[i]=cur_dept_ptr-&gt;var_change_academic_standing[i];</span>
01130             v[i]=dataArray[i][data_num-1];
01131             v2[i]=cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#m62">var_change_academic_standing</a>[i];
01132             v3[i]=cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#p1">var_academic_standing_weight</a>[i]*100;
01133         }
01134     }
01135 
01136     <span class="keywordflow">if</span>(info.graph_trimester_passed&gt;1) {
01137         da_chg=(float)(100.0*((double)dataArrayA[data_num-1]-dataArrayA[data_num-2])/dataArrayA[data_num-2]);
01138         <span class="keywordflow">if</span>((da_chg&lt;0.0)&amp;&amp;(da_chg&gt;-0.01))
01139             da_chg=0.0;
01140     }
01141     <span class="keywordflow">else</span>
01142         da_chg=0.0;
01143 
01144     vga.use_back();
01145     <span class="keywordflow">if</span> (refreshFlag == <a class="code" href="Gamedef_8h.html#a71a16">INFO_REPAINT</a>) {
01146         <span class="comment">//------------- paint the background ----------------//</span>
01147         user_interface.bg_img(<a class="code" href="Odept__if_8cpp.html#a134a68">BG_PIC_ID</a>, &amp;vga_back);
01148 
01149         user_interface.brighten(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+100,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>-25,<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+630,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>-4);
01150         user_interface.rect(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+100,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>-25,<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+630,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>-4,1);
01151         font_charts.put(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+270,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>-19,<span class="stringliteral">"Departmental Performance"</span>);
01152 
01153         user_interface.brighten(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1-30,<a class="code" href="Odept__if_8cpp.html#a135a71">REPORT_X2</a>,<a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>-10);
01154 
01155         user_interface.rect(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1-30,<a class="code" href="Odept__if_8cpp.html#a135a71">REPORT_X2</a>,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1-10);
01156         user_interface.rect(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1-10,<a class="code" href="Odept__if_8cpp.html#a135a71">REPORT_X2</a>,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1+30);
01157         user_interface.rect(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1+30,<a class="code" href="Odept__if_8cpp.html#a135a71">REPORT_X2</a>,<a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>-10);
01158 
01159         <span class="comment">//--------------Initialize buttons-------------------//</span>
01160         button_back.<a class="code" href="classButton.html#a10">create_text</a>( <a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab1+250,
01161                                  <a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>-1, <a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab1+440, <a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>+19, <span class="stringliteral">"Back"</span> );
01162 
01163         <span class="comment">//              button_back.set_key( 'B' );</span>
01164 
01165         <span class="comment">//--------------Initialize da_graph-------------------//</span>
01166         as_graphiconA.<a class="code" href="classGraphPerformanceIndicatorYear.html#a2">init</a>(
01167             <a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab5,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1-8,
01168             <a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab6,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1+28,
01169             1 ,&amp;data_num ,dataArrayA, 1, 0, 3);
01170         da_textA.<a class="code" href="classText.html#a17">right_put</a>(
01171             <a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab2+80,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1+5,&amp;(dataArrayA[data_num-1]),4);
01172 
01173         da_text_chgA.<a class="code" href="classText.html#a17">right_put</a>(
01174             <a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab4+85,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1+5,
01175             &amp;da_chg,4);
01176 
01177         font_chartsm.put(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab1,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1+5,
01178                          <span class="stringliteral">"D e p a r t m e n t a l   P r e s t i g e"</span>);
01179 
01180         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;<a class="code" href="Odept_8h.html#a17a3">ACADEMIC_STANDING_VAR_COUNT</a>;i++)
01181             as_graphicon[i].<a class="code" href="classGraphPerformanceIndicatorYear.html#a2">init</a>(
01182                 <a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab5-5,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1+i*56+40,
01183                 <a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab6+5,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1+i*56+68,
01184                 1 ,&amp;data_num ,dataArray[i], 1, 0, 3);
01185         <span class="keywordflow">for</span>(i=0;i&lt;<a class="code" href="Odept_8h.html#a17a3">ACADEMIC_STANDING_VAR_COUNT</a>;i++) {
01186 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
01187 <span class="preprocessor"></span>            font_chart_purple_sm.right_put( <a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab2+20, <a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1+i*56+50, m.format(cur_dept_ptr-&gt;initial_academic_standing[i],4) );
01188 <span class="preprocessor">#endif</span>
01189 <span class="preprocessor"></span>
01190             <span class="keywordflow">if</span>(i==0||i&gt;1&amp;&amp;i&lt;5)
01191                 da_text[i].<a class="code" href="classText.html#a17">right_put</a>(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab2+80,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1+i*56+50,v+i,4);
01192             <span class="keywordflow">else</span>
01193                 da_text[i].<a class="code" href="classText.html#a17">right_put</a>(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab2+80,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1+i*56+50,v+i,4);
01194 
01195             da_text2[i].<a class="code" href="classText.html#a17">right_put</a>(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab3+55,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1+i*56+50,v3+i,3);
01196             da_text_chg[i].<a class="code" href="classText.html#a17">right_put</a>(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab4+85,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1+i*56+50,v2+i,4);
01197             help_button_array[i].<a class="code" href="classButton.html#a10">create_text</a>(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab1-23,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab2+i*56+30,
01198                                              <a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab1-9,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab2+i*56+44,<span class="stringliteral">"?"</span>);
01199             image_interface.put_back(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab1-21,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab2+i*56+30,<span class="stringliteral">"QUEST_UP"</span>);
01200         }
01201 
01202         <span class="comment">//-------------- Show Text --------------//</span>
01203         <span class="comment">//              font_chartsm.put(REPORT_X1+tab1,REPORT_Y1+vtab1-27,"Contributing factors");</span>
01204         font_chartsm.put(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab2+15,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1-25,<span class="stringliteral">"Current value"</span>);
01205         font_chartsm.put(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab3+15,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1-25,<span class="stringliteral">"Weight"</span>);
01206         font_chartsm.put(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab4+5,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1-25,<span class="stringliteral">"Last year change"</span>);
01207         font_chartsm.put(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab5+20,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1-25,<span class="stringliteral">"Trend"</span>);
01208 
01209         <span class="keywordflow">for</span>(i=0;i&lt;<a class="code" href="Odept_8h.html#a17a3">ACADEMIC_STANDING_VAR_COUNT</a>;i++) {
01210             font_chartsm.put_paragraph(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab1+5,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1+i*56+48,<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab2+30,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1+i*56+94,departmental_academic_label[i]);
01211         }
01212 
01213         as_graphiconA.<a class="code" href="classGraphPerformanceIndicatorYear.html#a8">paint</a>();
01214         da_textA.<a class="code" href="classText.html#a24">paint</a>();
01215 
01216         <span class="keywordflow">for</span>(i=0;i&lt;<a class="code" href="Odept_8h.html#a17a3">ACADEMIC_STANDING_VAR_COUNT</a>;i++) {
01217             as_graphicon[i].<a class="code" href="classGraphPerformanceIndicatorYear.html#a8">paint</a>();
01218             da_text[i].<a class="code" href="classText.html#a24">paint</a>();
01219             da_text2[i].<a class="code" href="classText.html#a24">paint</a>();
01220             da_text_chg[i].<a class="code" href="classText.html#a24">paint</a>();
01221         }
01222     }
01223     <span class="keywordflow">else</span> {
01224         as_graphiconA.<a class="code" href="classGraphPerformanceIndicatorYear.html#a9">refresh</a>();
01225         da_textA.<a class="code" href="classText.html#a25">refresh</a>();
01226         da_text_chgA.<a class="code" href="classText.html#a25">refresh</a>();
01227         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;<a class="code" href="Odept_8h.html#a17a3">ACADEMIC_STANDING_VAR_COUNT</a>;i++) {
01228             as_graphicon[i].<a class="code" href="classGraphPerformanceIndicatorYear.html#a9">refresh</a>();
01229             da_text[i].<a class="code" href="classText.html#a25">refresh</a>();
01230             da_text_chg[i].<a class="code" href="classText.html#a25">refresh</a>();
01231         }
01232     }
01233 
01234     vga.use_back();
01235     button_back.<a class="code" href="classButton.html#a20">paint</a>();
01236 
01237     vga.blt_buf(<a class="code" href="Oworldmt_8h.html#a12">ZOOM_X1</a>, <a class="code" href="Oworldmt_8h.html#a13">ZOOM_Y1</a>, <a class="code" href="Oworldmt_8h.html#a14">ZOOM_X2</a>, <a class="code" href="Oworldmt_8h.html#a15">ZOOM_Y2</a>);
01238     vga.use_front();
01239 
01240 };
01241 
01242 <span class="keywordtype">int</span> detect_departmental_academic() {
01243     <span class="keyword">const</span> <span class="keyword">static</span> tab1=30,tab2=320,tab3=420,tab4=490;
01244     <span class="keyword">const</span> <span class="keyword">static</span> tab5=620,tab6=680,tab7=660,tab8=760;
01245     <span class="keyword">const</span> <span class="keyword">static</span> vtab1=22,vtab2=37,vtab3=200,vtab4=350,vtab5=320;
01246     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;<a class="code" href="Odept_8h.html#a17a3">ACADEMIC_STANDING_VAR_COUNT</a>;i++) {
01247         <span class="keywordflow">if</span>(help_button_array[i].<a class="code" href="classButton.html#a21">detect</a>()) {
01248             <span class="comment">// ## begin chwg1022  create the global ResTxt help_resource later //</span>
01249             <a class="code" href="classString.html">String</a> str;
01250             str  = <a class="code" href="Gamedef_8h.html#a4">DIR_RES</a>;
01251             str += <span class="stringliteral">"SCORE"</span>;
01252 
01253             <a class="code" href="classResTxt.html">ResTxt</a> rs;
01254             rs.<a class="code" href="classResTxt.html#a2">init</a>(str);
01255             <span class="comment">// ## chwg1022 end ////////////////////////</span>
01256             image_interface.put_back(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab1-21,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab2+i*56+40,<span class="stringliteral">"QUEST_DN"</span>);
01257             vga.blt_buf(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab1-21,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab2+i*56+40,<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab1-3,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab2+i*56+58);
01258             sys.back_view_mode=sys.view_mode;
01259             help_if.help_textlist.topic_id=rs.<a class="code" href="classResTxt.html#a7">locate_topic</a>(departmental_academic_label[i]);
01260             <span class="keywordflow">if</span>(help_if.help_textlist.topic_id&gt;0) {
01261                 help_if.help_textlist.add_history(help_if.help_textlist.topic_id);
01262                 sys.set_view_mode(<a class="code" href="Osys_8h.html#a45a31">MODE_HELP_DESC</a>);
01263                 sys.redraw_all_flag = 1;
01264                 audio.play_wav(<span class="stringliteral">"BEEPS-1"</span>,audio.int_to_DsVolume(config.sound_effect_volume));
01265             }
01266             <span class="keywordflow">return</span> 1;
01267         }
01268     }
01269     <span class="keywordflow">if</span>(button_back.<a class="code" href="classButton.html#a21">detect</a>()) {
01270         (*deinit_func_ptr[department_array.current_screen_mode])();
01271         <span class="comment">//-------- post display redraw flag -------//</span>
01272         sys.redraw_all_flag = 1;
01273         department_array.current_screen_mode=<a class="code" href="Odept__if_8cpp.html#a139a89">MODE_DEPT_MAIN</a>;
01274         <span class="keywordflow">return</span> 1;
01275     }
01276     <span class="keywordflow">return</span> 0;
01277 };
01278 
01279 <span class="keywordtype">void</span> deinit_departmental_academic() {
01280     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;<a class="code" href="Odept_8h.html#a17a3">ACADEMIC_STANDING_VAR_COUNT</a>;i++)
01281         as_graphicon[i].<a class="code" href="classGraphPerformanceIndicatorYear.html#a7">deinit</a>();
01282     as_graphiconA.<a class="code" href="classGraphPerformanceIndicatorYear.html#a7">deinit</a>();
01283     da_textA.<a class="code" href="classText.html#a26">deinit</a>();
01284     da_text_chgA.<a class="code" href="classText.html#a26">deinit</a>();
01285     <span class="keywordflow">for</span>(i=0;i&lt;<a class="code" href="Odept_8h.html#a17a3">ACADEMIC_STANDING_VAR_COUNT</a>;i++) {
01286         da_text[i].<a class="code" href="classText.html#a26">deinit</a>();
01287         da_text2[i].<a class="code" href="classText.html#a26">deinit</a>();
01288         da_text_chg[i].<a class="code" href="classText.html#a26">deinit</a>();
01289         help_button_array[i].<a class="code" href="classButton.html#a2">deinit</a>();
01290     }
01291     <span class="comment">// ###### begin Gilbert 28/04/2001 #####//</span>
01292     button_back.<a class="code" href="classButton.html#a2">deinit</a>();
01293     <span class="comment">// ###### end Gilbert 28/04/2001 #####//</span>
01294 }
01295 
01296 <span class="keyword">static</span> <span class="keywordtype">void</span> da_disp_rep_row(<span class="keywordtype">int</span> recNo, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> refreshFlag) {
01297     <span class="comment">//----- display financial report -----//</span>
01298     <span class="keywordflow">if</span>( refreshFlag == <a class="code" href="Gamedef_8h.html#a71a16">INFO_REPAINT</a> ) {
01299         vga.use_back();
01300         <span class="comment">//              user_interface.bar(x, y, REPORT_X2-40, y+REC_HEIGHT,SHEET_COLOR);</span>
01301         <span class="comment">//              vga.blt_buf( x, y, REPORT_X2-45, y+REC_HEIGHT-2, 0 );</span>
01302     }
01303 
01304     <span class="keywordflow">if</span>(recNo==1) {
01305         font_chartsm.put_paragraph
01306             (
01307                 x, y, <a class="code" href="Odept__if_8cpp.html#a135a71">REPORT_X2</a>-45, y+<a class="code" href="Odept__if_8cpp.html#a0">REC_HEIGHT</a>-2,
01308                 <span class="stringliteral">"This is a test ............ ...Hello!?"</span>
01309                 );
01310     }
01311 
01312 };
01313 
01314 <span class="comment">//</span>
01315 <span class="comment">//-------- End of functions report/detect/deinit departmental_academic ---------//</span>
01316 
01317 <span class="comment">//-------- Begin of functions report/detect/deinit student_morale ---------//</span>
01319 <span class="comment"></span>
01320 <span class="keywordtype">void</span> report_student_morale(<span class="keywordtype">int</span> refreshFlag) {
01321     <span class="keyword">static</span> <span class="keywordtype">char</span>* label[]= {
01322         <span class="stringliteral">"Educational quality"</span>,
01323         <span class="stringliteral">"Course denials as a percent of total course enrollment"</span>,
01324         <span class="stringliteral">"Average factor out-of-class student contact time"</span>,
01325         <span class="stringliteral">"Average over teaching methods of (course enrollment/course sections)/normal class size"</span>,
01326     };
01327 
01328     <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">int</span> tab1=10;
01329     <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">int</span> tab2=545;
01330     <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">int</span> tab3=580;
01331     <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">int</span> tab4=600;
01332     <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">int</span> tab5=650;
01333     <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">int</span> tab6=700;
01334     <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">int</span> vtab1=40;
01335     <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">int</span> vtab2=200;
01336     <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">int</span> vtab3=225;
01337     <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">int</span> vtab4=360;
01338     <span class="keyword">static</span> <span class="keywordtype">float</span> v[<a class="code" href="Odept_8h.html#a17a4">STUDENT_MORALE_VAR_COUNT</a>];
01339     <span class="keyword">static</span> <span class="keywordtype">float</span> v2[<a class="code" href="Odept_8h.html#a17a4">STUDENT_MORALE_VAR_COUNT</a>];
01340     <span class="keyword">static</span> <span class="keywordtype">int</span> data_num=HISTORY_TRIMESTER_COUNT;
01341     <span class="keyword">static</span> <span class="keywordtype">float</span> *dataArray[<a class="code" href="Odept_8h.html#a17a4">STUDENT_MORALE_VAR_COUNT</a>];
01342     <span class="keyword">static</span> <span class="keywordtype">float</span> *dataArrayA;
01343 
01344     <span class="comment">//-----communication with sim engine's Output-----//</span>
01345     <span class="keywordtype">int</span> deptRecno = department_array.selected_recno;
01346     <a class="code" href="classDepartment.html">Department</a>* cur_dept_ptr = department_array[deptRecno];
01347 
01348     <span class="keywordflow">if</span>(department_array.current_data_mode==<a class="code" href="Odept__if_8cpp.html#a138a87">MODE_DEPARTMENT</a>) {
01349         sys.is_institution_report=0;
01350         dataArrayA=cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#m54">p_student_morale_history</a>;
01351         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;<a class="code" href="Odept_8h.html#a17a4">STUDENT_MORALE_VAR_COUNT</a>;i++) {
01352             dataArray[i]=cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#m60">var_student_morale_history</a>[i];
01353             v[i]=dataArray[i][data_num-1];
01354             v2[i]=cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#m63">var_change_student_morale</a>[i];
01355         }
01356     }
01357     <span class="keywordflow">else</span> {
01358         sys.is_institution_report=1;
01359         dataArrayA=department_array.<a class="code" href="classDepartment.html#m54">p_student_morale_history</a>;
01360         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;<a class="code" href="Odept_8h.html#a17a4">STUDENT_MORALE_VAR_COUNT</a>;i++) {
01361             <span class="comment">// BUGHERE -- wait for Fred's preparation</span>
01362             dataArray[i]=cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#m60">var_student_morale_history</a>[i];
01363             v[i]=(float)i;
01364             v2[i]=cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#m63">var_change_student_morale</a>[i];
01365         }
01366     }
01367 
01368     vga.use_back();
01369     <span class="keywordflow">if</span> (refreshFlag == <a class="code" href="Gamedef_8h.html#a71a16">INFO_REPAINT</a>) {
01370         <span class="comment">//------------- paint the background ----------------//</span>
01371         user_interface.bg_img(<a class="code" href="Odept__if_8cpp.html#a134a68">BG_PIC_ID</a>, &amp;vga_back);
01372         user_interface.brighten(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1-50,<a class="code" href="Odept__if_8cpp.html#a135a71">REPORT_X2</a>,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1-20);
01373         user_interface.brighten(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1-20,<a class="code" href="Odept__if_8cpp.html#a135a71">REPORT_X2</a>,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab4+3);
01374         user_interface.rect(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1-50,<a class="code" href="Odept__if_8cpp.html#a135a71">REPORT_X2</a>,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1-20);
01375         user_interface.rect(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1-20,<a class="code" href="Odept__if_8cpp.html#a135a71">REPORT_X2</a>,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab4+3);
01376 
01377         <span class="comment">//--------------Initialize buttons-------------------//</span>
01378         button_back.<a class="code" href="classButton.html#a10">create_text</a>( <a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab1+300,
01379                                  <a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>+2, <a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab1+450, <a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>+22, <span class="stringliteral">"Back"</span> );
01380         <span class="comment">//              button_back.set_key( 'B' );</span>
01381 
01382         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;<a class="code" href="Odept_8h.html#a17a4">STUDENT_MORALE_VAR_COUNT</a>;i++) {
01383             sm_text[i].<a class="code" href="classText.html#a11">put</a>(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab2,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1+i*38+25,v[i],4);
01384             sm_text_chg[i].<a class="code" href="classText.html#a11">put</a>(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab4,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1+i*38+25,v[i],4);
01385         }
01386 
01387         sm_textA.<a class="code" href="classText.html#a11">put</a>(
01388             <a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab2,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1-40,dataArrayA[data_num-1],4);
01389         <span class="keywordflow">if</span>(info.graph_trimester_passed&gt;4) {
01390             sm_text_chgA.<a class="code" href="classText.html#a11">put</a>(
01391                 <a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab4,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1-40,
01392                 100.0*(dataArrayA[data_num-1]-dataArrayA[data_num-4])/dataArrayA[data_num-4],4);
01393             sm_text_chgA.<a class="code" href="classText.html#a24">paint</a>();
01394         }
01395         <span class="comment">//--------------Initialize sm_graph-------------------//</span>
01396         sm_graphiconA.<a class="code" href="classGraphPerformanceIndicatorTrimester.html#a2">init</a>(
01397             <a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab5,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1-50,
01398             <a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab6,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1-20,
01399             1 ,&amp;data_num ,dataArrayA, 1, 0, 3);
01400         <span class="keywordflow">for</span>(i=0;i&lt;<a class="code" href="Odept_8h.html#a17a4">STUDENT_MORALE_VAR_COUNT</a>;i++)
01401             sm_graphicon[i].<a class="code" href="classGraphPerformanceIndicatorTrimester.html#a2">init</a>(
01402                 <a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab5,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1+i*38+12,
01403                 <a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab6,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1+i*38+47,
01404                 1 ,&amp;data_num ,dataArray[i],1, 0, 3);
01405 
01406         <span class="comment">//-------------- Show Text --------------//</span>
01407         font_chartsm.put_paragraph(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab1,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1-40,
01408                                    <a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab2,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1-20,<span class="stringliteral">"S T U D E N T   M O R A L E"</span>);
01409         font_chartsm.put_paragraph(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab1,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1-15,
01410                                    <a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab2,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1+5,<span class="stringliteral">"Contributing factors"</span>);
01411         font_chartsm.put_paragraph( <a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab4-30,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1-60,
01412                                     <a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab4+100,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1-32,<span class="stringliteral">" "</span>);
01413         <span class="comment">//-------------- Show Text --------------//</span>
01414         <span class="keywordflow">for</span>( i=0;i&lt;<a class="code" href="Odept_8h.html#a17a4">STUDENT_MORALE_VAR_COUNT</a>;i++) {
01415             font_chartsm.put_paragraph(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab1,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1+i*38+20,<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab2,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1+i*38+55,label[i]);
01416         }
01417 
01418         sm_graphiconA.<a class="code" href="classGraphPerformanceIndicatorTrimester.html#a8">paint</a>();
01419         sm_textA.<a class="code" href="classText.html#a24">paint</a>();
01420         <span class="keywordflow">for</span>(i=0;i&lt;<a class="code" href="Odept_8h.html#a17a4">STUDENT_MORALE_VAR_COUNT</a>;i++) {
01421             sm_graphicon[i].<a class="code" href="classGraphPerformanceIndicatorTrimester.html#a8">paint</a>();
01422             sm_text[i].<a class="code" href="classText.html#a24">paint</a>();
01423             sm_text_chg[i].<a class="code" href="classText.html#a24">paint</a>();
01424         }
01425     }
01426     <span class="keywordflow">else</span> {
01427         sm_graphiconA.<a class="code" href="classGraphPerformanceIndicatorTrimester.html#a9">refresh</a>();
01428         sm_textA.<a class="code" href="classText.html#a25">refresh</a>();
01429         sm_text_chgA.<a class="code" href="classText.html#a25">refresh</a>();
01430         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;<a class="code" href="Odept_8h.html#a17a4">STUDENT_MORALE_VAR_COUNT</a>;i++) {
01431             sm_graphicon[i].<a class="code" href="classGraphPerformanceIndicatorTrimester.html#a9">refresh</a>();
01432             sm_text[i].<a class="code" href="classText.html#a25">refresh</a>();
01433             sm_text_chg[i].<a class="code" href="classText.html#a25">refresh</a>();
01434         }
01435     }
01436 
01437     vga.use_back();
01438     button_back.<a class="code" href="classButton.html#a20">paint</a>();
01439 
01440     vga.blt_buf(<a class="code" href="Oworldmt_8h.html#a12">ZOOM_X1</a>, <a class="code" href="Oworldmt_8h.html#a13">ZOOM_Y1</a>, <a class="code" href="Oworldmt_8h.html#a14">ZOOM_X2</a>, <a class="code" href="Oworldmt_8h.html#a15">ZOOM_Y2</a>);
01441     vga.use_front();
01442 };
01443 
01444 <span class="keywordtype">int</span> detect_student_morale() {
01445     <span class="keywordflow">if</span>(button_back.<a class="code" href="classButton.html#a21">detect</a>()) {
01446         (*deinit_func_ptr[department_array.current_screen_mode])();
01447         <span class="comment">//-------- post display redraw flag -------//</span>
01448         sys.redraw_all_flag = 1;
01449         department_array.current_screen_mode=<a class="code" href="Odept__if_8cpp.html#a139a89">MODE_DEPT_MAIN</a>;
01450         <span class="keywordflow">return</span> 1;
01451     }
01452     <span class="keywordflow">return</span> 0;
01453 };
01454 
01455 <span class="keywordtype">void</span> deinit_student_morale() {
01456     <span class="comment">// ##### begin Gilbert 28/04/2001 #####//</span>
01457     sm_graphiconA.<a class="code" href="classGraphPerformanceIndicatorTrimester.html#a7">deinit</a>();
01458     sm_textA.<a class="code" href="classText.html#a26">deinit</a>();
01459     sm_text_chgA.<a class="code" href="classText.html#a26">deinit</a>();
01460     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;<a class="code" href="Odept_8h.html#a17a4">STUDENT_MORALE_VAR_COUNT</a>;i++) {
01461         sm_graphicon[i].<a class="code" href="classGraphPerformanceIndicatorTrimester.html#a7">deinit</a>();
01462         sm_text_chg[i].<a class="code" href="classText.html#a26">deinit</a>();
01463         sm_text[i].<a class="code" href="classText.html#a26">deinit</a>();
01464     }
01465     button_back.<a class="code" href="classButton.html#a2">deinit</a>();
01466     <span class="comment">// ##### end Gilbert 28/04/2001 #####//</span>
01467 }
01468 
01469 <span class="keyword">static</span> <span class="keywordtype">void</span> sm_disp_rep_row(<span class="keywordtype">int</span> recNo, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> refreshFlag) {
01470     <span class="comment">//----- display financial report -----//</span>
01471     <span class="keywordflow">if</span>( refreshFlag == <a class="code" href="Gamedef_8h.html#a71a16">INFO_REPAINT</a> ) {
01472         vga.use_back();
01473         <span class="comment">//              user_interface.bar(x, y, REPORT_X2-40, y+REC_HEIGHT,SHEET_COLOR);</span>
01474         <span class="comment">//              vga.blt_buf( x, y, REPORT_X2-45, y+REC_HEIGHT-2);</span>
01475     }
01476 
01477     <span class="keywordflow">if</span>(recNo==1) {
01478         font_chartsm.put_paragraph
01479             (
01480                 x, y, <a class="code" href="Odept__if_8cpp.html#a135a71">REPORT_X2</a>-45, y+<a class="code" href="Odept__if_8cpp.html#a0">REC_HEIGHT</a>-2,
01481                 <span class="stringliteral">"This is a test ............ ...Hello!?"</span>
01482                 );
01483     }
01484 
01485 };
01486 
01487 <span class="comment">//</span>
01488 <span class="comment">//-------- End of functions report/detect/deinit student_morale ---------//</span>
01489 
01490 <span class="comment">//-------- Begin of functions report/detect/deinit faculty_publications ---------//</span>
01492 <span class="comment">void report_faculty_research_preformance(int refreshFlag)</span>
01493 {};
01494 
01495 <span class="keywordtype">int</span> detect_faculty_research_preformance()
01496 { <span class="keywordflow">return</span> 0;};
01497 
01498 <span class="keywordtype">void</span> deinit_faculty_research_preformance()
01499 {};
01500 
01501 <span class="keyword">static</span> <span class="keywordtype">void</span> fp_disp_rep_row(<span class="keywordtype">int</span> recNo, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> refreshFlag)
01502 {};
01503 <span class="comment">//</span>
01504 <span class="comment">//-------- End of functions report/detect/deinit FACULTY_RESEARCH_PERFORMANCE ---------//</span>
01505 
01506 <span class="comment">//-------- Begin of functions report/detect/deinit faculty_morale ---------//</span>
01508 <span class="comment">void report_faculty_morale(int refreshFlag)</span>
01509 {};
01510 
01511 <span class="keywordtype">int</span> detect_faculty_morale() {
01512     <span class="keywordflow">return</span> 0;
01513 };
01514 
01515 <span class="keywordtype">void</span> deinit_faculty_morale() {
01516 
01517 }
01518 
01519 <span class="keyword">static</span> <span class="keywordtype">void</span> fm_disp_rep_row(<span class="keywordtype">int</span> recNo, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> refreshFlag) {
01520 };
01521 
01522 <span class="comment">//</span>
01523 <span class="comment">//-------- End of functions report/detect/deinit faculty_morale ---------//</span>
01524 
01525 <span class="comment">//-------- Begin of functions report/detect/deinit diversity_index ---------//</span>
01527 <span class="comment"></span>
01528 <span class="keywordtype">void</span> report_diversity_index(<span class="keywordtype">int</span> refreshFlag) {
01529 };
01530 
01531 <span class="keywordtype">int</span> detect_diversity_index() {
01532     <span class="keywordflow">return</span> 0;
01533 };
01534 
01535 <span class="keywordtype">void</span> deinit_diversity_index()
01536 {};
01537 
01538 <span class="keyword">static</span> <span class="keywordtype">void</span> di_disp_rep_row(<span class="keywordtype">int</span> recNo, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> refreshFlag)
01539 {};
01540 
01541 <span class="comment">//</span>
01542 <span class="comment">//-------- End of functions report/detect/deinit diversity_index ---------//</span>
01543 
01544 <span class="comment">//-------- Begin of functions report/detect/deinit rank ---------//</span>
01546 <span class="comment"></span>
01547 <span class="keywordtype">void</span> report_rank(<span class="keywordtype">int</span> refreshFlag) {
01548     <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">int</span> tab1=<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+10;
01549     <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">int</span> tab2=<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+450;
01550     <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">int</span> tab3=<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+455;
01551     <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">int</span> tab4=<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+720;
01552     <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">int</span> vtab1=<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>;
01553     <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">int</span> vtab2=<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+335;
01554     <span class="keyword">static</span> <span class="keywordtype">int</span> report_recno=1;
01555     <span class="keyword">static</span> <span class="keywordtype">int</span> reccount=department_array.department_count;
01556 
01557     <span class="comment">//-----communication with sim engine's Output-----//</span>
01558     <span class="keywordtype">int</span> deptRecno = department_array.selected_recno;
01559     <a class="code" href="classDepartment.html">Department</a>* cur_dept_ptr = department_array[deptRecno];
01560 
01561     <span class="comment">//  dataArray=cur_dept_ptr-&gt;p_faculty_diversity_history;</span>
01562     <span class="comment">//  v[0]=dataArray[7];</span>
01563 
01564     vga.use_back();
01565     <span class="keywordflow">if</span> (refreshFlag == <a class="code" href="Gamedef_8h.html#a71a16">INFO_REPAINT</a>) {
01566         <span class="comment">//------------- paint the background ----------------//</span>
01567         user_interface.bg_img(<a class="code" href="Odept__if_8cpp.html#a134a68">BG_PIC_ID</a>, &amp;vga_back);
01568 
01569         user_interface.brighten(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+100,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>-25,<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+630,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>-4);
01570         user_interface.rect(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+100,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>-25,<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+630,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>-4,1);
01571         font_charts.put(<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+270,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>-19,<span class="stringliteral">"Departmental Performance"</span>);
01572 
01573         user_interface.brighten(tab1,vtab1,tab2,vtab2);
01574         user_interface.brighten(tab3,vtab1,tab4,vtab2);
01575         user_interface.rect(tab1,vtab1,tab2,vtab2);
01576         user_interface.rect(tab3,vtab1,tab4,vtab2);
01577         user_interface.brighten(
01578             100,<a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>-10,
01579             250,<a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>-10+<a class="code" href="Odept__if_8cpp.html#a136a74">BUTTON_HEIGHT</a>
01580             );
01581         user_interface.brighten(
01582             330,<a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>-10,
01583             480,<a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>-10+<a class="code" href="Odept__if_8cpp.html#a136a74">BUTTON_HEIGHT</a>
01584             );
01585         user_interface.brighten(
01586             550,<a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>-10,
01587             700,<a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>-10+<a class="code" href="Odept__if_8cpp.html#a136a74">BUTTON_HEIGHT</a>
01588             );
01589 
01590         <span class="comment">//--------------Initialize buttons-------------------//</span>
01591 
01592         <span class="comment">//              button_back.create_text( tab1+250,</span>
01593         <span class="comment">//                      REPORT_Y2+2, tab1+450, REPORT_Y2+22, "Back" );</span>
01594         <span class="comment">//              button_back.set_key( 'B' );</span>
01595 
01596         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=0;k&lt;3;k++) {
01597             <span class="keywordflow">if</span>(mode_dept_button_up_bitmap[k+12]) {
01598                 <a class="code" href="ALL_8H.html#a8">mem_del</a>(mode_dept_button_up_bitmap[k+12]);
01599                 mode_dept_button_up_bitmap[k+12] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
01600             }
01601             <span class="keywordflow">if</span>(mode_dept_button_down_bitmap[k+12]) {
01602                 <a class="code" href="ALL_8H.html#a8">mem_del</a>(mode_dept_button_down_bitmap[k+12]);
01603                 mode_dept_button_down_bitmap[k+12] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
01604             }
01605         }
01606 
01607         user_interface.create_button_bitmap(
01608             100,<a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>-10,
01609             250,<a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>-10+<a class="code" href="Odept__if_8cpp.html#a136a74">BUTTON_HEIGHT</a>,
01610             <span class="stringliteral">"Institution"</span>, &amp;mode_dept_button_up_bitmap[12],
01611             &amp;mode_dept_button_down_bitmap[12], &amp;vga_back);
01612 
01613         mode_dept_button[12].<a class="code" href="classButton.html#a16">create_bitmapW</a>(
01614             100,<a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>-10,
01615             250,<a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>-10+<a class="code" href="Odept__if_8cpp.html#a136a74">BUTTON_HEIGHT</a>,
01616             mode_dept_button_down_bitmap[12]+4);
01617 
01618         user_interface.create_button_bitmap(
01619             330,<a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>-10,
01620             480,<a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>-10+<a class="code" href="Odept__if_8cpp.html#a136a74">BUTTON_HEIGHT</a>,
01621             <span class="stringliteral">"Department"</span>, &amp;mode_dept_button_up_bitmap[13],
01622             &amp;mode_dept_button_down_bitmap[13], &amp;vga_back);
01623 
01624         mode_dept_button[13].<a class="code" href="classButton.html#a16">create_bitmapW</a>(
01625             330,<a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>-10,
01626             480,<a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>-10+<a class="code" href="Odept__if_8cpp.html#a136a74">BUTTON_HEIGHT</a>,
01627             mode_dept_button_down_bitmap[13]+4);
01628 
01629         user_interface.create_button_bitmap(
01630             550,<a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>-10,
01631             700,<a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>-10+<a class="code" href="Odept__if_8cpp.html#a136a74">BUTTON_HEIGHT</a>,
01632             <span class="stringliteral">"Rank by department"</span>, &amp;mode_dept_button_up_bitmap[14],
01633             &amp;mode_dept_button_down_bitmap[14], &amp;vga_back);
01634 
01635         mode_dept_button[14].<a class="code" href="classButton.html#a16">create_bitmapW</a>(
01636             550,<a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>-10,
01637             700,<a class="code" href="Odept__if_8cpp.html#a135a72">REPORT_Y2</a>-10+<a class="code" href="Odept__if_8cpp.html#a136a74">BUTTON_HEIGHT</a>,
01638             mode_dept_button_down_bitmap[14]+4);
01639 
01640         <span class="keywordtype">int</span>  y;
01641         <span class="keywordflow">for</span>(y = vtab1+15,k=0;k&lt;6;k++,y+=<a class="code" href="Odept__if_8cpp.html#a136a74">BUTTON_HEIGHT</a>+25) {
01642             <span class="comment">// detail button</span>
01643             <span class="keywordflow">if</span>(mode_dept_button_up_bitmap[k]) {
01644                 <a class="code" href="ALL_8H.html#a8">mem_del</a>(mode_dept_button_up_bitmap[k]);
01645                 mode_dept_button_up_bitmap[k] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
01646             }
01647             <span class="keywordflow">if</span>(mode_dept_button_down_bitmap[k]) {
01648                 <a class="code" href="ALL_8H.html#a8">mem_del</a>(mode_dept_button_down_bitmap[k]);
01649                 mode_dept_button_down_bitmap[k] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
01650             }
01651 
01652             user_interface.create_button_bitmap(
01653                 tab3+10,y,tab4-10,y+<a class="code" href="Odept__if_8cpp.html#a136a74">BUTTON_HEIGHT</a>+10,
01654                 mode_dept_str[k], &amp;mode_dept_button_up_bitmap[k],
01655                 &amp;mode_dept_button_down_bitmap[k], &amp;vga_back);
01656 
01657             mode_dept_button[k].<a class="code" href="classButton.html#a16">create_bitmapW</a>(
01658                 tab3+10,y,tab4-10,y+<a class="code" href="Odept__if_8cpp.html#a136a74">BUTTON_HEIGHT</a>+10,
01659                 ((k == department_array.current_pref_report_type-1) ?
01660                  mode_dept_button_down_bitmap[k] :
01661                  mode_dept_button_up_bitmap[k])+4);
01662         }
01663 
01664         <span class="comment">//--------------Initialize Vbroswer-------------------//</span>
01665         reccount=department_array.department_count+1;
01666         rk_browser.<a class="code" href="classVBrowse98.html#a2">init</a>(tab1,vtab1,tab2,vtab2,
01667                         0, <a class="code" href="Odept__if_8cpp.html#a0">REC_HEIGHT</a>, reccount, rk_disp_rep_row,<a class="code" href="OHELP_8H.html#a0">NULL</a>,0);
01668         rk_browser.<a class="code" href="classVBrowse98.html#a4">open</a>(report_recno);
01669 
01670         <span class="keywordflow">for</span>(k=0;k&lt;3;k++) {
01671             mode_dept_button[12+k].<a class="code" href="classButton.html#a20">paint</a>();
01672         }
01673 
01674         <span class="keywordflow">for</span>(k=0;k&lt;6;k++)
01675             mode_dept_button[k].<a class="code" href="classButton.html#a20">paint</a>();
01676         mode_dept_button[department_array.current_screen_mode+6].push();
01677         mode_dept_button[department_array.current_pref_report_type-1].push();
01678 
01679     }
01680     <span class="keywordflow">else</span> {
01681     }
01682 
01683     report_recno=rk_browser.<a class="code" href="classVBrowse98.html#a6">recno</a>();
01684 
01685     vga.use_back();
01686     <span class="comment">//  button_back.paint();</span>
01687     rk_browser.<a class="code" href="classVBrowse98.html#a11">update</a>();
01688 
01689     vga.blt_buf(<a class="code" href="Oworldmt_8h.html#a12">ZOOM_X1</a>, <a class="code" href="Oworldmt_8h.html#a13">ZOOM_Y1</a>, <a class="code" href="Oworldmt_8h.html#a14">ZOOM_X2</a>, <a class="code" href="Oworldmt_8h.html#a15">ZOOM_Y2</a>);
01690 
01691 };
01692 
01693 <span class="keywordtype">int</span> detect_rank() {
01694     vga.use_front();
01695     rk_browser.<a class="code" href="classVBrowse98.html#a8">detect</a>();
01696     vga.use_back();
01697 
01698     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=0;k&lt;6;k++)
01699         <span class="keywordflow">if</span>(mode_dept_button[k].<a class="code" href="classButton.html#a21">detect</a>()) {
01700             mode_dept_button[k].<a class="code" href="classButton.html#m12">body_ptr</a>=(<span class="keywordtype">void</span>*)(mode_dept_button_down_bitmap[k]+4);
01701             mode_dept_button[k].<a class="code" href="classButton.html#a24">push</a>();
01702 
01703             (*deinit_func_ptr[department_array.current_screen_mode])();
01704             sys.redraw_all_flag = 1;
01705             department_array.current_pref_report_type=k+1;
01706             <span class="keywordflow">return</span> 1;
01707         }
01708 
01709     <span class="keywordflow">for</span>(k=0;k&lt;3;k++)
01710         <span class="keywordflow">if</span>(mode_dept_button[12+k].<a class="code" href="classButton.html#a21">detect</a>()) {
01711             mode_dept_button[12+k].<a class="code" href="classButton.html#m12">body_ptr</a>=(<span class="keywordtype">void</span>*)(mode_dept_button_down_bitmap[12+k]+4);
01712             mode_dept_button[12+k].<a class="code" href="classButton.html#a24">push</a>();
01713 
01714             (*deinit_func_ptr[department_array.current_screen_mode])();
01715             sys.redraw_all_flag = 1;
01716             <span class="keywordflow">if</span>((k==0)||(k==1))
01717                 department_array.current_screen_mode=<a class="code" href="Odept__if_8cpp.html#a139a89">MODE_DEPT_MAIN</a>;
01718             department_array.current_data_mode=k;
01719             <span class="keywordflow">return</span> 1;
01720         }
01721 
01722     <span class="comment">//  if(button_back.detect())</span>
01723     <span class="comment">//  {</span>
01724     <span class="comment">//    (*deinit_func_ptr[department_array.current_screen_mode])();</span>
01725     <span class="comment">//    //-------- post display redraw flag -------//</span>
01726     <span class="comment">//    sys.redraw_all_flag = 1;</span>
01727 
01728     <span class="comment">//   return 1;</span>
01729     <span class="comment">//  }</span>
01730     <span class="keywordflow">return</span> 0;
01731 };
01732 
01733 <span class="keywordtype">void</span> deinit_rank() {
01734     <span class="comment">//--------- deallocate memory -------------//</span>
01735 
01736     <span class="comment">// #### begin Gilbert 28/04/2001 ######//</span>
01737     rk_browser.<a class="code" href="classVBrowse98.html#a3">deinit</a>();
01738     <span class="comment">// #### end Gilbert 28/04/2001 ######//</span>
01739 
01740     <span class="keywordflow">if</span> (mode_dept_button_up_bitmap[0]) {
01741         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=0;k&lt;6;k++) {
01742             <span class="comment">// ##### begin Gilbert 25/04/2001 #####//</span>
01743             mode_dept_button[k].<a class="code" href="classButton.html#a2">deinit</a>();
01744             <span class="comment">// ##### end Gilbert 25/04/2001 #####//</span>
01745             <a class="code" href="ALL_8H.html#a8">mem_del</a>(mode_dept_button_up_bitmap[k]);
01746             <a class="code" href="ALL_8H.html#a8">mem_del</a>(mode_dept_button_down_bitmap[k]);
01747             mode_dept_button_up_bitmap[k] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
01748             mode_dept_button_down_bitmap[k] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
01749         }
01750     }
01751 
01752     <span class="keywordflow">if</span> (mode_dept_button_up_bitmap[6]) {
01753         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=6;k&lt;12;k++) {
01754             <span class="comment">// ##### begin Gilbert 25/04/2001 #####//</span>
01755             mode_dept_button[k].<a class="code" href="classButton.html#a2">deinit</a>();
01756             <span class="comment">// ##### end Gilbert 25/04/2001 #####//</span>
01757             <a class="code" href="ALL_8H.html#a8">mem_del</a>(mode_dept_button_up_bitmap[k]);
01758             <a class="code" href="ALL_8H.html#a8">mem_del</a>(mode_dept_button_down_bitmap[k]);
01759             mode_dept_button_up_bitmap[k] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
01760             mode_dept_button_down_bitmap[k] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
01761         }
01762     }
01763 
01764     <span class="keywordflow">if</span> (mode_dept_button_up_bitmap[12]) {
01765         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=12;k&lt;15;k++) {
01766             <span class="comment">// ##### begin Gilbert 25/04/2001 #####//</span>
01767             mode_dept_button[k].<a class="code" href="classButton.html#a2">deinit</a>();
01768             <span class="comment">// ##### end Gilbert 25/04/2001 #####//</span>
01769             <a class="code" href="ALL_8H.html#a8">mem_del</a>(mode_dept_button_up_bitmap[k]);
01770             <a class="code" href="ALL_8H.html#a8">mem_del</a>(mode_dept_button_down_bitmap[k]);
01771             mode_dept_button_up_bitmap[k] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
01772             mode_dept_button_down_bitmap[k] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
01773         }
01774     }
01775 }
01776 
01777 <span class="keyword">static</span> <span class="keywordtype">void</span> rk_disp_rep_row(<span class="keywordtype">int</span> recNo, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> refreshFlag) {
01778     <span class="comment">//----- display financial report -----//</span>
01779     <span class="keywordflow">if</span>( refreshFlag == <a class="code" href="Gamedef_8h.html#a71a16">INFO_REPAINT</a> ) {
01780         vga.use_back();
01781 
01782         <span class="comment">//              vga.blt_buf( x, y, REPORT_X2-45, y+REC_HEIGHT-2);</span>
01783     }
01784 
01785     <span class="keywordtype">int</span> tab1=35;
01786 
01787   <span class="comment">// ###### Begin MArco ##### //</span>
01788 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
01789 <span class="preprocessor"></span>    <span class="keywordtype">int</span> tab2=300;
01790     <span class="keywordtype">int</span> tab3=370;
01791 <span class="preprocessor">#else</span>
01792 <span class="preprocessor"></span>    <span class="keywordtype">int</span> tab2=320;
01793 <span class="preprocessor">#endif</span>
01794 <span class="preprocessor"></span>    <span class="comment">// ###### End MArco ##### //</span>
01795 
01796   <span class="comment">//    user_interface.bar(x, y, x+tab1+tab2+50, y+REC_HEIGHT+2,SHEET_COLOR);</span>
01797 
01798     <span class="keywordflow">if</span>(recNo!=1) {
01799         font_chartsm.put(x+tab1-20, y,recNo-1);
01800     }
01801 
01802     <span class="keywordflow">if</span>(department_array.current_pref_report_type==<a class="code" href="Odept__if_8cpp.html#a139a94">MODE_DEPT_FACULTY_MORALE</a>) {
01803         <span class="keywordflow">if</span>(recNo==1) {
01804             font_charts.put
01805                 ( x+tab1, y, <span class="stringliteral">"Department"</span>);
01806             font_charts.put
01807                 ( x+tab2-80, y,<span class="stringliteral">"Faculty morale"</span>);
01808 
01809             <span class="comment">// #### Begin MArco ##### //</span>
01810 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
01811 <span class="preprocessor"></span>            font_chart_purple_sm.put
01812                 ( x+tab3-10, y,<span class="stringliteral">"Initial"</span>);
01813 <span class="preprocessor">#endif</span>
01814 <span class="preprocessor"></span>            <span class="comment">// ### End MArco ##### //</span>
01815         }
01816         <span class="keywordflow">else</span> {
01817             <span class="keywordtype">int</span> this_index=department_array.p_faculty_morale_sort[recNo-2];
01818             <a class="code" href="classString.html">String</a> tmp=department_array[this_index]-&gt;<a class="code" href="classDepartment.html#a3">name</a>();
01819             tmp.<a class="code" href="classString.html#m0">str_buf</a>[tmp.<a class="code" href="classString.html#a5">len</a>()-10]=<span class="charliteral">'\0'</span>;
01820             font_chartsm.put_paragraph
01821                 ( x+tab1, y, x+tab2,  y+<a class="code" href="Odept__if_8cpp.html#a0">REC_HEIGHT</a>-2,tmp.<a class="code" href="classString.html#m0">str_buf</a>);
01822             font_chartsm.put_paragraph
01823                 ( x+tab2, y, x+tab2+50, y+<a class="code" href="Odept__if_8cpp.html#a0">REC_HEIGHT</a>-2,
01824                   m.format(department_array[this_index]-&gt;p_faculty_morale,4));
01825 
01826             <span class="comment">//##### Begin Marco ##### //</span>
01827 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
01828 <span class="preprocessor"></span>            font_chart_purple_sm.put_paragraph
01829                 ( x+tab3, y, x+tab3+50, y+<a class="code" href="Odept__if_8cpp.html#a0">REC_HEIGHT</a>-2,
01830                   m.format(department_array[this_index]-&gt;initial_p_faculty_morale,4));
01831 <span class="preprocessor">#endif</span>
01832 <span class="preprocessor"></span>            <span class="comment">//##### End MArco ##### //</span>
01833 
01834         }
01835     }
01836     <span class="keywordflow">if</span>(department_array.current_pref_report_type==<a class="code" href="Odept__if_8cpp.html#a139a95">MODE_DEPT_FACULTY_DIVERSITY_INDEX</a>) {
01837         <span class="keywordflow">if</span>(recNo==1) {
01838             font_charts.put
01839                 ( x+tab1, y, <span class="stringliteral">"Department"</span>);
01840             font_charts.put
01841                 ( x+tab2-130, y,<span class="stringliteral">"Faculty diversity index"</span>);
01842 
01843             <span class="comment">// #### Begin MArco ##### //</span>
01844 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
01845 <span class="preprocessor"></span>            font_chart_purple_sm.put
01846                 ( x+tab3-10, y,<span class="stringliteral">"Initial"</span>);
01847 <span class="preprocessor">#endif</span>
01848 <span class="preprocessor"></span>            <span class="comment">// ### End MArco ##### //</span>
01849         }
01850         <span class="keywordflow">else</span> {
01851             <span class="keywordtype">int</span> this_index=department_array.p_faculty_diversity_sort[recNo-2];
01852             <a class="code" href="classString.html">String</a> tmp=department_array[this_index]-&gt;<a class="code" href="classDepartment.html#a3">name</a>();
01853             tmp.<a class="code" href="classString.html#m0">str_buf</a>[tmp.<a class="code" href="classString.html#a5">len</a>()-10]=<span class="charliteral">'\0'</span>;
01854             font_chartsm.put_paragraph
01855                 ( x+tab1, y, x+tab2,  y+<a class="code" href="Odept__if_8cpp.html#a0">REC_HEIGHT</a>-2,tmp.<a class="code" href="classString.html#m0">str_buf</a>);
01856             font_chartsm.put_paragraph
01857                 ( x+tab2, y, x+tab2+50, y+<a class="code" href="Odept__if_8cpp.html#a0">REC_HEIGHT</a>-2,
01858                   m.format(department_array[this_index]-&gt;p_faculty_diversity,4));
01859 
01860             <span class="comment">// ##### Begin Marco ##### //</span>
01861 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
01862 <span class="preprocessor"></span>            font_chart_purple_sm.put_paragraph
01863                 ( x+tab3, y, x+tab3+50, y+<a class="code" href="Odept__if_8cpp.html#a0">REC_HEIGHT</a>-2,
01864                   m.format(department_array[this_index]-&gt;initial_p_faculty_diversity,4));
01865 <span class="preprocessor">#endif</span>
01866 <span class="preprocessor"></span>            <span class="comment">// ##### End MArco ##### //</span>
01867 
01868         }
01869     }
01870     <span class="keywordflow">if</span>(department_array.current_pref_report_type==<a class="code" href="Odept__if_8cpp.html#a139a93">MODE_DEPT_FACULTY_RESEARCH_PERFORMANCE</a>) {
01871         <span class="keywordflow">if</span>(recNo==1) {
01872             font_charts.put
01873                 ( x+tab1, y, <span class="stringliteral">"Department"</span>);
01874             font_charts.put
01875                 ( x+tab2-165, y,<span class="stringliteral">"Faculty research performance"</span>);
01876 
01877             <span class="comment">// #### Begin MArco ##### //</span>
01878 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
01879 <span class="preprocessor"></span>            font_chart_purple_sm.put
01880                 ( x+tab3-10, y,<span class="stringliteral">"Initial"</span>);
01881 <span class="preprocessor">#endif</span>
01882 <span class="preprocessor"></span>            <span class="comment">// ### End MArco ##### //</span>
01883 
01884         }
01885         <span class="keywordflow">else</span> {
01886             <span class="keywordtype">int</span> this_index=department_array.p_faculty_research_sort[recNo-2];
01887             <a class="code" href="classString.html">String</a> tmp=department_array[this_index]-&gt;<a class="code" href="classDepartment.html#a3">name</a>();
01888             tmp.<a class="code" href="classString.html#m0">str_buf</a>[tmp.<a class="code" href="classString.html#a5">len</a>()-10]=<span class="charliteral">'\0'</span>;
01889 
01890             font_chartsm.put_paragraph
01891                 ( x+tab1, y, x+tab2,  y+<a class="code" href="Odept__if_8cpp.html#a0">REC_HEIGHT</a>-2,tmp.<a class="code" href="classString.html#m0">str_buf</a>);
01892             font_chartsm.put_paragraph
01893                 ( x+tab2, y, x+tab2+50, y+<a class="code" href="Odept__if_8cpp.html#a0">REC_HEIGHT</a>-2,
01894                   m.format(department_array[this_index]-&gt;p_faculty_research,4));
01895 
01896             <span class="comment">// ##### Begin Marco ##### //</span>
01897 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
01898 <span class="preprocessor"></span>            font_chart_purple_sm.put_paragraph
01899                 ( x+tab3, y, x+tab3+50, y+<a class="code" href="Odept__if_8cpp.html#a0">REC_HEIGHT</a>-2,
01900                   m.format(department_array[this_index]-&gt;initial_p_faculty_research,4));
01901 <span class="preprocessor">#endif</span>
01902 <span class="preprocessor"></span>            <span class="comment">// ##### End MArco ##### //</span>
01903 
01904         }
01905     }
01906     <span class="keywordflow">if</span>(department_array.current_pref_report_type==<a class="code" href="Odept__if_8cpp.html#a139a92">MODE_DEPT_STUDENT_MORALE</a>) {
01907         <span class="keywordflow">if</span>(recNo==1) {
01908             font_charts.put
01909                 ( x+tab1, y, <span class="stringliteral">"Department"</span>);
01910             font_charts.put
01911                 ( x+tab2-80, y,<span class="stringliteral">"Student morale"</span>);
01912 
01913             <span class="comment">// #### Begin MArco ##### //</span>
01914 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
01915 <span class="preprocessor"></span>            font_chart_purple_sm.put
01916                 ( x+tab3-10, y,<span class="stringliteral">"Initial"</span>);
01917 <span class="preprocessor">#endif</span>
01918 <span class="preprocessor"></span>            <span class="comment">// ### End MArco ##### //</span>
01919 
01920         }
01921         <span class="keywordflow">else</span> {
01922             <span class="keywordtype">int</span> this_index=department_array.p_student_morale_sort[recNo-2];
01923             <a class="code" href="classString.html">String</a> tmp=department_array[this_index]-&gt;<a class="code" href="classDepartment.html#a3">name</a>();
01924             tmp.<a class="code" href="classString.html#m0">str_buf</a>[tmp.<a class="code" href="classString.html#a5">len</a>()-10]=<span class="charliteral">'\0'</span>;
01925             font_chartsm.put_paragraph
01926                 ( x+tab1, y, x+tab2,  y+<a class="code" href="Odept__if_8cpp.html#a0">REC_HEIGHT</a>-2,tmp.<a class="code" href="classString.html#m0">str_buf</a>);
01927             font_chartsm.put_paragraph
01928                 ( x+tab2, y, x+tab2+50, y+<a class="code" href="Odept__if_8cpp.html#a0">REC_HEIGHT</a>-2,
01929                   m.format(department_array[this_index]-&gt;p_student_morale,4));
01930 
01931             <span class="comment">// ##### Begin Marco ##### //</span>
01932 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
01933 <span class="preprocessor"></span>            font_chart_purple_sm.put_paragraph
01934                 ( x+tab3, y, x+tab3+50, y+<a class="code" href="Odept__if_8cpp.html#a0">REC_HEIGHT</a>-2,
01935                   m.format(department_array[this_index]-&gt;initial_p_student_morale,4));
01936 <span class="preprocessor">#endif</span>
01937 <span class="preprocessor"></span>            <span class="comment">// ##### End Marco ##### //</span>
01938 
01939         }
01940     }
01941     <span class="keywordflow">if</span>(department_array.current_pref_report_type==<a class="code" href="Odept__if_8cpp.html#a139a91">MODE_DEPT_DEPARTMENTAL_ACADEMIC_STANDING</a>) {
01942         <span class="keywordflow">if</span>(recNo==1) {
01943             font_charts.put
01944                 ( x+tab1, y, <span class="stringliteral">"Department"</span>);
01945             font_charts.put
01946                 ( x+tab2-110, y,<span class="stringliteral">"Departmental Prestige"</span>);
01947 
01948             <span class="comment">// #### Begin MArco ##### //</span>
01949 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
01950 <span class="preprocessor"></span>            font_chart_purple_sm.put
01951                 ( x+tab3-10, y,<span class="stringliteral">"Initial"</span>);
01952 <span class="preprocessor">#endif</span>
01953 <span class="preprocessor"></span>            <span class="comment">// ### End MArco ##### //</span>
01954         }
01955         <span class="keywordflow">else</span> {
01956             <span class="keywordtype">int</span> this_index=department_array.p_academic_standing_sort[recNo-2];
01957             <a class="code" href="classString.html">String</a> tmp=department_array[this_index]-&gt;<a class="code" href="classDepartment.html#a3">name</a>();
01958             tmp.<a class="code" href="classString.html#m0">str_buf</a>[tmp.<a class="code" href="classString.html#a5">len</a>()-10]=<span class="charliteral">'\0'</span>;
01959             font_chartsm.put_paragraph
01960                 ( x+tab1, y, x+tab2,  y+<a class="code" href="Odept__if_8cpp.html#a0">REC_HEIGHT</a>-2,tmp.<a class="code" href="classString.html#m0">str_buf</a>);
01961             font_chartsm.put_paragraph
01962                 ( x+tab2, y, x+tab2+50, y+<a class="code" href="Odept__if_8cpp.html#a0">REC_HEIGHT</a>-2,
01963                   m.format(department_array[this_index]-&gt;p_academic_standing,4));
01964 
01965             <span class="comment">// ##### Begin Marco ##### //</span>
01966 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
01967 <span class="preprocessor"></span>            font_chart_purple_sm.put_paragraph
01968                 ( x+tab3, y, x+tab3+50, y+<a class="code" href="Odept__if_8cpp.html#a0">REC_HEIGHT</a>-2,
01969                   m.format(department_array[this_index]-&gt;initial_p_academic_standing,4));
01970 <span class="preprocessor">#endif</span>
01971 <span class="preprocessor"></span>            <span class="comment">// ##### End MArco #### //</span>
01972 
01973         }
01974     }
01975     <span class="keywordflow">if</span>(department_array.current_pref_report_type==<a class="code" href="Odept__if_8cpp.html#a139a90">MODE_DEPT_EDUCATIONAL_QUALITY</a>) {
01976         <span class="keywordflow">if</span>(recNo==1) {
01977             font_charts.put
01978                 ( x+tab1, y, <span class="stringliteral">"Department"</span>);
01979 
01980             font_charts.put
01981                 ( x+tab2-110, y,<span class="stringliteral">"Educational quality"</span>);
01982 
01983             <span class="comment">// #### Begin MArco ##### //</span>
01984 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
01985 <span class="preprocessor"></span>            font_chart_purple_sm.put
01986                 ( x+tab3-10, y,<span class="stringliteral">"Initial"</span>);
01987 <span class="preprocessor">#endif</span>
01988 <span class="preprocessor"></span>            <span class="comment">// ### End MArco ##### //</span>
01989         }
01990         <span class="keywordflow">else</span> {
01991             <span class="keywordtype">int</span> this_index=department_array.p_educational_quality_sort[recNo-2];
01992             <a class="code" href="classString.html">String</a> tmp=department_array[this_index]-&gt;<a class="code" href="classDepartment.html#a3">name</a>();
01993             tmp.<a class="code" href="classString.html#m0">str_buf</a>[tmp.<a class="code" href="classString.html#a5">len</a>()-10]=<span class="charliteral">'\0'</span>;
01994             font_chartsm.put_paragraph
01995                 ( x+tab1, y, x+tab2,  y+<a class="code" href="Odept__if_8cpp.html#a0">REC_HEIGHT</a>-2,tmp.<a class="code" href="classString.html#m0">str_buf</a>);
01996             font_chartsm.put_paragraph
01997                 ( x+tab2, y, x+tab2+50, y+<a class="code" href="Odept__if_8cpp.html#a0">REC_HEIGHT</a>-2,
01998                   m.format(department_array[this_index]-&gt;p_educational_quality,4));
01999 
02000             <span class="comment">// ##### Begin MArco ##### //</span>
02001 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
02002 <span class="preprocessor"></span>            font_chart_purple_sm.put_paragraph
02003                 ( x+tab3, y, x+tab3+50, y+<a class="code" href="Odept__if_8cpp.html#a0">REC_HEIGHT</a>-2,
02004                   m.format(department_array[this_index]-&gt;initial_p_educational_quality,4));
02005 <span class="preprocessor">#endif</span>
02006 <span class="preprocessor"></span>            <span class="comment">// ##### End MArco ##### //</span>
02007         }
02008     }
02009 };
02010 
02011 <span class="comment">//</span>
02012 <span class="comment">//-------- End of functions report/detect/deinit rank ---------//</span>
02013 
02014 <span class="keyword">enum</span>{<a class="code" href="Odept__if_8cpp.html#a140a98">TMP_SCENARIO_COUNT</a>=10};
02015 <span class="keyword">static</span> <span class="keywordtype">char</span>* scn_name[<a class="code" href="Odept__if_8cpp.html#a140a98">TMP_SCENARIO_COUNT</a>] = {
02016     <span class="stringliteral">"Scenario 1. PAY BETTER"</span>,
02017     <span class="stringliteral">"Scenario 2. ALLOCATE NEW MONEY"</span>,
02018     <span class="stringliteral">"Scenario 3. TEACH BETTER"</span>,
02019     <span class="stringliteral">"Scenario 4. IMPROVE RESEARCH PERFORMANCE"</span>,
02020     <span class="stringliteral">"Scenario 5. WIN GAMES"</span>,
02021     <span class="stringliteral">"Scenario 6. REDUCE TUITION"</span>,
02022     <span class="stringliteral">"Scenario 7. RESPOND TO ENROLLMENT SHIFTS"</span>,
02023     <span class="stringliteral">"Scenario 8. ENROLL MORE MINORITY STUDENTS"</span>,
02024     <span class="stringliteral">"Scenario 9. HIRE MORE MINORITY FACULTY MEMBERS"</span>,
02025     <span class="stringliteral">"Scenario 10. BALANCE THE BUDGET"</span>,
02026 };
02027 
02028 <span class="comment">// begin ## chwg031599</span>
02029 <span class="comment">// ##### begin Gilbert 19/04/2001 ###### //</span>
02030 <span class="comment">//static short * back_buf_backup;</span>
02031 <span class="keyword">static</span> <span class="keywordtype">short</span> * back_buf_backup = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
02032 <span class="comment">// ##### end Gilbert 19/04/2001 ###### //</span>
<a name="l02033"></a><a class="code" href="classDepartment.html#a15">02033</a> <span class="keywordtype">void</span> <a class="code" href="classDepartment.html#a15">Department::print_report</a>() {
02034     <span class="keywordflow">if</span>(back_buf_backup) {
02035         <a class="code" href="ALL_8H.html#a8">mem_del</a>(back_buf_backup);
02036         back_buf_backup = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
02037     }
02038     back_buf_backup = vga_back.save_area(
02039         0,0,<a class="code" href="OVGA_8H.html#a0">VGA_WIDTH</a>-1,<a class="code" href="OVGA_8H.html#a1">VGA_HEIGHT</a>-1,
02040         back_buf_backup);
02042     <span class="comment">// Part1 Draw six graphs on the back buffer</span>
02043     <span class="keywordtype">int</span> numSeriesData36 = HISTORY_MONTH_COUNT;
02044     <span class="keywordtype">int</span> numSeriesData24 = HISTORY_TRIMESTER_COUNT;
02045     <span class="keywordtype">int</span> numSeriesData8 = HISTORY_YEAR_COUNT;
02046 
02047     <span class="keywordtype">float</span> xStart0,xEnd0;
02048     <span class="keywordtype">int</span> xStart1,xEnd1;
02049     <span class="keywordtype">float</span> xStart2,xEnd2;
02050     <span class="keywordtype">float</span> xStart3,xEnd3;
02051     <span class="keywordtype">float</span> xStart4,xEnd4;
02052     <span class="keywordtype">int</span> xStart5,xEnd5;
02053 
02054     <span class="keywordtype">float</span> *dataArray1;
02055     <span class="keywordtype">float</span> *dataArray2;
02056     <span class="keywordtype">float</span> *dataArray3;
02057     <span class="keywordtype">float</span> *dataArray4;
02058     <span class="keywordtype">float</span> *dataArray5;
02059     <span class="keywordtype">float</span> *dataArray0;
02060 
02061     <span class="keywordtype">int</span> deptRecno = department_array.selected_recno;
02062     <a class="code" href="classDepartment.html">Department</a>* cur_dept_ptr = department_array[deptRecno];
02063 
02064     vga.use_back();
02065     vga_back.bar(260, 515, 620, 590, <a class="code" href="COLOR_8H.html#a15">V_BLACK</a> );
02066     font_fblack.put(265,520,<span class="stringliteral">"Report printing...."</span>);
02067     vga.blt_buf(260, 515, 620, 590);
02068     vga_back.bar(260, 515, 620, 590, <a class="code" href="COLOR_8H.html#a15">V_BLACK</a> );
02069 
02070     dataArray0=cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#m52">p_educational_quality_history</a>;
02071     dataArray1=cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#m53">p_academic_standing_history</a>;
02072     dataArray2=cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#m54">p_student_morale_history</a>;
02073     dataArray3=cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#m55">p_faculty_research_history</a>;
02074     dataArray4=cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#m56">p_faculty_morale_history</a>;
02075     dataArray5=cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#m57">p_faculty_diversity_history</a>;
02076     <span class="comment">//-----------initial data-----------//</span>
02077 
02078     xEnd0 = float(info.game_year)+float(info.game_month)/12.0f;
02079     xStart0 = xEnd0-6.0f;
02080     xEnd1 = (info.game_year);
02081     xStart1 = (info.game_year-numSeriesData8+1);
02082     xEnd2 = float(info.game_year)+float(info.game_month)/12.0f;
02083     xStart2 = xEnd2-6.0f;
02084     xEnd3 = float(info.game_year)+float(info.game_month)/12.0f;
02085     xStart3 = xEnd3-3.0f;
02086     xEnd4 = float(info.game_year)+float(info.game_month)/12.0f;
02087     xStart4 = xEnd4-3.0f;
02088     xEnd5 = (info.game_year);
02089     xStart5 = (info.game_year-numSeriesData8+1);
02090 
02091     vga_back.bar_fast(0,0,<a class="code" href="OVGA_8H.html#a0">VGA_WIDTH</a>-1,<a class="code" href="OVGA_8H.html#a1">VGA_HEIGHT</a>-1,<a class="code" href="COLOR_8H.html#a17">V_WHITE</a>);
02092     <span class="keywordflow">if</span>(!report_init_flag) {
02093         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> y = <a class="code" href="Odept__if_8cpp.html#a137a83">MODE_DEPT_VTAB1</a>+<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+15,i=0,k=0;i&lt;2;i++,y+=<a class="code" href="Odept__if_8cpp.html#a136a76">BUTTON_VDIST</a>)
02094             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> x = <a class="code" href="Odept__if_8cpp.html#a137a79">MODE_DEPT_TAB0</a>+<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>,j=0;j&lt;3;j++,x+=<a class="code" href="Odept__if_8cpp.html#a136a75">BUTTON_DIST</a>,k++) {
02095                 <span class="keywordflow">if</span>(k==0)
02096                     mode_dept_graph0.<a class="code" href="classGraphNonFinancialTrimester.html#a2">init</a>(
02097                         x, y,
02098                         x+<a class="code" href="Odept__if_8cpp.html#a137a77">MODE_DEPT_GRAPH_WIDTH</a>, y+<a class="code" href="Odept__if_8cpp.html#a137a78">MODE_DEPT_GRAPH_HEIGHT</a>,
02099                         1, &amp;numSeriesData24, dataArray0, 0,
02100                         <a class="code" href="OHELP_8H.html#a0">NULL</a>, <a class="code" href="OHELP_8H.html#a0">NULL</a>, <a class="code" href="OHELP_8H.html#a0">NULL</a>, 1, 1, 1, 3);
02101 
02102                 <span class="keywordflow">if</span>(k==1)
02103                     mode_dept_graph1.<a class="code" href="classGraphNonFinancialYear.html#a2">init</a>(
02104                         x, y,
02105                         x+<a class="code" href="Odept__if_8cpp.html#a137a77">MODE_DEPT_GRAPH_WIDTH</a>, y+<a class="code" href="Odept__if_8cpp.html#a137a78">MODE_DEPT_GRAPH_HEIGHT</a>,
02106                         1, &amp;numSeriesData8, dataArray1, 0,
02107                         <a class="code" href="OHELP_8H.html#a0">NULL</a>, <a class="code" href="OHELP_8H.html#a0">NULL</a>, <a class="code" href="OHELP_8H.html#a0">NULL</a>, 1, 1, 1, 3);
02108 
02109                 <span class="keywordflow">if</span>(k==2)
02110                     mode_dept_graph2.<a class="code" href="classGraphNonFinancialTrimester.html#a2">init</a>(
02111                         x, y,
02112                         x+<a class="code" href="Odept__if_8cpp.html#a137a77">MODE_DEPT_GRAPH_WIDTH</a>, y+<a class="code" href="Odept__if_8cpp.html#a137a78">MODE_DEPT_GRAPH_HEIGHT</a>,
02113                         1, &amp;numSeriesData24, dataArray2, 0,
02114                         <a class="code" href="OHELP_8H.html#a0">NULL</a>, <a class="code" href="OHELP_8H.html#a0">NULL</a>, <a class="code" href="OHELP_8H.html#a0">NULL</a>, 1, 1, 1, 3);
02115 
02116                 <span class="keywordflow">if</span>(k==3)
02117                     mode_dept_graph3.<a class="code" href="classGraphNonFinancialMonth.html#a2">init</a>(
02118                         x, y,
02119                         x+<a class="code" href="Odept__if_8cpp.html#a137a77">MODE_DEPT_GRAPH_WIDTH</a>, y+<a class="code" href="Odept__if_8cpp.html#a137a78">MODE_DEPT_GRAPH_HEIGHT</a>,
02120                         1, &amp;numSeriesData36, dataArray3,
02121                         0,
02122                         <a class="code" href="OHELP_8H.html#a0">NULL</a>, <a class="code" href="OHELP_8H.html#a0">NULL</a>, <a class="code" href="OHELP_8H.html#a0">NULL</a>, 1,
02123                         1, 1, 3);
02124 
02125                 <span class="keywordflow">if</span>(k==4)
02126                     mode_dept_graph4.<a class="code" href="classGraphNonFinancialMonth.html#a2">init</a>(
02127                         x, y,
02128                         x+<a class="code" href="Odept__if_8cpp.html#a137a77">MODE_DEPT_GRAPH_WIDTH</a>, y+<a class="code" href="Odept__if_8cpp.html#a137a78">MODE_DEPT_GRAPH_HEIGHT</a>,
02129                         1, &amp;numSeriesData36, dataArray4,
02130                         0,
02131                         <a class="code" href="OHELP_8H.html#a0">NULL</a>, <a class="code" href="OHELP_8H.html#a0">NULL</a>, <a class="code" href="OHELP_8H.html#a0">NULL</a>, 1, 1, 1, 3);
02132                 <span class="keywordflow">if</span>(k==5)
02133                     mode_dept_graph5.<a class="code" href="classGraphNonFinancialYear.html#a2">init</a>(
02134                         x, y,
02135                         x+<a class="code" href="Odept__if_8cpp.html#a137a77">MODE_DEPT_GRAPH_WIDTH</a>, y+<a class="code" href="Odept__if_8cpp.html#a137a78">MODE_DEPT_GRAPH_HEIGHT</a>,
02136                         1, &amp;numSeriesData8, dataArray5,
02137                         0,
02138                         <a class="code" href="OHELP_8H.html#a0">NULL</a>, <a class="code" href="OHELP_8H.html#a0">NULL</a>, <a class="code" href="OHELP_8H.html#a0">NULL</a>, 1, 1, 1, 3);
02139             }
02140     }
02141 
02142     mode_dept_graph0.<a class="code" href="classGraphNonFinancialTrimester.html#a8">paint</a>();
02143     mode_dept_graph1.<a class="code" href="classGraphNonFinancialYear.html#a8">paint</a>();
02144     mode_dept_graph2.<a class="code" href="classGraphNonFinancialTrimester.html#a8">paint</a>();
02145     mode_dept_graph3.<a class="code" href="classGraphNonFinancialMonth.html#a8">paint</a>();
02146     mode_dept_graph4.<a class="code" href="classGraphNonFinancialMonth.html#a8">paint</a>();
02147     mode_dept_graph5.<a class="code" href="classGraphNonFinancialYear.html#a8">paint</a>();
02148     <span class="comment">//---------------//</span>
02149     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> y = <a class="code" href="Odept__if_8cpp.html#a137a83">MODE_DEPT_VTAB1</a>+<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+15,i=0,k=0;i&lt;2;i++,y+=<a class="code" href="Odept__if_8cpp.html#a136a76">BUTTON_VDIST</a>)
02150         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> x = <a class="code" href="Odept__if_8cpp.html#a137a79">MODE_DEPT_TAB0</a>+<a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>,j=0;j&lt;3;j++,x+=<a class="code" href="Odept__if_8cpp.html#a136a75">BUTTON_DIST</a>,k++) {
02151             font_chartsm.center_put(x,y-<a class="code" href="Odept__if_8cpp.html#a136a74">BUTTON_HEIGHT</a>+7,x+<a class="code" href="Odept__if_8cpp.html#a137a77">MODE_DEPT_GRAPH_WIDTH</a>,y-<a class="code" href="Odept__if_8cpp.html#a136a74">BUTTON_HEIGHT</a>+23,mode_dept_str[k]);
02152         }
02153     <span class="keywordflow">if</span>(!report_init_flag)
02154         deinit_main();
02155     <span class="comment">// #### begin Gilbert 28/04/2001 ######//</span>
02156     mode_dept_graph0.<a class="code" href="classGraphNonFinancialTrimester.html#a7">deinit</a>();
02157     mode_dept_graph1.<a class="code" href="classGraphNonFinancialYear.html#a7">deinit</a>();
02158     mode_dept_graph2.<a class="code" href="classGraphNonFinancialTrimester.html#a7">deinit</a>();
02159     mode_dept_graph3.<a class="code" href="classGraphNonFinancialMonth.html#a7">deinit</a>();
02160     mode_dept_graph4.<a class="code" href="classGraphNonFinancialMonth.html#a7">deinit</a>();
02161     mode_dept_graph5.<a class="code" href="classGraphNonFinancialYear.html#a7">deinit</a>();
02162     <span class="comment">// #### end Gilbert 28/04/2001 ######//</span>
02163     <span class="comment">// end of creating bitmap</span>
02164 
02165     <span class="comment">// #### begin Gilbert 07/07/2001 ######//</span>
02166     <span class="comment">// vga_back.write_bmp_file("prn001.bmp");</span>
02167     <span class="keywordtype">short</span> *prn001 = vga_back.save_area(
02168         0,0,<a class="code" href="OVGA_8H.html#a0">VGA_WIDTH</a>-1,<a class="code" href="OVGA_8H.html#a1">VGA_HEIGHT</a>-1,
02169         <a class="code" href="OHELP_8H.html#a0">NULL</a>);
02170     <span class="comment">// #### end Gilbert 07/07/2001 ######//</span>
02171 
02173     <span class="comment">// Part2 Generate trend bitmaps</span>
02174     <span class="comment">// Initization</span>
02175     <span class="keywordtype">int</span> tab1=30,tab2=320,tab3=420,tab4=490;
02176     <span class="keywordtype">int</span> tab5=620,tab6=680,tab7=660,tab8=760;
02177     <span class="keywordtype">int</span> vtab1=22,vtab2=37,vtab3=200,vtab4=350,vtab5=320;
02178     <span class="keywordtype">int</span> data_num=HISTORY_TRIMESTER_COUNT;
02179     <span class="keywordtype">float</span> * dataArray[<a class="code" href="Odept_8h.html#a17a2">EDUCATIONAL_QUALITY_VAR_COUNT</a>];
02180     <span class="keywordtype">float</span> * dataArrayA;
02181 
02182     <span class="comment">// Read graphicons data</span>
02183     dataArrayA=cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#m52">p_educational_quality_history</a>;
02184     <span class="keywordflow">for</span>(i=0;i&lt;<a class="code" href="Odept_8h.html#a17a2">EDUCATIONAL_QUALITY_VAR_COUNT</a>;i++)
02185         dataArray[i]=cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#m58">var_educational_quality_history</a>[i];
02186 
02187     <span class="comment">// Init graphicons</span>
02188     <span class="keywordflow">if</span>(department_array.current_screen_mode!=<a class="code" href="Odept__if_8cpp.html#a139a90">MODE_DEPT_EDUCATIONAL_QUALITY</a>) {
02189         eq_graphiconA.<a class="code" href="classGraphPerformanceIndicatorTrimester.html#a2">init</a>(
02190             <a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab5-5,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1-8,
02191             <a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab6+5,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1+28,
02192             1 ,&amp;data_num ,dataArrayA, 1, 0, 3);
02193 
02194         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;<a class="code" href="Odept_8h.html#a17a2">EDUCATIONAL_QUALITY_VAR_COUNT</a>;i++)
02195             eq_graphicon[i].<a class="code" href="classGraphPerformanceIndicatorTrimester.html#a2">init</a>(
02196                 <a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab5,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1+i*42+40,
02197                 <a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab6,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1+i*42+68,
02198                 1 ,&amp;data_num ,dataArray[i], 1, 0, 3);
02199     }
02200 
02201     <span class="comment">// Drawing bitmap</span>
02202     vga_back.bar_fast(0,0,<a class="code" href="OVGA_8H.html#a0">VGA_WIDTH</a>-1,<a class="code" href="OVGA_8H.html#a1">VGA_HEIGHT</a>-1,<a class="code" href="COLOR_8H.html#a17">V_WHITE</a>);
02203     eq_graphiconA.<a class="code" href="classGraphPerformanceIndicatorTrimester.html#a8">paint</a>();
02204     <span class="keywordflow">for</span>(i=0;i&lt;<a class="code" href="Odept_8h.html#a17a2">EDUCATIONAL_QUALITY_VAR_COUNT</a>;i++)
02205         eq_graphicon[i].<a class="code" href="classGraphPerformanceIndicatorTrimester.html#a8">paint</a>();
02206 
02207     <span class="comment">// Deinit graphicons</span>
02208     <span class="keywordflow">if</span>(department_array.current_screen_mode!=<a class="code" href="Odept__if_8cpp.html#a139a90">MODE_DEPT_EDUCATIONAL_QUALITY</a>) {
02209         eq_graphiconA.<a class="code" href="classGraphPerformanceIndicatorTrimester.html#a7">deinit</a>();
02210         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;<a class="code" href="Odept_8h.html#a17a2">EDUCATIONAL_QUALITY_VAR_COUNT</a>;i++)
02211             eq_graphicon[i].<a class="code" href="classGraphPerformanceIndicatorTrimester.html#a7">deinit</a>();
02212     }
02213     <span class="comment">// Write bitmap</span>
02214     <span class="comment">// #### begin Gilbert 07/07/2001 ######//</span>
02215     <span class="comment">// vga_back.write_bmp_file("prn002.bmp");</span>
02216     <span class="keywordtype">short</span> *prn002 = vga_back.save_area(
02217         0,0,<a class="code" href="OVGA_8H.html#a0">VGA_WIDTH</a>-1,<a class="code" href="OVGA_8H.html#a1">VGA_HEIGHT</a>-1,
02218         <a class="code" href="OHELP_8H.html#a0">NULL</a>);
02219     <span class="comment">// #### end Gilbert 07/07/2001 ######//</span>
02221 <span class="comment"></span>
02223 <span class="comment">    // Part3 Generate trend bitmaps</span>
02224     <span class="comment">// Initization</span>
02225     data_num=HISTORY_YEAR_COUNT;
02226     <span class="keywordtype">float</span> *as_dataArray[<a class="code" href="Odept_8h.html#a17a3">ACADEMIC_STANDING_VAR_COUNT</a>];
02227     <span class="keywordtype">float</span> *as_dataArrayA;
02228 
02229     <span class="comment">// Read graphicons data</span>
02230     as_dataArrayA=cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#m53">p_academic_standing_history</a>;
02231     <span class="keywordflow">for</span>(i=0;i&lt;<a class="code" href="Odept_8h.html#a17a3">ACADEMIC_STANDING_VAR_COUNT</a>;i++)
02232         as_dataArray[i]=cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#m59">var_academic_standing_history</a>[i];
02233 
02234     <span class="comment">// Init graphicons</span>
02235     <span class="keywordflow">if</span>(department_array.current_screen_mode!=<a class="code" href="Odept_8h.html#a17a3">ACADEMIC_STANDING_VAR_COUNT</a>) {
02236         as_graphiconA.<a class="code" href="classGraphPerformanceIndicatorYear.html#a2">init</a>(
02237             <a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab5,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1-8,
02238             <a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab6,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1+28,
02239             1 ,&amp;data_num ,as_dataArrayA, 1, 0, 3);
02240 
02241         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;<a class="code" href="Odept_8h.html#a17a3">ACADEMIC_STANDING_VAR_COUNT</a>;i++)
02242             as_graphicon[i].<a class="code" href="classGraphPerformanceIndicatorYear.html#a2">init</a>(
02243                 <a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab5-5,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1+i*56+40,
02244                 <a class="code" href="Odept__if_8cpp.html#a135a69">REPORT_X1</a>+tab6+5,<a class="code" href="Odept__if_8cpp.html#a135a70">REPORT_Y1</a>+vtab1+i*56+68,
02245                 1 ,&amp;data_num ,as_dataArray[i], 1, 0, 3);
02246     }
02247 
02248     <span class="comment">// Drawing bitmap</span>
02249     vga_back.bar_fast(0,0,<a class="code" href="OVGA_8H.html#a0">VGA_WIDTH</a>-1,<a class="code" href="OVGA_8H.html#a1">VGA_HEIGHT</a>-1,<a class="code" href="COLOR_8H.html#a17">V_WHITE</a>);
02250     as_graphiconA.<a class="code" href="classGraphPerformanceIndicatorYear.html#a8">paint</a>();
02251     <span class="keywordflow">for</span>(i=0;i&lt;<a class="code" href="Odept_8h.html#a17a3">ACADEMIC_STANDING_VAR_COUNT</a>;i++)
02252         as_graphicon[i].<a class="code" href="classGraphPerformanceIndicatorYear.html#a8">paint</a>();
02253 
02254     <span class="comment">// Deinit graphicons</span>
02255     <span class="keywordflow">if</span>(department_array.current_screen_mode!=<a class="code" href="Odept_8h.html#a17a3">ACADEMIC_STANDING_VAR_COUNT</a>) {
02256         as_graphiconA.<a class="code" href="classGraphPerformanceIndicatorYear.html#a7">deinit</a>();
02257         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;<a class="code" href="Odept_8h.html#a17a3">ACADEMIC_STANDING_VAR_COUNT</a>;i++)
02258             as_graphicon[i].<a class="code" href="classGraphPerformanceIndicatorYear.html#a7">deinit</a>();
02259     }
02260     <span class="comment">// Write bitmap</span>
02261     <span class="comment">// #### begin Gilbert 07/07/2001 ######//</span>
02262     <span class="comment">// vga_back.write_bmp_file("prn003.bmp");</span>
02263     <span class="keywordtype">short</span> *prn003 = vga_back.save_area(
02264         0,0,<a class="code" href="OVGA_8H.html#a0">VGA_WIDTH</a>-1,<a class="code" href="OVGA_8H.html#a1">VGA_HEIGHT</a>-1,
02265         <a class="code" href="OHELP_8H.html#a0">NULL</a>);
02266     <span class="comment">// #### end Gilbert 07/07/2001 ######//</span>
02267 
02269 
02270     <span class="comment">// ##### begin Gilbert 07/07/2001 ###### //</span>
02271     <span class="comment">// restore later after printing</span>
02272     <span class="comment">//vga_back.rest_area(back_buf_backup,1,0);</span>
02273     <span class="comment">//back_buf_backup = NULL;</span>
02274     <span class="comment">// ##### end Gilbert 07/07/2001 ###### //</span>
02275 
02276     <span class="comment">// Print here</span>
02277     {
02278         <a class="code" href="classMouseDispCount.html">MouseDispCount</a> mdc;
02279         <span class="comment">//First page printing</span>
02280         <span class="comment">//*********************start printing********************</span>
02281 
02282         print.start_print(sys.main_hwnd,sys.app_hinstance);
02283         print.open_page();
02284 
02285         <span class="comment">//this will print the bmp in the center of the paper and 1/7 down the page</span>
02286         <span class="comment">// ##### begin Gilbert 07/07/2001 ######//</span>
02287         vga_back.rest_area( prn001, 0 );
02288         <span class="comment">/*BMPWIDTH*/</span>
02289         print.put_vga_back(<span class="stringliteral">"prn001.bmp"</span>,696,342 <span class="comment">/*BMPHEIGHT*/</span>,
02290                            0.12,0.142,
02291                            54,71);                                     <span class="comment">/*upper left cor. of bitmap*/</span>
02292         <span class="comment">// ##### end Gilbert 07/07/2001 ######//</span>
02293 
02294         <span class="comment">//useage of dfont</span>
02295         <span class="comment">//dfont(int PointSize,bool italic,bool under,int weight [bold=700,normal=0,max=1000])</span>
02296         <span class="comment">//have to set the font before each print</span>
02297 
02298         print.dfont(18,<span class="keyword">false</span>,<span class="keyword">true</span>,700);
02299         print.put_text(<span class="stringliteral">"Virtual U Department Performance Detail Report"</span>,6,1);
02300 
02301         <a class="code" href="classString.html">String</a> str1;
02302         str1 = <span class="stringliteral">"Department : "</span>;
02303         str1 += cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#a3">name</a>();
02304         str1 += <span class="stringliteral">"                                                                                                                              "</span>;
02305         print.dfont(12,<span class="keyword">false</span>,<span class="keyword">false</span>,0);
02306         print.put_text(<span class="stringliteral">"________________________________________________________________________________________________________________________________________________________________________________________________"</span>,10,6);
02307         print.dfont(12,<span class="keyword">false</span>,<span class="keyword">true</span>,0);
02308         print.put_text(str1.<a class="code" href="classString.html#m0">str_buf</a>,10,7);
02309 
02310         print.dfont(9,<span class="keyword">false</span>,<span class="keyword">false</span>,0);
02311         print.put_text(<span class="stringliteral">"Insitution : "</span>,20,5);
02312         <span class="comment">//Player Institution</span>
02313         print.put_text(player_school.school_name,34,5);
02314         print.put_text(<span class="stringliteral">"President : "</span>,20,6);
02315         <a class="code" href="classString.html">String</a> str;
02316         str =  player_school.player_first_name;
02317         str += <span class="stringliteral">" "</span>;
02318         str += player_school.player_last_name;
02319         print.put_text(str.<a class="code" href="classString.html#m0">str_buf</a>,34,6);             <span class="comment">//President</span>
02320         print.put_text(<span class="stringliteral">"Date:"</span>,79,6);
02321         <span class="comment">// print.put_text(date.date_str(info.game_date),86,6);                   //date</span>
02322         <span class="comment">//date</span>
02323         print.put_text( info.date_str_julian(info.game_date),86,6);
02324 
02325         <span class="comment">//              print.put_text("Department:",10,10);</span>
02326         <span class="comment">//              print.put_text(cur_dept_ptr-&gt;name(),23,10);        //Department</span>
02327 
02328         print.dfont(9,<span class="keyword">false</span>,<span class="keyword">false</span>,700);
02329         <span class="keywordflow">if</span>(player_school.scenario_id&gt;0)
02330             print.put_text(scn_name[player_school.scenario_id-1],35,8);
02331         <span class="comment">//              print.put_text("Balance the Budget",44,8);                //scenario</span>
02332 
02333         print.dfont(9,<span class="keyword">false</span>,<span class="keyword">true</span>,0);
02334         print.put_text(<span class="stringliteral">"Contributors                                                                                                                                                                        "</span>,10,34);
02335         print.put_text(<span class="stringliteral">"Contributors                                                                                                                                                                       "</span>,10,54);
02336 
02337         print.dfont(9,<span class="keyword">false</span>,<span class="keyword">false</span>,0);
02338         print.put_text(<span class="stringliteral">"                                                                                       Current value   Weight   Last trimester change   Trend"</span>,10,32);
02339         print.put_text(<span class="stringliteral">"                                                                                       Current value   Weight   Last year change          Trend"</span>,10,52);
02340 
02341         <span class="comment">//educational Current value</span>
02342         print.put_text(m.format(dataArrayA[HISTORY_TRIMESTER_COUNT-1],1),69,33);
02343         <span class="keywordtype">float</span> eq_chg;
02344         <span class="keywordflow">if</span>(info.graph_trimester_passed&gt;1) {
02345             eq_chg=(float)(100.0*((double)dataArrayA[HISTORY_TRIMESTER_COUNT-1]
02346                                   -dataArrayA[HISTORY_TRIMESTER_COUNT-2])/
02347                            dataArrayA[HISTORY_TRIMESTER_COUNT-2]);
02348             <span class="keywordflow">if</span>((eq_chg&lt;0.0)&amp;&amp;(eq_chg&gt;-0.01))
02349                 eq_chg=0.0;
02350         }
02351         <span class="keywordflow">else</span>
02352             eq_chg=0.0;
02353         print.put_text(m.format(eq_chg,1),95,33);     <span class="comment">//educational last trimester change trend</span>
02354 
02355         <span class="comment">//department Current value</span>
02356         print.put_text(m.format(as_dataArrayA[HISTORY_YEAR_COUNT-1],1),69,53);
02357 
02358         <span class="keywordtype">float</span> da_chg;
02359         <span class="keywordflow">if</span>(info.graph_trimester_passed&gt;1) {
02360             da_chg=(float)
02361                 (100.0*((double)as_dataArrayA[HISTORY_YEAR_COUNT-1]
02362                         -as_dataArrayA[HISTORY_YEAR_COUNT-2])
02363                  /as_dataArrayA[HISTORY_YEAR_COUNT-2]);
02364             <span class="keywordflow">if</span>((da_chg&lt;0.0)&amp;&amp;(da_chg&gt;-0.01))
02365                 da_chg=0.0;
02366         }
02367         <span class="keywordflow">else</span>
02368             da_chg=0.0;
02369         print.put_text(m.format(da_chg,1),95,53);     <span class="comment">//department last year change</span>
02370 
02371         print.dfont(9,<span class="keyword">false</span>,<span class="keyword">false</span>,0);
02372         print.put_text(<span class="stringliteral">"Faculty teaching performance rating"</span>,10,36);
02373         <span class="comment">//educational Current value</span>
02374         print.put_text(m.format(dataArray[0][HISTORY_TRIMESTER_COUNT-1],1),69,36);
02375         <span class="comment">//educational weight</span>
02376         print.put_text(m.format(cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#p0">var_educational_quality_weight</a>[0],1),82,36);
02377         <span class="comment">//educational last trimester change trend</span>
02378         print.put_text(m.format(cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#m61">var_change_educational_quality</a>[0],1),95,36);
02379 
02380         print.put_text(<span class="stringliteral">"Faculty education development time (hours per week)"</span>,10,38);
02381         <span class="comment">//educational Current value</span>
02382         print.put_text(m.format(dataArray[1][HISTORY_TRIMESTER_COUNT-1],1),69,38);
02383         <span class="comment">//educational weight</span>
02384         print.put_text(m.format(cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#p0">var_educational_quality_weight</a>[1],1),82,38);
02385         <span class="comment">//educational last trimester change trend</span>
02386         print.put_text(m.format(cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#m61">var_change_educational_quality</a>[1],1),95,38);
02387 
02388         print.put_text(<span class="stringliteral">"Faculty scholarship performance rating"</span>,10,40);
02389         <span class="comment">//educational Current value</span>
02390         print.put_text(m.format(dataArray[2][HISTORY_TRIMESTER_COUNT-1],1),69,40);
02391         <span class="comment">//educational weight</span>
02392         print.put_text(m.format(cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#p0">var_educational_quality_weight</a>[2],1),82,40);
02393         <span class="comment">//educational last trimester change trend</span>
02394         print.put_text(m.format(cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#m61">var_change_educational_quality</a>[2],1),95,40);
02395 
02396         print.put_text(<span class="stringliteral">"Faculty research performance"</span>,10,42);
02397         <span class="comment">//educational Current value</span>
02398         print.put_text(m.format(dataArray[3][HISTORY_TRIMESTER_COUNT-1],1),69,42);
02399         <span class="comment">//educational weight</span>
02400         print.put_text(m.format(cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#p0">var_educational_quality_weight</a>[3],1),82,42);
02401         <span class="comment">//educational last trimester change trend</span>
02402         print.put_text(m.format(cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#m61">var_change_educational_quality</a>[3],1),95,42);
02403 
02404         print.put_text(<span class="stringliteral">"Use of information in teaching"</span>,10,44);
02405         <span class="comment">//educational Current value</span>
02406         print.put_text(m.format(dataArray[4][HISTORY_TRIMESTER_COUNT-1],1),69,44);
02407         <span class="comment">//educational weight</span>
02408         print.put_text(m.format(cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#p0">var_educational_quality_weight</a>[4],1),82,44);
02409         <span class="comment">//educational last trimester change trend</span>
02410         print.put_text(m.format(cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#m61">var_change_educational_quality</a>[4],1),95,44);
02411 
02412         print.put_text(<span class="stringliteral">"Deviation of class size from its norm"</span>,10,46);
02413         <span class="comment">//educational Current value</span>
02414         print.put_text(m.format(dataArray[5][HISTORY_TRIMESTER_COUNT-1],1),69,46);
02415         <span class="comment">//educational weight</span>
02416         print.put_text(m.format(cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#p0">var_educational_quality_weight</a>[5],1),82,46);
02417         <span class="comment">//educational last trimester change trend</span>
02418         print.put_text(m.format(cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#m61">var_change_educational_quality</a>[5],1),95,46);
02419 
02420         print.put_text(<span class="stringliteral">"Deviation of teaching method mix from its norm"</span>,10,48);
02421         <span class="comment">//educational Current value</span>
02422         print.put_text(m.format(dataArray[6][HISTORY_TRIMESTER_COUNT-1],1),69,48);
02423         <span class="comment">//educational weight</span>
02424         print.put_text(m.format(cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#p0">var_educational_quality_weight</a>[6],1),82,48);
02425         <span class="comment">//educational last trimester change trend</span>
02426         print.put_text(m.format(cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#m61">var_change_educational_quality</a>[6],1),95,48);
02427 
02428         print.dfont(9,<span class="keyword">false</span>,<span class="keyword">false</span>,0);
02429         print.put_text(<span class="stringliteral">"Faculty research performance"</span>,10,56);
02430         <span class="comment">//educational Current value</span>
02431         print.put_text(m.format(as_dataArray[0][HISTORY_YEAR_COUNT-1],1),69,56);
02432         <span class="comment">//educational weight</span>
02433         print.put_text(m.format(cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#p1">var_academic_standing_weight</a>[0],1),82,56);
02434         <span class="comment">//educational last trimester change trend</span>
02435         print.put_text(m.format(cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#m62">var_change_academic_standing</a>[0],1),95,56);
02436 
02437         print.put_text(<span class="stringliteral">"Sponsored research"</span>,10,58);
02438         <span class="comment">//educational Current value</span>
02439         print.put_text(m.format(as_dataArray[1][HISTORY_YEAR_COUNT-1],1),69,58);
02440         <span class="comment">//educational weight</span>
02441         print.put_text(m.format(cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#p1">var_academic_standing_weight</a>[1],1),82,58);
02442         <span class="comment">//educational last trimester change trend</span>
02443         print.put_text(m.format(cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#m62">var_change_academic_standing</a>[1],1),95,58);
02444 
02445         print.put_text(<span class="stringliteral">"Quality rating for doctoral students"</span>,10,60);
02446         <span class="comment">//educational Current value</span>
02447         print.put_text(m.format(as_dataArray[2][HISTORY_YEAR_COUNT-1],1),69,60);
02448         <span class="comment">//educational weight</span>
02449         print.put_text(m.format(cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#p1">var_academic_standing_weight</a>[2],1),82,60);
02450         <span class="comment">//educational last trimester change trend</span>
02451         print.put_text(m.format(cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#m62">var_change_academic_standing</a>[2],1),95,60);
02452 
02453         print.put_text(<span class="stringliteral">"Number of doctoral students per regular factulty"</span>,10,62);
02454         <span class="comment">//educational Current value</span>
02455         print.put_text(m.format(as_dataArray[3][HISTORY_YEAR_COUNT-1],1),69,62);
02456         <span class="comment">//educational weight</span>
02457         print.put_text(m.format(cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#p1">var_academic_standing_weight</a>[3],1),82,62);
02458         <span class="comment">//educational last trimester change trend</span>
02459         print.put_text(m.format(cur_dept_ptr-&gt;<a class="code" href="classDepartment.html#m62">var_change_academic_standing</a>[3],1),95,62);
02460 
02461         <span class="comment">// ##### begin Gilbert 07/07/2001 ######//</span>
02462         vga_back.rest_area( prn002, 0 );
02463         <span class="comment">//trend1 bmp  education</span>
02464         print.put_vga_back(<span class="stringliteral">"prn002.bmp"</span>,56,25,0.685,0.418,671,106);
02465         <span class="comment">//trend2 bmp</span>
02466         print.put_vga_back(<span class="stringliteral">"prn002.bmp"</span>,56,25,0.685,0.448,671,148);
02467         <span class="comment">//trend3 bmp</span>
02468         print.put_vga_back(<span class="stringliteral">"prn002.bmp"</span>,56,25,0.685,0.473,671,190);
02469         <span class="comment">//trend4 bmp</span>
02470         print.put_vga_back(<span class="stringliteral">"prn002.bmp"</span>,56,25,0.685,0.498,671,232);
02471         <span class="comment">//trend5 bmp</span>
02472         print.put_vga_back(<span class="stringliteral">"prn002.bmp"</span>,56,25,0.685,0.523,671,274);
02473         <span class="comment">//trend6 bmp</span>
02474         print.put_vga_back(<span class="stringliteral">"prn002.bmp"</span>,56,25,0.685,0.548,671,316);
02475         <span class="comment">//trend7 bmp</span>
02476         print.put_vga_back(<span class="stringliteral">"prn002.bmp"</span>,56,25,0.685,0.573,671,358);
02477         <span class="comment">//trend8 bmp</span>
02478         print.put_vga_back(<span class="stringliteral">"prn002.bmp"</span>,56,25,0.685,0.598,671,400);
02479 
02480         vga_back.rest_area( prn003, 0 );
02481         <span class="comment">//trend9 bmp   departmental</span>
02482         print.put_vga_back(<span class="stringliteral">"prn003.bmp"</span>,56,25,0.685,0.668,671,105);
02483         <span class="comment">//trend10 bmp</span>
02484         print.put_vga_back(<span class="stringliteral">"prn003.bmp"</span>,56,25,0.685,0.698,671,148);
02485         <span class="comment">//trend11 bmp</span>
02486         print.put_vga_back(<span class="stringliteral">"prn003.bmp"</span>,56,25,0.685,0.723,671,204);
02487         <span class="comment">//trend12 bmp</span>
02488         print.put_vga_back(<span class="stringliteral">"prn003.bmp"</span>,56,25,0.685,0.748,671,260);
02489         <span class="comment">//trend13 bmp</span>
02490         print.put_vga_back(<span class="stringliteral">"prn003.bmp"</span>,56,25,0.685,0.773,671,316);
02491         <span class="comment">// ##### end Gilbert 07/07/2001 ######//</span>
02492 
02493         print.dfont(10,<span class="keyword">false</span>,<span class="keyword">false</span>,700);
02494         print.put_text(<span class="stringliteral">"Educational Quality"</span>,8,29);
02495         print.put_text(<span class="stringliteral">"Departmental Quality"</span>,8,47);
02496 
02497         <span class="comment">/*              print.dfont(9,false,false,0);</span>
02498 <span class="comment">                        print.put_text(m.format(as_dataArray[3][HISTORY_YEAR_COUNT-1],1),69,62);             //educational Current value</span>
02499 <span class="comment">                        print.put_text(m.format(cur_dept_ptr-&gt;var_change_academic_standing[3],1),95,62);     //educational last trimester change trend</span>
02500 <span class="comment">                        print.put_text(m.format(dataArray[6][HISTORY_TRIMESTER_COUNT-1],1),69,48);                               //educational Current value</span>
02501 <span class="comment">                        print.put_text(m.format(cur_dept_ptr-&gt;var_change_educational_quality[6],1),95,48);                               //educational last trimester change trend</span>
02502 <span class="comment">        */</span>
02503         print.end_page();
02504 
02505         print.endprint(sys.main_hwnd);
02506 
02507         <span class="comment">//***********************end printing***********************</span>
02508         <span class="comment">//              print.PrintBmp(sys.main_hwnd,256,256);</span>
02509     }
02510 
02511     <span class="comment">// ##### begin Gilbert 07/07/2001 ###### //</span>
02512     <a class="code" href="ALL_8H.html#a8">mem_del</a>(prn003);
02513     <a class="code" href="ALL_8H.html#a8">mem_del</a>(prn002);
02514     <a class="code" href="ALL_8H.html#a8">mem_del</a>(prn001);
02515 
02516     vga_back.rest_area(back_buf_backup,1,0);
02517     back_buf_backup = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
02518     <span class="comment">// ##### end Gilbert 07/07/2001 ###### //</span>
02519 
02520     sys.redraw_all_flag=1;
02521 }
02522 
02523 <span class="comment">// end ## chwg031599</span>
</pre></div><hr><address style="align: right;"><small>Generated on Fri Aug 23 01:37:23 2002 for VirtualU by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.17 </small></address>
</body>
</html>
