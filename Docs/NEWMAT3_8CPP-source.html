<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>NEWMAT3.CPP Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.17 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>NEWMAT3.CPP</h1><a href="NEWMAT3_8CPP.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">//Owner: Fred</span>
00002 <span class="comment">//$$ newmat3.cpp        Matrix get and restore rows and columns</span>
00003 
00004 <span class="comment">// Copyright (C) 1991,2,3,4: R B Davies</span>
00005 
00006 <span class="preprocessor">#include "include.h"</span>
00007 
00008 <span class="preprocessor">#include "newmat.h"</span>
00009 <span class="preprocessor">#include "newmatrc.h"</span>
00010 
00011 <span class="preprocessor">#ifdef use_namespace</span>
00012 <span class="preprocessor"></span><span class="keyword">namespace </span>NEWMAT {
00013 <span class="preprocessor">#endif</span>
00014 <span class="preprocessor"></span>
00015 <span class="preprocessor">#ifdef DO_REPORT</span>
00016 <span class="preprocessor"></span><span class="preprocessor">#define REPORT { static ExeCounter ExeCount(__LINE__,3); ++ExeCount; }</span>
00017 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00018"></a><a class="code" href="NEWMAT3_8CPP.html#a0">00018</a> <span class="preprocessor"></span><span class="preprocessor">#define REPORT {}</span>
00019 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00020 <span class="preprocessor"></span>
00021     <span class="comment">//#define MONITOR(what,storage,store) { cout &lt;&lt; what &lt;&lt; " " &lt;&lt; storage &lt;&lt; " at " &lt;&lt; (long)store &lt;&lt; "\n"; }</span>
00022 
<a name="l00023"></a><a class="code" href="NEWMAT3_8CPP.html#a1">00023</a> <span class="preprocessor">#define MONITOR(what,store,storage) {}</span>
00024 <span class="preprocessor"></span>
00025     <span class="comment">// Control bits codes for GetRow, GetCol, RestoreRow, RestoreCol</span>
00026     <span class="comment">//</span>
00027     <span class="comment">// LoadOnEntry:</span>
00028     <span class="comment">//    Load data into MatrixRow or Col dummy array under GetRow or GetCol</span>
00029     <span class="comment">// StoreOnExit:</span>
00030     <span class="comment">//    Restore data to original matrix under RestoreRow or RestoreCol</span>
00031     <span class="comment">// DirectPart:</span>
00032     <span class="comment">//    Load or restore only part directly stored; must be set with StoreOnExit</span>
00033     <span class="comment">//    Still have decide how to handle this with symmetric</span>
00034     <span class="comment">// StoreHere:</span>
00035     <span class="comment">//    used in columns only - store data at supplied storage address;</span>
00036     <span class="comment">//    used for GetCol, NextCol &amp; RestoreCol. No need to fill out zeros</span>
00037     <span class="comment">// HaveStore:</span>
00038     <span class="comment">//    dummy array has been assigned (internal use only).</span>
00039 
00040     <span class="comment">// For symmetric matrices, treat columns as rows unless StoreHere is set;</span>
00041     <span class="comment">// then stick to columns as this will give better performance for doing</span>
00042     <span class="comment">// inverses</span>
00043 
00044     <span class="comment">// How components are used:</span>
00045 
00046     <span class="comment">// Use rows wherever possible in preference to columns</span>
00047 
00048     <span class="comment">// Columns without StoreHere are used in in-exact transpose, sum column,</span>
00049     <span class="comment">// multiply a column vector, and maybe in future access to column,</span>
00050     <span class="comment">// additional multiply functions, add transpose</span>
00051 
00052     <span class="comment">// Columns with StoreHere are used in exact transpose (not symmetric matrices</span>
00053     <span class="comment">// or vectors, load only)</span>
00054 
00055     <span class="comment">// Columns with MatrixColX (Store to full column) are used in inverse and solve</span>
00056 
00057     <span class="comment">// Functions required for each matrix class</span>
00058 
00059     <span class="comment">// GetRow(MatrixRowCol&amp; mrc)</span>
00060     <span class="comment">// GetCol(MatrixRowCol&amp; mrc)</span>
00061     <span class="comment">// GetCol(MatrixColX&amp; mrc)</span>
00062     <span class="comment">// RestoreRow(MatrixRowCol&amp; mrc)</span>
00063     <span class="comment">// RestoreCol(MatrixRowCol&amp; mrc)</span>
00064     <span class="comment">// RestoreCol(MatrixColX&amp; mrc)</span>
00065     <span class="comment">// NextRow(MatrixRowCol&amp; mrc)</span>
00066     <span class="comment">// NextCol(MatrixRowCol&amp; mrc)</span>
00067     <span class="comment">// NextCol(MatrixColX&amp; mrc)</span>
00068 
00069     <span class="comment">// The Restore routines assume StoreOnExit has already been checked</span>
00070     <span class="comment">// Defaults for the Next routines are given below</span>
00071     <span class="comment">// Assume can't have both !DirectPart &amp;&amp; StoreHere for MatrixRowCol routines</span>
00072 
00073     <span class="comment">// Default NextRow and NextCol:</span>
00074     <span class="comment">// will work as a default but need to override NextRow for efficiency</span>
00075 
<a name="l00076"></a><a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a31">00076</a>     <span class="keywordtype">void</span> GeneralMatrix::NextRow(<a class="code" href="classMatrixRowCol.html">MatrixRowCol</a>&amp; mrc) {
00077         <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00078             <span class="keywordflow">if</span> (+(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a2">StoreOnExit</a>)) { <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a> this-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a30">RestoreRow</a>(mrc); }
00079         mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>++;
00080         <span class="keywordflow">if</span> (mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>&lt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>) { <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a> this-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a29">GetRow</a>(mrc); }
00081         <span class="keywordflow">else</span> { <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a> mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a> -= <a class="code" href="NEWMATRC_8H.html#a6a2">StoreOnExit</a>; }
00082     }
00083 
<a name="l00084"></a><a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a36">00084</a>     <span class="keywordtype">void</span> GeneralMatrix::NextCol(<a class="code" href="classMatrixRowCol.html">MatrixRowCol</a>&amp; mrc) {
00085         <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>                                        <span class="comment">// 423</span>
00086             <span class="keywordflow">if</span> (+(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a2">StoreOnExit</a>)) { <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a> this-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a34">RestoreCol</a>(mrc); }
00087         mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>++;
00088         <span class="keywordflow">if</span> (mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>&lt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>) { <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a> this-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a32">GetCol</a>(mrc); }
00089         <span class="keywordflow">else</span> { <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a> mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a> -= <a class="code" href="NEWMATRC_8H.html#a6a2">StoreOnExit</a>; }
00090     }
00091 
<a name="l00092"></a><a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a37">00092</a>     <span class="keywordtype">void</span> GeneralMatrix::NextCol(<a class="code" href="classMatrixColX.html">MatrixColX</a>&amp; mrc) {
00093         <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>                                        <span class="comment">// 423</span>
00094             <span class="keywordflow">if</span> (+(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a2">StoreOnExit</a>)) { <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a> this-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a34">RestoreCol</a>(mrc); }
00095         mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>++;
00096         <span class="keywordflow">if</span> (mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>&lt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>) { <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a> this-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a32">GetCol</a>(mrc); }
00097         <span class="keywordflow">else</span> { <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a> mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a> -= <a class="code" href="NEWMATRC_8H.html#a6a2">StoreOnExit</a>; }
00098     }
00099 
00100     <span class="comment">// routines for matrix</span>
00101 
<a name="l00102"></a><a class="code" href="classNEWMAT_1_1Matrix.html#a13">00102</a>     <span class="keywordtype">void</span> Matrix::GetRow(<a class="code" href="classMatrixRowCol.html">MatrixRowCol</a>&amp; mrc) {
00103         <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00104             mrc.<a class="code" href="classMatrixRowCol.html#m1">skip</a>=0; mrc.<a class="code" href="classMatrixRowCol.html#m2">storage</a>=mrc.<a class="code" href="classMatrixRowCol.html#m0">length</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>; mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>+mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>*<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>;
00105     }
00106 
<a name="l00107"></a><a class="code" href="classNEWMAT_1_1Matrix.html#a14">00107</a>     <span class="keywordtype">void</span> Matrix::GetCol(<a class="code" href="classMatrixRowCol.html">MatrixRowCol</a>&amp; mrc) {
00108         <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00109             mrc.<a class="code" href="classMatrixRowCol.html#m1">skip</a>=0; mrc.<a class="code" href="classMatrixRowCol.html#m2">storage</a>=mrc.<a class="code" href="classMatrixRowCol.html#m0">length</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>;
00110         <span class="keywordflow">if</span> ( <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>==1 &amp;&amp; !(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a4">StoreHere</a>) )        <span class="comment">// ColumnVector</span>
00111         { <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a> mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>; }
00112         <span class="keywordflow">else</span> {
00113             <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* ColCopy;
00114             <span class="keywordflow">if</span> ( !(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*(<a class="code" href="NEWMATRC_8H.html#a6a5">HaveStore</a>+<a class="code" href="NEWMATRC_8H.html#a6a4">StoreHere</a>)) ) {
00115                 <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00116                     ColCopy = <span class="keyword">new</span> <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a> [<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>]; <a class="code" href="namespaceNEWMAT.html#a19">MatrixErrorNoSpace</a>(ColCopy);
00117                 <a class="code" href="MYEXCEPT_8H.html#a1">MONITOR_REAL_NEW</a>(<span class="stringliteral">"Make (MatGetCol)"</span>,<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>,ColCopy)
00118                     mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a> = ColCopy; mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a> += <a class="code" href="NEWMATRC_8H.html#a6a5">HaveStore</a>;
00119             }
00120             <span class="keywordflow">else</span> { <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a> ColCopy = mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a>; }
00121             <span class="keywordflow">if</span> (+(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a1">LoadOnEntry</a>)) {
00122                 <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00123                     <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* Mstore = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>+mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>; <span class="keywordtype">int</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>;
00124                 <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--) { *ColCopy++ = *Mstore; Mstore+=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>; }
00125             }
00126         }
00127     }
00128 
<a name="l00129"></a><a class="code" href="classNEWMAT_1_1Matrix.html#a15">00129</a>     <span class="keywordtype">void</span> Matrix::GetCol(<a class="code" href="classMatrixColX.html">MatrixColX</a>&amp; mrc) {
00130         <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00131             mrc.<a class="code" href="classMatrixRowCol.html#m1">skip</a>=0; mrc.<a class="code" href="classMatrixRowCol.html#m2">storage</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>; mrc.<a class="code" href="classMatrixRowCol.html#m0">length</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>;
00132             <span class="keywordflow">if</span> (+(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a1">LoadOnEntry</a>)) {
00133                 <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>  <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* ColCopy = mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a>;
00134                 <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* Mstore = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>+mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>; <span class="keywordtype">int</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>;
00135                 <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--) { *ColCopy++ = *Mstore; Mstore+=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>; }
00136             }
00137     }
00138 
<a name="l00139"></a><a class="code" href="classNEWMAT_1_1Matrix.html#a16">00139</a>     <span class="keywordtype">void</span> Matrix::RestoreCol(<a class="code" href="classMatrixRowCol.html">MatrixRowCol</a>&amp; mrc) {
00140         <span class="comment">// always check StoreOnExit before calling RestoreCol</span>
00141         <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>                                        <span class="comment">// 429</span>
00142             <span class="keywordflow">if</span> (+(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a5">HaveStore</a>)) {
00143                 <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>                                      <span class="comment">// 426</span>
00144                     <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* Mstore = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>+mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>; <span class="keywordtype">int</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>;
00145                 <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* Cstore = mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a>;
00146                 <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--) { *Mstore = *Cstore++; Mstore+=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>; }
00147             }
00148     }
00149 
<a name="l00150"></a><a class="code" href="classNEWMAT_1_1Matrix.html#a17">00150</a>     <span class="keywordtype">void</span> Matrix::RestoreCol(<a class="code" href="classMatrixColX.html">MatrixColX</a>&amp; mrc) {
00151         <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00152             <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* Mstore = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>+mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>; <span class="keywordtype">int</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>; <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* Cstore = mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a>;
00153             <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--) { *Mstore = *Cstore++; Mstore+=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>; }
00154     }
00155 
<a name="l00156"></a><a class="code" href="classNEWMAT_1_1Matrix.html#a18">00156</a>     <span class="keywordtype">void</span> Matrix::NextRow(<a class="code" href="classMatrixRowCol.html">MatrixRowCol</a>&amp; mrc) {       <span class="comment">// 1808</span>
00157         <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a> mrc.<a class="code" href="classMatrixRowCol.html#a0">IncrMat</a>();
00158     }
00159 
<a name="l00160"></a><a class="code" href="classNEWMAT_1_1Matrix.html#a19">00160</a>     <span class="keywordtype">void</span> Matrix::NextCol(<a class="code" href="classMatrixRowCol.html">MatrixRowCol</a>&amp; mrc) {
00161         <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>                                        <span class="comment">// 632</span>
00162             <span class="keywordflow">if</span> (+(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a2">StoreOnExit</a>)) { <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a> <a class="code" href="classNEWMAT_1_1Matrix.html#a16">RestoreCol</a>(mrc); }
00163         mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>++;
00164         <span class="keywordflow">if</span> (mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>&lt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>) {
00165             <span class="keywordflow">if</span> (+(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a1">LoadOnEntry</a>)) {
00166                 <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00167                     <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* ColCopy = mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a>;
00168                 <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* Mstore = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>+mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>; <span class="keywordtype">int</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>;
00169                 <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--) { *ColCopy++ = *Mstore; Mstore+=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>; }
00170             }
00171         }
00172         <span class="keywordflow">else</span> { <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a> mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a> -= <a class="code" href="NEWMATRC_8H.html#a6a2">StoreOnExit</a>; }
00173     }
00174 
<a name="l00175"></a><a class="code" href="classNEWMAT_1_1Matrix.html#a20">00175</a>     <span class="keywordtype">void</span> Matrix::NextCol(<a class="code" href="classMatrixColX.html">MatrixColX</a>&amp; mrc) {
00176         <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00177             <span class="keywordflow">if</span> (+(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a2">StoreOnExit</a>)) { <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a> <a class="code" href="classNEWMAT_1_1Matrix.html#a16">RestoreCol</a>(mrc); }
00178         mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>++;
00179         <span class="keywordflow">if</span> (mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>&lt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>) {
00180             <span class="keywordflow">if</span> (+(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a1">LoadOnEntry</a>)) {
00181                 <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00182                     <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* ColCopy = mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a>;
00183                 <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* Mstore = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>+mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>; <span class="keywordtype">int</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>;
00184                 <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--) { *ColCopy++ = *Mstore; Mstore+=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>; }
00185             }
00186         }
00187         <span class="keywordflow">else</span> { <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a> mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a> -= <a class="code" href="NEWMATRC_8H.html#a6a2">StoreOnExit</a>; }
00188     }
00189 
00190     <span class="comment">// routines for diagonal matrix</span>
00191 
<a name="l00192"></a><a class="code" href="classNEWMAT_1_1DiagonalMatrix.html#a16">00192</a>     <span class="keywordtype">void</span> DiagonalMatrix::GetRow(<a class="code" href="classMatrixRowCol.html">MatrixRowCol</a>&amp; mrc) {
00193         <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00194             mrc.<a class="code" href="classMatrixRowCol.html#m1">skip</a>=mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>; mrc.<a class="code" href="classMatrixRowCol.html#m2">storage</a>=1;
00195         mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>+mrc.<a class="code" href="classMatrixRowCol.html#m1">skip</a>; mrc.<a class="code" href="classMatrixRowCol.html#m0">length</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>;
00196     }
00197 
<a name="l00198"></a><a class="code" href="classNEWMAT_1_1DiagonalMatrix.html#a17">00198</a>     <span class="keywordtype">void</span> DiagonalMatrix::GetCol(<a class="code" href="classMatrixRowCol.html">MatrixRowCol</a>&amp; mrc) {
00199         <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00200             mrc.<a class="code" href="classMatrixRowCol.html#m1">skip</a>=mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>; mrc.<a class="code" href="classMatrixRowCol.html#m2">storage</a>=1; mrc.<a class="code" href="classMatrixRowCol.html#m0">length</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>;
00201             <span class="keywordflow">if</span> (+(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a4">StoreHere</a>))                      <span class="comment">// shouldn't happen</span>
00202                 Throw(<a class="code" href="classNEWMAT_1_1InternalException.html">InternalException</a>(<span class="stringliteral">"DiagonalMatrix::GetCol(MatrixRowCol&amp;)"</span>));
00203             <span class="keywordflow">else</span>  { <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a> mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>+mrc.<a class="code" href="classMatrixRowCol.html#m1">skip</a>; }
00204             <span class="comment">// not accessed</span>
00205     }
00206 
<a name="l00207"></a><a class="code" href="classNEWMAT_1_1DiagonalMatrix.html#a18">00207</a>     <span class="keywordtype">void</span> DiagonalMatrix::GetCol(<a class="code" href="classMatrixColX.html">MatrixColX</a>&amp; mrc) {
00208         <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00209             mrc.<a class="code" href="classMatrixRowCol.html#m1">skip</a>=mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>; mrc.<a class="code" href="classMatrixRowCol.html#m2">storage</a>=1; mrc.<a class="code" href="classMatrixRowCol.html#m0">length</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>;
00210             mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a> = mrc.<a class="code" href="classMatrixColX.html#m0">store</a>+mrc.<a class="code" href="classMatrixRowCol.html#m1">skip</a>;
00211             *(mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a>)=*(<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>+mrc.<a class="code" href="classMatrixRowCol.html#m1">skip</a>);
00212     }
00213 
<a name="l00214"></a><a class="code" href="classNEWMAT_1_1DiagonalMatrix.html#a19">00214</a>     <span class="keywordtype">void</span> DiagonalMatrix::NextRow(<a class="code" href="classMatrixRowCol.html">MatrixRowCol</a>&amp; mrc) { <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a> mrc.<a class="code" href="classMatrixRowCol.html#a1">IncrDiag</a>(); }
00215     <span class="comment">// 800</span>
00216 
<a name="l00217"></a><a class="code" href="classNEWMAT_1_1DiagonalMatrix.html#a20">00217</a>     <span class="keywordtype">void</span> DiagonalMatrix::NextCol(<a class="code" href="classMatrixRowCol.html">MatrixRowCol</a>&amp; mrc) { <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a> mrc.<a class="code" href="classMatrixRowCol.html#a1">IncrDiag</a>(); }
00218     <span class="comment">// not accessed</span>
00219 
<a name="l00220"></a><a class="code" href="classNEWMAT_1_1DiagonalMatrix.html#a21">00220</a>     <span class="keywordtype">void</span> DiagonalMatrix::NextCol(<a class="code" href="classMatrixColX.html">MatrixColX</a>&amp; mrc) {
00221         <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00222             <span class="keywordflow">if</span> (+(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a2">StoreOnExit</a>))
00223             { <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a> *(<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>+mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>)=*(mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a>); }
00224         mrc.<a class="code" href="classMatrixRowCol.html#a1">IncrDiag</a>();
00225         <span class="keywordtype">int</span> t1 = +(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a1">LoadOnEntry</a>);
00226         <span class="keywordflow">if</span> (t1 &amp;&amp; mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a> &lt; <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>)
00227         { <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a> *(mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a>)=*(<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>+mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>); }
00228     }
00229 
00230     <span class="comment">// routines for upper triangular matrix</span>
00231 
<a name="l00232"></a><a class="code" href="classNEWMAT_1_1UpperTriangularMatrix.html#a15">00232</a>     <span class="keywordtype">void</span> UpperTriangularMatrix::GetRow(<a class="code" href="classMatrixRowCol.html">MatrixRowCol</a>&amp; mrc) {
00233         <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00234             <span class="keywordtype">int</span> row = mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>; mrc.<a class="code" href="classMatrixRowCol.html#m1">skip</a>=row; mrc.<a class="code" href="classMatrixRowCol.html#m0">length</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>;
00235             mrc.<a class="code" href="classMatrixRowCol.html#m2">storage</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>-row; mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>+(row*(2*<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>-row+1))/2;
00236     }
00237 
<a name="l00238"></a><a class="code" href="classNEWMAT_1_1UpperTriangularMatrix.html#a16">00238</a>     <span class="keywordtype">void</span> UpperTriangularMatrix::GetCol(<a class="code" href="classMatrixRowCol.html">MatrixRowCol</a>&amp; mrc) {
00239         <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00240             mrc.<a class="code" href="classMatrixRowCol.html#m1">skip</a>=0; <span class="keywordtype">int</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>=mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>+1; mrc.<a class="code" href="classMatrixRowCol.html#m2">storage</a>=<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>;
00241             mrc.<a class="code" href="classMatrixRowCol.html#m0">length</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>; <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* ColCopy;
00242             <span class="keywordflow">if</span> ( !(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*(<a class="code" href="NEWMATRC_8H.html#a6a4">StoreHere</a>+<a class="code" href="NEWMATRC_8H.html#a6a5">HaveStore</a>)) ) {
00243                 <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>                                      <span class="comment">// not accessed</span>
00244                     ColCopy = <span class="keyword">new</span> <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a> [<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>]; <a class="code" href="namespaceNEWMAT.html#a19">MatrixErrorNoSpace</a>(ColCopy);
00245                 <a class="code" href="MYEXCEPT_8H.html#a1">MONITOR_REAL_NEW</a>(<span class="stringliteral">"Make (UT GetCol)"</span>,<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>,ColCopy)
00246                     mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a> = ColCopy; mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a> += <a class="code" href="NEWMATRC_8H.html#a6a5">HaveStore</a>;
00247             }
00248             <span class="keywordflow">else</span> { <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a> ColCopy = mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a>; }
00249             <span class="keywordflow">if</span> (+(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a1">LoadOnEntry</a>)) {
00250                 <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00251                     <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* Mstore = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>+mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>; <span class="keywordtype">int</span> j = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>;
00252                 <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--) { *ColCopy++ = *Mstore; Mstore += --j; }
00253             }
00254     }
00255 
<a name="l00256"></a><a class="code" href="classNEWMAT_1_1UpperTriangularMatrix.html#a17">00256</a>     <span class="keywordtype">void</span> UpperTriangularMatrix::GetCol(<a class="code" href="classMatrixColX.html">MatrixColX</a>&amp; mrc) {
00257         <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00258             mrc.<a class="code" href="classMatrixRowCol.html#m1">skip</a>=0; <span class="keywordtype">int</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>=mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>+1; mrc.<a class="code" href="classMatrixRowCol.html#m2">storage</a>=<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>;
00259             mrc.<a class="code" href="classMatrixRowCol.html#m0">length</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>;
00260             <span class="keywordflow">if</span> (+(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a1">LoadOnEntry</a>)) {
00261                 <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00262                     <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* ColCopy = mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a>;
00263                 <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* Mstore = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>+mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>; <span class="keywordtype">int</span> j = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>;
00264                 <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--) { *ColCopy++ = *Mstore; Mstore += --j; }
00265             }
00266     }
00267 
<a name="l00268"></a><a class="code" href="classNEWMAT_1_1UpperTriangularMatrix.html#a18">00268</a>     <span class="keywordtype">void</span> UpperTriangularMatrix::RestoreCol(<a class="code" href="classMatrixRowCol.html">MatrixRowCol</a>&amp; mrc) {
00269         <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00270             <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* Mstore = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>+mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>; <span class="keywordtype">int</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>=mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>+1; <span class="keywordtype">int</span> j = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>;
00271             <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* Cstore = mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a>;
00272             <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--) { *Mstore = *Cstore++; Mstore += --j; }
00273     }
00274 
<a name="l00275"></a><a class="code" href="classNEWMAT_1_1UpperTriangularMatrix.html#a20">00275</a>     <span class="keywordtype">void</span> UpperTriangularMatrix::NextRow(<a class="code" href="classMatrixRowCol.html">MatrixRowCol</a>&amp; mrc) { <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a> mrc.<a class="code" href="classMatrixRowCol.html#a2">IncrUT</a>(); }
00276     <span class="comment">// 722</span>
00277 
00278     <span class="comment">// routines for lower triangular matrix</span>
00279 
<a name="l00280"></a><a class="code" href="classNEWMAT_1_1LowerTriangularMatrix.html#a15">00280</a>     <span class="keywordtype">void</span> LowerTriangularMatrix::GetRow(<a class="code" href="classMatrixRowCol.html">MatrixRowCol</a>&amp; mrc) {
00281         <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00282             <span class="keywordtype">int</span> row=mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>; mrc.<a class="code" href="classMatrixRowCol.html#m1">skip</a>=0; mrc.<a class="code" href="classMatrixRowCol.html#m2">storage</a>=row+1; mrc.<a class="code" href="classMatrixRowCol.html#m0">length</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>;
00283             mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>+(row*(row+1))/2;
00284     }
00285 
<a name="l00286"></a><a class="code" href="classNEWMAT_1_1LowerTriangularMatrix.html#a16">00286</a>     <span class="keywordtype">void</span> LowerTriangularMatrix::GetCol(<a class="code" href="classMatrixRowCol.html">MatrixRowCol</a>&amp; mrc) {
00287         <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00288             <span class="keywordtype">int</span> col=mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>; mrc.<a class="code" href="classMatrixRowCol.html#m1">skip</a>=col; mrc.<a class="code" href="classMatrixRowCol.html#m0">length</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>;
00289             <span class="keywordtype">int</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>-col; mrc.<a class="code" href="classMatrixRowCol.html#m2">storage</a>=<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>; <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* ColCopy;
00290             <span class="keywordflow">if</span> ( +(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*(<a class="code" href="NEWMATRC_8H.html#a6a4">StoreHere</a>+<a class="code" href="NEWMATRC_8H.html#a6a5">HaveStore</a>)) )
00291             { <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>  ColCopy = mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a>; }
00292             <span class="keywordflow">else</span> {
00293                 <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>                                      <span class="comment">// not accessed</span>
00294                     ColCopy = <span class="keyword">new</span> <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a> [<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>]; <a class="code" href="namespaceNEWMAT.html#a19">MatrixErrorNoSpace</a>(ColCopy);
00295                 <a class="code" href="MYEXCEPT_8H.html#a1">MONITOR_REAL_NEW</a>(<span class="stringliteral">"Make (LT GetCol)"</span>,<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>,ColCopy)
00296                     mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a> += <a class="code" href="NEWMATRC_8H.html#a6a5">HaveStore</a>; mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a> = ColCopy;
00297             }
00298 
00299             <span class="keywordflow">if</span> (+(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a1">LoadOnEntry</a>)) {
00300                 <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00301                     <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* Mstore = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>+(col*(col+3))/2;
00302                 <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--) { *ColCopy++ = *Mstore; Mstore += ++col; }
00303             }
00304     }
00305 
<a name="l00306"></a><a class="code" href="classNEWMAT_1_1LowerTriangularMatrix.html#a17">00306</a>     <span class="keywordtype">void</span> LowerTriangularMatrix::GetCol(<a class="code" href="classMatrixColX.html">MatrixColX</a>&amp; mrc) {
00307         <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00308             <span class="keywordtype">int</span> col=mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>; mrc.<a class="code" href="classMatrixRowCol.html#m1">skip</a>=col; mrc.<a class="code" href="classMatrixRowCol.html#m0">length</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>;
00309             <span class="keywordtype">int</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>-col; mrc.<a class="code" href="classMatrixRowCol.html#m2">storage</a>=<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>; mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a> = mrc.<a class="code" href="classMatrixColX.html#m0">store</a> + col;
00310 
00311             <span class="keywordflow">if</span> (+(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a1">LoadOnEntry</a>)) {
00312                 <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>  <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* ColCopy = mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a>;
00313                 <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* Mstore = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>+(col*(col+3))/2;
00314                 <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--) { *ColCopy++ = *Mstore; Mstore += ++col; }
00315             }
00316     }
00317 
<a name="l00318"></a><a class="code" href="classNEWMAT_1_1LowerTriangularMatrix.html#a18">00318</a>     <span class="keywordtype">void</span> LowerTriangularMatrix::RestoreCol(<a class="code" href="classMatrixRowCol.html">MatrixRowCol</a>&amp; mrc) {
00319         <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00320             <span class="keywordtype">int</span> col=mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>; <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* Cstore = mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a>;
00321         <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* Mstore = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>+(col*(col+3))/2; <span class="keywordtype">int</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>-col;
00322         <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--) { *Mstore = *Cstore++; Mstore += ++col; }
00323     }
00324 
<a name="l00325"></a><a class="code" href="classNEWMAT_1_1LowerTriangularMatrix.html#a20">00325</a>     <span class="keywordtype">void</span> LowerTriangularMatrix::NextRow(<a class="code" href="classMatrixRowCol.html">MatrixRowCol</a>&amp; mrc) { <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a> mrc.<a class="code" href="classMatrixRowCol.html#a3">IncrLT</a>(); }
00326     <span class="comment">//712</span>
00327 
00328     <span class="comment">// routines for symmetric matrix</span>
00329 
<a name="l00330"></a><a class="code" href="classNEWMAT_1_1SymmetricMatrix.html#a15">00330</a>     <span class="keywordtype">void</span> SymmetricMatrix::GetRow(<a class="code" href="classMatrixRowCol.html">MatrixRowCol</a>&amp; mrc) {
00331         <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>                                        <span class="comment">//571</span>
00332             mrc.<a class="code" href="classMatrixRowCol.html#m1">skip</a>=0; <span class="keywordtype">int</span> row=mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>; mrc.<a class="code" href="classMatrixRowCol.html#m0">length</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>;
00333             <span class="keywordflow">if</span> (+(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a3">DirectPart</a>))
00334             { <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a> mrc.<a class="code" href="classMatrixRowCol.html#m2">storage</a>=row+1; mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>+(row*(row+1))/2; }
00335             <span class="keywordflow">else</span> {
00336                 <span class="comment">// don't allow StoreOnExit and !DirectPart</span>
00337                 <span class="keywordflow">if</span> (+(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a2">StoreOnExit</a>))
00338                     Throw(<a class="code" href="classNEWMAT_1_1InternalException.html">InternalException</a>(<span class="stringliteral">"SymmetricMatrix::GetRow(MatrixRowCol&amp;)"</span>));
00339                 mrc.<a class="code" href="classMatrixRowCol.html#m2">storage</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>; <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* RowCopy;
00340                 <span class="keywordflow">if</span> (!(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a5">HaveStore</a>)) {
00341                     <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00342                         RowCopy = <span class="keyword">new</span> <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a> [<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>]; <a class="code" href="namespaceNEWMAT.html#a19">MatrixErrorNoSpace</a>(RowCopy);
00343                     <a class="code" href="MYEXCEPT_8H.html#a1">MONITOR_REAL_NEW</a>(<span class="stringliteral">"Make (SymGetRow)"</span>,<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>,RowCopy)
00344                         mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a> += <a class="code" href="NEWMATRC_8H.html#a6a5">HaveStore</a>; mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a> = RowCopy;
00345                 }
00346                 <span class="keywordflow">else</span> { <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a> RowCopy = mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a>; }
00347                 <span class="keywordflow">if</span> (+(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a1">LoadOnEntry</a>)) {
00348                     <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>                                    <span class="comment">// 544</span>
00349                         <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* Mstore = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>+(row*(row+1))/2; <span class="keywordtype">int</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a> = row;
00350                     <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--) *RowCopy++ = *Mstore++;
00351                     <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a> = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>-row;
00352                     <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--) { *RowCopy++ = *Mstore; Mstore += ++row; }
00353                 }
00354             }
00355     }
00356 
<a name="l00357"></a><a class="code" href="classNEWMAT_1_1SymmetricMatrix.html#a16">00357</a>     <span class="keywordtype">void</span> SymmetricMatrix::GetCol(<a class="code" href="classMatrixRowCol.html">MatrixRowCol</a>&amp; mrc) {
00358         <span class="comment">// don't allow StoreHere</span>
00359         <span class="keywordflow">if</span> (+(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a4">StoreHere</a>))
00360             Throw(<a class="code" href="classNEWMAT_1_1InternalException.html">InternalException</a>(<span class="stringliteral">"SymmetricMatrix::GetCol(MatrixRowCol&amp;)"</span>));
00361 
00362         <span class="keywordtype">int</span> col=mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>; mrc.<a class="code" href="classMatrixRowCol.html#m0">length</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>;
00363         <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00364             mrc.<a class="code" href="classMatrixRowCol.html#m1">skip</a>=0;
00365         <span class="keywordflow">if</span> (+(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a3">DirectPart</a>))                     <span class="comment">// actually get row ??</span>
00366         { <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a> mrc.<a class="code" href="classMatrixRowCol.html#m2">storage</a>=col+1; mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>+(col*(col+1))/2; }
00367         <span class="keywordflow">else</span> {
00368             <span class="comment">// don't allow StoreOnExit and !DirectPart</span>
00369             <span class="keywordflow">if</span> (+(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a2">StoreOnExit</a>))
00370                 Throw(<a class="code" href="classNEWMAT_1_1InternalException.html">InternalException</a>(<span class="stringliteral">"SymmetricMatrix::GetCol(MatrixRowCol&amp;)"</span>));
00371 
00372             mrc.<a class="code" href="classMatrixRowCol.html#m2">storage</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>; <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* ColCopy;
00373             <span class="keywordflow">if</span> ( +(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a5">HaveStore</a>)) { <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a> ColCopy = mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a>; }
00374             <span class="keywordflow">else</span> {
00375                 <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>                                    <span class="comment">// not accessed</span>
00376                     ColCopy = <span class="keyword">new</span> <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a> [<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>]; <a class="code" href="namespaceNEWMAT.html#a19">MatrixErrorNoSpace</a>(ColCopy);
00377                 <a class="code" href="MYEXCEPT_8H.html#a1">MONITOR_REAL_NEW</a>(<span class="stringliteral">"Make (SymGetCol)"</span>,<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>,ColCopy)
00378                     mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a> += <a class="code" href="NEWMATRC_8H.html#a6a5">HaveStore</a>; mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a> = ColCopy;
00379             }
00380             <span class="keywordflow">if</span> (+(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a1">LoadOnEntry</a>)) {
00381                 <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00382                     <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* Mstore = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>+(col*(col+1))/2; <span class="keywordtype">int</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a> = col;
00383                 <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--) *ColCopy++ = *Mstore++;
00384                 <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a> = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>-col;
00385                 <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--) { *ColCopy++ = *Mstore; Mstore += ++col; }
00386             }
00387         }
00388     }
00389 
<a name="l00390"></a><a class="code" href="classNEWMAT_1_1SymmetricMatrix.html#a17">00390</a>     <span class="keywordtype">void</span> SymmetricMatrix::GetCol(<a class="code" href="classMatrixColX.html">MatrixColX</a>&amp; mrc) {
00391         <span class="keywordtype">int</span> col=mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>; mrc.<a class="code" href="classMatrixRowCol.html#m0">length</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>;
00392         <span class="keywordflow">if</span> (+(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a3">DirectPart</a>)) {
00393             <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00394                 mrc.<a class="code" href="classMatrixRowCol.html#m1">skip</a>=col; <span class="keywordtype">int</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>-col; mrc.<a class="code" href="classMatrixRowCol.html#m2">storage</a>=<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>;
00395                 mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a> = mrc.<a class="code" href="classMatrixColX.html#m0">store</a>+col;
00396                 <span class="keywordflow">if</span> (+(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a1">LoadOnEntry</a>)) {
00397                     <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>                                    <span class="comment">// not accessed</span>
00398                         <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* ColCopy = mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a>;
00399                     <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* Mstore = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>+(col*(col+3))/2;
00400                     <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--) { *ColCopy++ = *Mstore; Mstore += ++col; }
00401                 }
00402         }
00403         <span class="keywordflow">else</span> {
00404             <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00405                 <span class="comment">// don't allow StoreOnExit and !DirectPart</span>
00406                 <span class="keywordflow">if</span> (+(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a2">StoreOnExit</a>))
00407                     Throw(<a class="code" href="classNEWMAT_1_1InternalException.html">InternalException</a>(<span class="stringliteral">"SymmetricMatrix::GetCol(MatrixColX&amp;)"</span>));
00408 
00409             mrc.<a class="code" href="classMatrixRowCol.html#m1">skip</a>=0; mrc.<a class="code" href="classMatrixRowCol.html#m2">storage</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>;
00410             <span class="keywordflow">if</span> (+(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a1">LoadOnEntry</a>)) {
00411                 <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00412                     <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* ColCopy = mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a>;
00413                 <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* Mstore = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>+(col*(col+1))/2; <span class="keywordtype">int</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a> = col;
00414                 <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--) *ColCopy++ = *Mstore++;
00415                 <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a> = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>-col;
00416                 <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--) { *ColCopy++ = *Mstore; Mstore += ++col; }
00417             }
00418         }
00419     }
00420 
00421     <span class="comment">// Don't need RestoreRow because we don't allow !DirectPart &amp;&amp; StoreOnExit</span>
00422 
<a name="l00423"></a><a class="code" href="classNEWMAT_1_1SymmetricMatrix.html#a19">00423</a>     <span class="keywordtype">void</span> SymmetricMatrix::RestoreCol(<a class="code" href="classMatrixColX.html">MatrixColX</a>&amp; mrc) {
00424         <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00425             <span class="comment">// Really do restore column</span>
00426             <span class="keywordtype">int</span> col=mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>; <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* Cstore = mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a>;
00427         <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* Mstore = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>+(col*(col+3))/2; <span class="keywordtype">int</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a> = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>-col;
00428         <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--) { *Mstore = *Cstore++; Mstore+= ++col; }
00429 
00430     }
00431 
00432     <span class="comment">// routines for row vector</span>
00433 
<a name="l00434"></a><a class="code" href="classNEWMAT_1_1RowVector.html#a11">00434</a>     <span class="keywordtype">void</span> RowVector::GetCol(<a class="code" href="classMatrixRowCol.html">MatrixRowCol</a>&amp; mrc) {
00435         <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00436             <span class="comment">// don't allow StoreHere</span>
00437             <span class="keywordflow">if</span> (+(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a4">StoreHere</a>))
00438                 Throw(<a class="code" href="classNEWMAT_1_1InternalException.html">InternalException</a>(<span class="stringliteral">"RowVector::GetCol(MatrixRowCol&amp;)"</span>));
00439 
00440         mrc.<a class="code" href="classMatrixRowCol.html#m1">skip</a>=0; mrc.<a class="code" href="classMatrixRowCol.html#m2">storage</a>=1; mrc.<a class="code" href="classMatrixRowCol.html#m0">length</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>; mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a> = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>+mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>;
00441 
00442     }
00443 
<a name="l00444"></a><a class="code" href="classNEWMAT_1_1RowVector.html#a12">00444</a>     <span class="keywordtype">void</span> RowVector::GetCol(<a class="code" href="classMatrixColX.html">MatrixColX</a>&amp; mrc) {
00445         <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00446             mrc.<a class="code" href="classMatrixRowCol.html#m1">skip</a>=0; mrc.<a class="code" href="classMatrixRowCol.html#m2">storage</a>=1; mrc.<a class="code" href="classMatrixRowCol.html#m0">length</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>;
00447             <span class="keywordflow">if</span> (mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a> &gt;= <a class="code" href="NEWMATRC_8H.html#a6a1">LoadOnEntry</a>)
00448             { <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a> *(mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a>) = *(<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>+mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>); }
00449 
00450     }
00451 
<a name="l00452"></a><a class="code" href="classNEWMAT_1_1RowVector.html#a13">00452</a>     <span class="keywordtype">void</span> RowVector::NextCol(<a class="code" href="classMatrixRowCol.html">MatrixRowCol</a>&amp; mrc)
00453     { <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a> mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>++; mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a>++; }
00454 
<a name="l00455"></a><a class="code" href="classNEWMAT_1_1RowVector.html#a14">00455</a>     <span class="keywordtype">void</span> RowVector::NextCol(<a class="code" href="classMatrixColX.html">MatrixColX</a>&amp; mrc) {
00456         <span class="keywordflow">if</span> (+(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a2">StoreOnExit</a>)) { <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a> *(<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>+mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>)=*(mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a>); }
00457 
00458         mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>++;
00459         <span class="keywordflow">if</span> (mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a> &lt; <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>) {
00460             <span class="keywordflow">if</span> (+(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a1">LoadOnEntry</a>)) { <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a> *(mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a>)=*(<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>+mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>); }
00461         }
00462         <span class="keywordflow">else</span> { <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a> mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a> -= <a class="code" href="NEWMATRC_8H.html#a6a2">StoreOnExit</a>; }
00463     }
00464 
<a name="l00465"></a><a class="code" href="classNEWMAT_1_1RowVector.html#a16">00465</a>     <span class="keywordtype">void</span> RowVector::RestoreCol(<a class="code" href="classMatrixColX.html">MatrixColX</a>&amp; mrc) {
00466         <span class="comment">// not accessed</span>
00467         <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a> *(<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>+mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>)=*(mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a>);
00468     }
00469 
00470     <span class="comment">// routines for band matrices</span>
00471 
<a name="l00472"></a><a class="code" href="classNEWMAT_1_1BandMatrix.html#a18">00472</a>     <span class="keywordtype">void</span> BandMatrix::GetRow(<a class="code" href="classMatrixRowCol.html">MatrixRowCol</a>&amp; mrc) {
00473         <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00474             <span class="keywordtype">int</span> r = mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>; <span class="keywordtype">int</span> w = <a class="code" href="classNEWMAT_1_1BandMatrix.html#m0">lower</a>+1+<a class="code" href="classNEWMAT_1_1BandMatrix.html#m1">upper</a>; mrc.<a class="code" href="classMatrixRowCol.html#m0">length</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>;
00475             <span class="keywordtype">int</span> s = r-<a class="code" href="classNEWMAT_1_1BandMatrix.html#m0">lower</a>;
00476             <span class="keywordflow">if</span> (s&lt;0) { mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a> = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>+(r*w-s); w += s; s = 0; }
00477             <span class="keywordflow">else</span> mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a> = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>+r*w;
00478             mrc.<a class="code" href="classMatrixRowCol.html#m1">skip</a> = s; s += w-<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>; <span class="keywordflow">if</span> (s&gt;0) w -= s; mrc.<a class="code" href="classMatrixRowCol.html#m2">storage</a> = w;
00479     }
00480 
00481     <span class="comment">// should make special versions of this for upper and lower band matrices</span>
00482 
<a name="l00483"></a><a class="code" href="classNEWMAT_1_1BandMatrix.html#a23">00483</a>     <span class="keywordtype">void</span> BandMatrix::NextRow(<a class="code" href="classMatrixRowCol.html">MatrixRowCol</a>&amp; mrc) {
00484         <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00485             <span class="keywordtype">int</span> r = ++mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>;
00486         <span class="keywordflow">if</span> (r&lt;=<a class="code" href="classNEWMAT_1_1BandMatrix.html#m0">lower</a>) { mrc.<a class="code" href="classMatrixRowCol.html#m2">storage</a>++; mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a> += <a class="code" href="classNEWMAT_1_1BandMatrix.html#m0">lower</a>+<a class="code" href="classNEWMAT_1_1BandMatrix.html#m1">upper</a>; }
00487         <span class="keywordflow">else</span>  { mrc.<a class="code" href="classMatrixRowCol.html#m1">skip</a>++; mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a> += <a class="code" href="classNEWMAT_1_1BandMatrix.html#m0">lower</a>+<a class="code" href="classNEWMAT_1_1BandMatrix.html#m1">upper</a>+1; }
00488         <span class="keywordflow">if</span> (r&gt;=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>-<a class="code" href="classNEWMAT_1_1BandMatrix.html#m1">upper</a>) mrc.<a class="code" href="classMatrixRowCol.html#m2">storage</a>--;
00489     }
00490 
<a name="l00491"></a><a class="code" href="classNEWMAT_1_1BandMatrix.html#a19">00491</a>     <span class="keywordtype">void</span> BandMatrix::GetCol(<a class="code" href="classMatrixRowCol.html">MatrixRowCol</a>&amp; mrc) {
00492         <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00493             <span class="keywordtype">int</span> c = mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>; <span class="keywordtype">int</span> n = <a class="code" href="classNEWMAT_1_1BandMatrix.html#m0">lower</a>+<a class="code" href="classNEWMAT_1_1BandMatrix.html#m1">upper</a>; <span class="keywordtype">int</span> w = n+1;
00494             mrc.<a class="code" href="classMatrixRowCol.html#m0">length</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>; <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* ColCopy;
00495             <span class="keywordtype">int</span> b; <span class="keywordtype">int</span> s = c-<a class="code" href="classNEWMAT_1_1BandMatrix.html#m1">upper</a>;
00496             <span class="keywordflow">if</span> (s&lt;=0) { w += s; s = 0; b = c+<a class="code" href="classNEWMAT_1_1BandMatrix.html#m0">lower</a>; }
00497             <span class="keywordflow">else</span> b = s*w+n;
00498             mrc.<a class="code" href="classMatrixRowCol.html#m1">skip</a> = s; s += w-<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>; <span class="keywordflow">if</span> (s&gt;0) w -= s; mrc.<a class="code" href="classMatrixRowCol.html#m2">storage</a> = w;
00499             <span class="keywordflow">if</span> ( +(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*(<a class="code" href="NEWMATRC_8H.html#a6a4">StoreHere</a>+<a class="code" href="NEWMATRC_8H.html#a6a5">HaveStore</a>)) )
00500             { <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a> ColCopy = mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a>; }
00501             <span class="keywordflow">else</span> {
00502                 <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00503                     ColCopy = <span class="keyword">new</span> <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a> [n+1]; <a class="code" href="namespaceNEWMAT.html#a19">MatrixErrorNoSpace</a>(ColCopy);
00504                 <a class="code" href="MYEXCEPT_8H.html#a1">MONITOR_REAL_NEW</a>(<span class="stringliteral">"Make (BMGetCol)"</span>,n+1,ColCopy)
00505                     mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a> += <a class="code" href="NEWMATRC_8H.html#a6a5">HaveStore</a>; mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a> = ColCopy;
00506             }
00507 
00508             <span class="keywordflow">if</span> (+(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a1">LoadOnEntry</a>)) {
00509                 <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00510                     <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* Mstore = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>+b;
00511                 <span class="keywordflow">while</span> (w--) { *ColCopy++ = *Mstore; Mstore+=n; }
00512             }
00513     }
00514 
<a name="l00515"></a><a class="code" href="classNEWMAT_1_1BandMatrix.html#a20">00515</a>     <span class="keywordtype">void</span> BandMatrix::GetCol(<a class="code" href="classMatrixColX.html">MatrixColX</a>&amp; mrc) {
00516         <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00517             <span class="keywordtype">int</span> c = mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>; <span class="keywordtype">int</span> n = <a class="code" href="classNEWMAT_1_1BandMatrix.html#m0">lower</a>+<a class="code" href="classNEWMAT_1_1BandMatrix.html#m1">upper</a>; <span class="keywordtype">int</span> w = n+1;
00518             mrc.<a class="code" href="classMatrixRowCol.html#m0">length</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>; <span class="keywordtype">int</span> b; <span class="keywordtype">int</span> s = c-<a class="code" href="classNEWMAT_1_1BandMatrix.html#m1">upper</a>;
00519             <span class="keywordflow">if</span> (s&lt;=0) { w += s; s = 0; b = c+<a class="code" href="classNEWMAT_1_1BandMatrix.html#m0">lower</a>; }
00520             <span class="keywordflow">else</span> b = s*w+n;
00521             mrc.<a class="code" href="classMatrixRowCol.html#m1">skip</a> = s; s += w-<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>; <span class="keywordflow">if</span> (s&gt;0) w -= s; mrc.<a class="code" href="classMatrixRowCol.html#m2">storage</a> = w;
00522             mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a> = mrc.<a class="code" href="classMatrixColX.html#m0">store</a>+mrc.<a class="code" href="classMatrixRowCol.html#m1">skip</a>;
00523 
00524             <span class="keywordflow">if</span> (+(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a1">LoadOnEntry</a>)) {
00525                 <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00526                     <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* ColCopy = mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a>; <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* Mstore = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>+b;
00527                 <span class="keywordflow">while</span> (w--) { *ColCopy++ = *Mstore; Mstore+=n; }
00528             }
00529     }
00530 
<a name="l00531"></a><a class="code" href="classNEWMAT_1_1BandMatrix.html#a21">00531</a>     <span class="keywordtype">void</span> BandMatrix::RestoreCol(<a class="code" href="classMatrixRowCol.html">MatrixRowCol</a>&amp; mrc) {
00532         <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00533             <span class="keywordtype">int</span> c = mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>; <span class="keywordtype">int</span> n = <a class="code" href="classNEWMAT_1_1BandMatrix.html#m0">lower</a>+<a class="code" href="classNEWMAT_1_1BandMatrix.html#m1">upper</a>; <span class="keywordtype">int</span> s = c-<a class="code" href="classNEWMAT_1_1BandMatrix.html#m1">upper</a>;
00534             <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* Mstore = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a> + ((s&lt;=0) ? c+<a class="code" href="classNEWMAT_1_1BandMatrix.html#m0">lower</a> : s*n+s+n);
00535             <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* Cstore = mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a>;
00536             <span class="keywordtype">int</span> w = mrc.<a class="code" href="classMatrixRowCol.html#m2">storage</a>;
00537             <span class="keywordflow">while</span> (w--) { *Mstore = *Cstore++; Mstore += n; }
00538     }
00539 
00540     <span class="comment">// routines for symmetric band matrix</span>
00541 
<a name="l00542"></a><a class="code" href="classNEWMAT_1_1SymmetricBandMatrix.html#a18">00542</a>     <span class="keywordtype">void</span> SymmetricBandMatrix::GetRow(<a class="code" href="classMatrixRowCol.html">MatrixRowCol</a>&amp; mrc) {
00543         <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00544             <span class="keywordtype">int</span> r=mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>; <span class="keywordtype">int</span> s = r-<a class="code" href="classNEWMAT_1_1SymmetricBandMatrix.html#m0">lower</a>; <span class="keywordtype">int</span> w1 = <a class="code" href="classNEWMAT_1_1SymmetricBandMatrix.html#m0">lower</a>+1; <span class="keywordtype">int</span> o = r*w1;
00545             mrc.<a class="code" href="classMatrixRowCol.html#m0">length</a> = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>;
00546             <span class="keywordflow">if</span> (s&lt;0) { w1 += s; o -= s; s = 0; }
00547             mrc.<a class="code" href="classMatrixRowCol.html#m1">skip</a> = s;
00548 
00549             <span class="keywordflow">if</span> (+(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a3">DirectPart</a>))
00550             { <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>  mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a> = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>+o; mrc.<a class="code" href="classMatrixRowCol.html#m2">storage</a> = w1; }
00551             <span class="keywordflow">else</span> {
00552                 <span class="comment">// don't allow StoreOnExit and !DirectPart</span>
00553                 <span class="keywordflow">if</span> (+(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a2">StoreOnExit</a>))
00554                     Throw(<a class="code" href="classNEWMAT_1_1InternalException.html">InternalException</a>(<span class="stringliteral">"SymmetricBandMatrix::GetRow(MatrixRowCol&amp;)"</span>));
00555                 <span class="keywordtype">int</span> w = w1+<a class="code" href="classNEWMAT_1_1SymmetricBandMatrix.html#m0">lower</a>; s += w-<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>; <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* RowCopy;
00556                 <span class="keywordflow">if</span> (s&gt;0) w -= s; mrc.<a class="code" href="classMatrixRowCol.html#m2">storage</a> = w; <span class="keywordtype">int</span> w2 = w-w1;
00557                 <span class="keywordflow">if</span> (!(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a5">HaveStore</a>)) {
00558                     <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00559                         RowCopy = <span class="keyword">new</span> <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a> [2*<a class="code" href="classNEWMAT_1_1SymmetricBandMatrix.html#m0">lower</a>+1]; <a class="code" href="namespaceNEWMAT.html#a19">MatrixErrorNoSpace</a>(RowCopy);
00560                     <a class="code" href="MYEXCEPT_8H.html#a1">MONITOR_REAL_NEW</a>(<span class="stringliteral">"Make (SmBGetRow)"</span>,2*<a class="code" href="classNEWMAT_1_1SymmetricBandMatrix.html#m0">lower</a>+1,RowCopy)
00561                         mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a> += <a class="code" href="NEWMATRC_8H.html#a6a5">HaveStore</a>; mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a> = RowCopy;
00562                 }
00563                 <span class="keywordflow">else</span> { <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>  RowCopy = mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a>; }
00564 
00565                 <span class="keywordflow">if</span> (+(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a1">LoadOnEntry</a>)) {
00566                     <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00567                         <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* Mstore = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>+o;
00568                     <span class="keywordflow">while</span> (w1--) *RowCopy++ = *Mstore++;
00569                     Mstore--;
00570                     <span class="keywordflow">while</span> (w2--) { Mstore += <a class="code" href="classNEWMAT_1_1SymmetricBandMatrix.html#m0">lower</a>; *RowCopy++ = *Mstore; }
00571                 }
00572             }
00573     }
00574 
<a name="l00575"></a><a class="code" href="classNEWMAT_1_1SymmetricBandMatrix.html#a19">00575</a>     <span class="keywordtype">void</span> SymmetricBandMatrix::GetCol(<a class="code" href="classMatrixRowCol.html">MatrixRowCol</a>&amp; mrc) {
00576         <span class="comment">// don't allow StoreHere</span>
00577         <span class="keywordflow">if</span> (+(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a4">StoreHere</a>))
00578             Throw(<a class="code" href="classNEWMAT_1_1InternalException.html">InternalException</a>(<span class="stringliteral">"SymmetricBandMatrix::GetCol(MatrixRowCol&amp;)"</span>));
00579 
00580         <span class="keywordtype">int</span> c=mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>; <span class="keywordtype">int</span> w1 = <a class="code" href="classNEWMAT_1_1SymmetricBandMatrix.html#m0">lower</a>+1; mrc.<a class="code" href="classMatrixRowCol.html#m0">length</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>;
00581         <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00582             <span class="keywordtype">int</span> s = c-<a class="code" href="classNEWMAT_1_1SymmetricBandMatrix.html#m0">lower</a>; <span class="keywordtype">int</span> o = c*w1;
00583         <span class="keywordflow">if</span> (s&lt;0) { w1 += s; o -= s; s = 0; }
00584         mrc.<a class="code" href="classMatrixRowCol.html#m1">skip</a> = s;
00585 
00586         <span class="keywordflow">if</span> (+(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a3">DirectPart</a>))
00587         { <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>  mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a> = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>+o; mrc.<a class="code" href="classMatrixRowCol.html#m2">storage</a> = w1; }
00588         <span class="keywordflow">else</span> {
00589             <span class="comment">// don't allow StoreOnExit and !DirectPart</span>
00590             <span class="keywordflow">if</span> (+(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a2">StoreOnExit</a>))
00591                 Throw(<a class="code" href="classNEWMAT_1_1InternalException.html">InternalException</a>(<span class="stringliteral">"SymmetricBandMatrix::GetCol(MatrixRowCol&amp;)"</span>));
00592             <span class="keywordtype">int</span> w = w1+<a class="code" href="classNEWMAT_1_1SymmetricBandMatrix.html#m0">lower</a>; s += w-<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>; <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* ColCopy;
00593             <span class="keywordflow">if</span> (s&gt;0) w -= s; mrc.<a class="code" href="classMatrixRowCol.html#m2">storage</a> = w; <span class="keywordtype">int</span> w2 = w-w1;
00594 
00595             <span class="keywordflow">if</span> ( +(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a5">HaveStore</a>) ) { <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a> ColCopy = mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a>; }
00596             <span class="keywordflow">else</span> {
00597                 <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a> ColCopy = <span class="keyword">new</span> <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a> [2*<a class="code" href="classNEWMAT_1_1SymmetricBandMatrix.html#m0">lower</a>+1]; <a class="code" href="namespaceNEWMAT.html#a19">MatrixErrorNoSpace</a>(ColCopy);
00598                 <a class="code" href="MYEXCEPT_8H.html#a1">MONITOR_REAL_NEW</a>(<span class="stringliteral">"Make (SmBGetCol)"</span>,2*<a class="code" href="classNEWMAT_1_1SymmetricBandMatrix.html#m0">lower</a>+1,ColCopy)
00599                     mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a> += <a class="code" href="NEWMATRC_8H.html#a6a5">HaveStore</a>; mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a> = ColCopy;
00600             }
00601 
00602             <span class="keywordflow">if</span> (+(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a1">LoadOnEntry</a>)) {
00603                 <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00604                     <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* Mstore = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>+o;
00605                 <span class="keywordflow">while</span> (w1--) *ColCopy++ = *Mstore++;
00606                 Mstore--;
00607                 <span class="keywordflow">while</span> (w2--) { Mstore += <a class="code" href="classNEWMAT_1_1SymmetricBandMatrix.html#m0">lower</a>; *ColCopy++ = *Mstore; }
00608             }
00609         }
00610     }
00611 
<a name="l00612"></a><a class="code" href="classNEWMAT_1_1SymmetricBandMatrix.html#a20">00612</a>     <span class="keywordtype">void</span> SymmetricBandMatrix::GetCol(<a class="code" href="classMatrixColX.html">MatrixColX</a>&amp; mrc) {
00613         <span class="keywordtype">int</span> c=mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>; <span class="keywordtype">int</span> w1 = <a class="code" href="classNEWMAT_1_1SymmetricBandMatrix.html#m0">lower</a>+1; mrc.<a class="code" href="classMatrixRowCol.html#m0">length</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>;
00614         <span class="keywordflow">if</span> (+(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a3">DirectPart</a>)) {
00615             <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00616                 <span class="keywordtype">int</span> b = c*w1+<a class="code" href="classNEWMAT_1_1SymmetricBandMatrix.html#m0">lower</a>;
00617             mrc.<a class="code" href="classMatrixRowCol.html#m1">skip</a> = c; c += w1-<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>; w1 -= c; mrc.<a class="code" href="classMatrixRowCol.html#m2">storage</a> = w1;
00618             <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* ColCopy = mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a> = mrc.<a class="code" href="classMatrixColX.html#m0">store</a>+mrc.<a class="code" href="classMatrixRowCol.html#m1">skip</a>;
00619             <span class="keywordflow">if</span> (+(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a1">LoadOnEntry</a>)) {
00620                 <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00621                     <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* Mstore = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>+b;
00622                 <span class="keywordflow">while</span> (w1--) { *ColCopy++ = *Mstore; Mstore += <a class="code" href="classNEWMAT_1_1SymmetricBandMatrix.html#m0">lower</a>; }
00623             }
00624         }
00625         <span class="keywordflow">else</span> {
00626             <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00627                 <span class="comment">// don't allow StoreOnExit and !DirectPart</span>
00628                 <span class="keywordflow">if</span> (+(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a2">StoreOnExit</a>))
00629                     Throw(<a class="code" href="classNEWMAT_1_1InternalException.html">InternalException</a>(<span class="stringliteral">"SymmetricBandMatrix::GetCol(MatrixColX&amp;)"</span>));
00630             <span class="keywordtype">int</span> s = c-<a class="code" href="classNEWMAT_1_1SymmetricBandMatrix.html#m0">lower</a>; <span class="keywordtype">int</span> o = c*w1;
00631             <span class="keywordflow">if</span> (s&lt;0) { w1 += s; o -= s; s = 0; }
00632             mrc.<a class="code" href="classMatrixRowCol.html#m1">skip</a> = s;
00633 
00634             <span class="keywordtype">int</span> w = w1+<a class="code" href="classNEWMAT_1_1SymmetricBandMatrix.html#m0">lower</a>; s += w-<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>;
00635             <span class="keywordflow">if</span> (s&gt;0) w -= s; mrc.<a class="code" href="classMatrixRowCol.html#m2">storage</a> = w; <span class="keywordtype">int</span> w2 = w-w1;
00636 
00637             <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* ColCopy = mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a> = mrc.<a class="code" href="classMatrixColX.html#m0">store</a>+mrc.<a class="code" href="classMatrixRowCol.html#m1">skip</a>;
00638 
00639             <span class="keywordflow">if</span> (+(mrc.<a class="code" href="classMatrixRowCol.html#m6">cw</a>*<a class="code" href="NEWMATRC_8H.html#a6a1">LoadOnEntry</a>)) {
00640                 <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00641                     <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* Mstore = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>+o;
00642                 <span class="keywordflow">while</span> (w1--) *ColCopy++ = *Mstore++;
00643                 Mstore--;
00644                 <span class="keywordflow">while</span> (w2--) { Mstore += <a class="code" href="classNEWMAT_1_1SymmetricBandMatrix.html#m0">lower</a>; *ColCopy++ = *Mstore; }
00645             }
00646 
00647         }
00648     }
00649 
<a name="l00650"></a><a class="code" href="classNEWMAT_1_1SymmetricBandMatrix.html#a22">00650</a>     <span class="keywordtype">void</span> SymmetricBandMatrix::RestoreCol(<a class="code" href="classMatrixColX.html">MatrixColX</a>&amp; mrc) {
00651         <a class="code" href="NEWMAT3_8CPP.html#a0">REPORT</a>
00652             <span class="keywordtype">int</span> c = mrc.<a class="code" href="classMatrixRowCol.html#m3">rowcol</a>;
00653         <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* Mstore = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a> + c*<a class="code" href="classNEWMAT_1_1SymmetricBandMatrix.html#m0">lower</a>+c+<a class="code" href="classNEWMAT_1_1SymmetricBandMatrix.html#m0">lower</a>;
00654         <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* Cstore = mrc.<a class="code" href="classMatrixRowCol.html#m5">data</a>; <span class="keywordtype">int</span> w = mrc.<a class="code" href="classMatrixRowCol.html#m2">storage</a>;
00655         <span class="keywordflow">while</span> (w--) { *Mstore = *Cstore++; Mstore += <a class="code" href="classNEWMAT_1_1SymmetricBandMatrix.html#m0">lower</a>; }
00656     }
00657 
00658     <span class="comment">// *************************** destructors *******************************</span>
00659 
00660     <a class="code" href="classMatrixRowCol.html#a37">MatrixRowCol::~MatrixRowCol</a>() {
00661         <span class="keywordflow">if</span> (+(cw*<a class="code" href="NEWMATRC_8H.html#a6a5">HaveStore</a>)) {
00662             <span class="comment">// don't know length</span>
00663             <a class="code" href="MYEXCEPT_8H.html#a3">MONITOR_REAL_DELETE</a>(<span class="stringliteral">"Free    (RowCol)"</span>,-1,data)
00664                 <span class="keyword">delete</span> [] data;
00665         }
00666     }
00667 
00668     <a class="code" href="classMatrixRow.html#a1">MatrixRow::~MatrixRow</a>() { <span class="keywordflow">if</span> (+(cw*<a class="code" href="NEWMATRC_8H.html#a6a2">StoreOnExit</a>)) gm-&gt;RestoreRow(*<span class="keyword">this</span>); }
00669 
00670     <a class="code" href="classMatrixCol.html#a2">MatrixCol::~MatrixCol</a>() { <span class="keywordflow">if</span> (+(cw*<a class="code" href="NEWMATRC_8H.html#a6a2">StoreOnExit</a>)) gm-&gt;RestoreCol(*<span class="keyword">this</span>); }
00671 
00672     <a class="code" href="classMatrixColX.html#a1">MatrixColX::~MatrixColX</a>() { <span class="keywordflow">if</span> (+(cw*<a class="code" href="NEWMATRC_8H.html#a6a2">StoreOnExit</a>)) gm-&gt;RestoreCol(*<span class="keyword">this</span>); }
00673 
00674 <span class="preprocessor">#ifdef use_namespace</span>
00675 <span class="preprocessor"></span>}
00676 <span class="preprocessor">#endif</span>
</pre></div><hr><address style="align: right;"><small>Generated on Fri Aug 23 01:37:06 2002 for VirtualU by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.17 </small></address>
</body>
</html>
