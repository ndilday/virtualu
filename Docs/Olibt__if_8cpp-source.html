<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Olibt_if.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.17 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>Olibt_if.cpp</h1><a href="Olibt__if_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">//Filename    : OLIBT_IF.CPP</span>
00002 <span class="comment">//Description : LibTech (LibTech and Alumni Affairs Office) class</span>
00003 <span class="comment">// owner                        : Kevin(Ho)</span>
00004 <span class="comment">// Notes:       Steps to introduce a new class of user interface</span>
00005 <span class="comment">//                              1.      construct the new class</span>
00006 <span class="comment">//                              2.      in sys.h, add the new MODE, e.g. MODE_ADMISSIONS_AND_FINANCIAL_OFFICE</span>
00007 <span class="comment">//                              3.      include the new header file in cc.cpp, osysdisp.cpp, osysdet.cpp</span>
00008 <span class="comment">//                              4.      in cc.cpp, declare a global object of the new class, with the name matching the 'extern' statement in the header file</span>
00009 <span class="comment">//                              5.      in osysdisp.cpp, under switch(view_mode), add the redirection to the display function</span>
00010 <span class="comment">//                              6.      in osysdet.cpp, under Sys::detect_view, add the redirection to the detect function</span>
00011 <span class="comment">//                              7.      in osysdet.cpp, under Sys::process_key, add the new hot key (optional)</span>
00012 <span class="comment">//                              8.      in osysdet.cpp, under Sys::detect_button, modify if necessary (see the comments there)</span>
00013 <span class="comment">//                              9.      the deinit function (AdmOffice::deinit()) can be called when the view_mode in 'sys' object is switched</span>
00014 <span class="comment">//                                      the function frees memory occupied by this object</span>
00015 <span class="comment">//                                      the report function would re-allocate memory when it is called (note the init_flag)</span>
00016 <span class="comment">//                                      notice the beginning section of Sys::disp_frame()</span>
00017 <span class="comment">// Kevin 0723</span>
00018 
00019 <span class="preprocessor">#include &lt;OSYS.H&gt;</span>
00020 <span class="preprocessor">#include &lt;<a class="code" href="OSTR_8H.html">OSTR.H</a>&gt;</span>
00021 <span class="preprocessor">#include &lt;OMISC.H&gt;</span>
00022 <span class="preprocessor">#include &lt;<a class="code" href="OGAMESET_8H.html">OGAMESET.H</a>&gt;</span>
00023 <span class="preprocessor">#include &lt;OWORLDMT.H&gt;</span>
00024 <span class="preprocessor">#include &lt;OLIBTECH.H&gt;</span>
00025 <span class="preprocessor">#include &lt;<a class="code" href="OVGA_8H.html">OVGA.H</a>&gt;</span>
00026 <span class="preprocessor">#include &lt;OIFACE.H&gt;</span>
00027 <span class="preprocessor">#include &lt;OINFO.H&gt;</span>
00028 <span class="preprocessor">#include &lt;<a class="code" href="COLOR_8H.html">COLOR.H</a>&gt;</span>
00029 <span class="preprocessor">#include &lt;<a class="code" href="OTEXT_8H.html">OTEXT.H</a>&gt;</span>
00030 <span class="preprocessor">#include &lt;OFONT.H&gt;</span>
00031 <span class="preprocessor">#include &lt;OGAMESTR.H&gt;</span>
00032 <span class="preprocessor">#include &lt;OMOUSE.H&gt;</span>
00033 <span class="preprocessor">#include &lt;OBUTTON.H&gt;</span>
00034 <span class="preprocessor">#include &lt;<a class="code" href="OVALSLDR_8H.html">OVALSLDR.H</a>&gt;</span>
00035 <span class="preprocessor">#include &lt;<a class="code" href="ORADIO_8H.html">ORADIO.H</a>&gt;</span>
00036 <span class="preprocessor">#include &lt;OSPINNER.H&gt;</span>
00037 <span class="preprocessor">#include &lt;<a class="code" href="OGRPHYR_8H.html">OGRPHYR.H</a>&gt;</span>
00038 <span class="preprocessor">#include &lt;<a class="code" href="OGRPHMTH_8H.html">OGRPHMTH.H</a>&gt;</span>
00039 <span class="preprocessor">#include &lt;<a class="code" href="OGRPHTRI_8H.html">OGRPHTRI.H</a>&gt;</span>
00040 <span class="preprocessor">#include &lt;<a class="code" href="OGRPH__PY_8H.html">OGRPH_PY.H</a>&gt;</span>
00041 <span class="preprocessor">#include &lt;<a class="code" href="OPIECHRT_8H.html">OPIECHRT.H</a>&gt;</span>
00042 <span class="preprocessor">#include &lt;OFINANCE.H&gt;</span>
00043 <span class="preprocessor">#include &lt;<a class="code" href="OHELP_8H.html">OHELP.H</a>&gt;</span>
00044 
00045 <span class="comment">//------- Define constants -------//</span>
00046 
00047 <span class="keyword">enum</span> {                                            <span class="comment">// the 'sub' view-modes</span>
00048     <a class="code" href="Olibt__if_8cpp.html#a83a35">MODE_OVERVIEW</a> = 0,
00049     <a class="code" href="Olibt__if_8cpp.html#a83a36">MODE_FINANCIAL</a> = 1,
00050 };
00051 
00052 <span class="keyword">enum</span> {                                            <span class="comment">// the bg image id</span>
00053     <a class="code" href="Olibt__if_8cpp.html#a84a37">BG_PIC_ID</a> = 2
00054 };
00055 
00056 <span class="keyword">enum</span> {                                            <span class="comment">// screen coordinates</span>
00057     <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a> = <a class="code" href="Oworldmt_8h.html#a12">ZOOM_X1</a>+15,
00058     <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a> = <a class="code" href="Oworldmt_8h.html#a13">ZOOM_Y1</a>+25,
00059     <a class="code" href="Olibt__if_8cpp.html#a85a40">REPORT_X2</a> = <a class="code" href="Oworldmt_8h.html#a14">ZOOM_X2</a>-15,
00060     <a class="code" href="Olibt__if_8cpp.html#a85a41">REPORT_Y2</a> = <a class="code" href="Oworldmt_8h.html#a15">ZOOM_Y2</a>-55
00061 };
00062 
00063 <span class="keyword">enum</span> {
00064     <a class="code" href="Olibt__if_8cpp.html#a86a42">BOTTOM_BUTTON_X1</a> = <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+200,
00065     <a class="code" href="Olibt__if_8cpp.html#a86a43">BOTTOM_BUTTON_Y1</a> = <a class="code" href="Olibt__if_8cpp.html#a85a41">REPORT_Y2</a>+15,
00066     <a class="code" href="Olibt__if_8cpp.html#a86a44">BOTTOM_BUTTON_X2</a> = <a class="code" href="Olibt__if_8cpp.html#a85a40">REPORT_X2</a>-80,
00067     <a class="code" href="Olibt__if_8cpp.html#a86a45">BOTTOM_BUTTON_Y2</a> = <a class="code" href="Olibt__if_8cpp.html#a85a41">REPORT_Y2</a>+40
00068 };
00069 
00070 <span class="keyword">enum</span> {
00071     <a class="code" href="Olibt__if_8cpp.html#a87a46">BOTTOM_BUTTON_WIDTH</a> = 125,
00072     <a class="code" href="Olibt__if_8cpp.html#a87a47">BOTTOM_BUTTON_HEIGHT</a> = 25,
00073     <a class="code" href="Olibt__if_8cpp.html#a87a48">BOTTOM_BUTTON_DISTANCE</a>
00074     = (<a class="code" href="Olibt__if_8cpp.html#a86a44">BOTTOM_BUTTON_X2</a>-<a class="code" href="Olibt__if_8cpp.html#a86a42">BOTTOM_BUTTON_X1</a>-<a class="code" href="Olibt__if_8cpp.html#a87a46">BOTTOM_BUTTON_WIDTH</a>*2)/3
00075 };
00076 
00077 <span class="comment">// begin kevin 0723</span>
00078 <span class="keyword">enum</span> {
00079     <a class="code" href="Olibt__if_8cpp.html#a88a49">MODE_OVERVIEW_BOX1_HEIGHT</a> = 265,
00080     <a class="code" href="Olibt__if_8cpp.html#a88a50">MODE_OVERVIEW_BOX2_HEIGHT</a> = 60,
00081     <a class="code" href="Olibt__if_8cpp.html#a88a51">MODE_OVERVIEW_BOX_WIDTH</a> = 650,
00082     <a class="code" href="Olibt__if_8cpp.html#a88a52">MODE_OVERVIEW_TAB0</a> = 40,
00083     <a class="code" href="Olibt__if_8cpp.html#a88a53">MODE_OVERVIEW_TAB1</a> = 250,
00084 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00085 <span class="preprocessor"></span>    <a class="code" href="Olibt__if_8cpp.html#a88a54">MODE_OVERVIEW_TAB4</a> = 440,
00086 <span class="preprocessor">#else</span>
00087 <span class="preprocessor"></span>    <a class="code" href="Olibt__if_8cpp.html#a88a54">MODE_OVERVIEW_TAB4</a> = 420,
00088 <span class="preprocessor">#endif</span>
00089 <span class="preprocessor"></span>};
00090 
00091 <span class="comment">// end kevin 0723</span>
00092 
00093 <span class="keyword">enum</span> {
00094     <a class="code" href="Olibt__if_8cpp.html#a89a55">MODE_FINANCIAL_BOX1_HEIGHT</a> = 85,
00095     <a class="code" href="Olibt__if_8cpp.html#a89a56">MODE_FINANCIAL_BOX2_HEIGHT</a> = 250,
00096     <a class="code" href="Olibt__if_8cpp.html#a89a57">MODE_FINANCIAL_GRAPH_WIDTH</a> = 400,
00097     <a class="code" href="Olibt__if_8cpp.html#a89a58">MODE_FINANCIAL_GRAPH_HEIGHT</a> = 160,
00098     <a class="code" href="Olibt__if_8cpp.html#a89a59">MODE_FINANCIAL_LEGEND_HEIGHT</a> = 26,
00099     <a class="code" href="Olibt__if_8cpp.html#a89a60">MODE_FINANCIAL_LEGEND_WIDTH</a> = 400,
00100 
00101     <a class="code" href="Olibt__if_8cpp.html#a89a61">MODE_FINANCIAL_TAB1</a> = 15,
00102     <a class="code" href="Olibt__if_8cpp.html#a89a62">MODE_FINANCIAL_TAB2</a> = 280,
00103     <a class="code" href="Olibt__if_8cpp.html#a89a63">MODE_FINANCIAL_TAB3</a> = 360,
00104     <a class="code" href="Olibt__if_8cpp.html#a89a64">MODE_FINANCIAL_TAB4</a> = 440,
00105     <a class="code" href="Olibt__if_8cpp.html#a89a65">MODE_FINANCIAL_TAB5</a> = 520,
00106     <a class="code" href="Olibt__if_8cpp.html#a89a66">MODE_FINANCIAL_TAB6</a> = 600,
00107 };
00108 
00109 <span class="keyword">enum</span> {
00110     <a class="code" href="Olibt__if_8cpp.html#a90a67">FINANCIAL_BUTTON_X1</a> = <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a64">MODE_FINANCIAL_TAB4</a>+30,
00111     <a class="code" href="Olibt__if_8cpp.html#a90a68">FINANCIAL_BUTTON_Y1</a> = <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a55">MODE_FINANCIAL_BOX1_HEIGHT</a>+60,
00112     <a class="code" href="Olibt__if_8cpp.html#a90a69">FINANCIAL_BUTTON_X2</a> = <a class="code" href="Olibt__if_8cpp.html#a85a40">REPORT_X2</a>,
00113     <a class="code" href="Olibt__if_8cpp.html#a90a70">FINANCIAL_BUTTON_Y2</a> = <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a55">MODE_FINANCIAL_BOX1_HEIGHT</a>+180
00114 };
00115 
00116 <span class="keyword">enum</span> {
00117     <a class="code" href="Olibt__if_8cpp.html#a91a71">FINANCIAL_BUTTON_WIDTH</a> = 200,
00118     <a class="code" href="Olibt__if_8cpp.html#a91a72">FINANCIAL_BUTTON_HEIGHT</a> = 20,
00119     <a class="code" href="Olibt__if_8cpp.html#a91a73">FINANCIAL_BUTTON_DISTANCE</a>= 5
00120 };
00121 
00122 <span class="keyword">enum</span> {                                            <span class="comment">// the 'sub' view-modes</span>
00123     <a class="code" href="Olibt__if_8cpp.html#a92a74">MODE_FINANCIAL_IMPLEMENT</a> = 2,
00124     <a class="code" href="Olibt__if_8cpp.html#a92a75">MODE_FINANCIAL_ANNOUNCE</a> = 1,
00125     <a class="code" href="Olibt__if_8cpp.html#a92a76">MODE_FINANCIAL_CONSIDER</a> = 0,
00126 };
00127 
00128 <span class="comment">//-------- define static vars -----------//</span>
00129 
00130 <span class="keyword">static</span> <span class="keywordtype">char</span> report_init_flag = 0;
00131 <span class="keyword">static</span> <span class="keywordtype">char</span> mode_init_flag = -1;                  <span class="comment">// -1: non of the mode was init'ed</span>
00132 
00133 <span class="keyword">static</span> <span class="keywordtype">char</span>* mode_overview_radio_button_option_str[4]= {
00134     <span class="stringliteral">"Bad        "</span>,
00135     <span class="stringliteral">"Good       "</span>,
00136     <span class="stringliteral">"Very good  "</span>,
00137     <span class="stringliteral">"Best       "</span>
00138 };
00139 
00140 <span class="keyword">static</span> <a class="code" href="classButtonGroup.html">ButtonGroup</a> bottom_button_group(2);
00141 <span class="keyword">static</span> <span class="keywordtype">short</span> *bottom_button_up_bitmap[2];
00142 <span class="keyword">static</span> <span class="keywordtype">short</span> *bottom_button_down_bitmap[2];
00143 <span class="keyword">static</span> <span class="keywordtype">char</span> *bottom_button_label[] = {
00144     <span class="stringliteral">"Overview"</span>,<span class="stringliteral">"Finance"</span>,
00145 };
00146 
00147 <span class="comment">// Notes:       the strings could be moved to Ogamestr.cpp</span>
00148 <span class="comment">// Begin LibTech Mode Setting</span>
00149 
00150 <span class="keyword">static</span> <span class="keywordtype">char</span> *mode_overview_str1[] = {
00151     <span class="stringliteral">"Number of volumes in library"</span>,
00152     <span class="stringliteral">"Weighted average percentage of faculty effort spent on educational development using information technology"</span>,
00153     <span class="stringliteral">""</span>,
00154 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00155 <span class="preprocessor"></span>    <span class="stringliteral">"Quality of IT infrastructure and training"</span>,
00156     <span class="stringliteral">"Percentage of courses redesigned to make optimal use of information technology"</span>,
00157     <span class="stringliteral">"Institutional incentives for faculty to optimize IT in teaching"</span>,
00158     <span class="stringliteral">"Percent of regular tuition for distance learning credits"</span>,
00159 <span class="preprocessor">#else</span>
00160 <span class="preprocessor"></span>    <span class="stringliteral">"Quality / level of Internet connection"</span>,
00161     <span class="stringliteral">"Percentage of courses using information technology"</span>,
00162     <span class="stringliteral">"Faculty incentive for educational development"</span>,
00163 <span class="preprocessor">#endif</span>
00164 <span class="preprocessor"></span>
00165 };
00166 
00167 <span class="keyword">static</span> <span class="keywordtype">short</span> *mode_overview_text_bitmap;
00168 <span class="keyword">static</span> <a class="code" href="classText.html">Text</a> mode_overview_text;
00169 <span class="keyword">static</span> <a class="code" href="classRadioButton.html">RadioButton</a> mode_overview_radiobutton;
00170 <span class="keyword">static</span> <a class="code" href="classValueSlider.html">ValueSlider</a> mode_overview_valueslider;
00171 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00172 <span class="preprocessor"></span><span class="keyword">static</span> <a class="code" href="classValueSlider.html">ValueSlider</a> mode_overview_valueslider2;
00173 <span class="preprocessor">#endif</span>
00174 <span class="preprocessor"></span><span class="keyword">static</span> <a class="code" href="classGraphPerformanceIndicatorYear.html">GraphPerformanceIndicatorYear</a> mode_overview_graphicon[5];
00175 
00176 <span class="comment">// End LibTech Mode Setting</span>
00177 
00178 <span class="comment">// Begin Financial Mode Setting</span>
00179 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00180 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">char</span> *mode_financial_str[] = {
00181     <span class="stringliteral">"Library expenditures"</span>,
00182     <span class="stringliteral">"Information technology expenditures"</span>,
00183     <span class="stringliteral">"Net distance learning expenditures (revenues)"</span>,
00184     <span class="stringliteral">""</span>,
00185     <span class="stringliteral">"Change"</span>,
00186     <span class="stringliteral">"Change in libraries \r\nexpenditure budget"</span>,
00187     <span class="stringliteral">"Change in IT \r\nexpenditure budget"</span>
00188 };
00189 <span class="preprocessor">#else</span>
00190 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">char</span> *mode_financial_str[] = {
00191     <span class="stringliteral">"Libraries &amp; Information Technology Center"</span>,
00192     <span class="stringliteral">"Libraries"</span>,
00193     <span class="stringliteral">"Information Technology"</span>,
00194     <span class="stringliteral">""</span>,
00195     <span class="stringliteral">"Change"</span>,
00196     <span class="stringliteral">"Change in libraries \r\nexpenditure budget"</span>,
00197     <span class="stringliteral">"Change in IT \r\nexpenditure budget"</span>
00198 };
00199 <span class="preprocessor">#endif</span>
00200 <span class="preprocessor"></span>
00201 <span class="keyword">static</span> <span class="keywordtype">char</span> *mode_financial_label[] = {
00202     <span class="stringliteral">"Revenue"</span>, <span class="stringliteral">"Expenditure"</span>,<span class="stringliteral">"Profit"</span>, <span class="stringliteral">"Loss"</span>,
00203 };
00204 
00205 <span class="keyword">static</span> <span class="keywordtype">short</span> *mode_financial_stats_bitmap;
00206 <span class="keyword">static</span> <a class="code" href="classSpinner.html">Spinner</a> financial_spinner_budget1;
00207 <span class="keyword">static</span> <a class="code" href="classSpinner.html">Spinner</a> financial_spinner_budget2;
00208 <span class="keyword">static</span> <a class="code" href="classButtonGroup.html">ButtonGroup</a> financial_button1_group(3);
00209 <span class="keyword">static</span> <span class="keywordtype">short</span> *financial_button1_up_bitmap[3];
00210 <span class="keyword">static</span> <span class="keywordtype">short</span> *financial_button1_down_bitmap[3];
00211 <span class="keyword">static</span> <a class="code" href="classButtonGroup.html">ButtonGroup</a> financial_button2_group(3);
00212 <span class="keyword">static</span> <span class="keywordtype">short</span> *financial_button2_up_bitmap[3];
00213 <span class="keyword">static</span> <span class="keywordtype">short</span> *financial_button2_down_bitmap[3];
00214 <span class="keyword">static</span> <span class="keywordtype">char</span> *financial_button_label[] = {
00215     <span class="stringliteral">"Consider for next year"</span>, <span class="stringliteral">"Promise for next year"</span>, <span class="stringliteral">"Implement now"</span>
00216 };
00217 <span class="keyword">static</span> <span class="keywordtype">char</span> financial_current_mode = <a class="code" href="Olibt__if_8cpp.html#a92a76">MODE_FINANCIAL_CONSIDER</a>;
00218 
00219 <span class="keyword">static</span> <a class="code" href="classGraphMonth.html">GraphMonth</a> mode_financial_graph_profitloss;
00220 <span class="keyword">static</span> <span class="keywordtype">char</span> *mode_financial_graph_title=<span class="stringliteral">""</span>;
00221 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00222 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">char</span> *mode_financial_legend_label[] = {
00223     <span class="stringliteral">"Library expenditures"</span>,
00224     <span class="stringliteral">"Information technology expenditures"</span>,
00225 };
00226 <span class="keyword">static</span> <span class="keywordtype">char</span> *mode_financial_legend_label2[] = {
00227     <span class="stringliteral">"Net distance learning expenditures (revenues)"</span>,
00228 };
00229 <span class="keyword">static</span> <a class="code" href="classGraphTrimester.html">GraphTrimester</a> mode_financial_net_expenditures;
00230 <span class="preprocessor">#else</span>
00231 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">char</span> *mode_financial_legend_label[] = {
00232     <span class="stringliteral">"Libraries &amp; Information Technology Center"</span>,
00233     <span class="stringliteral">"Libraries       "</span>,
00234     <span class="stringliteral">"Information Technology"</span>,
00235 };
00236 <span class="preprocessor">#endif</span>
00237 <span class="preprocessor"></span>
00238 <span class="comment">// End Financial Mode Setting</span>
00239 
00240 <span class="comment">//-------- define static functions ------//</span>
00241 
00242 <span class="comment">// Notes:       the deinit_x functions should deallocate memory used by the</span>
00243 <span class="comment">//                              GraphDoubleBar, ValueSlider, RadioButton, etc. objects</span>
00244 <span class="comment">//                              the functions are called when a mode-switching is triggered</span>
00245 <span class="comment">//      Norris 0716</span>
00246 
00247 <span class="keyword">static</span> <span class="keywordtype">void</span> report_overview(<span class="keywordtype">int</span>);
00248 <span class="keyword">static</span> <span class="keywordtype">void</span> report_financial(<span class="keywordtype">int</span>);
00249 <span class="keyword">static</span> <span class="keywordtype">int</span> detect_overview();
00250 <span class="keyword">static</span> <span class="keywordtype">int</span> detect_financial();
00251 <span class="keyword">static</span> <span class="keywordtype">void</span> deinit_overview();
00252 <span class="keyword">static</span> <span class="keywordtype">void</span> deinit_financial();
00253 
<a name="l00254"></a><a class="code" href="Olibt__if_8cpp.html#a29">00254</a> <span class="keyword">typedef</span> void (*<a class="code" href="Olibt__if_8cpp.html#a29">ReportFP</a>)(<span class="keywordtype">int</span> refreshFlag);
<a name="l00255"></a><a class="code" href="Olibt__if_8cpp.html#a30">00255</a> <span class="keyword">typedef</span> int (*<a class="code" href="Olibt__if_8cpp.html#a30">DetectFP</a>)();
<a name="l00256"></a><a class="code" href="Olibt__if_8cpp.html#a31">00256</a> <span class="keyword">typedef</span> void (*<a class="code" href="Olibt__if_8cpp.html#a31">DeinitFP</a>)();
00257 
00258 <span class="keyword">static</span> <a class="code" href="Olibt__if_8cpp.html#a29">ReportFP</a> report_func_ptr[] = {
00259     &amp;report_overview,
00260     &amp;report_financial,
00261 };
00262 
00263 <span class="keyword">static</span> <a class="code" href="Olibt__if_8cpp.html#a30">DetectFP</a> detect_func_ptr[] = {
00264     &amp;detect_overview,
00265     &amp;detect_financial,
00266 };
00267 
00268 <span class="keyword">static</span> <a class="code" href="Olibt__if_8cpp.html#a31">DeinitFP</a> deinit_func_ptr[] = {
00269     &amp;deinit_overview,
00270     &amp;deinit_financial,
00271 };
00272 
00273 <span class="comment">//------- Begin of function LibTech::LibTech -----------//</span>
<a name="l00275"></a><a class="code" href="classLibTech.html#a0">00275</a> <span class="comment">LibTech::LibTech() {</span>
00276     init();
00277 }
00278 
00279 <span class="comment">//--------- End of function LibTech::LibTech -----------//</span>
00280 
00281 <span class="comment">//------- Begin of function LibTech::~LibTech -----------//</span>
<a name="l00283"></a><a class="code" href="classLibTech.html#a1">00283</a> <span class="comment">LibTech::~LibTech() {</span>
00284     deinit();
00285 }
00286 
00287 <span class="comment">//--------- End of function LibTech::~LibTech -----------//</span>
00288 
00289 <span class="comment">//------- Begin of function LibTech::deinit ---------------//</span>
<a name="l00291"></a><a class="code" href="classLibTech.html#a3">00291</a> <span class="comment">void LibTech::deinit() {</span>
00292     <span class="comment">//--------- deallocate memory -------------//</span>
00293     <span class="comment">// #### begin Gilbert 28/04/2001 #####//</span>
00294     bottom_button_group.<a class="code" href="classButtonGroup.html#a2">deinit_buttons</a>();
00295     <span class="comment">// #### end Gilbert 28/04/2001 #####//</span>
00296     <span class="keywordflow">if</span> (*bottom_button_up_bitmap) {
00297         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 2; i++) {
00298             <a class="code" href="ALL_8H.html#a8">mem_del</a>(bottom_button_up_bitmap[i]);
00299             <a class="code" href="ALL_8H.html#a8">mem_del</a>(bottom_button_down_bitmap[i]);
00300             bottom_button_up_bitmap[i] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00301             bottom_button_down_bitmap[i] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00302         }
00303     }
00304 
00305     (*deinit_func_ptr[current_mode])();
00306 
00307     report_init_flag = 0;
00308 }
00309 
00310 <span class="comment">//--------- End of function LibTech::deinit ---------------//</span>
00311 
00312 <span class="comment">//------- Begin of function LibTech::init -----------------//</span>
<a name="l00314"></a><a class="code" href="classLibTech.html#a2">00314</a> <span class="comment">void LibTech::init() {</span>
00315     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 2; i++) {
00316         bottom_button_up_bitmap[i] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00317         bottom_button_down_bitmap[i] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00318     }
00319     current_mode = <a class="code" href="Olibt__if_8cpp.html#a83a35">MODE_OVERVIEW</a>;
00320 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00321 <span class="preprocessor"></span>    percent_dl_tuition = 50;
00322 <span class="preprocessor">#endif</span>
00323 <span class="preprocessor"></span>}
00324 
00325 <span class="comment">//--------- End of function LibTech::init -----------------//</span>
00326 
00327 <span class="comment">//------- Begin of function LibTech::report ---------------//</span>
<a name="l00329"></a><a class="code" href="classLibTech.html#a4">00329</a> <span class="comment">void LibTech::report(int refreshFlag) {</span>
00330     vga.use_back();
00331 
00332 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00333 <span class="preprocessor"></span>    <span class="comment">// fix in version 2</span>
00334     sys.is_institution_report = 1;
00335 <span class="preprocessor">#endif</span>
00336 <span class="preprocessor"></span>
00337     <span class="keywordflow">if</span> (refreshFlag == <a class="code" href="Gamedef_8h.html#a71a16">INFO_REPAINT</a>) {
00338         <span class="keywordflow">if</span>( report_init_flag )                        <span class="comment">// deinit it first if it has already been initialized</span>
00339             deinit();
00340 
00341         <span class="comment">//------------- paint the background ----------------//</span>
00342         user_interface.bg_img(<a class="code" href="Olibt__if_8cpp.html#a84a37">BG_PIC_ID</a>, &amp;vga_back);
00343 
00344         <span class="comment">//----- initialize the bottom sub-menus buttons -----//</span>
00345         <span class="keywordflow">if</span> (!report_init_flag) {
00346             <span class="keywordtype">short</span> x = <a class="code" href="Olibt__if_8cpp.html#a86a42">BOTTOM_BUTTON_X1</a>;
00347             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 2; i++, x+=<a class="code" href="Olibt__if_8cpp.html#a87a46">BOTTOM_BUTTON_WIDTH</a>+<a class="code" href="Olibt__if_8cpp.html#a87a48">BOTTOM_BUTTON_DISTANCE</a>) {
00348 
00349                 user_interface.create_button_bitmap(x, <a class="code" href="Olibt__if_8cpp.html#a86a43">BOTTOM_BUTTON_Y1</a>,
00350                                                     x+<a class="code" href="Olibt__if_8cpp.html#a87a46">BOTTOM_BUTTON_WIDTH</a>, <a class="code" href="Olibt__if_8cpp.html#a86a43">BOTTOM_BUTTON_Y1</a>+<a class="code" href="Olibt__if_8cpp.html#a87a47">BOTTOM_BUTTON_HEIGHT</a>,
00351                                                     bottom_button_label[i], &amp;bottom_button_up_bitmap[i],
00352                                                     &amp;bottom_button_down_bitmap[i], &amp;vga_back);
00353 
00354                 bottom_button_group[i].create_bitmapW(x, <a class="code" href="Olibt__if_8cpp.html#a86a43">BOTTOM_BUTTON_Y1</a>,
00355                                                       x+<a class="code" href="Olibt__if_8cpp.html#a87a46">BOTTOM_BUTTON_WIDTH</a>, <a class="code" href="Olibt__if_8cpp.html#a86a43">BOTTOM_BUTTON_Y1</a>+<a class="code" href="Olibt__if_8cpp.html#a87a47">BOTTOM_BUTTON_HEIGHT</a>,
00356                                                       ((i == current_mode) ? bottom_button_down_bitmap[i] : bottom_button_up_bitmap[i])+4);
00357             }
00358             report_init_flag = 1;
00359         }
00360 
00361         <span class="comment">//----------- paint the bottom button group ---------//</span>
00362         bottom_button_group.<a class="code" href="classButtonGroup.html#a3">paint</a>(current_mode);
00363     }
00364 
00365     <span class="comment">//---- repaint/refresh the display of the current mode ----//</span>
00366     (*report_func_ptr[current_mode])(refreshFlag);
00367 
00368     <span class="comment">// Comments:        blt buffer only if repaint, because the</span>
00369     <span class="comment">//                                  report_x functions would handle blt_buf</span>
00370     <span class="comment">//                                  when refresh</span>
00371     <span class="comment">//                                  equivalently, in the report_x functions,</span>
00372     <span class="comment">//                                  only blt buffer when refresh</span>
00373 
00374     <span class="keywordflow">if</span> (refreshFlag == <a class="code" href="Gamedef_8h.html#a71a16">INFO_REPAINT</a>) {
00375         <span class="comment">//------- blt the back buffer to front buffer -------//</span>
00376         vga.blt_buf(<a class="code" href="Oworldmt_8h.html#a12">ZOOM_X1</a>, <a class="code" href="Oworldmt_8h.html#a13">ZOOM_Y1</a>, <a class="code" href="Oworldmt_8h.html#a14">ZOOM_X2</a>, <a class="code" href="Oworldmt_8h.html#a15">ZOOM_Y2</a>);
00377     }
00378 
00379     <span class="comment">//##trevor 2807</span>
00380     vga.use_front();
00381     <span class="comment">//##trevor 2807</span>
00382 }
00383 
00384 <span class="comment">//---------- End of function LibTech::report ------------//</span>
00385 
00386 <span class="comment">//-------- Begin of function LibTech::detect ------------//</span>
<a name="l00390"></a><a class="code" href="classLibTech.html#a5">00390</a> <span class="comment">int LibTech::detect() {</span>
00391     vga.use_back();
00392 
00393     <span class="keywordtype">int</span> rc = detect2();
00394 
00395     vga.use_front();
00396 
00397     <span class="keywordflow">return</span> rc;
00398 }
00399 
00400 <span class="comment">//---------- End of function LibTech::detect ------------//</span>
00401 
00402 <span class="comment">//-------- Begin of function LibTech::detect2 ------------//</span>
<a name="l00406"></a><a class="code" href="classLibTech.html#a6">00406</a> <span class="comment">int LibTech::detect2() {</span>
00407     <span class="keywordflow">if</span> (!report_init_flag)
00408         <span class="keywordflow">return</span> 0;
00409 
00410     <span class="keywordtype">int</span> bottomButtonGroupDetect;
00411     <span class="keywordflow">if</span> ((bottomButtonGroupDetect = bottom_button_group.<a class="code" href="classButtonGroup.html#a4">detect</a>()) &gt;= 0) {
00412         <span class="comment">//---- deinit the modes to free memory ----//</span>
00413         (*deinit_func_ptr[current_mode])();
00414 
00415         <span class="comment">//-------- change display mode ------------//</span>
00416         bottom_button_group[current_mode].body_ptr = (<span class="keywordtype">void</span> *) (bottom_button_up_bitmap[current_mode] + 4);
00417         current_mode = bottomButtonGroupDetect;
00418         bottom_button_group[current_mode].body_ptr = (<span class="keywordtype">void</span> *) (bottom_button_down_bitmap[current_mode] + 4);
00419 
00420         <span class="comment">//-------- post display redraw flag -------//</span>
00421         sys.redraw_all_flag = 1;
00422 
00423         <span class="keywordflow">return</span> 1;
00424     }
00425 
00426     <span class="keywordflow">if</span> ((*detect_func_ptr[current_mode])())
00427         <span class="keywordflow">return</span> 1;
00428 
00429     <span class="keywordflow">return</span> 0;
00430 }
00431 
00432 <span class="comment">//---------- End of function AdmOffice::detect ------------//</span>
00433 
00434 <span class="comment">//-------- Begin of function report_overview -------------//</span>
00436 <span class="comment">static void report_overview(int refreshFlag) {</span>
00437     <span class="comment">// begin Kevin 0723</span>
00438 
00439     <span class="keyword">static</span> <span class="keywordtype">double</span> v1=11,v2=12,v3=13,v5=314231,v6=343425;
00440 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00441 <span class="preprocessor"></span>    <span class="keyword">static</span> <span class="keywordtype">double</span> v7=3427;
00442 <span class="preprocessor">#endif</span>
00443 <span class="preprocessor"></span>    <span class="keyword">static</span> <span class="keywordtype">int</span> v4;
00444     <span class="keyword">static</span> <span class="keywordtype">int</span> data_num=HISTORY_YEAR_COUNT;
00445     <span class="keyword">static</span> <span class="keywordtype">int</span> *dataArray1,*dataArray3;
00446     <span class="keyword">static</span> <span class="keywordtype">float</span> *dataArray2,*dataArray4;
00447     <span class="keyword">static</span> <span class="keywordtype">char</span> * ptr1;
00448 
00449     <span class="comment">// ##### Begin Marco ##### //</span>
00450 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00451 <span class="preprocessor"></span>    <span class="keyword">static</span> <span class="keywordtype">double</span> initialv1=11,initialv2=12,initialv3=13,initialv5=314231,initialv6=343425,initialv7=50;
00452     <span class="keyword">static</span> <span class="keywordtype">int</span> initialv4;
00453     initialv1=library_tech_office.initial_volumns_count_library;
00454     initialv2=library_tech_office.initial_percent_faculty_using_it;
00455     initialv4=library_tech_office.initial_internet_quality_percent;
00456     initialv5=library_tech_office.initial_tech_utilization;
00457     initialv6=library_tech_office.initial_faculty_incentive_using_it;
00458     initialv7=library_tech_office.initial_percent_dl_tuition;
00459 <span class="preprocessor">#endif</span>
00460 <span class="preprocessor"></span>    <span class="comment">// ##### End Marco ##### //</span>
00461     <span class="comment">//  //      Communicate with Sim Engine's Output</span>
00462     v1=library_tech_office.volumns_count_library;
00463     v2=library_tech_office.percent_faculty_using_it;
00464     <span class="comment">//  v3=library_tech_office.percent_faculty_using_it;</span>
00465     v4=library_tech_office.internet_quality;
00466     <span class="comment">//  v5=library_tech_office.it_usage;</span>
00467     v5=library_tech_office.tech_utilization;
00468     v6=library_tech_office.faculty_incentive_using_it;
00469 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00470 <span class="preprocessor"></span>    v7=library_tech_office.percent_dl_tuition;
00471 <span class="preprocessor">#endif</span>
00472 <span class="preprocessor"></span>    dataArray1=library_tech_office.volumns_count_library_history;
00473     dataArray2=library_tech_office.percent_faculty_using_it_history;
00474     dataArray3=library_tech_office.internet_quality_history;
00475     dataArray4=library_tech_office.tech_utilization_history;
00476 
00477     <span class="keyword">static</span> <span class="keywordtype">int</span> slider1=(int)v6;
00478 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00479 <span class="preprocessor"></span>    <span class="keyword">static</span> <span class="keywordtype">int</span> slider2=(int)v7;
00480 <span class="preprocessor">#endif</span>
00481 <span class="preprocessor"></span>    ptr1=mode_overview_radio_button_option_str[v4];
00482 
00483     <span class="keywordflow">if</span> (refreshFlag == <a class="code" href="Gamedef_8h.html#a71a16">INFO_REPAINT</a>) {
00484         <span class="comment">// top title</span>
00485         user_interface.brighten(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+100,<a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>-25,<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+630,<a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>-4);
00486         user_interface.rect(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+100,<a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>-25,<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+630,<a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>-4,1);
00487         font_charts.put(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+225,<a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>-22,<span class="stringliteral">"Libraries and Information Technology"</span>);
00488 
00489         <span class="comment">//--------- draw the brightened boxes ------------//</span>
00490         user_interface.brighten(
00491             <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>, <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>, <a class="code" href="Olibt__if_8cpp.html#a85a40">REPORT_X2</a>,
00492             <a class="code" href="Olibt__if_8cpp.html#a85a41">REPORT_Y2</a>);
00493         user_interface.rect(
00494             <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>, <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>, <a class="code" href="Olibt__if_8cpp.html#a85a40">REPORT_X2</a>,
00495             <a class="code" href="Olibt__if_8cpp.html#a85a41">REPORT_Y2</a>-<a class="code" href="Olibt__if_8cpp.html#a88a50">MODE_OVERVIEW_BOX2_HEIGHT</a>+3);
00496         user_interface.rect(
00497             <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>, <a class="code" href="Olibt__if_8cpp.html#a85a41">REPORT_Y2</a>-<a class="code" href="Olibt__if_8cpp.html#a88a50">MODE_OVERVIEW_BOX2_HEIGHT</a>,
00498             <a class="code" href="Olibt__if_8cpp.html#a85a40">REPORT_X2</a>,<a class="code" href="Olibt__if_8cpp.html#a85a41">REPORT_Y2</a>);
00499 
00500         <span class="keywordflow">if</span> (mode_init_flag != <a class="code" href="Olibt__if_8cpp.html#a83a35">MODE_OVERVIEW</a>) {
00501             <span class="comment">//---------  initialization  -----------//</span>
00502             mode_init_flag= <a class="code" href="Olibt__if_8cpp.html#a83a35">MODE_OVERVIEW</a>;
00503 
00504             mode_overview_text_bitmap=<a class="code" href="OHELP_8H.html#a0">NULL</a>;
00505             mode_overview_text_bitmap=
00506                 vga_back.save_area(
00507                     <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a54">MODE_OVERVIEW_TAB4</a>,
00508                     <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>,
00509                     <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a54">MODE_OVERVIEW_TAB4</a>+50,
00510                     <a class="code" href="Olibt__if_8cpp.html#a85a41">REPORT_Y2</a>,
00511                     mode_overview_text_bitmap);
00512 
00513             mode_overview_graphicon[0].<a class="code" href="classGraphPerformanceIndicatorYear.html#a2">init</a>(
00514                 <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a54">MODE_OVERVIEW_TAB4</a>+60,
00515                 <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+50,
00516                 <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a54">MODE_OVERVIEW_TAB4</a>+120,
00517                 <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+80,
00518                 1 ,&amp;data_num ,dataArray1, 1, 0, 1);
00519             mode_overview_graphicon[0].<a class="code" href="classGraphPerformanceIndicatorYear.html#a8">paint</a>();
00520 
00521             mode_overview_graphicon[1].<a class="code" href="classGraphPerformanceIndicatorYear.html#a2">init</a>(
00522                 <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a54">MODE_OVERVIEW_TAB4</a>+60,
00523                 <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+80,
00524                 <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a54">MODE_OVERVIEW_TAB4</a>+120,
00525                 <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+110,
00526                 1 ,&amp;data_num ,dataArray2, 1, 0, 3);
00527             mode_overview_graphicon[1].<a class="code" href="classGraphPerformanceIndicatorYear.html#a8">paint</a>();
00528 
00529 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00530 <span class="preprocessor"></span>            mode_overview_valueslider.<a class="code" href="classValueSlider.html#a2">init</a>(
00531                 <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a54">MODE_OVERVIEW_TAB4</a>+100,
00532                 <a class="code" href="Olibt__if_8cpp.html#a85a41">REPORT_Y2</a>-50,
00533                 100,
00534                 15,
00535                 0, 100, &amp;slider1, 1, <a class="code" href="COLOR_8H.html#a25">V_YELLOW</a>, 4
00536                 );
00537 
00538             mode_overview_valueslider2.<a class="code" href="classValueSlider.html#a2">init</a>(
00539                 <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a54">MODE_OVERVIEW_TAB4</a>+100,
00540                 <a class="code" href="Olibt__if_8cpp.html#a85a41">REPORT_Y2</a>-25,
00541                 100,
00542                 15,
00543                 0, 100, &amp;slider2, 1, <a class="code" href="COLOR_8H.html#a25">V_YELLOW</a>, 4
00544                 );
00545 <span class="preprocessor">#else</span>
00546 <span class="preprocessor"></span>            mode_overview_valueslider.<a class="code" href="classValueSlider.html#a2">init</a>(
00547                 <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a54">MODE_OVERVIEW_TAB4</a>+100,
00548                 <a class="code" href="Olibt__if_8cpp.html#a85a41">REPORT_Y2</a>-40,
00549                 100,
00550                 20,
00551                 0, 100, &amp;slider1, 1, <a class="code" href="COLOR_8H.html#a25">V_YELLOW</a>, 4
00552                 );
00553 <span class="preprocessor">#endif</span>
00554 <span class="preprocessor"></span>
00555             <span class="comment">//                  mode_overview_radiobutton.init(</span>
00556             <span class="comment">//                          REPORT_X1+50,</span>
00557             <span class="comment">//                          REPORT_Y1+160,</span>
00558             <span class="comment">//                          REPORT_X1+450,</span>
00559             <span class="comment">//                          REPORT_Y1+190,</span>
00560             <span class="comment">//                          4, &amp;v4, mode_overview_radio_button_option_str);</span>
00561             <span class="comment">//mode_overview_text.put(REPORT_X1+MODE_OVERVIEW_TAB4,REPORT_Y1+150,ptr1);</span>
00562 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00563 <span class="preprocessor"></span>            <span class="comment">// marco</span>
00564             mode_overview_text.<a class="code" href="classText.html#a11">put</a>(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a54">MODE_OVERVIEW_TAB4</a>-55,<a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+150,(<span class="keywordtype">int</span>)library_tech_office.internet_quality_percent);
00565 <span class="preprocessor">#else</span>
00566 <span class="preprocessor"></span>            mode_overview_text.<a class="code" href="classText.html#a11">put</a>(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a54">MODE_OVERVIEW_TAB4</a>,<a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+150,ptr1);
00567 <span class="preprocessor">#endif</span>
00568 <span class="preprocessor"></span>            mode_overview_graphicon[4].<a class="code" href="classGraphPerformanceIndicatorYear.html#a2">init</a>(
00569                 <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a54">MODE_OVERVIEW_TAB4</a>+60,
00570                 <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+210,
00571                 <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a54">MODE_OVERVIEW_TAB4</a>+120,
00572                 <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+240,
00573                 1 ,&amp;data_num ,dataArray4, 1, 0, 3);
00574             mode_overview_graphicon[4].<a class="code" href="classGraphPerformanceIndicatorYear.html#a8">paint</a>();
00575         }
00576         <span class="keywordflow">else</span> {
00577             <span class="comment">//-------- repaint -----------//</span>
00578             mode_overview_graphicon[0].<a class="code" href="classGraphPerformanceIndicatorYear.html#a8">paint</a>();
00579             mode_overview_graphicon[1].<a class="code" href="classGraphPerformanceIndicatorYear.html#a8">paint</a>();
00580             mode_overview_graphicon[4].<a class="code" href="classGraphPerformanceIndicatorYear.html#a8">paint</a>();
00581             <span class="comment">//                  mode_overview_radiobutton.paint();</span>
00582             mode_overview_valueslider.<a class="code" href="classValueSlider.html#a6">paint</a>();
00583 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00584 <span class="preprocessor"></span>            mode_overview_valueslider2.<a class="code" href="classValueSlider.html#a6">paint</a>();
00585 <span class="preprocessor">#endif</span>
00586 <span class="preprocessor"></span>        }
00587 
00588         <span class="comment">//-------- statics text --------------//</span>
00589         font_chartsm.put(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a52">MODE_OVERVIEW_TAB0</a>,
00590                          <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+60, mode_overview_str1[0]);
00591 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00592 <span class="preprocessor"></span>        font_chartsm.put_paragraph(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a52">MODE_OVERVIEW_TAB0</a>,
00593                                    <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+90,
00594                                    <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a54">MODE_OVERVIEW_TAB4</a>-40,
00595                                    <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+150,
00596                                    mode_overview_str1[1]);
00597 <span class="preprocessor">#else</span>
00598 <span class="preprocessor"></span>        font_chartsm.put_paragraph(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a52">MODE_OVERVIEW_TAB0</a>,
00599                                    <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+90,
00600                                    <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a54">MODE_OVERVIEW_TAB4</a>-20,
00601                                    <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+150,
00602                                    mode_overview_str1[1]);
00603 <span class="preprocessor">#endif</span>
00604 <span class="preprocessor"></span>
00605         font_chartsm.put(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a52">MODE_OVERVIEW_TAB0</a>,
00606                          <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+150, mode_overview_str1[3]);
00607 
00608 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00609 <span class="preprocessor"></span>        font_chartsm.put_paragraph(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a52">MODE_OVERVIEW_TAB0</a>,
00610                                    <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+210,
00611                                    <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a54">MODE_OVERVIEW_TAB4</a>-20,
00612                                    <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+270,
00613                                    mode_overview_str1[4]);
00614 <span class="preprocessor">#else</span>
00615 <span class="preprocessor"></span>        font_chartsm.put(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a52">MODE_OVERVIEW_TAB0</a>,
00616                          <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+210, mode_overview_str1[4]);
00617 <span class="preprocessor">#endif</span>
00618 <span class="preprocessor"></span>
00619 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00620 <span class="preprocessor"></span>        font_chartsm.put(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a52">MODE_OVERVIEW_TAB0</a>,
00621                          <a class="code" href="Olibt__if_8cpp.html#a85a41">REPORT_Y2</a>-50, mode_overview_str1[5]);
00622         font_chartsm.put(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a52">MODE_OVERVIEW_TAB0</a>,
00623                          <a class="code" href="Olibt__if_8cpp.html#a85a41">REPORT_Y2</a>-25, mode_overview_str1[6]);
00624 <span class="preprocessor">#else</span>
00625 <span class="preprocessor"></span>        font_chartsm.put(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a52">MODE_OVERVIEW_TAB0</a>,
00626                          <a class="code" href="Olibt__if_8cpp.html#a85a41">REPORT_Y2</a>-30, mode_overview_str1[5]);
00627 <span class="preprocessor">#endif</span>
00628 <span class="preprocessor"></span>    }
00629     <span class="keywordflow">else</span> {                                          <span class="comment">// refreshFlag == INFO_REFRESH</span>
00630         mode_overview_graphicon[0].<a class="code" href="classGraphPerformanceIndicatorYear.html#a9">refresh</a>();
00631         mode_overview_graphicon[1].<a class="code" href="classGraphPerformanceIndicatorYear.html#a9">refresh</a>();
00632         mode_overview_graphicon[4].<a class="code" href="classGraphPerformanceIndicatorYear.html#a9">refresh</a>();
00633         vga.blt_buf(
00634             <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a54">MODE_OVERVIEW_TAB4</a>+60,
00635             <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+50,
00636             <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a54">MODE_OVERVIEW_TAB4</a>+120,
00637             <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+80
00638             );
00639         vga.blt_buf(
00640             <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a54">MODE_OVERVIEW_TAB4</a>+60,
00641             <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+80,
00642             <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a54">MODE_OVERVIEW_TAB4</a>+120,
00643             <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+110
00644             );
00645         vga.blt_buf(
00646             <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a54">MODE_OVERVIEW_TAB4</a>+60,
00647             <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+210,
00648             <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a54">MODE_OVERVIEW_TAB4</a>+120,
00649             <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+240
00650             );
00651 
00652         <span class="comment">//                      mode_overview_radiobutton.refresh();</span>
00653         mode_overview_valueslider.<a class="code" href="classValueSlider.html#a7">refresh</a>();
00654 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00655 <span class="preprocessor"></span>        mode_overview_valueslider2.<a class="code" href="classValueSlider.html#a7">refresh</a>();
00656 <span class="preprocessor">#endif</span>
00657 <span class="preprocessor"></span>    }
00658     <span class="comment">// -------- refresh the stats ----------- //</span>
00659     vga_back.rest_area(mode_overview_text_bitmap,0,0);
00660 
00661     <span class="comment">// ##### Begin Marco ##### //</span>
00662 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00663 <span class="preprocessor"></span>    font_chartsm.put(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a54">MODE_OVERVIEW_TAB4</a> -55,
00664                      <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+60,m.format((<span class="keywordtype">int</span>)v1,1));
00665     font_chartsm.put(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a54">MODE_OVERVIEW_TAB4</a> -55,
00666                      <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+90,m.format(v2,3));
00667     font_chartsm.put(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a54">MODE_OVERVIEW_TAB4</a> -55,
00668                      <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+210,m.format(v5,3));
00669     font_chartsm.put(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a54">MODE_OVERVIEW_TAB4</a> -55,
00670                      <a class="code" href="Olibt__if_8cpp.html#a85a41">REPORT_Y2</a>-50,m.format(v6,3));
00671     font_chartsm.put(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a54">MODE_OVERVIEW_TAB4</a> -55,
00672                      <a class="code" href="Olibt__if_8cpp.html#a85a41">REPORT_Y2</a>-25,m.format(v7,3));
00673 
00674     font_chart_purple_sm.put(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a54">MODE_OVERVIEW_TAB4</a>,
00675                              <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+60,
00676                              m.format((<span class="keywordtype">int</span>)initialv1,28));
00677     font_chart_purple_sm.put(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a54">MODE_OVERVIEW_TAB4</a>,
00678                              <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+90,
00679                              m.format(initialv2,29));
00680 
00681     font_chart_purple_sm.put(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a54">MODE_OVERVIEW_TAB4</a>,
00682                              <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+150,m.format((<span class="keywordtype">int</span>)initialv4,28));
00683 
00684     font_chart_purple_sm.put(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a54">MODE_OVERVIEW_TAB4</a>,
00685                              <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+210,
00686                              m.format(initialv5,29));
00687     font_chart_purple_sm.put(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a54">MODE_OVERVIEW_TAB4</a>,
00688                              <a class="code" href="Olibt__if_8cpp.html#a85a41">REPORT_Y2</a>-50,
00689                              m.format(initialv6,29));
00690     font_chart_purple_sm.put(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a54">MODE_OVERVIEW_TAB4</a>,
00691                              <a class="code" href="Olibt__if_8cpp.html#a85a41">REPORT_Y2</a>-25,
00692                              m.format(initialv7,29));
00693 <span class="preprocessor">#else</span>
00694 <span class="preprocessor"></span>    font_chartsm.put(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a54">MODE_OVERVIEW_TAB4</a>,
00695                      <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+60,m.format((<span class="keywordtype">int</span>)v1,1));
00696     font_chartsm.put(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a54">MODE_OVERVIEW_TAB4</a>,
00697                      <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+90,m.format(v2,3));
00698     font_chartsm.put(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a54">MODE_OVERVIEW_TAB4</a>,
00699                      <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+210,m.format(v5,3));
00700     font_chartsm.put(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a54">MODE_OVERVIEW_TAB4</a>,
00701                      <a class="code" href="Olibt__if_8cpp.html#a85a41">REPORT_Y2</a>-30,m.format(v6,3));
00702 <span class="preprocessor">#endif</span>
00703 <span class="preprocessor"></span>    <span class="comment">// ##### End MArco ##### //</span>
00704     mode_overview_text.<a class="code" href="classText.html#a25">refresh</a>();
00705 
00706     vga.blt_buf(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a54">MODE_OVERVIEW_TAB4</a>,
00707                 <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>,
00708                 <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a54">MODE_OVERVIEW_TAB4</a>+50,
00709                 <a class="code" href="Olibt__if_8cpp.html#a85a41">REPORT_Y2</a>);
00710     <span class="comment">// end Kevin 0723</span>
00711 }
00712 
00713 <span class="comment">//-------- Begin of function report_FINANCIAL ---------//</span>
00715 <span class="comment">static void report_financial(int refreshFlag) {</span>
00716     <span class="comment">// Notes:   temporary variables for debugging</span>
00717     <span class="comment">//                          to be interfaced with game engine</span>
00718 
00719     <span class="keyword">static</span> <span class="keywordtype">int</span> v11=1000,v12=1999,v13=8888;
00720     <span class="keyword">static</span> <span class="keywordtype">double</span> v21=663.23,v22=123.23,v23=17.23,v24=723.23,v25=13.23;
00721     <span class="keyword">static</span> <span class="keywordtype">double</span> v31=813.83,v32=888.23,v33=13.83,v34=188.23,v35=183.23;
00722     <span class="keyword">static</span> <span class="keywordtype">double</span> v41=88.28,v42=777.23,v43=166.27,v44=777.23,v45=173.23;
00723     <span class="keyword">static</span> <span class="keywordtype">float</span> spinnerVar1=0.0;
00724     <span class="keyword">static</span> <span class="keywordtype">float</span> spinnerVar2=0.0;
00725     <span class="keyword">static</span> <span class="keywordtype">int</span> numSeriesData = HISTORY_MONTH_COUNT; <span class="comment">//*** temporary ***//</span>
00726 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00727 <span class="preprocessor"></span>    <span class="keyword">static</span> <span class="keywordtype">int</span> numSeriesData2 = HISTORY_TRIMESTER_COUNT;
00728     <span class="keyword">static</span> <span class="keywordtype">float</span> dataArray[2*HISTORY_MONTH_COUNT];  <span class="comment">//*** temporary ***//</span>
00729     <span class="keyword">static</span> <span class="keywordtype">float</span> dataArray2[HISTORY_TRIMESTER_COUNT];
00730 <span class="preprocessor">#else</span>
00731 <span class="preprocessor"></span>    <span class="keyword">static</span> <span class="keywordtype">float</span> dataArray[3*HISTORY_MONTH_COUNT];  <span class="comment">//*** temporary ***//</span>
00732 <span class="preprocessor">#endif</span>
00733 <span class="preprocessor"></span>    <span class="keyword">static</span> <span class="keywordtype">int</span> xStart = 1991, xEnd = 1998;          <span class="comment">//*** temporary ***//</span>
00734 
00735   <span class="comment">// ##### Begin Marco ##### //</span>
00736 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00737 <span class="preprocessor"></span>    <span class="keyword">static</span> <span class="keywordtype">double</span> initialv21=663.23;
00738     <span class="keyword">static</span> <span class="keywordtype">double</span> initialv31=813.83;
00739     <span class="keyword">static</span> <span class="keywordtype">double</span> initialv41=88.28;
00740 <span class="preprocessor">#endif</span>
00741 <span class="preprocessor"></span>    <span class="comment">// ##### End Marco ##### //</span>
00742 
00743   <span class="comment">//    Communicate with Sim Engine's Output</span>
00744     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=0;k&lt;HISTORY_MONTH_COUNT;k++) {
00745 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00746 <span class="preprocessor"></span>        dataArray[k]=library_tech_office.library_history[k];
00747         dataArray[1*HISTORY_MONTH_COUNT+k]=library_tech_office.it_history[k];
00748         <span class="comment">//              dataArray[2*HISTORY_MONTH_COUNT+k]=library_tech_office.it_history[k];</span>
00749 <span class="preprocessor">#else</span>
00750 <span class="preprocessor"></span>        dataArray[k]=library_tech_office.overall_history[k];
00751         dataArray[1*HISTORY_MONTH_COUNT+k]=library_tech_office.library_history[k];
00752         dataArray[2*HISTORY_MONTH_COUNT+k]=library_tech_office.it_history[k];
00753 <span class="preprocessor">#endif</span>
00754 <span class="preprocessor"></span>    }
00755 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00756 <span class="preprocessor"></span>    <span class="keywordflow">for</span> ( k=0; k&lt;HISTORY_TRIMESTER_COUNT; k++ )
00757         dataArray2[k] = library_tech_office.net_dl_expenditures_history[k];
00758 <span class="preprocessor">#endif</span>
00759 <span class="preprocessor"></span>    xStart = info.game_year-numSeriesData+1;
00760     xEnd = info.game_year;
00761 
00762     v12=info.financial_year();
00763     v11=v12-1;
00764     v13=v12+1;
00765 
00766 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00767 <span class="preprocessor"></span>    <span class="comment">// Item 8b)</span>
00768     v21=finance.expense_array[<a class="code" href="Ofinance_8h.html#a104a47">AC_LIBRARIES</a>].total;
00769     v23=finance.projected_expense_array[<a class="code" href="Ofinance_8h.html#a104a47">AC_LIBRARIES</a>].this_year.total;
00770     v25=finance.projected_expense_array[<a class="code" href="Ofinance_8h.html#a104a47">AC_LIBRARIES</a>].next_year.total;
00771     v22 = finance.calc_change(v23,v21);
00772     v24 = finance.calc_change(v25,v23);
00773 
00774     v31=finance.expense_array[<a class="code" href="Ofinance_8h.html#a104a48">AC_IT_RESOURCES</a>].total;
00775     v33=finance.projected_expense_array[<a class="code" href="Ofinance_8h.html#a104a48">AC_IT_RESOURCES</a>].this_year.total;
00776     v35=finance.projected_expense_array[<a class="code" href="Ofinance_8h.html#a104a48">AC_IT_RESOURCES</a>].next_year.total;
00777     v32=finance.calc_change(v33,v31);
00778     v34=finance.calc_change(v35,v33);
00779 
00780     v41=finance.net_distance_learning_expense.total/1000;
00781     v43=finance.projected_net_distance_learning_expense.this_year.total/1000;
00782     v45=finance.projected_net_distance_learning_expense.next_year.total/1000;
00783     v42=finance.calc_change(v43,v41);
00784     v44=finance.calc_change(v45,v43);
00785 <span class="preprocessor">#else</span>
00786 <span class="preprocessor"></span>    v31=finance.expense_array[<a class="code" href="Ofinance_8h.html#a104a47">AC_LIBRARIES</a>].total;
00787     v33=finance.projected_expense_array[<a class="code" href="Ofinance_8h.html#a104a47">AC_LIBRARIES</a>].this_year.total;
00788     v35=finance.projected_expense_array[<a class="code" href="Ofinance_8h.html#a104a47">AC_LIBRARIES</a>].next_year.total;
00789     v32 = finance.calc_change(v33,v31);
00790     v34 = finance.calc_change(v35,v33);
00791 
00792     v41=finance.expense_array[<a class="code" href="Ofinance_8h.html#a104a48">AC_IT_RESOURCES</a>].total;
00793     v43=finance.projected_expense_array[<a class="code" href="Ofinance_8h.html#a104a48">AC_IT_RESOURCES</a>].this_year.total;
00794     v45=finance.projected_expense_array[<a class="code" href="Ofinance_8h.html#a104a48">AC_IT_RESOURCES</a>].next_year.total;
00795     v42=finance.calc_change(v43,v41);
00796     v44=finance.calc_change(v45,v43);
00797 
00798     v21=v31+v41;
00799     v22=(v32+v42)/2;
00800     v23=v33+v43;
00801     v24=(v34+v44)/2;
00802     v25=v35+v45;
00803 <span class="preprocessor">#endif</span>
00804 <span class="preprocessor"></span>
00805     <span class="comment">// ##### Begin Marco ##### //</span>
00806 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00807 <span class="preprocessor"></span>    initialv21=finance.initial_expense_array[<a class="code" href="Ofinance_8h.html#a104a47">AC_LIBRARIES</a>].total;
00808     initialv31=finance.initial_expense_array[<a class="code" href="Ofinance_8h.html#a104a48">AC_IT_RESOURCES</a>].total;
00809     initialv21=50;
00810 <span class="preprocessor">#endif</span>
00811 <span class="preprocessor"></span>    <span class="comment">// ##### End Marco ##### //</span>
00813 <span class="comment"></span>
00814     <span class="keywordtype">int</span> field_space=5*font_chartsm.max_font_width;
00815 
00816     <span class="keywordflow">if</span> (refreshFlag == <a class="code" href="Gamedef_8h.html#a71a16">INFO_REPAINT</a>) {
00817 
00818         <span class="keywordflow">if</span> (mode_init_flag != <a class="code" href="Olibt__if_8cpp.html#a83a36">MODE_FINANCIAL</a>) {
00819             mode_init_flag = <a class="code" href="Olibt__if_8cpp.html#a83a36">MODE_FINANCIAL</a>;
00820             <span class="comment">//                  spinnerVar1=0.0;</span>
00821             <span class="comment">//                  spinnerVar2=0.0;</span>
00822             <span class="comment">//                  spinnerVar1=(float)finance.get_policy_var(false, AC_LIBRARIES)-&gt;target_value;</span>
00823             <span class="comment">//                  spinnerVar2=(float)finance.get_policy_var(false, AC_IT_RESOURCES)-&gt;target_value;</span>
00824 
00825             <span class="comment">// top title</span>
00826             user_interface.brighten(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+100,<a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>-25,<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+630,<a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>-4);
00827             user_interface.rect(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+100,<a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>-25,<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+630,<a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>-4,1);
00828             font_charts.put(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+225,<a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>-22,<span class="stringliteral">"Libraries and Information Technology"</span>);
00829 
00830             <span class="comment">//--------- draw the brightened boxes ------------//</span>
00831             user_interface.brighten(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>, <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>-5, <a class="code" href="Olibt__if_8cpp.html#a85a40">REPORT_X2</a>, <a class="code" href="Olibt__if_8cpp.html#a85a41">REPORT_Y2</a>);
00832             user_interface.rect(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>, <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>-5, <a class="code" href="Olibt__if_8cpp.html#a85a40">REPORT_X2</a>, <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a55">MODE_FINANCIAL_BOX1_HEIGHT</a>+3);
00833             user_interface.rect(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>, <a class="code" href="Olibt__if_8cpp.html#a85a41">REPORT_Y2</a>-<a class="code" href="Olibt__if_8cpp.html#a89a56">MODE_FINANCIAL_BOX2_HEIGHT</a>, <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a64">MODE_FINANCIAL_TAB4</a>-2, <a class="code" href="Olibt__if_8cpp.html#a85a41">REPORT_Y2</a>);
00834             user_interface.rect(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a64">MODE_FINANCIAL_TAB4</a>-4, <a class="code" href="Olibt__if_8cpp.html#a85a41">REPORT_Y2</a>-<a class="code" href="Olibt__if_8cpp.html#a89a56">MODE_FINANCIAL_BOX2_HEIGHT</a>, <a class="code" href="Olibt__if_8cpp.html#a85a40">REPORT_X2</a>, <a class="code" href="Olibt__if_8cpp.html#a85a41">REPORT_Y2</a>-<a class="code" href="Olibt__if_8cpp.html#a89a56">MODE_FINANCIAL_BOX2_HEIGHT</a>+130);
00835             user_interface.rect(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a64">MODE_FINANCIAL_TAB4</a>-4, <a class="code" href="Olibt__if_8cpp.html#a85a41">REPORT_Y2</a>-<a class="code" href="Olibt__if_8cpp.html#a89a56">MODE_FINANCIAL_BOX2_HEIGHT</a>+130, <a class="code" href="Olibt__if_8cpp.html#a85a40">REPORT_X2</a>, <a class="code" href="Olibt__if_8cpp.html#a85a41">REPORT_Y2</a>);
00836 
00837             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 3; i++) {
00838                 financial_button1_up_bitmap[i] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00839                 financial_button1_down_bitmap[i] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00840                 financial_button2_up_bitmap[i] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00841                 financial_button2_down_bitmap[i] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00842             }
00843 
00844             <span class="keywordtype">short</span> y = <a class="code" href="Olibt__if_8cpp.html#a90a68">FINANCIAL_BUTTON_Y1</a>;
00845             <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++, y+=<a class="code" href="Olibt__if_8cpp.html#a91a72">FINANCIAL_BUTTON_HEIGHT</a>+<a class="code" href="Olibt__if_8cpp.html#a91a73">FINANCIAL_BUTTON_DISTANCE</a>) {
00846                 user_interface.create_button_bitmap(<a class="code" href="Olibt__if_8cpp.html#a90a67">FINANCIAL_BUTTON_X1</a>,y,
00847                                                     <a class="code" href="Olibt__if_8cpp.html#a90a67">FINANCIAL_BUTTON_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a91a71">FINANCIAL_BUTTON_WIDTH</a>,y+<a class="code" href="Olibt__if_8cpp.html#a91a72">FINANCIAL_BUTTON_HEIGHT</a>,
00848                                                     financial_button_label[i], &amp;financial_button1_up_bitmap[i],
00849                                                     &amp;financial_button1_down_bitmap[i], &amp;vga_back);
00850 
00851                 financial_button1_group[i].create_bitmapW(<a class="code" href="Olibt__if_8cpp.html#a90a67">FINANCIAL_BUTTON_X1</a>,y,
00852                                                           <a class="code" href="Olibt__if_8cpp.html#a90a67">FINANCIAL_BUTTON_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a91a71">FINANCIAL_BUTTON_WIDTH</a>,y+<a class="code" href="Olibt__if_8cpp.html#a91a72">FINANCIAL_BUTTON_HEIGHT</a>,
00853                                                           (financial_button1_up_bitmap[i])+4,0);
00854             }
00855 
00856             y = <a class="code" href="Olibt__if_8cpp.html#a90a70">FINANCIAL_BUTTON_Y2</a>;
00857             <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++, y+=<a class="code" href="Olibt__if_8cpp.html#a91a72">FINANCIAL_BUTTON_HEIGHT</a>+<a class="code" href="Olibt__if_8cpp.html#a91a73">FINANCIAL_BUTTON_DISTANCE</a>) {
00858                 user_interface.create_button_bitmap(<a class="code" href="Olibt__if_8cpp.html#a90a67">FINANCIAL_BUTTON_X1</a>,y,
00859                                                     <a class="code" href="Olibt__if_8cpp.html#a90a67">FINANCIAL_BUTTON_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a91a71">FINANCIAL_BUTTON_WIDTH</a>,y+<a class="code" href="Olibt__if_8cpp.html#a91a72">FINANCIAL_BUTTON_HEIGHT</a>,
00860                                                     financial_button_label[i], &amp;financial_button2_up_bitmap[i],
00861                                                     &amp;financial_button2_down_bitmap[i], &amp;vga_back);
00862 
00863                 financial_button2_group[i].create_bitmapW(<a class="code" href="Olibt__if_8cpp.html#a90a67">FINANCIAL_BUTTON_X1</a>,y,
00864                                                           <a class="code" href="Olibt__if_8cpp.html#a90a67">FINANCIAL_BUTTON_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a91a71">FINANCIAL_BUTTON_WIDTH</a>,y+<a class="code" href="Olibt__if_8cpp.html#a91a72">FINANCIAL_BUTTON_HEIGHT</a>,
00865                                                           (financial_button2_up_bitmap[i])+4,0);
00866             }
00867 
00868             financial_spinner_budget1.<a class="code" href="classSpinner.html#a2">init</a>(
00869                 <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a65">MODE_FINANCIAL_TAB5</a>+80,
00870                 <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a55">MODE_FINANCIAL_BOX1_HEIGHT</a>+15,
00871                 <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a65">MODE_FINANCIAL_TAB5</a>+175,
00872                 <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a55">MODE_FINANCIAL_BOX1_HEIGHT</a>+45,
00873                 <span class="comment">//### begin zhoubin 02/28/99</span>
00874                 &amp;library_tech_office.spinner_var1,
00875                 <span class="comment">//### end zhoubin 02/28/99</span>
00876                 <span class="comment">//                              -100.0f,100.0f,0.1f,0,NULL,23);</span>
00877                 -5.0f,5.0f,0.1f,0,<a class="code" href="OHELP_8H.html#a0">NULL</a>,25);               <span class="comment">//## chea 170999</span>
00878 
00879             financial_spinner_budget2.<a class="code" href="classSpinner.html#a2">init</a>(
00880                 <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a65">MODE_FINANCIAL_TAB5</a>+80,
00881                 <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a55">MODE_FINANCIAL_BOX1_HEIGHT</a>+143,
00882                 <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a65">MODE_FINANCIAL_TAB5</a>+175,
00883                 <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a55">MODE_FINANCIAL_BOX1_HEIGHT</a>+173,
00884                 <span class="comment">//### begin zhoubin 02/28/99</span>
00885                 &amp;library_tech_office.spinner_var2,
00886                 <span class="comment">//### end zhoubin 02/28/99</span>
00887                 <span class="comment">//                              -100.0f,100.0f,0.1f,0,NULL,23);</span>
00888                 -5.0f,5.0f,0.1f,0,<a class="code" href="OHELP_8H.html#a0">NULL</a>,25);               <span class="comment">//## chea 170999</span>
00889 
00890             <span class="comment">//-------- graph title --------------//</span>
00891 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00892 <span class="preprocessor"></span>            mode_financial_graph_profitloss.<a class="code" href="classGraphMonth.html#a2">init</a>(
00893                 <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>, <a class="code" href="Olibt__if_8cpp.html#a85a41">REPORT_Y2</a>-<a class="code" href="Olibt__if_8cpp.html#a89a56">MODE_FINANCIAL_BOX2_HEIGHT</a>,
00894                 <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a64">MODE_FINANCIAL_TAB4</a>-2, (2*<a class="code" href="Olibt__if_8cpp.html#a85a41">REPORT_Y2</a>-<a class="code" href="Olibt__if_8cpp.html#a89a56">MODE_FINANCIAL_BOX2_HEIGHT</a>)/2,
00895                 2, &amp;numSeriesData, dataArray,1,
00896                 <a class="code" href="OHELP_8H.html#a0">NULL</a>, <a class="code" href="OHELP_8H.html#a0">NULL</a>, mode_financial_legend_label, 1, 1, 1, 2);
00897             mode_financial_net_expenditures.<a class="code" href="classGraphTrimester.html#a2">init</a>(
00898                 <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>, (2*<a class="code" href="Olibt__if_8cpp.html#a85a41">REPORT_Y2</a>-<a class="code" href="Olibt__if_8cpp.html#a89a56">MODE_FINANCIAL_BOX2_HEIGHT</a>)/2,
00899                 <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a64">MODE_FINANCIAL_TAB4</a>-2, <a class="code" href="Olibt__if_8cpp.html#a85a41">REPORT_Y2</a>,
00900                 1, &amp;numSeriesData2, dataArray2, 1,
00901                 <a class="code" href="OHELP_8H.html#a0">NULL</a>, <a class="code" href="OHELP_8H.html#a0">NULL</a>, mode_financial_legend_label2, 1, 1, 1, 2);
00902 <span class="preprocessor">#else</span>
00903 <span class="preprocessor"></span>            mode_financial_graph_profitloss.<a class="code" href="classGraphMonth.html#a2">init</a>(
00904                 <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>, <a class="code" href="Olibt__if_8cpp.html#a85a41">REPORT_Y2</a>-<a class="code" href="Olibt__if_8cpp.html#a89a56">MODE_FINANCIAL_BOX2_HEIGHT</a>,
00905                 <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a64">MODE_FINANCIAL_TAB4</a>-2, <a class="code" href="Olibt__if_8cpp.html#a85a41">REPORT_Y2</a>,
00906                 3, &amp;numSeriesData, dataArray,1,
00907                 <a class="code" href="OHELP_8H.html#a0">NULL</a>, <a class="code" href="OHELP_8H.html#a0">NULL</a>, mode_financial_legend_label, 1, 1, 1, 2);
00908 <span class="preprocessor">#endif</span>
00909 <span class="preprocessor"></span>        }
00910         <span class="keywordflow">else</span> {
00911             <span class="comment">//--------- draw the brightened boxes ------------//</span>
00912             user_interface.brighten(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>, <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>-5, <a class="code" href="Olibt__if_8cpp.html#a85a40">REPORT_X2</a>, <a class="code" href="Olibt__if_8cpp.html#a85a41">REPORT_Y2</a>);
00913             user_interface.rect(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>, <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>-5, <a class="code" href="Olibt__if_8cpp.html#a85a40">REPORT_X2</a>, <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a55">MODE_FINANCIAL_BOX1_HEIGHT</a>+3);
00914             user_interface.rect(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>, <a class="code" href="Olibt__if_8cpp.html#a85a41">REPORT_Y2</a>-<a class="code" href="Olibt__if_8cpp.html#a89a56">MODE_FINANCIAL_BOX2_HEIGHT</a>, <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a64">MODE_FINANCIAL_TAB4</a>-2, <a class="code" href="Olibt__if_8cpp.html#a85a41">REPORT_Y2</a>);
00915             user_interface.rect(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a64">MODE_FINANCIAL_TAB4</a>-4, <a class="code" href="Olibt__if_8cpp.html#a85a41">REPORT_Y2</a>-<a class="code" href="Olibt__if_8cpp.html#a89a56">MODE_FINANCIAL_BOX2_HEIGHT</a>, <a class="code" href="Olibt__if_8cpp.html#a85a40">REPORT_X2</a>, <a class="code" href="Olibt__if_8cpp.html#a85a41">REPORT_Y2</a>-<a class="code" href="Olibt__if_8cpp.html#a89a56">MODE_FINANCIAL_BOX2_HEIGHT</a>+130);
00916             user_interface.rect(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a64">MODE_FINANCIAL_TAB4</a>-4, <a class="code" href="Olibt__if_8cpp.html#a85a41">REPORT_Y2</a>-<a class="code" href="Olibt__if_8cpp.html#a89a56">MODE_FINANCIAL_BOX2_HEIGHT</a>+130, <a class="code" href="Olibt__if_8cpp.html#a85a40">REPORT_X2</a>, <a class="code" href="Olibt__if_8cpp.html#a85a41">REPORT_Y2</a>);
00917 
00918             <span class="comment">//-------- paint the buttons -----------//</span>
00919             financial_spinner_budget1.<a class="code" href="classSpinner.html#a4">paint</a>();
00920         }
00921 
00922         mode_financial_graph_profitloss.<a class="code" href="classGraphMonth.html#a8">paint</a>();
00923 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00924 <span class="preprocessor"></span>        mode_financial_net_expenditures.<a class="code" href="classGraphTrimester.html#a8">paint</a>();
00925 <span class="preprocessor">#endif</span>
00926 <span class="preprocessor"></span>
00927         <span class="comment">//-------- display static strings -----------//</span>
00928         font_chartsm.put(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a61">MODE_FINANCIAL_TAB1</a>, <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+25, mode_financial_str[0]);
00929         font_chartsm.put(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a61">MODE_FINANCIAL_TAB1</a>, <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+45, mode_financial_str[1]);
00930         font_chartsm.put(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a61">MODE_FINANCIAL_TAB1</a>, <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+65, mode_financial_str[2]);
00931 
00932         font_chartsm.right_put( <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a63">MODE_FINANCIAL_TAB3</a>+field_space,
00933                                 <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>,
00934                                 <span class="comment">//                                      REPORT_X1+MODE_FINANCIAL_TAB3+field_space,</span>
00935                                 <span class="comment">//                                      REPORT_Y1+font_chartsm.max_font_height,</span>
00936                                 mode_financial_str[4]);
00937         font_chartsm.right_put( <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a65">MODE_FINANCIAL_TAB5</a>+field_space,
00938                                 <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>,
00939                                 <span class="comment">//                                      REPORT_X1+MODE_FINANCIAL_TAB5+field_space,</span>
00940                                 <span class="comment">//                                      REPORT_Y1+font_chartsm.max_font_height,</span>
00941                                 mode_financial_str[4]);
00942 
00943         font_chartsm.put_paragraph(
00944             <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a64">MODE_FINANCIAL_TAB4</a>+10,
00945             <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+20+<a class="code" href="Olibt__if_8cpp.html#a89a55">MODE_FINANCIAL_BOX1_HEIGHT</a>,
00946             <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a65">MODE_FINANCIAL_TAB5</a>+160,
00947             <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+70+<a class="code" href="Olibt__if_8cpp.html#a89a55">MODE_FINANCIAL_BOX1_HEIGHT</a>,
00948             mode_financial_str[5]);
00949 
00950         font_chartsm.put_paragraph(
00951             <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a64">MODE_FINANCIAL_TAB4</a>+10,
00952             <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+145+<a class="code" href="Olibt__if_8cpp.html#a89a55">MODE_FINANCIAL_BOX1_HEIGHT</a>,
00953             <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a65">MODE_FINANCIAL_TAB5</a>+160,
00954             <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+185+<a class="code" href="Olibt__if_8cpp.html#a89a55">MODE_FINANCIAL_BOX1_HEIGHT</a>,
00955             mode_financial_str[6]);
00956 
00957         mode_financial_stats_bitmap=<a class="code" href="OHELP_8H.html#a0">NULL</a>;
00958         mode_financial_stats_bitmap=vga_back.save_area(
00959             <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a62">MODE_FINANCIAL_TAB2</a>, <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>,
00960             <a class="code" href="Olibt__if_8cpp.html#a85a40">REPORT_X2</a>, <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a55">MODE_FINANCIAL_BOX1_HEIGHT</a>,
00961             mode_financial_stats_bitmap);
00962 
00963     }
00964     <span class="keywordflow">else</span> {                                          <span class="comment">// refreshFlag == INFO_REFRESH</span>
00965         <span class="comment">//-------- refresh dynamic data --------------//</span>
00966         <span class="comment">// refresh() == 1. rest()</span>
00967         <span class="comment">//                                              2. draw()</span>
00968         <span class="comment">//                                              3. blit buffer()</span>
00969 
00970         mode_financial_graph_profitloss.<a class="code" href="classGraphMonth.html#a9">refresh</a>();
00971         vga.blt_buf(
00972             <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>, <a class="code" href="Olibt__if_8cpp.html#a85a41">REPORT_Y2</a>-<a class="code" href="Olibt__if_8cpp.html#a89a56">MODE_FINANCIAL_BOX2_HEIGHT</a>,
00973             <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a64">MODE_FINANCIAL_TAB4</a>-2, <a class="code" href="Olibt__if_8cpp.html#a85a41">REPORT_Y2</a>);
00974     }
00975 
00976     financial_spinner_budget1.<a class="code" href="classSpinner.html#a5">refresh</a>();
00977     financial_spinner_budget2.<a class="code" href="classSpinner.html#a5">refresh</a>();
00978 
00979     <span class="comment">// show buttons</span>
00980     <span class="keywordtype">int</span> pressed=finance.get_policy_var(<span class="keyword">false</span>, <a class="code" href="Ofinance_8h.html#a104a47">AC_LIBRARIES</a>)-&gt;applied_flag;
00981     <span class="keywordflow">if</span>(pressed==<a class="code" href="Ofinanc2_8h.html#a38a5">P_NONE</a>)
00982         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;3;i++)
00983             financial_button1_group[i].<a class="code" href="classButtonGroup.html#a3">paint</a>();
00984     <span class="keywordflow">else</span>
00985         financial_button1_group.<a class="code" href="classButtonGroup.html#a3">paint</a>(pressed-1);
00986     pressed=finance.get_policy_var(<span class="keyword">false</span>, <a class="code" href="Ofinance_8h.html#a104a48">AC_IT_RESOURCES</a>)-&gt;applied_flag;
00987     <span class="keywordflow">if</span>(pressed==<a class="code" href="Ofinanc2_8h.html#a38a5">P_NONE</a>)
00988         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;3;i++)
00989             financial_button2_group[i].<a class="code" href="classButtonGroup.html#a3">paint</a>();
00990     <span class="keywordflow">else</span>
00991         financial_button2_group.<a class="code" href="classButtonGroup.html#a3">paint</a>(pressed-1);
00992 
00993     <span class="keywordtype">short</span> y = <a class="code" href="Olibt__if_8cpp.html#a90a68">FINANCIAL_BUTTON_Y1</a> ;
00994     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 3; i++, y+=<a class="code" href="Olibt__if_8cpp.html#a91a72">FINANCIAL_BUTTON_HEIGHT</a>+<a class="code" href="Olibt__if_8cpp.html#a91a73">FINANCIAL_BUTTON_DISTANCE</a>) {
00995         vga.blt_buf(<a class="code" href="Olibt__if_8cpp.html#a90a67">FINANCIAL_BUTTON_X1</a>,y,
00996                     <a class="code" href="Olibt__if_8cpp.html#a90a67">FINANCIAL_BUTTON_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a91a71">FINANCIAL_BUTTON_WIDTH</a>,y+<a class="code" href="Olibt__if_8cpp.html#a91a72">FINANCIAL_BUTTON_HEIGHT</a>);
00997     }
00998 
00999     y = <a class="code" href="Olibt__if_8cpp.html#a90a70">FINANCIAL_BUTTON_Y2</a> ;
01000     <span class="keywordflow">for</span> (i = 0; i &lt; 3; i++, y+=<a class="code" href="Olibt__if_8cpp.html#a91a72">FINANCIAL_BUTTON_HEIGHT</a>+<a class="code" href="Olibt__if_8cpp.html#a91a73">FINANCIAL_BUTTON_DISTANCE</a>) {
01001         vga.blt_buf(<a class="code" href="Olibt__if_8cpp.html#a90a67">FINANCIAL_BUTTON_X1</a>,y,
01002                     <a class="code" href="Olibt__if_8cpp.html#a90a67">FINANCIAL_BUTTON_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a91a71">FINANCIAL_BUTTON_WIDTH</a>,y+<a class="code" href="Olibt__if_8cpp.html#a91a72">FINANCIAL_BUTTON_HEIGHT</a>);
01003     }
01004 
01005     vga_back.rest_area(mode_financial_stats_bitmap,0,0);
01006     <a class="code" href="classString.html">String</a> *s1,*s2;
01007 
01008     <span class="comment">//show years</span>
01009 
01010     s1=<span class="keyword">new</span> <a class="code" href="classString.html">String</a>(m.format(v11,16));
01011     s2=<span class="keyword">new</span> <a class="code" href="classString.html">String</a>(m.format(v11+1,16));
01012     <span class="comment">//  (*s1)+="-";    //## chea 061199 2.5.1</span>
01013     <span class="comment">//  (*s1)+=(*s2);  //## chea 061199 2.5.1</span>
01014 
01015     font_chartsm.right_put( <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a62">MODE_FINANCIAL_TAB2</a>+field_space,
01016                             <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>,
01017                             <span class="comment">//                          REPORT_X1+MODE_FINANCIAL_TAB2+field_space,</span>
01018                             <span class="comment">//                          REPORT_Y1+font_chartsm.max_font_height,</span>
01019                             s1-&gt;<a class="code" href="classString.html#m0">str_buf</a>);
01020 
01021     (*s1)=m.format(v12,16);
01022     (*s2)=m.format(v12+1,16);
01023     <span class="comment">//  (*s1)+="-";    //## chea 061199 2.5.1</span>
01024     <span class="comment">//  (*s1)+=(*s2);  //## chea 061199 2.5.1</span>
01025 
01026     font_chartsm.right_put( <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a64">MODE_FINANCIAL_TAB4</a>+field_space,
01027                             <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>,
01028                             <span class="comment">//                          REPORT_X1+MODE_FINANCIAL_TAB4+field_space,</span>
01029                             <span class="comment">//                          REPORT_Y1+font_chartsm.max_font_height,</span>
01030                             s1-&gt;<a class="code" href="classString.html#m0">str_buf</a>);
01031 
01032     (*s1)=m.format(v13,16);
01033     (*s2)=m.format(v13+1,16);
01034     <span class="comment">//  (*s1)+="-";      //## chea 061199 2.5.1</span>
01035     <span class="comment">//  (*s1)+=(*s2);    //## chea 061199 2.5.1</span>
01036 
01037     font_chartsm.right_put( <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a66">MODE_FINANCIAL_TAB6</a>+field_space,
01038                             <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>,
01039                             <span class="comment">//                          REPORT_X1+MODE_FINANCIAL_TAB6+field_space,</span>
01040                             <span class="comment">//                          REPORT_Y1+font_chartsm.max_font_height,</span>
01041                             s1-&gt;<a class="code" href="classString.html#m0">str_buf</a>);
01042     <span class="keyword">delete</span> s1,s2;
01043 
01044     font_chartsm.right_put( <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a62">MODE_FINANCIAL_TAB2</a>+field_space,
01045                             <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+25,
01046                             <span class="comment">//                          REPORT_X1+MODE_FINANCIAL_TAB2+field_space,</span>
01047                             <span class="comment">//                          REPORT_Y1+25+font_chartsm.max_font_height,</span>
01048                             m.format(v21, 2));
01049     font_chartsm.right_put( <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a63">MODE_FINANCIAL_TAB3</a>+field_space,
01050                             <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+25,
01051                             <span class="comment">//                          REPORT_X1+MODE_FINANCIAL_TAB3+field_space,</span>
01052                             <span class="comment">//                          REPORT_Y1+25+font_chartsm.max_font_height,</span>
01053                             m.format(v22, 24));
01054     font_chartsm.right_put( <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a64">MODE_FINANCIAL_TAB4</a>+field_space,
01055                             <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+25,
01056                             <span class="comment">//                          REPORT_X1+MODE_FINANCIAL_TAB4+field_space,</span>
01057                             <span class="comment">//                          REPORT_Y1+25+font_chartsm.max_font_height,</span>
01058                             m.format(v23, 2));
01059 
01060     font_chartsm.right_put( <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a65">MODE_FINANCIAL_TAB5</a>+field_space,
01061                             <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+25,
01062                             <span class="comment">//                          REPORT_X1+MODE_FINANCIAL_TAB5+field_space,</span>
01063                             <span class="comment">//                          REPORT_Y1+25+font_chartsm.max_font_height,</span>
01064                             m.format(v24, 24));
01065 
01066     font_chartsm.right_put( <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a66">MODE_FINANCIAL_TAB6</a>+field_space,
01067                             <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+25,
01068                             <span class="comment">//                          REPORT_X1+MODE_FINANCIAL_TAB6+field_space,</span>
01069                             <span class="comment">//                          REPORT_Y1+25+font_chartsm.max_font_height,</span>
01070                             m.format(v25, 2));
01071 
01072     font_chartsm.right_put( <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a62">MODE_FINANCIAL_TAB2</a>+field_space,
01073                             <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+45,
01074                             <span class="comment">//                          REPORT_X1+MODE_FINANCIAL_TAB2+field_space,</span>
01075                             <span class="comment">//                          REPORT_Y1+45+font_chartsm.max_font_height,</span>
01076                             m.format(v31, 2));
01077 
01078     font_chartsm.right_put( <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a63">MODE_FINANCIAL_TAB3</a>+field_space,
01079                             <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+45,
01080                             <span class="comment">//                          REPORT_X1+MODE_FINANCIAL_TAB3+field_space,</span>
01081                             <span class="comment">//                          REPORT_Y1+45+font_chartsm.max_font_height,</span>
01082                             m.format(v32, 24));
01083     font_chartsm.right_put( <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a64">MODE_FINANCIAL_TAB4</a>+field_space,
01084                             <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+45,
01085                             <span class="comment">//                          REPORT_X1+MODE_FINANCIAL_TAB4+field_space,</span>
01086                             <span class="comment">//                          REPORT_Y1+45+font_chartsm.max_font_height,</span>
01087                             m.format(v33, 2));
01088 
01089     font_chartsm.right_put( <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a65">MODE_FINANCIAL_TAB5</a>+field_space,
01090                             <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+45,
01091                             <span class="comment">//                          REPORT_X1+MODE_FINANCIAL_TAB5+field_space,</span>
01092                             <span class="comment">//                          REPORT_Y1+45+font_chartsm.max_font_height,</span>
01093                             m.format(v34, 24));
01094 
01095     font_chartsm.right_put( <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a66">MODE_FINANCIAL_TAB6</a>+field_space,
01096                             <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+45,
01097                             <span class="comment">//                          REPORT_X1+MODE_FINANCIAL_TAB6+field_space,</span>
01098                             <span class="comment">//                          REPORT_Y1+45+font_chartsm.max_font_height,</span>
01099                             m.format(v35, 2));
01100 
01101     font_chartsm.right_put( <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a62">MODE_FINANCIAL_TAB2</a>+field_space,
01102                             <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+65,
01103                             <span class="comment">//                          REPORT_X1+MODE_FINANCIAL_TAB2+field_space,</span>
01104                             <span class="comment">//                          REPORT_Y1+65+font_chartsm.max_font_height,</span>
01105                             m.format(v41, 2));
01106 
01107     font_chartsm.right_put( <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a63">MODE_FINANCIAL_TAB3</a>+field_space,
01108                             <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+65,
01109                             <span class="comment">//                          REPORT_X1+MODE_FINANCIAL_TAB3+field_space,</span>
01110                             <span class="comment">//                          REPORT_Y1+65+font_chartsm.max_font_height,</span>
01111                             m.format(v42, 24));
01112 
01113     font_chartsm.right_put( <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a64">MODE_FINANCIAL_TAB4</a>+field_space,
01114                             <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+65,
01115                             <span class="comment">//                          REPORT_X1+MODE_FINANCIAL_TAB4+field_space,</span>
01116                             <span class="comment">//                          REPORT_Y1+65+font_chartsm.max_font_height,</span>
01117                             m.format(v43, 2));
01118 
01119     font_chartsm.right_put( <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a65">MODE_FINANCIAL_TAB5</a>+field_space,
01120                             <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+65,
01121                             <span class="comment">//                          REPORT_X1+MODE_FINANCIAL_TAB5+field_space,</span>
01122                             <span class="comment">//                          REPORT_Y1+65+font_chartsm.max_font_height,</span>
01123                             m.format(v44, 24));
01124 
01125     font_chartsm.right_put( <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a66">MODE_FINANCIAL_TAB6</a>+field_space,
01126                             <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+65,
01127                             <span class="comment">//                          REPORT_X1+MODE_FINANCIAL_TAB6+field_space,</span>
01128                             <span class="comment">//                          REPORT_Y1+65+font_chartsm.max_font_height,</span>
01129                             m.format(v45, 2));
01130 
01131     <span class="comment">// ##### Begin Marco ##### //</span>
01132 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
01133 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (info.financial_year() &gt; 1) {
01134         font_chart_purple_sm.right_put( <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a62">MODE_FINANCIAL_TAB2</a>+10,
01135                                         <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>,
01136                                         <span class="stringliteral">"Yr. 0"</span>);
01137         font_chart_purple_sm.right_put( <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a62">MODE_FINANCIAL_TAB2</a>+10,
01138                                         <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+25,
01139                                         m.format(initialv21, 2));
01140         font_chart_purple_sm.right_put( <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a62">MODE_FINANCIAL_TAB2</a>+10,
01141                                         <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+45,
01142                                         m.format(initialv31, 2));
01143         font_chart_purple_sm.right_put( <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a62">MODE_FINANCIAL_TAB2</a>+10,
01144                                         <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+65,
01145                                         m.format(initialv41, 2));
01146         <span class="comment">// Kenneth</span>
01147     }
01148 <span class="preprocessor">#endif</span>
01149 <span class="preprocessor"></span>    <span class="comment">// ##### End Marco ##### //</span>
01150 
01151     vga.blt_buf(<a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a62">MODE_FINANCIAL_TAB2</a>, <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>,
01152                 <a class="code" href="Olibt__if_8cpp.html#a85a40">REPORT_X2</a>, <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a55">MODE_FINANCIAL_BOX1_HEIGHT</a>);
01153 
01154     <span class="keywordflow">for</span>(i=0;i&lt;3;i++) {
01155         financial_button1_group[i].pop();
01156         financial_button2_group[i].pop();
01157         financial_button1_group[i].body_ptr=
01158             (<span class="keywordtype">void</span>*)(financial_button1_up_bitmap[i]+4);
01159         financial_button2_group[i].body_ptr=
01160             (<span class="keywordtype">void</span>*)(financial_button2_up_bitmap[i]+4);
01161     }
01162 }
01163 
01164 <span class="comment">//---------- End of function report_FINANCIAL ---------//</span>
01165 
01166 <span class="comment">//-------- Begin of function detect_overview ---------//</span>
01168 <span class="comment">static int detect_overview() {</span>
01169     <span class="keywordflow">if</span> (mode_init_flag != <a class="code" href="Olibt__if_8cpp.html#a83a35">MODE_OVERVIEW</a>)
01170         <span class="keywordflow">return</span> 0;
01171 
01172     help.set_help(  <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a88a52">MODE_OVERVIEW_TAB0</a>,
01173                     <a class="code" href="Olibt__if_8cpp.html#a85a41">REPORT_Y2</a>-55,
01174                     <a class="code" href="Olibt__if_8cpp.html#a85a40">REPORT_X2</a>-20,
01175                     <a class="code" href="Olibt__if_8cpp.html#a85a41">REPORT_Y2</a>-25,
01176                     <span class="stringliteral">"A.6.6.1."</span>);
01177     vga.use_back();
01178     <span class="keywordflow">if</span> (mode_overview_valueslider.<a class="code" href="classValueSlider.html#a8">detect</a>()) {
01179         library_tech_office.faculty_incentive_using_it=(float)*(mode_overview_valueslider.<a class="code" href="classValueSlider.html#m7">var_ptr</a>);
01180         <span class="keywordflow">return</span> 1;
01181     }
01182 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
01183 <span class="preprocessor"></span>    <span class="keywordflow">if</span> ( mode_overview_valueslider2.<a class="code" href="classValueSlider.html#a8">detect</a>()) {
01184         library_tech_office.percent_dl_tuition=(float)*(mode_overview_valueslider2.<a class="code" href="classValueSlider.html#m7">var_ptr</a>);
01185         <span class="keywordflow">return</span> 1;
01186     }
01187 <span class="preprocessor">#endif</span>
01188 <span class="preprocessor"></span>    vga.use_front();
01189     <span class="comment">//  if (mode_overview_radiobutton.detect())</span>
01190     <span class="comment">//  {</span>
01191     <span class="comment">//          library_tech_office.internet_quality=(char)*(mode_overview_radiobutton.sel_num);</span>
01192     <span class="comment">//          return 1;</span>
01193     <span class="comment">//  }</span>
01194 
01195     <span class="keywordflow">return</span> 0;
01196 
01197 }
01198 
01199 <span class="comment">//---------- End of function detect_overview ---------//</span>
01200 
01201 <span class="comment">//-------- Begin of function detect_financial ---------//</span>
01203 <span class="comment">static int detect_financial() {</span>
01204     <span class="keywordflow">if</span> (mode_init_flag != <a class="code" href="Olibt__if_8cpp.html#a83a36">MODE_FINANCIAL</a>)
01205         <span class="keywordflow">return</span> 0;
01206 
01207     vga.use_front();
01208 
01209     help.set_help(
01210         <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a64">MODE_FINANCIAL_TAB4</a>+10,
01211         <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+20+<a class="code" href="Olibt__if_8cpp.html#a89a55">MODE_FINANCIAL_BOX1_HEIGHT</a>,
01212         <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a65">MODE_FINANCIAL_TAB5</a>+160,
01213         <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+70+<a class="code" href="Olibt__if_8cpp.html#a89a55">MODE_FINANCIAL_BOX1_HEIGHT</a>,
01214         <span class="stringliteral">"A.7.7.1."</span>);
01215 
01216     help.set_help(
01217         <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a64">MODE_FINANCIAL_TAB4</a>+10,
01218         <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+145+<a class="code" href="Olibt__if_8cpp.html#a89a55">MODE_FINANCIAL_BOX1_HEIGHT</a>,
01219         <a class="code" href="Olibt__if_8cpp.html#a85a38">REPORT_X1</a>+<a class="code" href="Olibt__if_8cpp.html#a89a65">MODE_FINANCIAL_TAB5</a>+160,
01220         <a class="code" href="Olibt__if_8cpp.html#a85a39">REPORT_Y1</a>+185+<a class="code" href="Olibt__if_8cpp.html#a89a55">MODE_FINANCIAL_BOX1_HEIGHT</a>,
01221         <span class="stringliteral">"A.7.7.2."</span>);
01222 
01223     <span class="keywordflow">if</span> (financial_spinner_budget1.<a class="code" href="classSpinner.html#a6">detect</a>())
01224         <span class="keywordflow">return</span> 1;
01225     <span class="keywordflow">if</span> (financial_spinner_budget2.<a class="code" href="classSpinner.html#a6">detect</a>())
01226         <span class="keywordflow">return</span> 1;
01227 
01228     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;3;i++) {
01229         <span class="keywordflow">if</span>(financial_button1_group[i].<a class="code" href="classButtonGroup.html#a4">detect</a>()) {
01230             financial_button1_group[i].body_ptr =
01231                 (<span class="keywordtype">void</span> *) (financial_button1_down_bitmap[i] + 4);
01232             <span class="comment">//  Communicate with Sim Engine</span>
01233             finance.change_budget(i,<span class="keyword">false</span>, <a class="code" href="Ofinance_8h.html#a104a47">AC_LIBRARIES</a>,(*financial_spinner_budget1.<a class="code" href="classSpinner.html#m7">var_ptr</a>));
01234             <span class="comment">//##        begin zhoubin 000329</span>
01235             *financial_spinner_budget1.<a class="code" href="classSpinner.html#m7">var_ptr</a>=0;
01236             <span class="comment">//##        end zhoubin 000329</span>
01237         }
01238         <span class="keywordflow">if</span>(financial_button2_group[i].<a class="code" href="classButtonGroup.html#a4">detect</a>()) {
01239             financial_button2_group[i].body_ptr =
01240                 (<span class="keywordtype">void</span> *) (financial_button2_down_bitmap[i] + 4);
01241             <span class="comment">//  Communicate with Sim Engine</span>
01242             finance.change_budget(i,<span class="keyword">false</span>, <a class="code" href="Ofinance_8h.html#a104a48">AC_IT_RESOURCES</a>,(*financial_spinner_budget2.<a class="code" href="classSpinner.html#m7">var_ptr</a>));
01243             <span class="comment">//##        begin zhoubin 000329</span>
01244             *financial_spinner_budget2.<a class="code" href="classSpinner.html#m7">var_ptr</a>=0;
01245             <span class="comment">//##        end zhoubin 000329</span>
01246         }
01247     }
01248     <span class="keywordflow">return</span> 0;
01249 }
01250 
01251 <span class="comment">//---------- End of function detect_FINANCIAL ---------//</span>
01252 
01253 <span class="comment">//-------- Begin of function deinit_overview ---------//</span>
01255 <span class="comment">static void deinit_overview() {</span>
01256     <span class="keywordflow">if</span> (mode_init_flag == <a class="code" href="Olibt__if_8cpp.html#a83a35">MODE_OVERVIEW</a>) {
01257         <span class="keywordflow">if</span>(mode_overview_text_bitmap) {
01258             <a class="code" href="ALL_8H.html#a8">mem_del</a>(mode_overview_text_bitmap);
01259             mode_overview_text_bitmap=<a class="code" href="OHELP_8H.html#a0">NULL</a>;
01260         }
01261 
01262         <span class="comment">// ###### begin Gilbert 25/04/2001 ######//</span>
01263         mode_overview_graphicon[0].<a class="code" href="classGraphPerformanceIndicatorYear.html#a7">deinit</a>();
01264         mode_overview_graphicon[1].<a class="code" href="classGraphPerformanceIndicatorYear.html#a7">deinit</a>();
01265         mode_overview_graphicon[4].<a class="code" href="classGraphPerformanceIndicatorYear.html#a7">deinit</a>();
01266         <span class="comment">// ###### end Gilbert 25/04/2001 ######//</span>
01267 
01268         <span class="comment">//              mode_overview_radiobutton.deinit();</span>
01269         mode_overview_text.<a class="code" href="classText.html#a26">deinit</a>();
01270         mode_overview_valueslider.<a class="code" href="classValueSlider.html#a5">deinit</a>();
01271 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
01272 <span class="preprocessor"></span>        mode_overview_valueslider2.<a class="code" href="classValueSlider.html#a5">deinit</a>();
01273 <span class="preprocessor">#endif</span>
01274 <span class="preprocessor"></span>        <span class="comment">// reset flag</span>
01275         mode_init_flag = -1;
01276     }
01277 }
01278 
01279 <span class="comment">//---------- End of function deinit_overview ---------//</span>
01280 
01281 <span class="comment">//-------- Begin of function deinit_financial ------//</span>
01283 <span class="comment">static void deinit_financial() {</span>
01284     <span class="keywordflow">if</span> (mode_init_flag == <a class="code" href="Olibt__if_8cpp.html#a83a36">MODE_FINANCIAL</a>) {
01285         <span class="comment">// deallocate memory used by the radio buttons and the value sliders</span>
01286         <span class="keywordflow">if</span>(mode_financial_stats_bitmap) {
01287             <a class="code" href="ALL_8H.html#a8">mem_del</a>(mode_financial_stats_bitmap);
01288             mode_financial_stats_bitmap=<a class="code" href="OHELP_8H.html#a0">NULL</a>;
01289         }
01290 
01291         <span class="comment">// ##### begin Gilbert 28/04/2001 ######//</span>
01292         financial_button1_group.<a class="code" href="classButtonGroup.html#a2">deinit_buttons</a>();
01293         financial_button2_group.<a class="code" href="classButtonGroup.html#a2">deinit_buttons</a>();
01294         <span class="comment">// ##### end Gilbert 28/04/2001 ######//</span>
01295         <span class="keywordflow">if</span> (*financial_button1_up_bitmap) {
01296             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 3; i++) {
01297                 <a class="code" href="ALL_8H.html#a8">mem_del</a>(financial_button1_up_bitmap[i]);
01298                 <a class="code" href="ALL_8H.html#a8">mem_del</a>(financial_button1_down_bitmap[i]);
01299                 financial_button1_up_bitmap[i] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
01300                 financial_button1_down_bitmap[i] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
01301                 <a class="code" href="ALL_8H.html#a8">mem_del</a>(financial_button2_up_bitmap[i]);
01302                 <a class="code" href="ALL_8H.html#a8">mem_del</a>(financial_button2_down_bitmap[i]);
01303                 financial_button2_up_bitmap[i] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
01304                 financial_button2_down_bitmap[i] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
01305             }
01306         }
01307 
01308         <span class="comment">//              mode_financial_slider_budget.deinit();</span>
01309         financial_spinner_budget1.<a class="code" href="classSpinner.html#a3">deinit</a>();
01310         financial_spinner_budget2.<a class="code" href="classSpinner.html#a3">deinit</a>();
01311         mode_financial_graph_profitloss.<a class="code" href="classGraphMonth.html#a7">deinit</a>();
01312 
01313         <span class="comment">// reset flag</span>
01314         mode_init_flag = -1;
01315     }
01316 }
01317 
01318 <span class="comment">//---------- End of function deinit_financial ------//</span>
</pre></div><hr><address style="align: right;"><small>Generated on Fri Aug 23 01:38:02 2002 for VirtualU by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.17 </small></address>
</body>
</html>
