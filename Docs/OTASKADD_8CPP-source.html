<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>OTASKADD.CPP Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.17 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>OTASKADD.CPP</h1><a href="OTASKADD_8CPP.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">//Filename    : OTASKADD.CPP</span>
00002 <span class="comment">//Description : News adding functions for TaskArray::add_task()</span>
00003 <span class="comment">//Owner                 : Fred</span>
00004 
00005 <span class="preprocessor">#include &lt;OPSCHOOL.H&gt;</span>
00006 <span class="preprocessor">#include &lt;OCONFIG.H&gt;</span>
00007 <span class="preprocessor">#include &lt;OAUDIO.H&gt;</span>
00008 <span class="preprocessor">#include &lt;OINFO.H&gt;</span>
00009 <span class="preprocessor">#include &lt;<a class="code" href="OTASK_8H.html">OTASK.H</a>&gt;</span>
00010 
00011 <span class="comment">//------ Begin of function TaskArray::rise_performance_rating -----//</span>
<a name="l00015"></a><a class="code" href="classTaskArray.html#a14">00015</a> <span class="comment">void TaskArray::rise_performance_rating(int deptRecno, int ratingType,</span>
00016                                         <span class="keywordtype">int</span> target, <span class="keywordtype">int</span> src, <span class="keywordtype">int</span> month, <span class="keywordtype">int</span> year, <span class="keywordtype">int</span> bonus) {
00017     <span class="comment">//----------- add news --------------//</span>
00018 
00019     <a class="code" href="structTask.html">Task</a>* taskPtr = add_task( <a class="code" href="OTASK_8H.html#a14a4">TASK_RISE_PERFORMANCE_RATING</a> );
00020 
00021     <span class="keywordflow">if</span>( !taskPtr )
00022         <span class="keywordflow">return</span>;
00023 
00024     taskPtr-&gt;<a class="code" href="structNews.html#m5">short_para1</a> = deptRecno; <a class="code" href="ALL_8H.html#a0">err_when</a>(deptRecno == 0);
00025     taskPtr-&gt;<a class="code" href="structNews.html#m6">short_para2</a> = ratingType;
00026     taskPtr-&gt;<a class="code" href="structNews.html#m7">short_para3</a> = target;
00027     taskPtr-&gt;<a class="code" href="structNews.html#m8">short_para4</a> = src;
00028     taskPtr-&gt;<a class="code" href="structNews.html#m9">short_para5</a> = month;
00029     taskPtr-&gt;<a class="code" href="structNews.html#m10">short_para6</a> = year;
00030     taskPtr-&gt;<a class="code" href="structNews.html#m11">short_para7</a> = bonus;
00031 
00032     <span class="comment">//----------------------------------------------//</span>
00033     <span class="comment">// add task to news_array</span>
00034 
00035     news_array.new_task(taskPtr);
00036 }
00037 
00038 <span class="comment">//------- End of function TaskArray::rise_performance_rating -----//</span>
00039 
00040 <span class="comment">//## chea 220999</span>
00041 <span class="comment">//------ Begin of function TaskArray::rise_educational_quality -----//</span>
<a name="l00045"></a><a class="code" href="classTaskArray.html#a15">00045</a> <span class="comment">void TaskArray::rise_educational_quality(int deptRecno, int ratingType,</span>
00046                                          <span class="keywordtype">int</span> target, <span class="keywordtype">int</span> src, <span class="keywordtype">int</span> month, <span class="keywordtype">int</span> year, <span class="keywordtype">int</span> bonus) {
00047     <span class="comment">//----------- add news --------------//</span>
00048 
00049                                                   <span class="comment">//## chea 220999</span>
00050     <a class="code" href="structTask.html">Task</a>* taskPtr = add_task( <a class="code" href="OTASK_8H.html#a14a5">RISE_EDUCATIONAL_QUALITY</a> );
00051 
00052     <span class="keywordflow">if</span>( !taskPtr )
00053         <span class="keywordflow">return</span>;
00054 
00055     taskPtr-&gt;<a class="code" href="structNews.html#m5">short_para1</a> = deptRecno; <a class="code" href="ALL_8H.html#a0">err_when</a>(deptRecno == 0);
00056     taskPtr-&gt;<a class="code" href="structNews.html#m6">short_para2</a> = ratingType;
00057     taskPtr-&gt;<a class="code" href="structNews.html#m7">short_para3</a> = target;
00058     taskPtr-&gt;<a class="code" href="structNews.html#m8">short_para4</a> = src;
00059     taskPtr-&gt;<a class="code" href="structNews.html#m9">short_para5</a> = month;
00060     taskPtr-&gt;<a class="code" href="structNews.html#m10">short_para6</a> = year;
00061     taskPtr-&gt;<a class="code" href="structNews.html#m11">short_para7</a> = bonus;
00062 
00063     <span class="comment">//----------------------------------------------//</span>
00064     <span class="comment">// add task to news_array</span>
00065 
00066     news_array.new_task(taskPtr);
00067 }
00068 
00069 <span class="comment">//------- End of function TaskArray::rise_educational_quality -----//</span>
00070 
00071 <span class="comment">//------ Begin of function TaskArray::rise_student_morale -----//</span>
<a name="l00075"></a><a class="code" href="classTaskArray.html#a16">00075</a> <span class="comment">void TaskArray::rise_student_morale(int deptRecno, int ratingType,</span>
00076                                     <span class="keywordtype">int</span> target, <span class="keywordtype">int</span> src, <span class="keywordtype">int</span> month, <span class="keywordtype">int</span> year, <span class="keywordtype">int</span> bonus) {
00077     <span class="comment">//----------- add news --------------//</span>
00078 
00079     <a class="code" href="structTask.html">Task</a>* taskPtr = add_task( <a class="code" href="OTASK_8H.html#a14a6">RISE_STUDENT_MORALE</a> );
00080 
00081     <span class="keywordflow">if</span>( !taskPtr )
00082         <span class="keywordflow">return</span>;
00083 
00084     taskPtr-&gt;<a class="code" href="structNews.html#m5">short_para1</a> = deptRecno; <a class="code" href="ALL_8H.html#a0">err_when</a>(deptRecno == 0);
00085     taskPtr-&gt;<a class="code" href="structNews.html#m6">short_para2</a> = ratingType;
00086     taskPtr-&gt;<a class="code" href="structNews.html#m7">short_para3</a> = target;
00087     taskPtr-&gt;<a class="code" href="structNews.html#m8">short_para4</a> = src;
00088     taskPtr-&gt;<a class="code" href="structNews.html#m9">short_para5</a> = month;
00089     taskPtr-&gt;<a class="code" href="structNews.html#m10">short_para6</a> = year;
00090     taskPtr-&gt;<a class="code" href="structNews.html#m11">short_para7</a> = bonus;
00091 
00092     <span class="comment">//----------------------------------------------//</span>
00093     <span class="comment">// add task to news_array</span>
00094 
00095     news_array.new_task(taskPtr);
00096 }
00097 
00098 <span class="comment">//------- End of function TaskArray::rise_student_morale -----//</span>
00099 
00100 <span class="comment">//------ Begin of function TaskArray::rise_department_morale -----//</span>
<a name="l00104"></a><a class="code" href="classTaskArray.html#a17">00104</a> <span class="comment">void TaskArray::rise_department_morale(int deptRecno, int ratingType,</span>
00105                                        <span class="keywordtype">int</span> target, <span class="keywordtype">int</span> src, <span class="keywordtype">int</span> month, <span class="keywordtype">int</span> year, <span class="keywordtype">int</span> bonus) {
00106     <span class="comment">//----------- add news --------------//</span>
00107 
00108     <a class="code" href="structTask.html">Task</a>* taskPtr = add_task( <a class="code" href="OTASK_8H.html#a14a7">RISE_DEPARTMENT_MORALE</a> );
00109 
00110     <span class="keywordflow">if</span>( !taskPtr )
00111         <span class="keywordflow">return</span>;
00112 
00113     taskPtr-&gt;<a class="code" href="structNews.html#m5">short_para1</a> = deptRecno; <a class="code" href="ALL_8H.html#a0">err_when</a>(deptRecno == 0);
00114     taskPtr-&gt;<a class="code" href="structNews.html#m6">short_para2</a> = ratingType;
00115     taskPtr-&gt;<a class="code" href="structNews.html#m7">short_para3</a> = target;
00116     taskPtr-&gt;<a class="code" href="structNews.html#m8">short_para4</a> = src;
00117     taskPtr-&gt;<a class="code" href="structNews.html#m9">short_para5</a> = month;
00118     taskPtr-&gt;<a class="code" href="structNews.html#m10">short_para6</a> = year;
00119     taskPtr-&gt;<a class="code" href="structNews.html#m11">short_para7</a> = bonus;
00120 
00121     <span class="comment">//----------------------------------------------//</span>
00122     <span class="comment">// add task to news_array</span>
00123 
00124     news_array.new_task(taskPtr);
00125 }
00126 
00127 <span class="comment">//------- End of function TaskArray::rise_department_morale -----//</span>
00128 
00129 <span class="comment">//------ Begin of function TaskArray::rise_faculty_research_Per -----//</span>
<a name="l00133"></a><a class="code" href="classTaskArray.html#a18">00133</a> <span class="comment">void TaskArray::rise_faculty_research_Per(int deptRecno, int ratingType,</span>
00134                                           <span class="keywordtype">int</span> target, <span class="keywordtype">int</span> src, <span class="keywordtype">int</span> month, <span class="keywordtype">int</span> year, <span class="keywordtype">int</span> bonus) {
00135     <span class="comment">//----------- add news --------------//</span>
00136 
00137     <a class="code" href="structTask.html">Task</a>* taskPtr = add_task( <a class="code" href="OTASK_8H.html#a14a8">RISE_FACULTY_RESEARCH</a> );
00138 
00139     <span class="keywordflow">if</span>( !taskPtr )
00140         <span class="keywordflow">return</span>;
00141 
00142     taskPtr-&gt;<a class="code" href="structNews.html#m5">short_para1</a> = deptRecno; <a class="code" href="ALL_8H.html#a0">err_when</a>(deptRecno == 0);
00143     taskPtr-&gt;<a class="code" href="structNews.html#m6">short_para2</a> = ratingType;
00144     taskPtr-&gt;<a class="code" href="structNews.html#m7">short_para3</a> = target;
00145     taskPtr-&gt;<a class="code" href="structNews.html#m8">short_para4</a> = src;
00146     taskPtr-&gt;<a class="code" href="structNews.html#m9">short_para5</a> = month;
00147     taskPtr-&gt;<a class="code" href="structNews.html#m10">short_para6</a> = year;
00148     taskPtr-&gt;<a class="code" href="structNews.html#m11">short_para7</a> = bonus;
00149 
00150     <span class="comment">//----------------------------------------------//</span>
00151     <span class="comment">// add task to news_array</span>
00152 
00153     news_array.new_task(taskPtr);
00154 }
00155 
00156 <span class="comment">//------- End of function TaskArray::rise_faculty_research_Per -----//</span>
00157 
00158 <span class="comment">//------ Begin of function TaskArray::rise_faculty_diversity_index -----//</span>
<a name="l00162"></a><a class="code" href="classTaskArray.html#a19">00162</a> <span class="comment">void TaskArray::rise_faculty_diversity_index(int deptRecno, int ratingType,</span>
00163                                              <span class="keywordtype">int</span> target, <span class="keywordtype">int</span> src, <span class="keywordtype">int</span> month, <span class="keywordtype">int</span> year, <span class="keywordtype">int</span> bonus) {
00164     <span class="comment">//----------- add news --------------//</span>
00165 
00166     <a class="code" href="structTask.html">Task</a>* taskPtr = add_task( <a class="code" href="OTASK_8H.html#a14a9">RISE_FACULTY_DIVERSITY_INDEX</a> );
00167 
00168     <span class="keywordflow">if</span>( !taskPtr )
00169         <span class="keywordflow">return</span>;
00170 
00171     taskPtr-&gt;<a class="code" href="structNews.html#m5">short_para1</a> = deptRecno; <a class="code" href="ALL_8H.html#a0">err_when</a>(deptRecno == 0);
00172     taskPtr-&gt;<a class="code" href="structNews.html#m6">short_para2</a> = ratingType;
00173     taskPtr-&gt;<a class="code" href="structNews.html#m7">short_para3</a> = target;
00174     taskPtr-&gt;<a class="code" href="structNews.html#m8">short_para4</a> = src;
00175     taskPtr-&gt;<a class="code" href="structNews.html#m9">short_para5</a> = month;
00176     taskPtr-&gt;<a class="code" href="structNews.html#m10">short_para6</a> = year;
00177     taskPtr-&gt;<a class="code" href="structNews.html#m11">short_para7</a> = bonus;
00178 
00179     <span class="comment">//----------------------------------------------//</span>
00180     <span class="comment">// add task to news_array</span>
00181 
00182     news_array.new_task(taskPtr);
00183 }
00184 
00185 <span class="comment">//------- End of function TaskArray::rise_faculty_diversity_index -----//</span>
00186 
00187 <span class="comment">//------ Begin of function TaskArray::rise_use_of_IT -----//</span>
<a name="l00191"></a><a class="code" href="classTaskArray.html#a20">00191</a> <span class="comment">void TaskArray::rise_use_of_IT(int deptRecno, int ratingType,</span>
00192                                <span class="keywordtype">int</span> target, <span class="keywordtype">int</span> src, <span class="keywordtype">int</span> month, <span class="keywordtype">int</span> year, <span class="keywordtype">int</span> bonus) {
00193     <span class="comment">//----------- add news --------------//</span>
00194 
00195     <a class="code" href="structTask.html">Task</a>* taskPtr = add_task( <a class="code" href="OTASK_8H.html#a14a10">RISE_USE_OF_IT</a> );
00196 
00197     <span class="keywordflow">if</span>( !taskPtr )
00198         <span class="keywordflow">return</span>;
00199 
00200     taskPtr-&gt;<a class="code" href="structNews.html#m5">short_para1</a> = deptRecno; <a class="code" href="ALL_8H.html#a0">err_when</a>(deptRecno == 0);
00201     taskPtr-&gt;<a class="code" href="structNews.html#m6">short_para2</a> = ratingType;
00202     taskPtr-&gt;<a class="code" href="structNews.html#m7">short_para3</a> = target;
00203     taskPtr-&gt;<a class="code" href="structNews.html#m8">short_para4</a> = src;
00204     taskPtr-&gt;<a class="code" href="structNews.html#m9">short_para5</a> = month;
00205     taskPtr-&gt;<a class="code" href="structNews.html#m10">short_para6</a> = year;
00206     taskPtr-&gt;<a class="code" href="structNews.html#m11">short_para7</a> = bonus;
00207 
00208     <span class="comment">//----------------------------------------------//</span>
00209     <span class="comment">// add task to news_array</span>
00210 
00211     news_array.new_task(taskPtr);
00212 }
00213 
00214 <span class="comment">//------- End of function TaskArray::rise_use_of_IT -----//</span>
00215 
00216 <span class="comment">//------ Begin of function TaskArray::rise_staff_morale -----//</span>
<a name="l00220"></a><a class="code" href="classTaskArray.html#a21">00220</a> <span class="comment">void TaskArray::rise_staff_morale(int deptRecno, int ratingType,</span>
00221                                   <span class="keywordtype">int</span> target, <span class="keywordtype">int</span> src, <span class="keywordtype">int</span> month, <span class="keywordtype">int</span> year, <span class="keywordtype">int</span> bonus) {
00222     <span class="comment">//----------- add news --------------//</span>
00223 
00224     <a class="code" href="structTask.html">Task</a>* taskPtr = add_task( <a class="code" href="OTASK_8H.html#a14a11">RISE_STAFF_MORALE</a> );
00225 
00226     <span class="keywordflow">if</span>( !taskPtr )
00227         <span class="keywordflow">return</span>;
00228 
00229     taskPtr-&gt;<a class="code" href="structNews.html#m5">short_para1</a> = deptRecno; <a class="code" href="ALL_8H.html#a0">err_when</a>(deptRecno == 0);
00230     taskPtr-&gt;<a class="code" href="structNews.html#m6">short_para2</a> = ratingType;
00231     taskPtr-&gt;<a class="code" href="structNews.html#m7">short_para3</a> = target;
00232     taskPtr-&gt;<a class="code" href="structNews.html#m8">short_para4</a> = src;
00233     taskPtr-&gt;<a class="code" href="structNews.html#m9">short_para5</a> = month;
00234     taskPtr-&gt;<a class="code" href="structNews.html#m10">short_para6</a> = year;
00235     taskPtr-&gt;<a class="code" href="structNews.html#m11">short_para7</a> = bonus;
00236 
00237     <span class="comment">//----------------------------------------------//</span>
00238     <span class="comment">// add task to news_array</span>
00239 
00240     news_array.new_task(taskPtr);
00241 }
00242 
00243 <span class="comment">//------- End of function TaskArray::rise_staff_morale -----//</span>
00244 
00245 <span class="comment">//------ Begin of function TaskArray::add_task -----//</span>
<a name="l00255"></a><a class="code" href="classTaskArray.html#a11">00255</a> <span class="comment">Task* TaskArray::add_task(int taskId) {</span>
00256     <span class="comment">//  if ( size() &gt;=1 )               // 0208 // 990503</span>
00257     <span class="comment">//          return 0;</span>
00258 
00259     <span class="comment">//playsound</span>
00260     audio.play_wav(<span class="stringliteral">"NEWS"</span>,audio.int_to_DsVolume(config.sound_effect_volume));
00261 
00262     <span class="comment">//----------------------------------------------//</span>
00263     <span class="comment">// add task to this: task_array</span>
00264 
00265     <span class="keyword">static</span> <a class="code" href="structTask.html">Task</a> newTask;
00266 
00267     newTask.<a class="code" href="structNews.html#m0">id</a>   = taskId;
00268     newTask.<a class="code" href="structNews.html#m1">task_id</a> = taskId;
00269     newTask.<a class="code" href="structNews.html#m3">task_msg_subtype</a> = <a class="code" href="Onews_8h.html#a50a10">TASK_STARTED</a>;
00270     newTask.<a class="code" href="structNews.html#m4">news_date</a> = info.game_date;
00271 
00272     <span class="comment">//--- if the news adding flag is turned off, don't add the news ---//</span>
00273 
00274     <span class="keywordflow">if</span>( task_add_flag ) {
00275         <span class="comment">//--- if no. of news reaches max., delete the oldest one ---//</span>
00276 
00277         <span class="comment">//--------- link in a new news ---------//</span>
00278 
00279         linkin(&amp;newTask);
00280 
00281         <a class="code" href="structTask.html">Task</a>* taskPtr = (<a class="code" href="structTask.html">Task</a>*) get();
00282 
00283         <span class="keywordflow">return</span> taskPtr;
00284     }
00285     <span class="keywordflow">else</span> {
00286         <span class="keywordflow">return</span> &amp;newTask;
00287     }
00288 }
00289 
00290 <span class="comment">//------- End of function TaskArray::add_task -----//</span>
00291 
00292 <span class="comment">//------- Begin of function TaskArray::can_add_more_task -----//</span>
<a name="l00294"></a><a class="code" href="classTaskArray.html#a13">00294</a> <span class="comment">bool TaskArray::can_add_more_task() {</span>
00295     <span class="comment">// it can be 1 or 2, and max can be 2 or 3</span>
00296     <span class="keywordtype">int</span> maxActiveTask = player_school.chance_objective_frequency+1;
00297     <span class="keywordtype">int</span> taskCount=0;
00298 
00299     <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i=size() ; i&gt;0 ; i-- ) {
00300         <a class="code" href="structTask.html">Task</a>* taskPtr = operator[](i);
00301 
00302         <span class="keywordflow">if</span> ( taskPtr-&gt;<a class="code" href="structNews.html#m3">task_msg_subtype</a> != <a class="code" href="Onews_8h.html#a50a12">TASK_COMPLETED</a> ) {
00303             taskCount++;
00304 
00305             <span class="keywordflow">if</span>( taskCount == maxActiveTask )            <span class="comment">// can't add more if it has reached the maximum</span>
00306                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00307         }
00308     }
00309     <span class="keywordflow">return</span> <span class="keyword">true</span>;
00310 }
00311 
00312 <span class="comment">//------- End of function TaskArray::can_add_more_task -----//</span>
</pre></div><hr><address style="align: right;"><small>Generated on Fri Aug 23 01:38:30 2002 for VirtualU by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.17 </small></address>
</body>
</html>
