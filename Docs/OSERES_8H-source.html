<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>OSERES.H Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.17 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>OSERES.H</h1><a href="OSERES_8H.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">// Filename    : OSERES.H</span>
00002 <span class="comment">// Description : Header file of sound resource</span>
00003 <span class="comment">// Onwer       : Gilbert</span>
00004 
00005 <span class="preprocessor">#ifndef __OSERES_H</span>
00006 <span class="preprocessor"></span><span class="preprocessor">#define __OSERES_H</span>
00007 <span class="preprocessor"></span>
00008 <span class="comment">// ------------- Define struct SERec -------------//</span>
00009 
<a name="l00011"></a><a class="code" href="structSERec.html">00011</a> <span class="keyword">struct </span><a class="code" href="structSERec.html">SERec</a> {
00012     <span class="keyword">enum</span>  { <a class="code" href="structSERec.html#s5s0">RECNO_LEN</a>=3, <a class="code" href="structSERec.html#s5s1">CODE_LEN</a>=12, <a class="code" href="structSERec.html#s5s2">VERB_LEN</a>=4, <a class="code" href="structSERec.html#s5s3">OUT_FRAME_LEN</a>=3, <a class="code" href="structSERec.html#s5s4">FILE_NAME_LEN</a>=8};
<a name="l00013"></a><a class="code" href="structSERec.html#m0">00013</a>     <span class="keywordtype">char</span>  <a class="code" href="structSERec.html#m0">subject_type</a>;
<a name="l00014"></a><a class="code" href="structSERec.html#m1">00014</a>     <span class="keywordtype">char</span>  <a class="code" href="structSERec.html#m1">subject_code</a>[<a class="code" href="structSERec.html#s5s1">CODE_LEN</a>];
<a name="l00015"></a><a class="code" href="structSERec.html#m2">00015</a>     <span class="keywordtype">char</span>  <a class="code" href="structSERec.html#m2">subject_id</a>[<a class="code" href="structSERec.html#s5s0">RECNO_LEN</a>];
<a name="l00016"></a><a class="code" href="structSERec.html#m3">00016</a>     <span class="keywordtype">char</span>  <a class="code" href="structSERec.html#m3">action</a>[<a class="code" href="structSERec.html#s5s2">VERB_LEN</a>];
<a name="l00017"></a><a class="code" href="structSERec.html#m4">00017</a>     <span class="keywordtype">char</span>  <a class="code" href="structSERec.html#m4">object_type</a>;
<a name="l00018"></a><a class="code" href="structSERec.html#m5">00018</a>     <span class="keywordtype">char</span>  <a class="code" href="structSERec.html#m5">object_id</a>[<a class="code" href="structSERec.html#s5s0">RECNO_LEN</a>];
<a name="l00019"></a><a class="code" href="structSERec.html#m6">00019</a>     <span class="keywordtype">char</span>  <a class="code" href="structSERec.html#m6">out_frame</a>[<a class="code" href="structSERec.html#s5s3">OUT_FRAME_LEN</a>];
<a name="l00020"></a><a class="code" href="structSERec.html#m7">00020</a>     <span class="keywordtype">char</span>  <a class="code" href="structSERec.html#m7">file_name</a>[<a class="code" href="structSERec.html#s5s4">FILE_NAME_LEN</a>];
00021 
00022 };
00023 
00024 <span class="comment">// ------------- Define struct SEInfo -------------//</span>
00025 
<a name="l00028"></a><a class="code" href="structSEInfo.html">00028</a> <span class="keyword">struct </span><a class="code" href="structSEInfo.html">SEInfo</a> {
00029     <span class="keyword">enum</span> { <a class="code" href="structSEInfo.html#s2s0">VERB_LEN</a>=4, <a class="code" href="structSEInfo.html#s2s1">FILE_NAME_LEN</a>=8 };
<a name="l00030"></a><a class="code" href="structSEInfo.html#m0">00030</a>     <span class="keywordtype">char</span>  <a class="code" href="structSEInfo.html#m0">subject_type</a>;                             <span class="comment">// S=sprite, U=unit, R=race, F=firm, T=town</span>
<a name="l00031"></a><a class="code" href="structSEInfo.html#m1">00031</a>     <span class="keywordtype">short</span> <a class="code" href="structSEInfo.html#m1">subject_id</a>;
<a name="l00032"></a><a class="code" href="structSEInfo.html#m2">00032</a>     <span class="keywordtype">char</span>  <a class="code" href="structSEInfo.html#m2">action</a>[<a class="code" href="structSEInfo.html#s2s0">VERB_LEN</a>+1];                       <span class="comment">// '\0' padding</span>
<a name="l00033"></a><a class="code" href="structSEInfo.html#m3">00033</a>     <span class="keywordtype">char</span>  <a class="code" href="structSEInfo.html#m3">object_type</a>;
<a name="l00034"></a><a class="code" href="structSEInfo.html#m4">00034</a>     <span class="keywordtype">short</span> <a class="code" href="structSEInfo.html#m4">object_id</a>;
<a name="l00035"></a><a class="code" href="structSEInfo.html#m5">00035</a>     <span class="keywordtype">short</span> <a class="code" href="structSEInfo.html#m5">out_frame</a>;
<a name="l00036"></a><a class="code" href="structSEInfo.html#m6">00036</a>     <span class="keywordtype">char</span>  <a class="code" href="structSEInfo.html#m6">file_name</a>[<a class="code" href="structSEInfo.html#s2s1">FILE_NAME_LEN</a>+1];
<a name="l00037"></a><a class="code" href="structSEInfo.html#m7">00037</a>     <span class="keywordtype">short</span> <a class="code" href="structSEInfo.html#m7">effect_id</a>;                                <span class="comment">// id returned from se_ctrl.scan</span>
00038 
00039     <span class="keywordtype">int</span> <a class="code" href="structSEInfo.html#a0">match</a>(<span class="keywordtype">char</span>, <span class="keywordtype">short</span>, <span class="keywordtype">char</span> *, <span class="keywordtype">char</span>, <span class="keywordtype">short</span>);
00040 };
00041 
00042 <span class="comment">// ---------- Define struct SEInfoIndex -------//</span>
00043 
<a name="l00046"></a><a class="code" href="structSEInfoIndex.html">00046</a> <span class="keyword">struct </span><a class="code" href="structSEInfoIndex.html">SEInfoIndex</a> {
<a name="l00047"></a><a class="code" href="structSEInfoIndex.html#m0">00047</a>     <span class="keywordtype">char</span>  <a class="code" href="structSEInfoIndex.html#m0">subject_type</a>;
<a name="l00048"></a><a class="code" href="structSEInfoIndex.html#m1">00048</a>     <span class="keywordtype">char</span>  <a class="code" href="structSEInfoIndex.html#m1">dummy</a>;
<a name="l00049"></a><a class="code" href="structSEInfoIndex.html#m2">00049</a>     <span class="keywordtype">short</span> <a class="code" href="structSEInfoIndex.html#m2">subject_id</a>;
<a name="l00050"></a><a class="code" href="structSEInfoIndex.html#m3">00050</a>     <span class="keywordtype">int</span> <a class="code" href="structSEInfoIndex.html#m3">start_rec</a>;
<a name="l00051"></a><a class="code" href="structSEInfoIndex.html#m4">00051</a>     <span class="keywordtype">int</span> <a class="code" href="structSEInfoIndex.html#m4">end_rec</a>;
00052 };
00053 
00054 <span class="comment">// ---------- Define struct SETypeIndex -------//</span>
00055 
<a name="l00058"></a><a class="code" href="structSETypeIndex.html">00058</a> <span class="keyword">struct </span><a class="code" href="structSETypeIndex.html">SETypeIndex</a> {
<a name="l00059"></a><a class="code" href="structSETypeIndex.html#m0">00059</a>     <span class="keywordtype">char</span>  <a class="code" href="structSETypeIndex.html#m0">subject_type</a>;
<a name="l00060"></a><a class="code" href="structSETypeIndex.html#m1">00060</a>     <span class="keywordtype">char</span>  <a class="code" href="structSETypeIndex.html#m1">dummy</a>;
<a name="l00061"></a><a class="code" href="structSETypeIndex.html#m2">00061</a>     <span class="keywordtype">int</span> <a class="code" href="structSETypeIndex.html#m2">start_rec</a>;
<a name="l00062"></a><a class="code" href="structSETypeIndex.html#m3">00062</a>     <span class="keywordtype">int</span> <a class="code" href="structSETypeIndex.html#m3">end_rec</a>;
00063 };
00064 
00065 <span class="comment">// ------------- Define class SERes -------------//</span>
00066 
00067 <span class="keyword">class </span><a class="code" href="classSECtrl.html">SECtrl</a>;
00068 
<a name="l00071"></a><a class="code" href="classSERes.html">00071</a> <span class="keyword">class </span><a class="code" href="classSERes.html">SERes</a> {
00072 <span class="keyword">public</span>:
<a name="l00073"></a><a class="code" href="classSERes.html#m0">00073</a>     <span class="keywordtype">int</span>   <a class="code" href="classSERes.html#m0">init_flag</a>;
<a name="l00074"></a><a class="code" href="classSERes.html#m1">00074</a>     <a class="code" href="classSECtrl.html">SECtrl</a>* <a class="code" href="classSERes.html#m1">se_output</a>;
<a name="l00075"></a><a class="code" href="classSERes.html#m2">00075</a>     <span class="keywordtype">int</span>   <a class="code" href="classSERes.html#m2">se_array_count</a>;
<a name="l00076"></a><a class="code" href="classSERes.html#m3">00076</a>     <a class="code" href="structSEInfo.html">SEInfo</a>* <a class="code" href="classSERes.html#m3">se_array</a>;
<a name="l00077"></a><a class="code" href="classSERes.html#m4">00077</a>     <span class="keywordtype">int</span>   <a class="code" href="classSERes.html#m4">se_index_count</a>;
<a name="l00078"></a><a class="code" href="classSERes.html#m5">00078</a>     <a class="code" href="structSEInfoIndex.html">SEInfoIndex</a> *<a class="code" href="classSERes.html#m5">se_index_array</a>;
<a name="l00079"></a><a class="code" href="classSERes.html#m6">00079</a>     <span class="keywordtype">int</span>   <a class="code" href="classSERes.html#m6">type_index_count</a>;
<a name="l00080"></a><a class="code" href="classSERes.html#m7">00080</a>     <a class="code" href="structSETypeIndex.html">SETypeIndex</a> *<a class="code" href="classSERes.html#m7">type_index_array</a>;
00081 
00082     <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="classSERes.html#p0">last_select_time</a>;
00083     <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="classSERes.html#p1">last_command_time</a>;
00084     <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="classSERes.html#p2">select_sound_length</a>;
<a name="l00085"></a><a class="code" href="classSERes.html#m8">00085</a>     <span class="keywordtype">unsigned</span> <a class="code" href="classSERes.html#m8">seed</a>;
00086 
00087 <span class="keyword">public</span>:
00088     <a class="code" href="classSERes.html#a0">SERes</a>();
00089     <a class="code" href="classSERes.html#a1">~SERes</a>();
00090 
00091     <span class="keywordtype">void</span>    <a class="code" href="classSERes.html#a2">init1</a>();                              <span class="comment">// init before se_ctrl.init</span>
00092     <span class="keywordtype">void</span>    <a class="code" href="classSERes.html#a3">init2</a>(<a class="code" href="classSECtrl.html">SECtrl</a>*);                       <span class="comment">// init after se_ctrl.init</span>
00093     <span class="keywordtype">void</span>    <a class="code" href="classSERes.html#a4">deinit</a>();
00094 
00095     <a class="code" href="structSEInfo.html">SEInfo</a>* <a class="code" href="classSERes.html#a5">scan</a>(<span class="keywordtype">char</span>,<span class="keywordtype">short</span>, <span class="keywordtype">char</span> *, <span class="keywordtype">char</span>,<span class="keywordtype">short</span>, <span class="keywordtype">int</span> findFirst=0);
00096     <span class="keywordtype">short</span>   <a class="code" href="classSERes.html#a6">scan_id</a>(<span class="keywordtype">char</span>,<span class="keywordtype">short</span>, <span class="keywordtype">char</span> *, <span class="keywordtype">char</span>,<span class="keywordtype">short</span>, <span class="keywordtype">int</span> findFirst=0);
00097     <a class="code" href="structSEInfo.html">SEInfo</a>* <a class="code" href="classSERes.html#a7">operator[] </a>(<span class="keywordtype">int</span>);
00098     <span class="keywordtype">void</span>    <a class="code" href="classSERes.html#a8">sound</a>(<span class="keywordtype">short</span> xLoc, <span class="keywordtype">short</span> yLoc, <span class="keywordtype">short</span> frame, <span class="keywordtype">char</span>,<span class="keywordtype">short</span>, <span class="keywordtype">char</span> *, <span class="keywordtype">char</span>=0,<span class="keywordtype">short</span>=0);
00099     <span class="keywordtype">void</span>    <a class="code" href="classSERes.html#a9">far_sound</a>(<span class="keywordtype">short</span> xLoc, <span class="keywordtype">short</span> yLoc, <span class="keywordtype">short</span> frame, <span class="keywordtype">char</span>,<span class="keywordtype">short</span>, <span class="keywordtype">char</span> *, <span class="keywordtype">char</span>=0,<span class="keywordtype">short</span>=0);
00100 
00101     <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="classSERes.html#d0">mark_select_object_time</a>();         <span class="comment">// return false if this sound should be skipped due to too frequent</span>
00102     <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="classSERes.html#d1">mark_command_time</a>();               <span class="comment">// return false if this sound should be skipped due to too frequent</span>
00103 
00104 <span class="keyword">private</span>:
00105     <span class="keywordtype">void</span> load_info();
00106     <span class="keywordtype">void</span> sort_info();
00107     <span class="keywordtype">void</span> build_index();
00108     <span class="keywordtype">unsigned</span>  random(<span class="keywordtype">unsigned</span>);
00109 };
00110 
<a name="l00111"></a><a class="code" href="OSERES_8H.html#a0">00111</a> <span class="keyword">extern</span> <a class="code" href="classSERes.html">SERes</a> <a class="code" href="OSERES_8H.html#a0">se_res</a>;
00112 <span class="preprocessor">#endif</span>
</pre></div><hr><address style="align: right;"><small>Generated on Fri Aug 23 01:38:22 2002 for VirtualU by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.17 </small></address>
</body>
</html>
