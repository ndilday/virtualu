<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>NEWMAT1.CPP Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.17 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>NEWMAT1.CPP</h1><a href="NEWMAT1_8CPP.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">//Owner: Fred</span>
00002 <span class="comment">//$$ newmat1.cpp   Matrix type functions</span>
00003 
00004 <span class="comment">// Copyright (C) 1991,2,3,4: R B Davies</span>
00005 
00006 <span class="preprocessor">#include "newmat.h"</span>
00007 
00008 <span class="preprocessor">#ifdef use_namespace</span>
00009 <span class="preprocessor"></span><span class="keyword">namespace </span>NEWMAT {
00010 <span class="preprocessor">#endif</span>
00011 <span class="preprocessor"></span>
00012     <span class="comment">/************************* MatrixType functions *****************************/</span>
00013 
00014     <span class="comment">// all operations to return MatrixTypes which correspond to valid types</span>
00015     <span class="comment">// of matrices.</span>
00016     <span class="comment">// Eg: if it has the Diagonal attribute, then it must also have</span>
00017     <span class="comment">// Upper, Lower, Band and Symmetric.</span>
00018 
00019     MatrixType MatrixType::operator*(<span class="keyword">const</span> MatrixType&amp; mt)<span class="keyword"> const </span>{
00020         <span class="keywordtype">int</span> a = attribute &amp; mt.attribute &amp; ~Symmetric;
00021         a |= (a &amp; Diagonal) * 31;                     <span class="comment">// recognise diagonal</span>
00022         <span class="keywordflow">return</span> MatrixType(a);
00023     }
00024 
00025     MatrixType MatrixType::SP(<span class="keyword">const</span> MatrixType&amp; mt)<span class="keyword"> const </span>{
00026         <span class="comment">// elementwise product</span>
00027         <span class="comment">// Lower, Upper, Diag, Band if only one is</span>
00028         <span class="comment">// Symmetric, Valid (and Real) if both are</span>
00029         <span class="comment">// Need to include Lower &amp; Upper =&gt; Diagonal</span>
00030         <span class="comment">// Will need to include both Skew =&gt; Symmetric</span>
00031         <span class="keywordtype">int</span> a = ((attribute | mt.attribute) &amp; ~(Symmetric + Valid))
00032             | (attribute &amp; mt.attribute);
00033         <span class="keywordflow">if</span> ((a &amp; Lower) != 0  &amp;&amp;  (a &amp; Upper) != 0) a |= Diagonal;
00034         a |= (a &amp; Diagonal) * 31;                     <span class="comment">// recognise diagonal</span>
00035         <span class="keywordflow">return</span> MatrixType(a);
00036     }
00037 
00038     MatrixType MatrixType::i()<span class="keyword"> const </span>{              <span class="comment">// type of inverse</span>
00039         <span class="keywordtype">int</span> a = attribute &amp; ~(Band+LUDeco);
00040         a |= (a &amp; Diagonal) * 31;                     <span class="comment">// recognise diagonal</span>
00041         <span class="keywordflow">return</span> MatrixType(a);
00042     }
00043 
00044     MatrixType MatrixType::t()<span class="keyword"> const </span>{
00045         <span class="comment">// swap lower and upper attributes</span>
00046         <span class="comment">// assume Upper is in bit above Lower</span>
00047         <span class="keywordtype">int</span> a = attribute;
00048         a ^= (((a &gt;&gt; 1) ^ a) &amp; Lower) * 3;
00049         <span class="keywordflow">return</span> MatrixType(a);
00050     }
00051 
00052     MatrixType MatrixType::MultRHS()<span class="keyword"> const </span>{
00053         <span class="comment">// reomve symmetric attribute unless diagonal</span>
00054         <span class="keywordflow">return</span> (attribute == Dg) ? Dg : (attribute &amp; ~Symmetric);
00055     }
00056 
<a name="l00057"></a><a class="code" href="NEWMAT1_8CPP.html#a0">00057</a>     <span class="keywordtype">bool</span> <a class="code" href="NEWMAT1_8CPP.html#a0">Rectangular</a>(MatrixType a, MatrixType b, MatrixType c) {
00058         <span class="keywordflow">return</span>
00059             ((a.attribute | b.attribute | c.attribute) &amp; ~MatrixType::Valid) == 0;
00060     }
00061 
00062     <span class="keywordtype">char</span>* MatrixType::Value()<span class="keyword"> const </span>{
00063         <span class="comment">// make a string with the name of matrix with the given attributes</span>
00064         <span class="keywordflow">switch</span> (attribute) {
00065         <span class="keywordflow">case</span> Valid:                              <span class="keywordflow">return</span> <span class="stringliteral">"Rect "</span>;
00066         <span class="keywordflow">case</span> Valid+Symmetric:                    <span class="keywordflow">return</span> <span class="stringliteral">"Sym  "</span>;
00067         <span class="keywordflow">case</span> Valid+Band:                         <span class="keywordflow">return</span> <span class="stringliteral">"Band "</span>;
00068         <span class="keywordflow">case</span> Valid+Symmetric+Band:               <span class="keywordflow">return</span> <span class="stringliteral">"SmBnd"</span>;
00069         <span class="keywordflow">case</span> Valid+Upper:                        <span class="keywordflow">return</span> <span class="stringliteral">"UT   "</span>;
00070         <span class="keywordflow">case</span> Valid+Diagonal+Symmetric+Band+Upper+Lower:
00071             <span class="keywordflow">return</span> <span class="stringliteral">"Diag "</span>;
00072         <span class="keywordflow">case</span> Valid+Band+Upper:                   <span class="keywordflow">return</span> <span class="stringliteral">"UpBnd"</span>;
00073         <span class="keywordflow">case</span> Valid+Lower:                        <span class="keywordflow">return</span> <span class="stringliteral">"LT   "</span>;
00074         <span class="keywordflow">case</span> Valid+Band+Lower:                   <span class="keywordflow">return</span> <span class="stringliteral">"LwBnd"</span>;
00075         <span class="keywordflow">default</span>:
00076             <span class="keywordflow">if</span> (!(attribute &amp; Valid))             <span class="keywordflow">return</span> <span class="stringliteral">"UnSp "</span>;
00077             <span class="keywordflow">if</span> (attribute &amp; LUDeco)
00078                 <span class="keywordflow">return</span> (attribute &amp; Band) ?     <span class="stringliteral">"BndLU"</span> : <span class="stringliteral">"Crout"</span>;
00079             <span class="keywordflow">return</span> <span class="stringliteral">"?????"</span>;
00080         }
00081     }
00082 
00083     GeneralMatrix* MatrixType::New(<span class="keywordtype">int</span> nr, <span class="keywordtype">int</span> nc, BaseMatrix* bm)<span class="keyword"> const </span>{
00084         <span class="comment">// make a new matrix with the given attributes</span>
00085 
00086         <a class="code" href="classTracer.html">Tracer</a> tr(<span class="stringliteral">"New"</span>); GeneralMatrix* gm;
00087         <span class="keywordflow">switch</span> (attribute) {
00088         <span class="keywordflow">case</span> Valid:
00089             <span class="keywordflow">if</span> (nc==1) { gm = <span class="keyword">new</span> ColumnVector(nr); <span class="keywordflow">break</span>; }
00090             <span class="keywordflow">if</span> (nr==1) { gm = <span class="keyword">new</span> RowVector(nc); <span class="keywordflow">break</span>; }
00091             gm = <span class="keyword">new</span> <a class="code" href="classMatrix.html">Matrix</a>(nr, nc); <span class="keywordflow">break</span>;
00092 
00093         <span class="keywordflow">case</span> Valid+Symmetric:
00094             gm = <span class="keyword">new</span> SymmetricMatrix(nr); <span class="keywordflow">break</span>;
00095 
00096         <span class="keywordflow">case</span> Valid+Band: {
00097             MatrixBandWidth bw = bm-&gt;BandWidth();
00098             gm = <span class="keyword">new</span> BandMatrix(nr,bw.lower,bw.upper); <span class="keywordflow">break</span>;
00099         }
00100 
00101         <span class="keywordflow">case</span> Valid+Symmetric+Band:
00102             gm = <span class="keyword">new</span> SymmetricBandMatrix(nr,bm-&gt;BandWidth().lower); <span class="keywordflow">break</span>;
00103 
00104         <span class="keywordflow">case</span> Valid+Upper:
00105             gm = <span class="keyword">new</span> UpperTriangularMatrix(nr); <span class="keywordflow">break</span>;
00106 
00107         <span class="keywordflow">case</span> Valid+Diagonal+Symmetric+Band+Upper+Lower:
00108             gm = <span class="keyword">new</span> DiagonalMatrix(nr); <span class="keywordflow">break</span>;
00109 
00110         <span class="keywordflow">case</span> Valid+Band+Upper:
00111             gm = <span class="keyword">new</span> UpperBandMatrix(nr,bm-&gt;BandWidth().upper); <span class="keywordflow">break</span>;
00112 
00113         <span class="keywordflow">case</span> Valid+Lower:
00114             gm = <span class="keyword">new</span> LowerTriangularMatrix(nr); <span class="keywordflow">break</span>;
00115 
00116         <span class="keywordflow">case</span> Valid+Band+Lower:
00117             gm = <span class="keyword">new</span> LowerBandMatrix(nr,bm-&gt;BandWidth().lower); <span class="keywordflow">break</span>;
00118 
00119         <span class="keywordflow">default</span>:
00120             Throw(ProgramException(<span class="stringliteral">"Invalid matrix type"</span>));
00121         }
00122 
00123         <a class="code" href="namespaceNEWMAT.html#a19">MatrixErrorNoSpace</a>(gm); gm-&gt;Protect(); <span class="keywordflow">return</span> gm;
00124     }
00125 
00126 <span class="preprocessor">#ifdef use_namespace</span>
00127 <span class="preprocessor"></span>}
00128 <span class="preprocessor">#endif</span>
</pre></div><hr><address style="align: right;"><small>Generated on Fri Aug 23 01:37:05 2002 for VirtualU by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.17 </small></address>
</body>
</html>
