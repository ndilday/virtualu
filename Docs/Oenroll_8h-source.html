<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Oenroll.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.17 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>Oenroll.h</h1><a href="Oenroll_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">//Filename    : OEnroll.h</span>
00002 <span class="comment">//Description : EnrollRes Class Declaration</span>
00003 <span class="comment">//Owner       : Fred</span>
00004 
00005 <span class="preprocessor">#ifndef __OEnroll_H</span>
00006 <span class="preprocessor"></span><span class="preprocessor">#define __OEnroll_H</span>
00007 <span class="preprocessor"></span>
00008 <span class="comment">// ES library header file</span>
00009 <span class="comment">// CU header file</span>
00010 <span class="preprocessor">#include &lt;GAMEDEF.H&gt;</span>                              <span class="comment">// HISTORY_YEAR_COUNT</span>
00011 <span class="preprocessor">#include &lt;OSTUDENT.H&gt;</span>                             <span class="comment">// MAX_STUDENT_LEVEL, ACADEMIC</span>
00012 
00013 <span class="comment">//----------- Define constants -------------//</span>
<a name="l00014"></a><a class="code" href="Oenroll_8h.html#a0">00014</a> <span class="preprocessor">#define MAX_TALENT_PRIORITY_LEVEL 10.0f</span>
<a name="l00015"></a><a class="code" href="Oenroll_8h.html#a1">00015</a> <span class="preprocessor"></span><span class="preprocessor">#define PRIORITY_LEVEL_COUNT      3               // interface related constant</span>
00016 <span class="preprocessor"></span>
00017 <span class="comment">//----------- Define enum types -------------//</span>
00018 <span class="keyword">enum</span> {
00019     <a class="code" href="Oenroll_8h.html#a30a3">INSTITU_SEGMENT_COUNT</a> = 7,
00020     <a class="code" href="Oenroll_8h.html#a30a4">PREFERECNE_COUNT</a> = 20,
00021     <a class="code" href="Oenroll_8h.html#a30a5">NON_FINANCIAL_PREFERECNE_COUNT</a> = 14,
00022     <span class="comment">//FINANCIAL_PREFERECNE_COUNT = 3,           // = (20-14)/2          // see D129:147</span>
00023     <a class="code" href="Oenroll_8h.html#a30a6">PREFERECNE_COUNT2</a> = 21,
00024     <a class="code" href="Oenroll_8h.html#a30a7">SCHOOL_CONTROL_COUNT</a> = 2                        <span class="comment">// PUBLIC &amp; PRIVATE in opschool.h</span>
00025 };
00026 
00027 <span class="keyword">enum</span> {
00028     <a class="code" href="Oenroll_8h.html#a31a8">MAX_STUDENT_LEVEL_NO_SL1</a> = <a class="code" href="Ostudent_8h.html#a0">MAX_STUDENT_LEVEL</a> - 1,
00029     <a class="code" href="Oenroll_8h.html#a31a9">STUDENT_SEGMENT_COUNT</a> = 7,
00030     <a class="code" href="Oenroll_8h.html#a31a10">STUDENT_SUBSEGMENT_COUNT</a> = 4,                   <span class="comment">// equal to GENDER_ETHNIC_TYPE implicitly</span>
00031 
00032     <a class="code" href="Oenroll_8h.html#a31a11">STUDENT_SEGMENT_ATHLETE</a> = 3,                    <span class="comment">// index to array</span>
00033 };
00034 
00035 <span class="keyword">enum</span> {
00036     <a class="code" href="Oenroll_8h.html#a32a12">MINORITY_GROUP_COUNT</a> = 2,
00037 
00038     <a class="code" href="Oenroll_8h.html#a32a13">NON_MINORITY</a> = 0,
00039     <a class="code" href="Oenroll_8h.html#a32a14">MINORITY</a>,
00040 };
00041 
00042 <span class="keyword">enum</span> {
00043     <a class="code" href="Oenroll_8h.html#a33a15">APP_YIELD_VAR_COUNT</a> = 3,                        <span class="comment">// numbers of applications/offers/matriculations</span>
00044 
00045     <a class="code" href="Oenroll_8h.html#a33a16">APPS</a> = 0, <a class="code" href="Oenroll_8h.html#a33a17">OFFERS</a>, <a class="code" href="Oenroll_8h.html#a33a18">MATRICS</a>,
00046 };
00047 
00048 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00049 <span class="preprocessor"></span><span class="keyword">enum</span> {
00050     <a class="code" href="Oenroll_8h.html#a34a19">ER_YIELD_RATE</a> = 0 , <a class="code" href="Oenroll_8h.html#a34a20">ER_OFFERS_RATE</a>, <a class="code" href="Oenroll_8h.html#a34a21">ER_PERCENT_MINORITY</a>, <a class="code" href="Oenroll_8h.html#a34a22">ER_ACADEMIC</a>,
00051     <a class="code" href="Oenroll_8h.html#a34a23">ER_EXTRACURRICULAR</a>, <a class="code" href="Oenroll_8h.html#a34a24">ER_ATHLETICS</a>, ER_CREDITS_DEMANDED, ER_CREDITS_PROVIDED,
00052 
00053     <a class="code" href="Oenroll_8h.html#a34a25">HISTORY_GRAPH_COUNT_SL25</a> = <a class="code" href="Oenroll_8h.html#a34a22">ER_ACADEMIC</a>+1,       <span class="comment">// 4 graphs only</span>
00054     <span class="comment">// 8 graphs</span>
00055     <a class="code" href="Oenroll_8h.html#a34a26">HISTORY_GRAPH_COUNT_GENERAL</a> = ER_CREDITS_PROVIDED+1,
00056 };
00057 <span class="preprocessor">#else</span>
00058 <span class="preprocessor"></span><span class="keyword">enum</span> {
00059     <a class="code" href="Oenroll_8h.html#a34a19">ER_YIELD_RATE</a> = 0 , <a class="code" href="Oenroll_8h.html#a34a20">ER_OFFERS_RATE</a>, <a class="code" href="Oenroll_8h.html#a34a21">ER_PERCENT_MINORITY</a>, <a class="code" href="Oenroll_8h.html#a34a22">ER_ACADEMIC</a>,
00060     <a class="code" href="Oenroll_8h.html#a34a23">ER_EXTRACURRICULAR</a>, <a class="code" href="Oenroll_8h.html#a34a24">ER_ATHLETICS</a>,
00061 
00062     <a class="code" href="Oenroll_8h.html#a34a25">HISTORY_GRAPH_COUNT_SL25</a> = <a class="code" href="Oenroll_8h.html#a34a22">ER_ACADEMIC</a>+1,       <span class="comment">// 4 graphs only</span>
00063     <a class="code" href="Oenroll_8h.html#a34a26">HISTORY_GRAPH_COUNT_GENERAL</a> = <a class="code" href="Oenroll_8h.html#a34a24">ER_ATHLETICS</a>+1,   <span class="comment">// 6 graphs</span>
00064 };
00065 <span class="preprocessor">#endif</span>
00066 <span class="preprocessor"></span>
00067 <span class="comment">// for radio button input</span>
00068 <span class="keyword">enum</span> {
00069     <a class="code" href="Oenroll_8h.html#a35a27">SET_LOW</a> = 0,
00070     <a class="code" href="Oenroll_8h.html#a35a28">SET_MID</a>,
00071     <a class="code" href="Oenroll_8h.html#a35a29">SET_HIGH</a>,
00072 };
00073 
00074 <span class="comment">//----------- Define struct -------------//</span>
00075 
00076 <span class="comment">// refer to HE.initialization[stu_pref]</span>
<a name="l00078"></a><a class="code" href="structPreferenceRec.html">00078</a> <span class="comment">struct PreferenceRec {</span>
<a name="l00079"></a><a class="code" href="structPreferenceRec.html#m0">00079</a>     <span class="keywordtype">char</span>  value[<a class="code" href="Oenroll_8h.html#a30a3">INSTITU_SEGMENT_COUNT</a>][9];
<a name="l00080"></a><a class="code" href="structPreferenceRec.html#m1">00080</a>     <span class="keywordtype">char</span>  weight[9];
00081 };
00082 
<a name="l00084"></a><a class="code" href="structPreference.html">00084</a> <span class="keyword">struct </span><a class="code" href="structPreference.html">Preference</a> {
<a name="l00085"></a><a class="code" href="structPreference.html#m0">00085</a>     <span class="keywordtype">float</span> <a class="code" href="structPreference.html#m0">average</a>;
<a name="l00086"></a><a class="code" href="structPreference.html#m1">00086</a>     <span class="keywordtype">float</span> <a class="code" href="structPreference.html#m1">deviation</a>;
<a name="l00087"></a><a class="code" href="structPreference.html#m2">00087</a>     <span class="keywordtype">float</span> <a class="code" href="structPreference.html#m2">weight</a>;
<a name="l00088"></a><a class="code" href="structPreference.html#m3">00088</a>     <span class="keywordtype">float</span> <a class="code" href="structPreference.html#m3">tmp_fuzzy_value</a>;
00089 };
00090 
00091 <span class="comment">// refer to [HE.STU.pref]sheet1, struct for all student levels</span>
<a name="l00094"></a><a class="code" href="structPreferenceRec2.html">00094</a> <span class="comment">struct PreferenceRec2 {</span>
<a name="l00095"></a><a class="code" href="structPreferenceRec2.html#m0">00095</a>     <span class="keywordtype">char</span>  weight[4][9];
00096 };
00097 
<a name="l00099"></a><a class="code" href="structPreference2.html">00099</a> <span class="keyword">struct </span><a class="code" href="structPreference2.html">Preference2</a> {
<a name="l00100"></a><a class="code" href="structPreference2.html#m1">00100</a>     <span class="keywordtype">float</span> <a class="code" href="structPreference2.html#m0">apps_ratio</a>, <a class="code" href="structPreference2.html#m1">yield_rate</a>;
00101 };
00102 
00103 <span class="comment">// refer to [HE.initialization]Apps_Yield</span>
<a name="l00105"></a><a class="code" href="structAppYieldRec.html">00105</a> <span class="comment">struct AppYieldRec {</span>
<a name="l00106"></a><a class="code" href="structAppYieldRec.html#m0">00106</a>     <span class="keywordtype">char</span>  count[<a class="code" href="Oenroll_8h.html#a30a3">INSTITU_SEGMENT_COUNT</a>][9];
00107 };
00108 
00109 <span class="comment">// refer to [HE.STU.talent.xls]Sheet1</span>
<a name="l00112"></a><a class="code" href="structTalentRec.html">00112</a> <span class="comment">struct TalentRec {</span>
<a name="l00113"></a><a class="code" href="structTalentRec.html#m0">00113</a>     <span class="keywordtype">char</span>  seg[<a class="code" href="Oenroll_8h.html#a31a9">STUDENT_SEGMENT_COUNT</a>][9];
00114 };
00115 
<a name="l00118"></a><a class="code" href="structTalent.html">00118</a> <span class="keyword">struct </span><a class="code" href="structTalent.html">Talent</a> {
<a name="l00119"></a><a class="code" href="structTalent.html#m0">00119</a>     <span class="keywordtype">float</span> <a class="code" href="structTalent.html#m0">average</a>;
<a name="l00120"></a><a class="code" href="structTalent.html#m1">00120</a>     <span class="keywordtype">float</span> <a class="code" href="structTalent.html#m1">variance</a>;
00121 };
00122 
00123 <span class="comment">//------- Define struct EnrollDataSL1 -----//</span>
<a name="l00125"></a><a class="code" href="structEnrollData.html">00125</a> <span class="comment">struct EnrollData {</span>
<a name="l00126"></a><a class="code" href="structEnrollData.html#m0">00126</a>     <span class="keywordtype">float</span> apps_ratio;                               <span class="comment">//, yield_rate;</span>
<a name="l00127"></a><a class="code" href="structEnrollData.html#m1">00127</a>     <span class="keywordtype">int</span> base_apps;
<a name="l00128"></a><a class="code" href="structEnrollData.html#m2">00128</a>     <span class="keywordtype">float</span> fraction_matrics;
00129 
<a name="l00130"></a><a class="code" href="structEnrollData.html#m3">00130</a>     <span class="keywordtype">int</span> applications;
00131     <span class="comment">//int       offers;</span>
<a name="l00132"></a><a class="code" href="structEnrollData.html#m4">00132</a>     <span class="keywordtype">int</span> matrics;
00133 
<a name="l00134"></a><a class="code" href="structEnrollData.html#m5">00134</a>     <span class="keywordtype">float</span>   student_pref;
<a name="l00135"></a><a class="code" href="structEnrollData.html#m6">00135</a>     <span class="keywordtype">float</span>   conversion_rate, base_conversion_rate;
<a name="l00136"></a><a class="code" href="structEnrollData.html#m8">00136</a>     <a class="code" href="structTalent.html">Talent</a>  academic;
00137 };
00138 
<a name="l00140"></a><a class="code" href="structEnrollDataSL1.html">00140</a> <span class="keyword">struct </span><a class="code" href="structEnrollDataSL1.html">EnrollDataSL1</a> {                            <span class="comment">//: public EnrollData</span>
<a name="l00141"></a><a class="code" href="structEnrollDataSL1.html#m1">00141</a>     <span class="keywordtype">float</span> <a class="code" href="structEnrollDataSL1.html#m0">apps_ratio</a>, <a class="code" href="structEnrollDataSL1.html#m1">yield_rate</a>;
<a name="l00142"></a><a class="code" href="structEnrollDataSL1.html#m2">00142</a>     <span class="keywordtype">int</span> <a class="code" href="structEnrollDataSL1.html#m2">base_apps</a>;
<a name="l00143"></a><a class="code" href="structEnrollDataSL1.html#m4">00143</a>     <span class="keywordtype">float</span> <a class="code" href="structEnrollDataSL1.html#m3">base_yield_rate</a>, <a class="code" href="structEnrollDataSL1.html#m4">fraction_matrics</a>;
00144 
<a name="l00145"></a><a class="code" href="structEnrollDataSL1.html#m5">00145</a>     <span class="keywordtype">int</span> <a class="code" href="structEnrollDataSL1.html#m5">applications</a>;
<a name="l00146"></a><a class="code" href="structEnrollDataSL1.html#m6">00146</a>     <span class="keywordtype">int</span> <a class="code" href="structEnrollDataSL1.html#m6">offers</a>;
<a name="l00147"></a><a class="code" href="structEnrollDataSL1.html#m7">00147</a>     <span class="keywordtype">int</span> <a class="code" href="structEnrollDataSL1.html#m7">matrics</a>;
00148 
<a name="l00149"></a><a class="code" href="structEnrollDataSL1.html#m9">00149</a>     <span class="keywordtype">float</span> <a class="code" href="structEnrollDataSL1.html#m8">util</a>, <a class="code" href="structEnrollDataSL1.html#m9">util_variance</a>;
00150 };
00151 
00152 <span class="comment">//----------- Define class EnrollRes -----//</span>
<a name="l00155"></a><a class="code" href="classEnrollRes.html">00155</a> <span class="comment">class EnrollRes {</span>
00156     <span class="comment">// arrays read from dbs for enrollment</span>
00157 <span class="keyword">public</span>:
<a name="l00158"></a><a class="code" href="classEnrollRes.html#m0">00158</a>     <a class="code" href="structPreference.html">Preference</a>  preference_array[<a class="code" href="Oenroll_8h.html#a30a4">PREFERECNE_COUNT</a>][<a class="code" href="Oenroll_8h.html#a30a3">INSTITU_SEGMENT_COUNT</a>];
<a name="l00159"></a><a class="code" href="classEnrollRes.html#m1">00159</a>     <a class="code" href="structPreference2.html">Preference2</a> preference_array2[<a class="code" href="Oenroll_8h.html#a30a7">SCHOOL_CONTROL_COUNT</a>][<a class="code" href="Oenroll_8h.html#a32a12">MINORITY_GROUP_COUNT</a>][<a class="code" href="Oenroll_8h.html#a30a6">PREFERECNE_COUNT2</a>];
<a name="l00160"></a><a class="code" href="classEnrollRes.html#m2">00160</a>     <span class="keywordtype">short</span>     app_yield_array[<a class="code" href="Oenroll_8h.html#a31a10">STUDENT_SUBSEGMENT_COUNT</a>][<a class="code" href="Oenroll_8h.html#a31a9">STUDENT_SEGMENT_COUNT</a>][<a class="code" href="Oenroll_8h.html#a30a3">INSTITU_SEGMENT_COUNT</a>][<a class="code" href="Oenroll_8h.html#a33a15">APP_YIELD_VAR_COUNT</a>];
<a name="l00161"></a><a class="code" href="classEnrollRes.html#m3">00161</a>     <a class="code" href="structTalent.html">Talent</a>    talent_array[<a class="code" href="Oenroll_8h.html#a31a10">STUDENT_SUBSEGMENT_COUNT</a>][<a class="code" href="Oenroll_8h.html#a31a9">STUDENT_SEGMENT_COUNT</a>][<a class="code" href="Ostudent_8h.html#a39a24">TALENT_INCOME_VAR_COUNT</a>];
00162 
00163     <span class="comment">//------------------------------------------//</span>
00164 
00165 <span class="keyword">public</span>:
00166     <a class="code" href="classEnrollRes.html">EnrollRes</a>();
00167     <span class="keywordtype">void</span>  init();
00168     <span class="keywordtype">void</span>  deinit();
00169 
00170     <span class="keywordtype">int</span> write_file(<a class="code" href="classFile.html">File</a>* filePtr);
00171     <span class="keywordtype">int</span> read_file(<a class="code" href="classFile.html">File</a>* filePtr);
00172 
00173     <span class="keywordtype">void</span>  init_data();
00174     <span class="keywordtype">void</span>  enroll_main(<span class="keywordtype">int</span> initFlag=0);
00175     <span class="keywordtype">void</span>  next_day();
00176     <span class="keywordtype">void</span>  update_history(<span class="keywordtype">char</span> update_flag);
00177 
00178     <span class="comment">//------------------------------------------//</span>
00179 
00180 <span class="keyword">private</span>:
00181     <span class="keywordtype">void</span>  load_db_student_pref();
00182     <span class="keywordtype">void</span>  load_db_student_pref2();
00183     <span class="keywordtype">void</span>  load_db_student_talent();
00184     <span class="keywordtype">void</span>  load_db_app_yield();
00185     <span class="keywordtype">void</span>  update_income();
00186 
00187     <span class="comment">//----------------------------------------------------//</span>
00188     <span class="comment">//-- data and methods for enrollment and other model -//</span>
00189     <span class="comment">//----------------------------------------------------//</span>
00190 
00191 <span class="keyword">public</span>:
00192 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00193 <span class="preprocessor"></span>    <span class="comment">// for interface on student turnover</span>
00194     <span class="keywordtype">int</span>   new_year_student_count[<a class="code" href="Ostudent_8h.html#a0">MAX_STUDENT_LEVEL</a>];
00195     <span class="keywordtype">int</span> last_year_student_count[<a class="code" href="Ostudent_8h.html#a0">MAX_STUDENT_LEVEL</a>];
00196 <span class="preprocessor">#endif</span>
00197 <span class="preprocessor"></span>    <span class="comment">// updated per trimester:</span>
<a name="l00198"></a><a class="code" href="classEnrollRes.html#m4">00198</a>     <span class="keywordtype">int</span> total_student_count;
<a name="l00199"></a><a class="code" href="classEnrollRes.html#m5">00199</a>     <span class="keywordtype">int</span> student_count[<a class="code" href="Ostudent_8h.html#a0">MAX_STUDENT_LEVEL</a>];
<a name="l00200"></a><a class="code" href="classEnrollRes.html#m6">00200</a>     <span class="keywordtype">float</span> student_female_percent[<a class="code" href="Ostudent_8h.html#a0">MAX_STUDENT_LEVEL</a>];
<a name="l00201"></a><a class="code" href="classEnrollRes.html#m7">00201</a>     <span class="keywordtype">float</span> student_minority_percent[<a class="code" href="Ostudent_8h.html#a0">MAX_STUDENT_LEVEL</a>];
00202 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00203 <span class="preprocessor"></span>    <span class="comment">// for new formula of diversity</span>
00204     <span class="keywordtype">float</span> student_minority_female_percent[<a class="code" href="Ostudent_8h.html#a0">MAX_STUDENT_LEVEL</a>];
00205 <span class="preprocessor">#endif</span>
00206 <span class="preprocessor"></span>
00207 <span class="keyword">public</span>:
00208     <span class="keywordtype">void</span>  calc_student_count(<span class="keywordtype">int</span> initFlag=0);
00209     <span class="comment">// 990427</span>
00210     <span class="keywordtype">void</span>  set_app_yield(<span class="keywordtype">float</span> appMultipler, <span class="keywordtype">float</span> yieldMultiplier);
00211 
00212     <span class="comment">//----------------------------------------------------//</span>
00213     <span class="comment">//-- data and methods for PGI enrollment only               ---//</span>
00214     <span class="comment">//----------------------------------------------------//</span>
00215 <span class="keyword">public</span>:
00216     <span class="comment">//----- for athletic office -----//</span>
<a name="l00217"></a><a class="code" href="classEnrollRes.html#m8">00217</a>     <span class="keywordtype">int</span> male_matrics_top_athletes;                <span class="comment">// for all student level</span>
<a name="l00218"></a><a class="code" href="classEnrollRes.html#m9">00218</a>     <span class="keywordtype">char</span>  avg_athletic_talent_male_matrics;
<a name="l00219"></a><a class="code" href="classEnrollRes.html#m10">00219</a>     <span class="keywordtype">char</span>  avg_athletic_talent_female_matrics;
00220 
00221     <span class="comment">//----- for interface -----//</span>
<a name="l00222"></a><a class="code" href="classEnrollRes.html#m11">00222</a>     <span class="keywordtype">int</span> matrics_top_athletes;                     <span class="comment">// for all student level</span>
<a name="l00223"></a><a class="code" href="classEnrollRes.html#m12">00223</a>     <span class="keywordtype">float</span> total_aid;                              <span class="comment">// for all student level // ($000)</span>
<a name="l00224"></a><a class="code" href="classEnrollRes.html#m14">00224</a>     <span class="keywordtype">int</span> total_applications[<a class="code" href="Ostudent_8h.html#a0">MAX_STUDENT_LEVEL</a>], total_offers[<a class="code" href="Ostudent_8h.html#a0">MAX_STUDENT_LEVEL</a>], total_matrics[<a class="code" href="Ostudent_8h.html#a0">MAX_STUDENT_LEVEL</a>];
00225 
00226     <span class="comment">// rates in 0.999 for 99.9% format;  ug_applications_rate &amp; ug_yield_rate defined in School will not be updated</span>
<a name="l00227"></a><a class="code" href="classEnrollRes.html#m17">00227</a>     <span class="keywordtype">float</span> applications_rate[<a class="code" href="Ostudent_8h.html#a0">MAX_STUDENT_LEVEL</a>], cur_yield_rate[<a class="code" href="Ostudent_8h.html#a0">MAX_STUDENT_LEVEL</a>];
<a name="l00228"></a><a class="code" href="classEnrollRes.html#m18">00228</a>     <span class="keywordtype">float</span> offers_rate[<a class="code" href="Ostudent_8h.html#a0">MAX_STUDENT_LEVEL</a>];
00229 
<a name="l00230"></a><a class="code" href="classEnrollRes.html#m19">00230</a>     <span class="keywordtype">int</span> talent_average[<a class="code" href="Ostudent_8h.html#a34a12">MAX_STUDENT_LEVEL_N_TOTAL</a>][<a class="code" href="Ostudent_8h.html#a39a25">TALENT_VAR_COUNT</a>];
00231     <span class="comment">//99 -&gt; 99%</span>
<a name="l00232"></a><a class="code" href="classEnrollRes.html#m20">00232</a>     <span class="keywordtype">float</span> overall_yield_rate, overall_offers_rate, overall_apps_rate;
00233 
00234     <span class="comment">// ##### Begin MArco ##### //</span>
00235 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00236 <span class="preprocessor"></span>    <span class="keywordtype">float</span> initial_offers_rate[<a class="code" href="Ostudent_8h.html#a0">MAX_STUDENT_LEVEL</a>];
00237     <span class="keywordtype">float</span> initial_cur_yield_rate[<a class="code" href="Ostudent_8h.html#a0">MAX_STUDENT_LEVEL</a>];
00238     <span class="keywordtype">int</span> initial_matrics_top_athletes;
00239 <span class="preprocessor">#endif</span>
00240 <span class="preprocessor"></span>    <span class="comment">// ##### End MArco ##### //</span>
00241 
00242     <span class="comment">//----- intermediate vars -----//</span>
00243 <span class="keyword">private</span>:
00244     <span class="comment">// adjusted to thousands of dollars</span>
00245     <span class="keywordtype">float</span> max_aid;
00246     <span class="keywordtype">float</span> need_lower, need_upper;
00247     <span class="keywordtype">float</span> merit_lower[<a class="code" href="Ostudent_8h.html#a0">MAX_STUDENT_LEVEL</a>], merit_upper[<a class="code" href="Ostudent_8h.html#a0">MAX_STUDENT_LEVEL</a>];
00248 
00249     <span class="keywordtype">float</span> fraction_on_aid[<a class="code" href="Oenroll_8h.html#a32a12">MINORITY_GROUP_COUNT</a>];
00250     <span class="keywordtype">int</span> average_aid[<a class="code" href="Oenroll_8h.html#a32a12">MINORITY_GROUP_COUNT</a>];
00251 
00252     <span class="comment">// for storing result of calc_student_pref()</span>
00253     <span class="keywordtype">float</span> pref_weight_array[<a class="code" href="Oenroll_8h.html#a30a3">INSTITU_SEGMENT_COUNT</a>];
00254 <span class="keyword">public</span>:
<a name="l00255"></a><a class="code" href="classEnrollRes.html#m23">00255</a>     <a class="code" href="structEnrollDataSL1.html">EnrollDataSL1</a> enroll_data_sl1[<a class="code" href="Oenroll_8h.html#a31a10">STUDENT_SUBSEGMENT_COUNT</a>][<a class="code" href="Oenroll_8h.html#a31a9">STUDENT_SEGMENT_COUNT</a>];
<a name="l00256"></a><a class="code" href="classEnrollRes.html#m24">00256</a>     <a class="code" href="structEnrollData.html">EnrollData</a>    enroll_data_sls[<a class="code" href="Oenroll_8h.html#a31a8">MAX_STUDENT_LEVEL_NO_SL1</a>][<a class="code" href="Oenroll_8h.html#a31a10">STUDENT_SUBSEGMENT_COUNT</a>];
00257 
00258 <span class="keyword">private</span>:
00259 
00260     <span class="comment">//----- constants -----//</span>
00261 
00262     <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">float</span>  yield_latency[<a class="code" href="Ostudent_8h.html#a0">MAX_STUDENT_LEVEL</a>];
00263     <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">float</span>  apps_latency[<a class="code" href="Ostudent_8h.html#a0">MAX_STUDENT_LEVEL</a>];
00264     <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">float</span>  aidMinMultipliers[<a class="code" href="Oenroll_8h.html#a1">PRIORITY_LEVEL_COUNT</a>];
00265 
00266     <span class="comment">//-------- define constants for the calc_applications and matriculations ----------//</span>
00267     <span class="comment">// s-function parameters from R33:35 in HE.STU.pref.xls</span>
00268     <span class="keywordtype">float</span> s_lower_bound;
00269     <span class="keywordtype">float</span> s_upper_bound;
00270     <span class="keywordtype">float</span> s_slope;
00271 
00272     <span class="comment">// see R31 in HE.STU.pref.xls</span>
00273     <span class="keywordtype">bool</span>  pref_special_case(<span class="keywordtype">int</span> x)  { <span class="keywordflow">return</span> ( x==5 || x==7 || x==9 || x==15 || x==16 );  };
00274 
00275     <span class="keywordtype">float</span> chance_avg;
00276     <span class="keywordtype">float</span> chance_sd;
00277     <span class="keywordtype">float</span> fraction_merit_top;
00278 
00279 <span class="keyword">private</span>:
00280     <span class="keywordtype">void</span>  init_data_sl1();
00281     <span class="keywordtype">void</span>  calc_talent_student_db();
00282     <span class="keywordtype">void</span>  calc_student_pref();                    <span class="comment">// for init_data_sl1</span>
00283     <span class="keywordtype">void</span>  calc_app_yield();                       <span class="comment">// for init_data_sl1</span>
00284 
00285 <span class="keyword">public</span>:
00286     <span class="keywordtype">void</span>  calc_enroll_applications();
00287     <span class="keywordtype">void</span>  calc_enroll_offers();
00288     <span class="keywordtype">void</span>  calc_enroll_matriculations();
00289 <span class="keyword">private</span>:
00290     <span class="keywordtype">void</span>  calc_post_enroll();
00291     <span class="keywordtype">void</span>  calc_total_aid();
00292     <span class="keywordtype">void</span>  calc_post_enroll_adjust_aid_all_sls();
00293 <span class="keyword">public</span>:
00294     <span class="keywordtype">void</span>  update_enroll_history(<span class="keywordtype">char</span> noshift=0);
00295 
00296     <span class="keywordtype">float</span> calc_an_aid(<a class="code" href="classStudent.html">Student</a> *stuPtr);
00297     <span class="keywordtype">void</span>  calc_a_talent(<span class="keywordtype">float</span> talentArr[<a class="code" href="Ostudent_8h.html#a39a25">TALENT_VAR_COUNT</a>], <span class="keywordtype">char</span> sl, <span class="keywordtype">char</span> subSeg, <span class="keywordtype">char</span> seg=0);
00298 
00299     <span class="comment">// ##### begin Marco ##### //</span>
00300 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00301 <span class="preprocessor"></span>    <span class="keywordtype">void</span> save_initial_data();
00302 <span class="preprocessor">#endif</span>
00303 <span class="preprocessor"></span>    <span class="comment">// ##### End Marco ##### //</span>
00304 
00305     <span class="comment">//----------------------------------------------------//</span>
00306     <span class="comment">//-- data and methods for PGI enrollment sl2-5              ---//</span>
00307     <span class="comment">//----------------------------------------------------//</span>
00308 
00309     <span class="comment">//intermediate vars</span>
00310 <span class="keyword">private</span>:
00311     <span class="comment">// a array read from db</span>
00312 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00313 <span class="preprocessor"></span>    <span class="keywordtype">float</span> preference_array2_sls[<a class="code" href="Oenroll_8h.html#a31a8">MAX_STUDENT_LEVEL_NO_SL1</a>][<a class="code" href="Oenroll_8h.html#a30a7">SCHOOL_CONTROL_COUNT</a>][<a class="code" href="Oenroll_8h.html#a32a12">MINORITY_GROUP_COUNT</a>][<a class="code" href="Oenroll_8h.html#a30a6">PREFERECNE_COUNT2</a>+1];
00314 <span class="preprocessor">#else</span>
00315 <span class="preprocessor"></span>    <span class="keywordtype">float</span> preference_array2_sls[<a class="code" href="Oenroll_8h.html#a31a8">MAX_STUDENT_LEVEL_NO_SL1</a>][<a class="code" href="Oenroll_8h.html#a30a7">SCHOOL_CONTROL_COUNT</a>][<a class="code" href="Oenroll_8h.html#a32a12">MINORITY_GROUP_COUNT</a>][<a class="code" href="Oenroll_8h.html#a30a6">PREFERECNE_COUNT2</a>];
00316 <span class="preprocessor">#endif</span>
00317 <span class="preprocessor"></span>    <span class="keywordtype">float</span> min_academic_rating[<a class="code" href="Oenroll_8h.html#a31a8">MAX_STUDENT_LEVEL_NO_SL1</a>];
00318 
00319 <span class="keyword">public</span>:                                         <span class="comment">// chwg0621</span>
<a name="l00320"></a><a class="code" href="classEnrollRes.html#m26">00320</a>     <span class="keywordtype">float</span> app_multiplier[<a class="code" href="Ostudent_8h.html#a0">MAX_STUDENT_LEVEL</a>], yield_multiplier[<a class="code" href="Ostudent_8h.html#a0">MAX_STUDENT_LEVEL</a>];
00321 
00322 <span class="keyword">private</span>:
00323     <span class="keywordtype">void</span>  init_data_sls(<span class="keywordtype">char</span> sl);
00324     <span class="keywordtype">void</span>  calc_app_multiplier(<span class="keywordtype">char</span> sl);
00325 
00326 <span class="keyword">public</span>:                                         <span class="comment">// chwg0621</span>
00327     <span class="keywordtype">void</span>  enroll_main_sls(<span class="keywordtype">char</span> sl);
00328     <span class="keywordtype">void</span>  update_student_intake();
00329 <span class="keyword">private</span>:
00330     <span class="keywordtype">void</span>  calc_post_enroll_sls(<span class="keywordtype">char</span> sl);
00331     <span class="keywordtype">void</span>  calc_enroll_aid_sls(<span class="keywordtype">char</span> sl);
00332 
00333     <span class="comment">//----------------------------------------------------//</span>
00334     <span class="comment">//-- data and methods for player's input and output --//</span>
00335     <span class="comment">//----------------------------------------------------//</span>
00336 <span class="keyword">public</span>:
00337     <span class="comment">// 1. player input for calc_*_aid</span>
<a name="l00338"></a><a class="code" href="classEnrollRes.html#m27">00338</a>     <span class="keywordtype">float</span> fraction_sl1_offered_merit_aid;
<a name="l00339"></a><a class="code" href="classEnrollRes.html#m28">00339</a>     <span class="keywordtype">float</span> fraction_sl2_offered_aid;
<a name="l00340"></a><a class="code" href="classEnrollRes.html#m29">00340</a>     <span class="keywordtype">float</span> fraction_sl5_offered_aid;               <span class="comment">// askbill to add if</span>
<a name="l00341"></a><a class="code" href="classEnrollRes.html#m30">00341</a>     <span class="keywordtype">char</span>  minority_aid_special;                   <span class="comment">// (* 2 = high; 1=medium; 0 = none *) // see SET_HIGH</span>
<a name="l00342"></a><a class="code" href="classEnrollRes.html#m31">00342</a>     <span class="keywordtype">char</span>  athlete_aid_special;                    <span class="comment">// (* 2 = high; 1=medium; 0 = none *)</span>
00343 
00344     <span class="comment">// 2. player input for calc_enroll_offers (admissions)</span>
<a name="l00345"></a><a class="code" href="classEnrollRes.html#m32">00345</a>     <span class="keywordtype">char</span>  offers_priority[<a class="code" href="Ostudent_8h.html#a39a25">TALENT_VAR_COUNT</a>];      <span class="comment">// = [0,MAX_TALENT_PRIORITY_LEVEL]</span>
<a name="l00346"></a><a class="code" href="classEnrollRes.html#m33">00346</a>     <span class="keywordtype">char</span>  minority_offers_special;                <span class="comment">// (* 2 = high; 1=medium; 0 = none *)</span>
<a name="l00347"></a><a class="code" href="classEnrollRes.html#m34">00347</a>     <span class="keywordtype">char</span>  athlete_offers_special;                 <span class="comment">// (* 2 = high; 1=medium; 0 = none *)</span>
00348 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00349 <span class="preprocessor"></span>    <span class="keywordtype">char</span>  distance_learner_acceptance;            <span class="comment">// (* 2 = actively seek; 1 = accept; 0 = prohibit *)</span>
00350 <span class="preprocessor">#endif</span>
00351 <span class="preprocessor"></span>
00352     <span class="comment">// 3. player input for generate student sims</span>
<a name="l00353"></a><a class="code" href="classEnrollRes.html#m35">00353</a>     <span class="keywordtype">float</span> fraction_need_covered;
<a name="l00354"></a><a class="code" href="classEnrollRes.html#m36">00354</a>     <span class="keywordtype">bool</span>  aid_budget_enforced;                    <span class="comment">//temp not used</span>
00355 
00356     <span class="comment">// 4. for screen Overview</span>
<a name="l00357"></a><a class="code" href="classEnrollRes.html#m37">00357</a>     <span class="keywordtype">int</span> target_student_intake[<a class="code" href="Ostudent_8h.html#a0">MAX_STUDENT_LEVEL</a>];
00358     <span class="comment">// chwg0810</span>
<a name="l00359"></a><a class="code" href="classEnrollRes.html#m38">00359</a>     <span class="keywordtype">double</span> target_student_intake_ratio[<a class="code" href="Ostudent_8h.html#a0">MAX_STUDENT_LEVEL</a>];
00360     <span class="comment">//## chea 040999 store the value for the last year target ribbon</span>
<a name="l00361"></a><a class="code" href="classEnrollRes.html#m39">00361</a>     <span class="keywordtype">int</span> last_year_target_student_intake[<a class="code" href="Ostudent_8h.html#a0">MAX_STUDENT_LEVEL</a>];
00362 
00363 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00364 <span class="preprocessor"></span>    <span class="keywordtype">int</span> target_enrollment[<a class="code" href="Ostudent_8h.html#a0">MAX_STUDENT_LEVEL</a>];
00365 <span class="preprocessor">#endif</span>
00366 <span class="preprocessor"></span>
00367     <span class="comment">// values for interface output</span>
<a name="l00368"></a><a class="code" href="classEnrollRes.html#m40">00368</a>     <span class="keywordtype">int</span> overall_percent_minority;
<a name="l00369"></a><a class="code" href="classEnrollRes.html#m41">00369</a>     <span class="keywordtype">int</span> overall_percent_female;
00370 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00371 <span class="preprocessor"></span>    <span class="keywordtype">int</span> overall_percent_minority_female;          <span class="comment">// for new formula of diversity</span>
00372     <span class="keywordtype">int</span> overall_gender_ethnic_group_student_count[<a class="code" href="Gamedef_8h.html#a74a26">GENDER_ETHNIC_TYPE_COUNT</a>];
00373 <span class="preprocessor">#endif</span>
<a name="l00374"></a><a class="code" href="classEnrollRes.html#m42">00374</a> <span class="preprocessor"></span>    <span class="keywordtype">int</span> overall_percent_minority_matric;
<a name="l00375"></a><a class="code" href="classEnrollRes.html#m43">00375</a>     <span class="keywordtype">int</span> matric_history[<a class="code" href="Ostudent_8h.html#a34a12">MAX_STUDENT_LEVEL_N_TOTAL</a>][<a class="code" href="Oenroll_8h.html#a34a26">HISTORY_GRAPH_COUNT_GENERAL</a>][HISTORY_YEAR_COUNT];
00376 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00377 <span class="preprocessor"></span>    <span class="keywordtype">int</span> distance_credits_provided_history[HISTORY_TRIMESTER_COUNT];
00378 <span class="preprocessor">#endif</span>
00379 <span class="preprocessor"></span>
00380 <span class="keyword">private</span>:
00381     <span class="keywordtype">void</span>  calc_enroll_aid();
00382     <span class="keywordtype">void</span>  player_change_offers_priority();
00383     <span class="keywordtype">void</span>  calc_doctoral_intake_target();
00384 
00385     <span class="keywordtype">float</span> calc_need_aid(<span class="keywordtype">float</span> x);
00386     <span class="keywordtype">float</span> calc_merit_aid(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> base);
00387     <span class="keywordtype">float</span> calc_merit_aid_sls(<span class="keywordtype">char</span> sl, <span class="keywordtype">float</span> x, <span class="keywordtype">float</span> base);
00388     <span class="keywordtype">void</span>  adjust_fraction_merit_aid(<span class="keywordtype">float</span>&amp; fraction);
00389     <span class="keywordtype">float</span> calc_academic_rating(<span class="keywordtype">char</span> sl, <span class="keywordtype">char</span> subSeg, <span class="keywordtype">float</span> academicRating, <span class="keywordtype">float</span> base);
00390 };
00391 
<a name="l00392"></a><a class="code" href="Oenroll_8h.html#a2">00392</a> <span class="keyword">extern</span> <a class="code" href="classEnrollRes.html">EnrollRes</a> <a class="code" href="Oenroll_8h.html#a2">enroll_res</a>;
00393 <span class="preprocessor">#endif                                            //ifndef</span>
</pre></div><hr><address style="align: right;"><small>Generated on Fri Aug 23 01:37:28 2002 for VirtualU by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.17 </small></address>
</body>
</html>
