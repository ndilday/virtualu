<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Onewsadd.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.17 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>Onewsadd.cpp</h1><a href="Onewsadd_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">//Filename    : ONEWS2.CPP</span>
00002 <span class="comment">//Description : News adding functions for NewsArray::add_news()</span>
00003 <span class="comment">//Owner                 : Fred</span>
00004 
00005 <span class="preprocessor">#include &lt;OAUDIO.H&gt;</span>
00006 <span class="preprocessor">#include &lt;<a class="code" href="ODATE_8H.html">ODATE.H</a>&gt;</span>
00007 <span class="preprocessor">#include &lt;OCONFIG.H&gt;</span>
00008 <span class="preprocessor">#include &lt;OSYS.H&gt;</span>
00009 <span class="preprocessor">#include &lt;OINFO.H&gt;</span>
00010 <span class="preprocessor">#include &lt;OMATH.H&gt;</span>
00011 <span class="preprocessor">#include &lt;ONEWS.H&gt;</span>
00012 <span class="preprocessor">#include &lt;OCHANCE.H&gt;</span>
00013 <span class="preprocessor">#include &lt;OFINANCE.H&gt;</span>
00014 <span class="preprocessor">#include &lt;OENROLL.H&gt;</span>
00015 <span class="preprocessor">#include &lt;OPSCHOOL.H&gt;</span>
00016 <span class="preprocessor">#include &lt;OATHLETI.H&gt;</span>
00017 <span class="preprocessor">#include &lt;ODEVELOP.H&gt;</span>
00018 <span class="preprocessor">#include &lt;ODEPT.H&gt;</span>
00019 
00020 <span class="comment">//------ Begin of function NewsArray::diplomacy -----//</span>
<a name="l00027"></a><a class="code" href="classNewsArray.html#a12">00027</a> <span class="comment">void NewsArray::alumni_die(int gender, int bequest) {</span>
00028     <span class="comment">//----------- add news --------------//</span>
00029 
00030     <a class="code" href="structNews.html">News</a>* newsPtr = add_news( <a class="code" href="Onews_8h.html#a51a13">NEWS_ALUMNI_DIE</a> );
00031 
00032     <span class="keywordflow">if</span>( !newsPtr )
00033         <span class="keywordflow">return</span>;
00034 
00035     newsPtr-&gt;<a class="code" href="structNews.html#m5">short_para1</a> = gender;
00036     newsPtr-&gt;<a class="code" href="structNews.html#m6">short_para2</a> = bequest;
00037 
00038     <a class="code" href="ALL_8H.html#a0">err_when</a>(newsPtr-&gt;<a class="code" href="structNews.html#m5">short_para1</a>&lt;0);
00039 }
00040 
00041 <span class="comment">//------- End of function NewsArray::diplomacy -----//</span>
00042 
00043 <span class="comment">//------ Begin of function NewsArray::rape_in_campus -----//</span>
<a name="l00047"></a><a class="code" href="classNewsArray.html#a13">00047</a> <span class="comment">void NewsArray::rape_in_campus() {</span>
00048     <a class="code" href="structNews.html">News</a>* newsPtr = add_news( <a class="code" href="Onews_8h.html#a51a14">NEWS_RAPE_IN_CAMPUS</a> );
00049 
00050     <span class="keywordflow">if</span>( !newsPtr )
00051         <span class="keywordflow">return</span>;
00052 }
00053 
00054 <span class="comment">//------- End of function NewsArray::rape_in_campus -----//</span>
00055 
00056 <span class="comment">//------ Begin of function NewsArray::retrofit_facilities -----//</span>
<a name="l00060"></a><a class="code" href="classNewsArray.html#a14">00060</a> <span class="comment">void NewsArray::retrofit_facilities(int dollarLost) {</span>
00061     <a class="code" href="structNews.html">News</a>* newsPtr = add_news( <a class="code" href="Onews_8h.html#a51a15">NEWS_RETROFIT_FACILITIES</a> );
00062 
00063     <span class="keywordflow">if</span>( !newsPtr )
00064         <span class="keywordflow">return</span>;
00065 
00066     newsPtr-&gt;<a class="code" href="structNews.html#m5">short_para1</a> = dollarLost;
00067 
00068     <a class="code" href="ALL_8H.html#a0">err_when</a>(newsPtr-&gt;<a class="code" href="structNews.html#m5">short_para1</a> &lt;= 0 );
00069 }
00070 
00071 <span class="comment">//------- End of function NewsArray::retrofit_facilities -----//</span>
00072 
00073 <span class="comment">//------ Begin of function NewsArray::earth_quake -----//</span>
<a name="l00077"></a><a class="code" href="classNewsArray.html#a15">00077</a> <span class="comment">void NewsArray::earth_quake() {</span>
00078     <a class="code" href="structNews.html">News</a>* newsPtr = add_news( <a class="code" href="Onews_8h.html#a51a16">NEWS_EARTH_QUAKE</a> );
00079 
00080     <span class="keywordflow">if</span>( !newsPtr )
00081         <span class="keywordflow">return</span>;
00082 }
00083 
00084 <span class="comment">//------- End of function NewsArray::earth_quake -----//</span>
00085 
00086 <span class="comment">//------ Begin of function NewsArray::congress_research -----//</span>
<a name="l00090"></a><a class="code" href="classNewsArray.html#a27">00090</a> <span class="comment">void NewsArray::congress_research(char dir) {</span>
00091     <a class="code" href="structNews.html">News</a>* newsPtr = add_news( <a class="code" href="Onews_8h.html#a51a17">NEWS_CONGRESS_RESEARCH</a> );
00092 
00093     <span class="keywordflow">if</span>( !newsPtr )
00094         <span class="keywordflow">return</span>;
00095 
00096     newsPtr-&gt;<a class="code" href="structNews.html#m5">short_para1</a> = (dir &gt;= 0) ? 1 : -1;
00097 }
00098 
00099 <span class="comment">//------- End of function NewsArray::congress_research -----//</span>
00100 
00101 <span class="comment">//## chea begin 160699</span>
00102 <span class="comment">//------ Begin of function NewsArray::risky_research -----//</span>
<a name="l00106"></a><a class="code" href="classNewsArray.html#a16">00106</a> <span class="comment">void NewsArray::risky_research(int moneyLost) {</span>
00107     <a class="code" href="structNews.html">News</a>* newsPtr = add_news( <a class="code" href="Onews_8h.html#a51a22">NEWS_RISKY_RESEARCH</a> );
00108 
00109     <span class="keywordflow">if</span>( !newsPtr )
00110         <span class="keywordflow">return</span>;
00111 
00112     newsPtr-&gt;<a class="code" href="structNews.html#m5">short_para1</a> = moneyLost;
00113 }
00114 
00115 <span class="comment">//------- End of function NewsArray::risky_research -----//</span>
00116 <span class="comment">//## chea end 160699</span>
00117 
00118 <span class="comment">//## chea begin 170699</span>
00119 <span class="comment">//------ Begin of function NewsArray::scandal_in_athletics -----//</span>
<a name="l00123"></a><a class="code" href="classNewsArray.html#a17">00123</a> <span class="comment">void NewsArray::scandal_in_athletics() {</span>
00124     <a class="code" href="structNews.html">News</a>* newsPtr = add_news( <a class="code" href="Onews_8h.html#a51a23">NEWS_SCANDAL_IN_ATHLETICS</a> );
00125 
00126     <span class="keywordflow">if</span>( !newsPtr )
00127         <span class="keywordflow">return</span>;
00128 
00129 }
00130 
00131 <span class="comment">//------- End of function NewsArray::scandal_in_athletics -----//</span>
00132 <span class="comment">//## chea end 170699</span>
00133 
00134 <span class="comment">//## chwg begin 170699</span>
00135 <span class="comment">//------ Begin of function NewsArray::plagiarism_scandal -----//</span>
<a name="l00139"></a><a class="code" href="classNewsArray.html#a22">00139</a> <span class="comment">void NewsArray::plagiarism_scandal(int dismissedStudCount) {</span>
00140     <a class="code" href="structNews.html">News</a>* newsPtr = add_news( <a class="code" href="Onews_8h.html#a51a28">NEWS_PLAGIARISM_SCANDAL</a> );
00141 
00142     <span class="keywordflow">if</span>( !newsPtr )
00143         <span class="keywordflow">return</span>;
00144 
00145     newsPtr-&gt;<a class="code" href="structNews.html#m5">short_para1</a> = dismissedStudCount;
00146 }
00147 
00148 <span class="comment">//------- End of function NewsArray::plagiarism_scandal -----//</span>
00149 <span class="comment">//## chwg end 170699</span>
00150 
00151 <span class="comment">//## chwg begin 190699</span>
00152 <span class="comment">//------ Begin of function NewsArray::for_profit_competition -----//</span>
<a name="l00156"></a><a class="code" href="classNewsArray.html#a23">00156</a> <span class="comment">void NewsArray::for_profit_competition() {</span>
00157     <a class="code" href="structNews.html">News</a>* newsPtr = add_news( <a class="code" href="Onews_8h.html#a51a29">NEWS_FOR_PROFIT_COMPETITION</a> );
00158 
00159     <span class="keywordflow">if</span>( !newsPtr )
00160         <span class="keywordflow">return</span>;
00161 
00162 }
00163 
00164 <span class="comment">//------- End of function NewsArray::for_profit_competition -----//</span>
00165 <span class="comment">//## chwg end 190699</span>
00166 
00167 <span class="comment">//## chwg begin 210699</span>
00168 <span class="comment">//------ Begin of function NewsArray::minority_student_percentage_falls -----//</span>
<a name="l00172"></a><a class="code" href="classNewsArray.html#a24">00172</a> <span class="comment">void NewsArray::minority_student_percentage_falls() {</span>
00173     <a class="code" href="structNews.html">News</a>* newsPtr = add_news( <a class="code" href="Onews_8h.html#a51a30">NEWS_MINORITY_STUDENT_PERCENTAGE_FALLS</a> );
00174 
00175     <span class="keywordflow">if</span>( !newsPtr )
00176         <span class="keywordflow">return</span>;
00177 
00178 }
00179 
00180 <span class="comment">//------- End of function NewsArray::minority_student_percentage_falls -----//</span>
00181 <span class="comment">//## chwg end 210699</span>
00182 
00183 <span class="comment">//## chwg begin 210699</span>
00184 <span class="comment">//------ Begin of function NewsArray::successful_grad -----//</span>
<a name="l00188"></a><a class="code" href="classNewsArray.html#a25">00188</a> <span class="comment">void NewsArray::successful_grad() {</span>
00189     <a class="code" href="structNews.html">News</a>* newsPtr = add_news( <a class="code" href="Onews_8h.html#a51a31">NEWS_SUCCESSFUL_GRAD</a> );
00190 
00191     <span class="keywordflow">if</span>( !newsPtr )
00192         <span class="keywordflow">return</span>;
00193 
00194 }
00195 
00196 <span class="comment">//------- End of function NewsArray::successful_grad -----//</span>
00197 <span class="comment">//## chwg end 210699</span>
00198 
00199 <span class="comment">//## chwg begin 210699</span>
00200 <span class="comment">//------ Begin of function NewsArray::media_obtain_infomation -----//</span>
<a name="l00204"></a><a class="code" href="classNewsArray.html#a26">00204</a> <span class="comment">void NewsArray::media_obtain_information(float trueCostEducation) {</span>
00205     <a class="code" href="structNews.html">News</a>* newsPtr = add_news( <a class="code" href="Onews_8h.html#a51a32">NEWS_MEDIA_OBTAIN_INFORMATION</a> );
00206 
00207     <span class="keywordflow">if</span>( !newsPtr )
00208         <span class="keywordflow">return</span>;
00209 
00210     newsPtr-&gt;<a class="code" href="structNews.html#m12">float_para1</a> = trueCostEducation;
00211 }
00212 
00213 <span class="comment">//------- End of function NewsArray::media_obtain_infomation -----//</span>
00214 <span class="comment">//## chwg end 210699</span>
00215 
00216 <span class="comment">//------ Begin of research_prize -------//</span>
00217 <span class="comment">//</span>
00218 <span class="comment">// &lt;int&gt; deptRecno    - the recno of the department that receives the prize.</span>
00219 <span class="comment">// &lt;int&gt; facultyRecno - the recno of the faculty who receives the prize.</span>
00220 <span class="comment">//</span>
<a name="l00221"></a><a class="code" href="classNewsArray.html#a18">00221</a> <span class="keywordtype">void</span> <a class="code" href="classNewsArray.html#a18">NewsArray::research_prize</a>(<span class="keywordtype">int</span> deptRecno, <span class="keywordtype">int</span> facultyRecno) {
00222     <a class="code" href="structNews.html">News</a>* newsPtr = <a class="code" href="classNewsArray.html#a10">add_news</a>( <a class="code" href="Onews_8h.html#a51a24">NEWS_RESEARCH_PRIZE</a> );
00223 
00224     <span class="keywordflow">if</span>( !newsPtr )
00225         <span class="keywordflow">return</span>;
00226 
00227     newsPtr-&gt;<a class="code" href="structNews.html#m5">short_para1</a> = deptRecno;
00228     newsPtr-&gt;<a class="code" href="structNews.html#m6">short_para2</a> = facultyRecno;
00229 
00230 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00231 <span class="preprocessor"></span>    <a class="code" href="classDepartment.html">Department</a>* deptPtr = department_array[deptRecno];
00232     <a class="code" href="classFaculty.html">Faculty</a>* facultyPtr = deptPtr-&gt;<a class="code" href="classDepartment.html#m0">faculty_array</a>[facultyRecno];
00233     newsPtr-&gt;<a class="code" href="structNews.html#m7">short_para3</a> = facultyPtr-&gt;<a class="code" href="classFaculty.html#m3">first_name_id</a>;
00234     newsPtr-&gt;<a class="code" href="structNews.html#m8">short_para4</a> = facultyPtr-&gt;<a class="code" href="classFaculty.html#m4">middle_name_id</a>;
00235     newsPtr-&gt;<a class="code" href="structNews.html#m9">short_para5</a> = facultyPtr-&gt;<a class="code" href="classFaculty.html#m5">last_name_id</a>;
00236 <span class="preprocessor">#endif</span>
00237 <span class="preprocessor"></span>}
00238 
00239 <span class="comment">//------ End of research_prize------//</span>
00240 
00241 <span class="comment">// ------ Begin of technology_transfer------------//</span>
00242 <span class="comment">//</span>
00243 <span class="comment">// &lt;int&gt;                the recno of the department</span>
00244 <span class="comment">// &lt;float&gt;  the amount of technology transfer.</span>
00245 <span class="comment">//</span>
<a name="l00246"></a><a class="code" href="classNewsArray.html#a19">00246</a> <span class="keywordtype">void</span> <a class="code" href="classNewsArray.html#a19">NewsArray::technology_transfer</a>(<span class="keywordtype">int</span> deptRecno, <span class="keywordtype">float</span> transferAmount) {
00247     <a class="code" href="structNews.html">News</a>* newsPtr = <a class="code" href="classNewsArray.html#a10">add_news</a>( <a class="code" href="Onews_8h.html#a51a25">NEWS_TECHNOLOGY_TRANSFER</a> );
00248 
00249     <span class="keywordflow">if</span>( !newsPtr )
00250         <span class="keywordflow">return</span>;
00251 
00252     newsPtr-&gt;<a class="code" href="structNews.html#m5">short_para1</a> = deptRecno;
00253     newsPtr-&gt;<a class="code" href="structNews.html#m12">float_para1</a> = transferAmount;
00254 }
00255 
00256 <span class="comment">//------ End of technology_transfer------//</span>
00257 
00258 <span class="comment">// ------ Begin of capital_campaign------------//</span>
<a name="l00259"></a><a class="code" href="classNewsArray.html#a20">00259</a> <span class="keywordtype">void</span> <a class="code" href="classNewsArray.html#a20">NewsArray::capital_campaign</a>() {
00260     <a class="code" href="structNews.html">News</a>* newsPtr = <a class="code" href="classNewsArray.html#a10">add_news</a>( <a class="code" href="Onews_8h.html#a51a26">NEWS_CAPITAL_CAMPAIGN</a> );
00261 
00262     <span class="keywordflow">if</span>( !newsPtr )
00263         <span class="keywordflow">return</span>;
00264 }
00265 
00266 <span class="comment">//------ End of capital_campaign------//</span>
00267 
00268 <span class="comment">// ------ Begin of student_loans------------//</span>
<a name="l00269"></a><a class="code" href="classNewsArray.html#a21">00269</a> <span class="keywordtype">void</span> <a class="code" href="classNewsArray.html#a21">NewsArray::student_loans</a>(<span class="keywordtype">int</span> is_increase) {
00270     <a class="code" href="structNews.html">News</a>* newsPtr = <a class="code" href="classNewsArray.html#a10">add_news</a>( <a class="code" href="Onews_8h.html#a51a27">NEWS_STUDENT_LOANS</a> );
00271 
00272     <span class="keywordflow">if</span>( !newsPtr )
00273         <span class="keywordflow">return</span>;
00274 
00275     newsPtr-&gt;<a class="code" href="structNews.html#m5">short_para1</a> = is_increase;
00276 }
00277 
00278 <span class="comment">//------ End of student_loans------//</span>
00279 
00280 <span class="comment">//------ Begin of function NewsArray::stock_market -----//</span>
<a name="l00284"></a><a class="code" href="classNewsArray.html#a28">00284</a> <span class="comment">void NewsArray::stock_market(char dir) {</span>
00285     <a class="code" href="structNews.html">News</a>* newsPtr = add_news( <a class="code" href="Onews_8h.html#a51a18">NEWS_STOCK_MARKET</a> );
00286 
00287     <span class="keywordflow">if</span>( !newsPtr )
00288         <span class="keywordflow">return</span>;
00289 
00290     newsPtr-&gt;<a class="code" href="structNews.html#m5">short_para1</a> = (dir &gt;= 0) ? 1 : -1;
00291 }
00292 
00293 <span class="comment">//------- End of function NewsArray::stock_market -----//</span>
00294 
00295 <span class="comment">//------ Begin of function NewsArray::scandalous_fund_use -----//</span>
<a name="l00299"></a><a class="code" href="classNewsArray.html#a29">00299</a> <span class="comment">void NewsArray::scandalous_fund_use(int dollarLost) {</span>
00300     <a class="code" href="structNews.html">News</a>* newsPtr = add_news( <a class="code" href="Onews_8h.html#a51a19">NEWS_SCANDALOUS_FUND_USE</a> );
00301 
00302     <span class="keywordflow">if</span>( !newsPtr )
00303         <span class="keywordflow">return</span>;
00304 
00305     newsPtr-&gt;<a class="code" href="structNews.html#m5">short_para1</a> = dollarLost;
00306 }
00307 
00308 <span class="comment">//------- End of function NewsArray::scandalous_fund_use -----//</span>
00309 
00310 <span class="comment">//------ Begin of function NewsArray::new_governor -----//</span>
<a name="l00314"></a><a class="code" href="classNewsArray.html#a30">00314</a> <span class="comment">void NewsArray::new_governor(char direction) {</span>
00315     <a class="code" href="structNews.html">News</a>* newsPtr = add_news( <a class="code" href="Onews_8h.html#a51a20">NEWS_NEW_GOVENOR</a> );
00316 
00317     <span class="keywordflow">if</span>( !newsPtr )
00318         <span class="keywordflow">return</span>;
00319 
00320     newsPtr-&gt;<a class="code" href="structNews.html#m5">short_para1</a> = direction;
00321 }
00322 
00323 <span class="comment">//------- End of function NewsArray::new_governor -----//</span>
00324 
00325 <span class="comment">//------ Begin of function NewsArray::court_limit_minority -----//</span>
<a name="l00327"></a><a class="code" href="classNewsArray.html#a31">00327</a> <span class="comment">void NewsArray::court_limit_minority() {</span>
00328     <a class="code" href="structNews.html">News</a>* newsPtr = add_news( <a class="code" href="Onews_8h.html#a51a21">NEWS_COURT_LIMIT_MINORITY</a> );
00329 
00330     <span class="keywordflow">if</span>( !newsPtr )
00331         <span class="keywordflow">return</span>;
00332 }
00333 
00334 <span class="comment">//------- End of function NewsArray::court_limit_minority -----//</span>
00335 
00336 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00337 <span class="preprocessor"></span><span class="comment">// short_para1 - opinion rating (1-6:R1-R6)</span>
00338 <span class="comment">// short_para2 - departmentRecno (-1 for institutional)</span>
00339 <span class="comment">// short_para3 - source of message(srcPara1), gender-ethnic group of student, faculty first_name_id for faculty</span>
00340 <span class="comment">// short_para4 - srcPara2, gender-ethnic group of student, faculty middle_name_id for faculty</span>
00341 <span class="comment">// short_para5 - srcPara3, gender-ethnic group of student, faculty last_name_id for faculty</span>
00342 <span class="comment">// short_para6 - srcPara4, gender-ethnic group of student, faculty rank_level</span>
00343 <span class="keywordtype">void</span> NewsArray::protagonist_message( <span class="keywordtype">int</span> protagonistId, <span class="keywordtype">int</span> rating, <span class="keywordtype">int</span> departmentRecno, <span class="keywordtype">int</span> srcPara1, <span class="keywordtype">short</span> srcPara2, <span class="keywordtype">short</span> srcPara3, <span class="keywordtype">short</span> srcPara4 ) {
00344     <span class="keywordtype">int</span> newsId = NEWS_PROTAGONIST_TRUSTEE_EVALUATION+protagonistId-1;
00345     <a class="code" href="ALL_8H.html#a0">err_when</a>( newsId &lt; NEWS_PROTAGONIST_TRUSTEE_EVALUATION || newsId &gt; NEWS_PROTAGONIST_CLASS_SIZE_DEVIATION );
00346 
00347     <a class="code" href="structNews.html">News</a> *newsPtr = <a class="code" href="classNewsArray.html#a10">add_news</a>( newsId );
00348     <span class="keywordflow">if</span>( !newsPtr )
00349         <span class="keywordflow">return</span>;
00350     newsPtr-&gt;<a class="code" href="structNews.html#m5">short_para1</a> = rating;
00351     newsPtr-&gt;<a class="code" href="structNews.html#m6">short_para2</a> = departmentRecno;
00352     newsPtr-&gt;<a class="code" href="structNews.html#m7">short_para3</a> = srcPara1;
00353     newsPtr-&gt;<a class="code" href="structNews.html#m8">short_para4</a> = srcPara2;
00354     newsPtr-&gt;<a class="code" href="structNews.html#m9">short_para5</a> = srcPara3;
00355     newsPtr-&gt;<a class="code" href="structNews.html#m10">short_para6</a> = srcPara4;
00356 }
00357 
00358 <span class="comment">// --- Begin of function NewsArray::bankruptcy_message_lv1 --- //</span>
00359 <span class="comment">//</span>
00360 <span class="keywordtype">void</span> NewsArray::bankruptcy_message_lv1() {
00361     <a class="code" href="structNews.html">News</a> *newsPtr = <a class="code" href="classNewsArray.html#a10">add_news</a>( NEWS_BANKRUPTCY_LV1 );
00362 
00363     <span class="keywordflow">if</span> ( !newsPtr )
00364         <span class="keywordflow">return</span>;
00365 }
00366 
00367 <span class="comment">//</span>
00368 <span class="comment">// --- End of function NewsArray::bankruptcy_message_lv1 --- //</span>
00369 
00370 <span class="comment">// --- Begin of function NewsArray::bankruptcy_message_lv2 --- //</span>
00371 <span class="comment">//</span>
00372 <span class="keywordtype">void</span> NewsArray::bankruptcy_message_lv2( <span class="keywordtype">int</span> monthsToBankruptcy ) {
00373     <a class="code" href="structNews.html">News</a> *newsPtr = <a class="code" href="classNewsArray.html#a10">add_news</a>( NEWS_BANKRUPTCY_LV2 );
00374 
00375     <span class="keywordflow">if</span> ( !newsPtr )
00376         <span class="keywordflow">return</span>;
00377 
00378     newsPtr-&gt;<a class="code" href="structNews.html#m5">short_para1</a> = monthsToBankruptcy;
00379 }
00380 
00381 <span class="comment">//</span>
00382 <span class="comment">// --- End of function NewsArray::bankruptcy_message_lv2 --- //</span>
00383 
00384 <span class="comment">// --- Begin of function NewsArray::bankruptcy_message_lv3 --- //</span>
00385 <span class="comment">//</span>
00386 <span class="keywordtype">void</span> NewsArray::bankruptcy_message_lv3( <span class="keywordtype">int</span> monthsToBankruptcy ) {
00387     <a class="code" href="structNews.html">News</a> *newsPtr = <a class="code" href="classNewsArray.html#a10">add_news</a>( NEWS_BANKRUPTCY_LV3 );
00388 
00389     <span class="keywordflow">if</span> ( !newsPtr )
00390         <span class="keywordflow">return</span>;
00391     newsPtr-&gt;<a class="code" href="structNews.html#m5">short_para1</a> = monthsToBankruptcy;
00392 }
00393 
00394 <span class="comment">//</span>
00395 <span class="comment">// --- End of function NewsArray::bankruptcy_message_lv3 --- //</span>
00396 <span class="preprocessor">#endif</span>
00397 <span class="preprocessor"></span>
00398 <span class="comment">//------ Begin of function NewsArray::football_game -----//</span>
<a name="l00402"></a><a class="code" href="classNewsArray.html#a35">00402</a> <span class="comment">void NewsArray::football_game(int numWins) {</span>
00403     <span class="keyword">const</span> <span class="keywordtype">int</span> numWinsRange = 3, numWinsMin = 9;
00404 
00405     <span class="keywordflow">if</span> ( numWins &lt; numWinsMin)
00406         <span class="keywordflow">return</span>;
00407 
00408     <span class="keywordflow">if</span>( chance_event.test_chance != <a class="code" href="Onews_8h.html#a51a38">NEWS_FOOTBALL_GAME</a> ) {
00409         <span class="keywordflow">if</span> ( player_school.chance_event_frequency == <a class="code" href="Gamedef_8h.html#a73a22">INPUT_LOW</a> || chance_event.football_game_bonus &gt; 0 )
00410             <span class="keywordflow">return</span>;
00411 
00412         <span class="comment">//      if (numWins &gt;= numWinsMin+numWinsRange)</span>
00413         <span class="comment">//              numWins = numWinsMin+numWinsRange-1;  //old idea this don't stop the pree after player win the title</span>
00414 
00415         <span class="comment">//## chea 141099 stop the pree after player win the title</span>
00416         <span class="keywordflow">if</span> ( numWins &gt; numWinsMin+numWinsRange )
00417             <span class="keywordflow">return</span>;
00418     }
00419     <span class="keywordflow">else</span>
00420         chance_event.test_chance = 0;
00421 
00422     <span class="comment">//---//</span>
00423 
00424     <a class="code" href="structNews.html">News</a>* newsPtr = add_news( <a class="code" href="Onews_8h.html#a51a38">NEWS_FOOTBALL_GAME</a> );
00425 
00426     <span class="keywordflow">if</span>( !newsPtr )
00427         <span class="keywordflow">return</span>;
00428 
00430     <span class="keyword">struct </span>DollarSet {
00431         <span class="keywordtype">float</span> min, avg, sd;
00432     };
00433 
00434     DollarSet dollarSet[numWinsRange] = { {         <span class="comment">// $ in million</span>
00435         1, 2, 0.5f
00436     }
00437                                           , {
00438                                               2, 4, 1
00439                                           }
00440                                           , {
00441                                               5, 10, 2.5f
00442                                           }
00443                                           ,
00444     };
00445     <span class="keywordtype">char</span> idx = numWins - numWinsMin;
00446 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00447 <span class="preprocessor"></span>    <span class="keywordtype">float</span> factor = 1.0f / math.safe_pow(athletics_office.ncaa_level_value, 1.2f);
00448 <span class="preprocessor">#else</span>
00449 <span class="preprocessor"></span>    <span class="keywordtype">float</span> factor = 1.0f / math.safe_pow(athletics_office.ncaa_level_value, 1.5f);
00450 <span class="preprocessor">#endif</span>
00451 <span class="preprocessor"></span>
00452     <span class="keywordtype">float</span> dollarValue
00453         = factor  * min( dollarSet[idx].min,
00454                          math.get_random_snd(dollarSet[idx].avg, dollarSet[idx].sd));
00455 
00456     dollarValue *= 1000;                            <span class="comment">// $ unit in thousand</span>
00457 
00458     <span class="comment">// to be added to athletic revenue</span>
00459     chance_event.football_game_bonus = (short) dollarValue;
00460 
00461     newsPtr-&gt;<a class="code" href="structNews.html#m5">short_para1</a> = (short) dollarValue;
00462 
00463     <span class="comment">//---//</span>
00464 
00465     enroll_res.set_app_yield(
00466         factor * m.fmin(1.1f, math.get_random_snd(1.25f, 0.05f)),
00467         factor * m.fmin(1.05f, math.get_random_snd(1.15f, 0.04f))
00468         );
00469 
00470     development_office.alumni_morale *= factor * m.fmin(1.05f, math.get_random_snd(1.15f, 0.04f));
00471     player_school.media_attitudes = (char) int( player_school.media_attitudes * factor * m.fmin(1.05f, math.get_random_snd(1.15f, 0.04f)));
00472 
00473     <span class="comment">//---//</span>
00474 
00475     newsPtr-&gt;<a class="code" href="structNews.html#a40">set_newspaper_popup</a>();
00476 }
00477 
00478 <span class="comment">//------- End of function NewsArray::football_game -----//</span>
00479 
00480 <span class="comment">//------ Begin of function NewsArray::basketball_game -----//</span>
<a name="l00484"></a><a class="code" href="classNewsArray.html#a36">00484</a> <span class="comment">void NewsArray::basketball_game(int numWins) {</span>
00485     <span class="keyword">const</span> <span class="keywordtype">int</span> numWinsRange = 3, numWinsMin = 25;
00486 
00487     <span class="keywordflow">if</span> ( numWins &lt; numWinsMin )
00488         <span class="keywordflow">return</span>;
00489 
00490     <span class="keywordflow">if</span>( chance_event.test_chance != <a class="code" href="Onews_8h.html#a51a39">NEWS_BASKETBALL_GAME</a> ) {
00491         <span class="keywordflow">if</span> ( player_school.chance_event_frequency == <a class="code" href="Gamedef_8h.html#a73a22">INPUT_LOW</a> || chance_event.basketball_game_bonus &gt; 0 )
00492             <span class="keywordflow">return</span>;
00493 
00494         <span class="comment">//      if ( numWins &gt;= numWinsMin+numWinsRange )</span>
00495         <span class="comment">//              numWins = numWinsMin+numWinsRange-1;   //old idea this don't stop the pree after player win the title</span>
00496 
00497         <span class="comment">//## chea 141099 stop the pree after player win the title</span>
00498         <span class="keywordflow">if</span> ( numWins &gt; numWinsMin+numWinsRange )
00499             <span class="keywordflow">return</span>;
00500     }
00501     <span class="keywordflow">else</span>
00502         chance_event.test_chance = 0;
00503 
00504     <span class="comment">//---//</span>
00505 
00506     <a class="code" href="structNews.html">News</a>* newsPtr = add_news( <a class="code" href="Onews_8h.html#a51a39">NEWS_BASKETBALL_GAME</a> );
00507 
00508     <span class="keywordflow">if</span>( !newsPtr )
00509         <span class="keywordflow">return</span>;
00510 
00512     <span class="keyword">struct </span>DollarSet {
00513         <span class="keywordtype">float</span> min, avg, sd;
00514     };
00515 
00516     DollarSet dollarSet[numWinsRange] = { {         <span class="comment">// $ in million</span>
00517         .1f, .25f, .1f
00518     }
00519                                           , {
00520                                               .3f, .5f, .15f
00521                                           }
00522                                           , {
00523                                               1, 2.5f, .5f
00524                                           }
00525                                           ,
00526     };
00527     <span class="keywordtype">char</span> idx = numWins - numWinsMin;
00528     <span class="keywordtype">float</span> factor = 1.0f / math.safe_pow(athletics_office.ncaa_level_value, 2);
00529 
00530     <span class="keywordtype">float</span> dollarValue
00531         = factor  * m.fmin( dollarSet[idx].min,
00532                             math.get_random_snd(dollarSet[idx].avg, dollarSet[idx].sd));
00533 
00534     dollarValue *= 1000;                            <span class="comment">// $ unit in thousand</span>
00535 
00536     <span class="comment">// to be added to athletic revenue</span>
00537     chance_event.basketball_game_bonus = (short) dollarValue;
00538 
00539     newsPtr-&gt;<a class="code" href="structNews.html#m5">short_para1</a> = (short) dollarValue;
00540 
00541     <span class="comment">//---//</span>
00542 
00543     enroll_res.set_app_yield(
00544         factor * m.fmin(1.1f, math.get_random_snd(1.25f, 0.05f)),
00545         factor * m.fmin(1.05f, math.get_random_snd(1.15f, 0.04f))
00546         );
00547 
00548     <span class="comment">//---//</span>
00549 
00550     newsPtr-&gt;<a class="code" href="structNews.html#a40">set_newspaper_popup</a>();
00551 }
00552 
00553 <span class="comment">//------- End of function NewsArray::basketball_game -----//</span>
00554 
00555 <span class="comment">//------ Begin of function NewsArray::new_task -----//</span>
<a name="l00560"></a><a class="code" href="classNewsArray.html#a39">00560</a> <span class="comment">void NewsArray::new_task(News *taskPtr, char subtype) {</span>
00561     <a class="code" href="structNews.html">News</a> *newsPtr = add_news(<a class="code" href="Onews_8h.html#a51a42">NEWS_NEW_TASK</a>, <a class="code" href="Onews_8h.html#a47a6">NEWS_NORMAL</a>);
00562 
00563     newsPtr-&gt;<a class="code" href="structNews.html#m1">task_id</a> = taskPtr-&gt;id;
00564     newsPtr-&gt;<a class="code" href="structNews.html#m3">task_msg_subtype</a> = subtype;            <span class="comment">// enum { TASK_STARTED=0, TASK_EXPIRED, TASK_COMPLETED };</span>
00565     newsPtr-&gt;<a class="code" href="structNews.html#m5">short_para1</a> = taskPtr-&gt;short_para1;
00566     newsPtr-&gt;<a class="code" href="structNews.html#m6">short_para2</a> = taskPtr-&gt;short_para2;
00567     newsPtr-&gt;<a class="code" href="structNews.html#m7">short_para3</a> = taskPtr-&gt;short_para3;
00568     newsPtr-&gt;<a class="code" href="structNews.html#m8">short_para4</a> = taskPtr-&gt;short_para4;
00569     newsPtr-&gt;<a class="code" href="structNews.html#m9">short_para5</a> = taskPtr-&gt;short_para5;
00570     newsPtr-&gt;<a class="code" href="structNews.html#m10">short_para6</a> = taskPtr-&gt;short_para6;
00571     newsPtr-&gt;<a class="code" href="structNews.html#m11">short_para7</a> = taskPtr-&gt;short_para7;
00572 }
00573 
00574 <span class="comment">//------- End of function NewsArray::new_task -----//</span>
00575 
00576 <span class="comment">//------ Begin of function NewsArray::new_year_start -----//</span>
<a name="l00580"></a><a class="code" href="classNewsArray.html#a32">00580</a> <span class="comment">void NewsArray::new_year_start() {</span>
00581     <a class="code" href="structNews.html">News</a>* newsPtr = add_news( <a class="code" href="Onews_8h.html#a51a35">NEWS_NEW_YEAR_START</a>, <a class="code" href="Onews_8h.html#a47a6">NEWS_NORMAL</a> );
00582 
00583     <span class="keywordflow">if</span>( !newsPtr )
00584         <span class="keywordflow">return</span>;
00585 }
00586 
00587 <span class="comment">//------- End of function NewsArray::new_year_start -----//</span>
00588 
00589 <span class="comment">//------ Begin of function NewsArray::scenario_near_end -----//</span>
<a name="l00593"></a><a class="code" href="classNewsArray.html#a33">00593</a> <span class="comment">void NewsArray::scenario_near_end() {</span>
00594     <a class="code" href="structNews.html">News</a>* newsPtr = add_news( <a class="code" href="Onews_8h.html#a51a36">NEWS_SCENARIO_NEAR_END</a>, <a class="code" href="Onews_8h.html#a47a6">NEWS_NORMAL</a> );
00595 
00596     <span class="keywordflow">if</span>( !newsPtr )
00597         <span class="keywordflow">return</span>;
00598 }
00599 
00600 <span class="comment">//------- End of function NewsArray::scenario_near_end -----//</span>
00601 
00602 <span class="comment">//------ Begin of function NewsArray::open_game_near_end -----//</span>
<a name="l00604"></a><a class="code" href="classNewsArray.html#a37">00604</a> <span class="comment">void NewsArray::open_game_near_end() {</span>
00605     <a class="code" href="structNews.html">News</a>* newsPtr = add_news( <a class="code" href="Onews_8h.html#a51a40">NEWS_OPEN_GAME_NEAR_END</a>, <a class="code" href="Onews_8h.html#a47a6">NEWS_NORMAL</a> );
00606 
00607     <span class="keywordflow">if</span>( !newsPtr )
00608         <span class="keywordflow">return</span>;
00609 
00610     <span class="comment">//--- do the following to make the news pop up ----//</span>
00611 
00612     sys.set_news_pop_up();
00613 
00614     chance_event.news_str=newsPtr-&gt;<a class="code" href="structNews.html#a1">msg</a>();
00615     chance_event.news_news_str = chance_event.news_str;
00616 
00617     <span class="comment">// memcpy(chance_event.news_date_str, date.date_str(info.game_date),55);</span>
00618     strncpy( chance_event.news_date_str, info.date_str_julian(info.game_date), 55 );
00619     chance_event.news_date_str[55-1] = <span class="charliteral">'\0'</span>;
00620 }
00621 
00622 <span class="comment">//------- End of function NewsArray::open_game_near_end -----//</span>
00623 
00624 <span class="comment">//------ Begin of function NewsArray::open_game_end -----//</span>
<a name="l00626"></a><a class="code" href="classNewsArray.html#a38">00626</a> <span class="comment">void NewsArray::open_game_end() {</span>
00627     <a class="code" href="structNews.html">News</a>* newsPtr = add_news( <a class="code" href="Onews_8h.html#a51a41">NEWS_OPEN_GAME_END</a>, <a class="code" href="Onews_8h.html#a47a6">NEWS_NORMAL</a> );
00628 
00629     <span class="keywordflow">if</span>( !newsPtr )
00630         <span class="keywordflow">return</span>;
00631 
00632     <span class="comment">//--- do the following to make the news pop up ----//</span>
00633 
00634     sys.set_news_pop_up();
00635 
00636     chance_event.news_str=newsPtr-&gt;<a class="code" href="structNews.html#a1">msg</a>();
00637     chance_event.news_news_str = chance_event.news_str;
00638 
00639     <span class="comment">// memcpy(chance_event.news_date_str, date.date_str(info.game_date),55);</span>
00640     strncpy( chance_event.news_date_str, info.date_str_julian(info.game_date), 55 );
00641     chance_event.news_date_str[55-1] = <span class="charliteral">'\0'</span>;
00642 }
00643 
00644 <span class="comment">//------- End of function NewsArray::open_game_end -----//</span>
00645 
00646 <span class="comment">//------ Begin of function NewsArray::scenario_news -----//</span>
<a name="l00650"></a><a class="code" href="classNewsArray.html#a34">00650</a> <span class="comment">void NewsArray::scenario_news(char type, char subType, int year) {</span>
00651     <a class="code" href="structNews.html">News</a>* newsPtr = add_news( <a class="code" href="Onews_8h.html#a51a37">NEWS_SCENARIO_NEWS</a>, <a class="code" href="Onews_8h.html#a47a6">NEWS_NORMAL</a> );
00652 
00653     <span class="keywordflow">if</span>( !newsPtr )
00654         <span class="keywordflow">return</span>;
00655 
00656     newsPtr-&gt;<a class="code" href="structNews.html#m5">short_para1</a> = type;                    <span class="comment">// i.e. PLAQUE_NEWS</span>
00657     newsPtr-&gt;<a class="code" href="structNews.html#m6">short_para2</a> = subType;                 <span class="comment">// i.e. PLAQUE_GOLD</span>
00658     newsPtr-&gt;<a class="code" href="structNews.html#m7">short_para3</a> = year;                    <span class="comment">// 1998</span>
00659 
00660     newsPtr-&gt;<a class="code" href="structNews.html#a40">set_newspaper_popup</a>();
00661 }
00662 
00663 <span class="comment">//------- End of function NewsArray::scenario_news -----//</span>
00664 
00665 <span class="comment">//------ Begin of function NewsArray::add_news -----//</span>
<a name="l00680"></a><a class="code" href="classNewsArray.html#a10">00680</a> <span class="comment">News* NewsArray::add_news(int newsId, int newsType) {</span>
00681     <span class="comment">//playsound</span>
00682     audio.play_wav(<span class="stringliteral">"NEWS"</span>,audio.int_to_DsVolume(config.sound_effect_volume));
00683 
00684     <span class="comment">//----------------------------------------------//</span>
00685 
00686     <span class="keyword">static</span> <a class="code" href="structNews.html">News</a> news;
00687 
00688     news.<a class="code" href="structNews.html#m0">id</a>   = newsId;
00689     news.<a class="code" href="structNews.html#m2">type</a> = newsType;
00690     news.<a class="code" href="structNews.html#m4">news_date</a> = info.game_date;
00691 
00692     <span class="comment">//--- if the news adding flag is turned off, don't add the news ---//</span>
00693 
00694     <span class="keywordflow">if</span>( news_add_flag ) {
00695         <span class="comment">//--- if no. of news reaches max., delete the oldest one ---//</span>
00696 
00697         <span class="keywordflow">if</span>( size() &gt;= <a class="code" href="Onews_8h.html#a45a4">MAX_NEWS</a> ) {
00698             start();
00699             linkout();                                  <span class="comment">// note: this is a packed DynArray!</span>
00700 
00701             <span class="keywordflow">if</span>( last_clear_recno &gt; 1 )
00702                 last_clear_recno--;
00703         }
00704 
00705         <span class="comment">//--------- link in a new news ---------//</span>
00706 
00707         linkin(&amp;news);
00708 
00709         <span class="keywordflow">return</span> (<a class="code" href="structNews.html">News</a>*) get();
00710     }
00711     <span class="keywordflow">else</span> {
00712         <span class="keywordflow">return</span> &amp;news;
00713     }
00714 }
00715 
00716 <span class="comment">//------- End of function NewsArray::add_news -----//</span>
</pre></div><hr><address style="align: right;"><small>Generated on Fri Aug 23 01:38:08 2002 for VirtualU by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.17 </small></address>
</body>
</html>
