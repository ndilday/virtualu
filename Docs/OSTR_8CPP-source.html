<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>OSTR.CPP Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.17 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>OSTR.CPP</h1><a href="OSTR_8CPP.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">//Filename    : OSTR.CPP</span>
00002 <span class="comment">//Description : Object String</span>
00003 
00004 <span class="preprocessor">#include &lt;OMISC.H&gt;</span>
00005 <span class="preprocessor">#include &lt;CTYPE.H&gt;</span>
00006 <span class="preprocessor">#include &lt;<a class="code" href="OSTR_8H.html">OSTR.H</a>&gt;</span>
00007 
00008 <span class="comment">//------- Define static variable --------//</span>
00009 
00010 <span class="keyword">static</span> <span class="keywordtype">char</span> work_buf[<a class="code" href="OSTR_8H.html#a5">MAX_STR_LEN</a>+1];
00011 
00012 <span class="comment">//-------- Begin of constructor/destructor functions --------//</span>
00013 
<a name="l00014"></a><a class="code" href="classString.html#a0">00014</a> <a class="code" href="classString.html#a0">String::String</a>() {
00015     <a class="code" href="classString.html#m0">str_buf</a>[0] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00016 }
00017 
<a name="l00018"></a><a class="code" href="classString.html#a1">00018</a> <a class="code" href="classString.html#a0">String::String</a>( <span class="keywordtype">char</span> *s ) {
00019     strncpy(<a class="code" href="classString.html#m0">str_buf</a>, s, <a class="code" href="OSTR_8H.html#a5">MAX_STR_LEN</a> );
00020     <a class="code" href="classString.html#m0">str_buf</a>[<a class="code" href="OSTR_8H.html#a5">MAX_STR_LEN</a>] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00021 }
00022 
<a name="l00023"></a><a class="code" href="classString.html#a2">00023</a> <a class="code" href="classString.html#a0">String::String</a>( <a class="code" href="classString.html">String</a>&amp; s ) {
00024     memcpy(<a class="code" href="classString.html#m0">str_buf</a>, s.<a class="code" href="classString.html#m0">str_buf</a>, <a class="code" href="OSTR_8H.html#a5">MAX_STR_LEN</a>+1 );
00025 }
00026 
00027 <span class="comment">//---------- End of constructor/destructor functions --------//</span>
00028 
00029 <span class="comment">//------- Begin of function String::substr --------//</span>
<a name="l00036"></a><a class="code" href="classString.html#a9">00036</a> <span class="comment">char* String::substr(int pos, int len) {</span>
00037     work_buf[0] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00038 
00039     <span class="keywordtype">int</span> strLen = strlen(str_buf);
00040 
00041     <span class="keywordflow">if</span>(pos &gt;= strLen)                               <span class="comment">// check for boundary errors</span>
00042         <span class="keywordflow">return</span> work_buf;
00043 
00044     <span class="keywordflow">if</span>( len &lt;= 0 )
00045         len = strLen - pos;
00046     <span class="keywordflow">else</span> {
00047         <span class="keywordflow">if</span>(len &gt; strLen - pos)
00048             <span class="keywordflow">return</span> work_buf;
00049     }
00050 
00051     strncpy( work_buf, str_buf+pos, len );
00052     work_buf[len] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00053 
00054     <span class="keywordflow">return</span> work_buf;
00055 }
00056 
00057 <span class="comment">//------- End of function String::substr ------------//</span>
00058 
00059 <span class="comment">//------- Begin of function String::upper/lower -------//</span>
00060 
<a name="l00061"></a><a class="code" href="classString.html#a3">00061</a> <span class="keywordtype">char</span>* <a class="code" href="classString.html#a3">String::upper</a>() {
00062     memcpy( work_buf, <a class="code" href="classString.html#m0">str_buf</a>, <a class="code" href="classString.html#a5">len</a>()+1 );
00063     strupr( work_buf );
00064 
00065     <span class="keywordflow">return</span> work_buf;
00066 }
00067 
<a name="l00068"></a><a class="code" href="classString.html#a4">00068</a> <span class="keywordtype">char</span>* <a class="code" href="classString.html#a4">String::lower</a>(<span class="keywordtype">void</span>) {
00069     memcpy( work_buf, <a class="code" href="classString.html#m0">str_buf</a>, <a class="code" href="classString.html#a5">len</a>()+1 );
00070     strlwr( work_buf );
00071 
00072     <span class="keywordflow">return</span> work_buf;
00073 }
00074 
00075 <span class="comment">//--------- End of function String::upper/lower --------//</span>
00076 
00077 <span class="comment">//-------- Begin of function String::at ---------------//</span>
<a name="l00084"></a><a class="code" href="classString.html#a6">00084</a> <span class="comment">int String::at(char* searchStr) {</span>
00085     <span class="keywordtype">int</span> pos;
00086     <span class="keywordtype">char</span> *tmp;
00087 
00088     <span class="keywordflow">if</span>( (tmp = strstr(str_buf, searchStr)) != <a class="code" href="OHELP_8H.html#a0">NULL</a>)
00089         pos = (int)(tmp-str_buf);
00090     <span class="keywordflow">else</span>
00091         pos = -1;
00092 
00093     <span class="keywordflow">return</span> pos;
00094 }
00095 
00096 <span class="comment">//---------- End of function String::at ---------------//</span>
00097 
00098 <span class="comment">//-------- Begin of operator= functions -----------//</span>
00099 
<a name="l00100"></a><a class="code" href="classString.html#a11">00100</a> <a class="code" href="classString.html">String</a>&amp; <a class="code" href="classString.html#a11">String::operator=</a>(<a class="code" href="classString.html">String</a>&amp; s) {
00101     memcpy(<a class="code" href="classString.html#m0">str_buf</a>, s.<a class="code" href="classString.html#m0">str_buf</a>, <a class="code" href="OSTR_8H.html#a5">MAX_STR_LEN</a>+1 );
00102 
00103     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00104 }
00105 
<a name="l00106"></a><a class="code" href="classString.html#a12">00106</a> <a class="code" href="classString.html">String</a>&amp; <a class="code" href="classString.html#a11">String::operator=</a>(<span class="keywordtype">char</span> *s) {
00107     strncpy(<a class="code" href="classString.html#m0">str_buf</a>, s, <a class="code" href="OSTR_8H.html#a5">MAX_STR_LEN</a> );
00108     <a class="code" href="classString.html#m0">str_buf</a>[<a class="code" href="OSTR_8H.html#a5">MAX_STR_LEN</a>] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00109 
00110     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00111 }
00112 
<a name="l00113"></a><a class="code" href="classString.html#a13">00113</a> <a class="code" href="classString.html">String</a>&amp; <a class="code" href="classString.html#a11">String::operator=</a>(<span class="keywordtype">long</span> value) {
00114     strncpy(<a class="code" href="classString.html#m0">str_buf</a>, m.format(value), <a class="code" href="OSTR_8H.html#a5">MAX_STR_LEN</a> );
00115     <a class="code" href="classString.html#m0">str_buf</a>[<a class="code" href="OSTR_8H.html#a5">MAX_STR_LEN</a>] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00116 
00117     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00118 }
00119 
00120 <span class="comment">//---------- End of operator= functions -----------//</span>
00121 
00122 <span class="comment">//-------- Begin of operator+= functions -----------//</span>
00123 
<a name="l00124"></a><a class="code" href="classString.html#a14">00124</a> <a class="code" href="classString.html">String</a>&amp; <a class="code" href="classString.html#a14">String::operator+=</a>(<a class="code" href="classString.html">String</a>&amp; s) {
00125     strncat( <a class="code" href="classString.html#m0">str_buf</a>, s.<a class="code" href="classString.html#m0">str_buf</a>, <a class="code" href="OSTR_8H.html#a5">MAX_STR_LEN</a> );
00126     <a class="code" href="classString.html#m0">str_buf</a>[<a class="code" href="OSTR_8H.html#a5">MAX_STR_LEN</a>] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00127     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00128 }
00129 
<a name="l00130"></a><a class="code" href="classString.html#a15">00130</a> <a class="code" href="classString.html">String</a>&amp; <a class="code" href="classString.html#a14">String::operator+=</a>(<span class="keywordtype">char</span> *s) {
00131     strncat( <a class="code" href="classString.html#m0">str_buf</a>, s, <a class="code" href="OSTR_8H.html#a5">MAX_STR_LEN</a> );
00132     <a class="code" href="classString.html#m0">str_buf</a>[<a class="code" href="OSTR_8H.html#a5">MAX_STR_LEN</a>] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00133     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00134 }
00135 
<a name="l00136"></a><a class="code" href="classString.html#a16">00136</a> <a class="code" href="classString.html">String</a>&amp; <a class="code" href="classString.html#a14">String::operator+=</a>(<span class="keywordtype">long</span> value) {
00137     strncat( <a class="code" href="classString.html#m0">str_buf</a>, m.format(value), <a class="code" href="OSTR_8H.html#a5">MAX_STR_LEN</a> );
00138     <a class="code" href="classString.html#m0">str_buf</a>[<a class="code" href="OSTR_8H.html#a5">MAX_STR_LEN</a>] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00139     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00140 }
00141 
00142 <span class="comment">//---------- End of operator+= functions -----------//</span>
00143 
00144 <span class="comment">//-------- Begin of operator*= functions -----------//</span>
00145 
<a name="l00146"></a><a class="code" href="classString.html#a17">00146</a> <a class="code" href="classString.html">String</a>&amp; <a class="code" href="classString.html#a17">String::operator*=</a>(<span class="keywordtype">int</span> n) {
00147     memcpy( work_buf, <a class="code" href="classString.html#m0">str_buf</a>, <a class="code" href="classString.html#a5">len</a>()+1 );
00148 
00149     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=1; i&lt;n; i++)
00150         strncat(<a class="code" href="classString.html#m0">str_buf</a>, work_buf, <a class="code" href="OSTR_8H.html#a5">MAX_STR_LEN</a>);
00151 
00152     <a class="code" href="classString.html#m0">str_buf</a>[<a class="code" href="OSTR_8H.html#a5">MAX_STR_LEN</a>] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00153 
00154     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00155 }
00156 
00157 <span class="comment">//---------- End of operator*= functions -----------//</span>
</pre></div><hr><address style="align: right;"><small>Generated on Fri Aug 23 01:38:26 2002 for VirtualU by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.17 </small></address>
</body>
</html>
