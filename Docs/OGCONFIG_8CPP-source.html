<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>OGCONFIG.CPP Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.17 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>OGCONFIG.CPP</h1><a href="OGCONFIG_8CPP.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">//File: OGCONFIG.CPP</span>
00002 <span class="comment">//Description: GoalConfig</span>
00003 
00004 <span class="preprocessor">#include &lt;<a class="code" href="ALL_8H.html">ALL.H</a>&gt;</span>
00005 <span class="preprocessor">#include &lt;<a class="code" href="OFILETXT_8H.html">OFILETXT.H</a>&gt;</span>
00006 <span class="preprocessor">#include &lt;<a class="code" href="OGCONFIG_8H.html">OGCONFIG.H</a>&gt;</span>
00007 
00008 <span class="comment">//----- Begin of function GoalConfig::init --------//</span>
00009 
<a name="l00010"></a><a class="code" href="classGoalConfig.html#a0">00010</a> <span class="keywordtype">void</span> <a class="code" href="classGoalConfig.html#a0">GoalConfig::init</a>() {
00011     memset( <span class="keyword">this</span>, 0, <span class="keyword">sizeof</span>(<a class="code" href="classGoalConfig.html">GoalConfig</a>) );
00012 
00013     read_goal_scen();
00014     read_goal_task();
00015 }
00016 
00017 <span class="comment">//------- End of function GoalConfig::init --------//</span>
00018 
00019 <span class="comment">//----- Begin of function GoalConfig::deinit --------//</span>
00020 
<a name="l00021"></a><a class="code" href="classGoalConfig.html#a1">00021</a> <span class="keywordtype">void</span> <a class="code" href="classGoalConfig.html#a1">GoalConfig::deinit</a>() {
00022 }
00023 
00024 <span class="comment">//------- End of function GoalConfig::deinit --------//</span>
00025 
00026 <span class="comment">//----- Begin of function GoalConfig::read_goal_scen --------//</span>
00039 <span class="comment">void GoalConfig::read_goal_scen() {</span>
00040     <a class="code" href="classFileTxt.html">FileTxt</a> fileTxt( <a class="code" href="Gamedef_8h.html#a4">DIR_RES</a><span class="stringliteral">"GOALSCEN.RES"</span> );
00041 
00042     <span class="keywordflow">while</span>( !fileTxt.<a class="code" href="classFileTxt.html#a11">is_eof</a>() ) {
00043         <span class="keywordtype">int</span> scenId = (int) fileTxt.<a class="code" href="classFileTxt.html#a7">get_num</a>();
00044 
00045         <span class="keywordflow">if</span>( scenId &lt; 1 || scenId &gt; <a class="code" href="Opschool_8h.html#a63a32">SCENARIO_COUNT</a> )
00046             <span class="keywordflow">continue</span>;
00047 
00048         <span class="comment">//-------------------------------------//</span>
00049 
00050         fileTxt.<a class="code" href="classFileTxt.html#a3">next_line</a>();
00051         fileTxt.<a class="code" href="classFileTxt.html#a3">next_line</a>();
00052 
00053         <a class="code" href="structGoalScen.html">GoalScen</a>* goalScen = goal_scen_array+scenId-1;
00054 
00055         <span class="comment">//--- read scenario objective time limits ------//</span>
00056 
00057         <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i=0 ; i&lt;3 ; i++ ) {
00058             fileTxt.<a class="code" href="classFileTxt.html#a6">get_token</a>();                        <span class="comment">// bypass "Gold"</span>
00059             fileTxt.<a class="code" href="classFileTxt.html#a6">get_token</a>();                        <span class="comment">// bypass "Years:"</span>
00060             goalScen-&gt;<a class="code" href="structGoalScen.html#m0">goal_year</a>[i] = (short) fileTxt.<a class="code" href="classFileTxt.html#a7">get_num</a>();
00061             fileTxt.<a class="code" href="classFileTxt.html#a3">next_line</a>();
00062         }
00063 
00064         <span class="comment">//--- read scenario objective variables ------//</span>
00065 
00066         <span class="keywordflow">for</span>( i=0 ; i&lt;3 ; i++ ) {
00067             fileTxt.<a class="code" href="classFileTxt.html#a6">get_token</a>();                        <span class="comment">// bypass "Gold"</span>
00068             fileTxt.<a class="code" href="classFileTxt.html#a6">get_token</a>();                        <span class="comment">// bypass "Value:"</span>
00069             goalScen-&gt;<a class="code" href="structGoalScen.html#m1">goal_value</a>[i] = (float) fileTxt.<a class="code" href="classFileTxt.html#a7">get_num</a>();
00070             fileTxt.<a class="code" href="classFileTxt.html#a3">next_line</a>();
00071         }
00072 
00073         <span class="comment">//------- if all scenario settings have been read -----//</span>
00074 
00075         <span class="keywordflow">if</span>( scenId == <a class="code" href="Opschool_8h.html#a63a32">SCENARIO_COUNT</a> )
00076             <span class="keywordflow">break</span>;
00077     }
00078 }
00079 
00080 <span class="comment">//------- End of function GoalConfig::read_goal_scen --------//</span>
00081 
00082 <span class="comment">//----- Begin of function GoalConfig::read_goal_task --------//</span>
00094 <span class="comment">void GoalConfig::read_goal_task() {</span>
00095     <a class="code" href="classFileTxt.html">FileTxt</a> fileTxt( <a class="code" href="Gamedef_8h.html#a4">DIR_RES</a><span class="stringliteral">"GOALTASK.RES"</span> );
00096 
00097     <span class="keywordflow">while</span>( !fileTxt.<a class="code" href="classFileTxt.html#a11">is_eof</a>() ) {
00098         <span class="keywordtype">int</span> taskId = (int) fileTxt.<a class="code" href="classFileTxt.html#a7">get_num</a>();
00099 
00100         <span class="keywordflow">if</span>( taskId &lt; 1 || taskId &gt; <a class="code" href="Opschool_8h.html#a63a32">SCENARIO_COUNT</a> )
00101             <span class="keywordflow">continue</span>;
00102 
00103         <span class="comment">//-------------------------------------//</span>
00104 
00105         fileTxt.<a class="code" href="classFileTxt.html#a3">next_line</a>();
00106         fileTxt.<a class="code" href="classFileTxt.html#a3">next_line</a>();
00107 
00108         <a class="code" href="structGoalTask.html">GoalTask</a>* goalTask = goal_task_array+taskId-1;
00109 
00110         <span class="comment">//--- read task time limits ------//</span>
00111 
00112         fileTxt.<a class="code" href="classFileTxt.html#a6">get_token</a>();                          <span class="comment">// bypass "Year"</span>
00113         fileTxt.<a class="code" href="classFileTxt.html#a6">get_token</a>();                          <span class="comment">// bypass "Lower"</span>
00114         goalTask-&gt;<a class="code" href="structGoalTask.html#m0">years_lower</a> = (short) fileTxt.<a class="code" href="classFileTxt.html#a7">get_num</a>();
00115         fileTxt.<a class="code" href="classFileTxt.html#a3">next_line</a>();
00116 
00117         fileTxt.<a class="code" href="classFileTxt.html#a6">get_token</a>();                          <span class="comment">// bypass "Year"</span>
00118         fileTxt.<a class="code" href="classFileTxt.html#a6">get_token</a>();                          <span class="comment">// bypass "Upper"</span>
00119         goalTask-&gt;<a class="code" href="structGoalTask.html#m1">years_upper</a> = (short) fileTxt.<a class="code" href="classFileTxt.html#a7">get_num</a>();
00120         fileTxt.<a class="code" href="classFileTxt.html#a3">next_line</a>();
00121 
00122         <span class="comment">//--- read task values ------//</span>
00123 
00124         fileTxt.<a class="code" href="classFileTxt.html#a6">get_token</a>();                          <span class="comment">// bypass "Value"</span>
00125         fileTxt.<a class="code" href="classFileTxt.html#a6">get_token</a>();                          <span class="comment">// bypass "Lower"</span>
00126         goalTask-&gt;<a class="code" href="structGoalTask.html#m2">value_lower</a> = (short) fileTxt.<a class="code" href="classFileTxt.html#a7">get_num</a>();
00127         fileTxt.<a class="code" href="classFileTxt.html#a3">next_line</a>();
00128 
00129         fileTxt.<a class="code" href="classFileTxt.html#a6">get_token</a>();                          <span class="comment">// bypass "Value"</span>
00130         fileTxt.<a class="code" href="classFileTxt.html#a6">get_token</a>();                          <span class="comment">// bypass "Upper"</span>
00131         goalTask-&gt;<a class="code" href="structGoalTask.html#m3">value_upper</a> = (short) fileTxt.<a class="code" href="classFileTxt.html#a7">get_num</a>();
00132         fileTxt.<a class="code" href="classFileTxt.html#a3">next_line</a>();
00133 
00134         <span class="comment">//-------- read bonus ---------//</span>
00135 
00136         fileTxt.<a class="code" href="classFileTxt.html#a6">get_token</a>();                          <span class="comment">// bypass "Bonus"</span>
00137         goalTask-&gt;<a class="code" href="structGoalTask.html#m4">bonus</a> = (short) fileTxt.<a class="code" href="classFileTxt.html#a7">get_num</a>();
00138         fileTxt.<a class="code" href="classFileTxt.html#a3">next_line</a>();
00139 
00140         <span class="comment">//------- if all scenario settings have been read -----//</span>
00141 
00142         <span class="keywordflow">if</span>( taskId == <a class="code" href="OTASK_8H.html#a0">TASK_COUNT</a> )
00143             <span class="keywordflow">break</span>;
00144     }
00145 }
00146 
00147 <span class="comment">//------- End of function GoalConfig::read_goal_task --------//</span>
00148 
00149 <span class="comment">//----- Begin of function GoalTask::get_value -----//</span>
<a name="l00153"></a><a class="code" href="structGoalTask.html#a0">00153</a> <span class="comment">int GoalTask::get_value() {</span>
00154     <span class="keywordflow">return</span> value_lower + m.random(value_upper-value_lower+1);
00155 }
00156 
00157 <span class="comment">//------- End of function GoalTask::get_value --------//</span>
00158 
00159 <span class="comment">//----- Begin of function GoalTask::get_years -----//</span>
<a name="l00163"></a><a class="code" href="structGoalTask.html#a1">00163</a> <span class="comment">int GoalTask::get_years() {</span>
00164     <span class="keywordflow">return</span> years_lower + m.random(years_upper-years_lower+1);
00165 }
00166 
00167 <span class="comment">//------- End of function GoalTask::get_years --------//</span>
</pre></div><hr><address style="align: right;"><small>Generated on Fri Aug 23 01:37:44 2002 for VirtualU by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.17 </small></address>
</body>
</html>
