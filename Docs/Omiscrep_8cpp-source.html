<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Omiscrep.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.17 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>Omiscrep.cpp</h1><a href="Omiscrep_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">//Filename    : OMISCERP.CPP</span>
00002 <span class="comment">//Description : class</span>
00003 <span class="comment">// owner                        : Fred.</span>
00004 <span class="comment">// Notes:       Steps to introduce a new class of user interface</span>
00005 <span class="comment">//                              1.      construct the new class</span>
00006 <span class="comment">//                              2.      in sys.h, add the new MODE, e.g. MODE_ADMISSIONS_AND_FINANCIAL_OFFICE</span>
00007 <span class="comment">//                              3.      include the new header file in cc.cpp, osysdisp.cpp, osysdet.cpp</span>
00008 <span class="comment">//                              4.      in cc.cpp, declare a global object of the new class, with the name matching the 'extern' statement in the header file</span>
00009 <span class="comment">//                              5.      in osysdisp.cpp, under switch(view_mode), add the redirection to the display function</span>
00010 <span class="comment">//                              6.      in osysdet.cpp, under Sys::detect_view, add the redirection to the detect function</span>
00011 <span class="comment">//                              7.      in osysdet.cpp, under Sys::process_key, add the new hot key (optional)</span>
00012 <span class="comment">//                              8.      in osysdet.cpp, under Sys::detect_button, modify if necessary (see the comments there)</span>
00013 <span class="comment">//                              9.      the deinit function (AdmOffice::deinit()) can be called when the view_mode in 'sys' object is switched</span>
00014 <span class="comment">//                                      the function frees memory occupied by this object</span>
00015 <span class="comment">//                                      the report function would re-allocate memory when it is called (note the report_init_flag)</span>
00016 <span class="comment">//                                      notice the beginning section of Sys::disp_frame()</span>
00017 <span class="comment">// Kevin 0723</span>
00018 
00019 <span class="preprocessor">#include &lt;OSYS.H&gt;</span>
00020 <span class="preprocessor">#include &lt;<a class="code" href="OSTR_8H.html">OSTR.H</a>&gt;</span>
00021 <span class="preprocessor">#include &lt;<a class="code" href="ODATE_8H.html">ODATE.H</a>&gt;</span>
00022 <span class="preprocessor">#include &lt;<a class="code" href="OGAMESET_8H.html">OGAMESET.H</a>&gt;</span>
00023 <span class="preprocessor">#include &lt;OWORLDMT.H&gt;</span>
00024 
00025 <span class="preprocessor">#include &lt;<a class="code" href="OVGA_8H.html">OVGA.H</a>&gt;</span>
00026 <span class="preprocessor">#include &lt;OINFO.H&gt;</span>
00027 <span class="preprocessor">#include &lt;OIFACE.H&gt;</span>
00028 <span class="preprocessor">#include &lt;<a class="code" href="COLOR_8H.html">COLOR.H</a>&gt;</span>
00029 <span class="preprocessor">#include &lt;OFONT.H&gt;</span>
00030 <span class="preprocessor">#include &lt;OGAMESTR.H&gt;</span>
00031 <span class="preprocessor">#include &lt;OMOUSE.H&gt;</span>
00032 
00033 <span class="preprocessor">#include &lt;OBUTTON.H&gt;</span>
00034 <span class="comment">//#include &lt;ORADIOV.H&gt;</span>
00035 
00036 <span class="preprocessor">#include &lt;ONEWS.H&gt;</span>
00037 <span class="preprocessor">#include &lt;OPSCHOOL.H&gt;</span>
00038 <span class="preprocessor">#include &lt;<a class="code" href="OMISCREP_8H.html">OMISCREP.H</a>&gt;</span>
00039 
00040 <span class="comment">//------- Define constants -------//</span>
00041 
00042 <span class="keyword">enum</span> {                                            <span class="comment">// the 'sub' view-modes</span>
00043     <a class="code" href="Omiscrep_8cpp.html#a41a15">MODE_AWARD1</a> = 0,
00044     <span class="comment">//MODE_FINANCIAL = 1,</span>
00045 };
00046 
00047 <span class="keyword">enum</span> {                                            <span class="comment">// the bg image id</span>
00048     <a class="code" href="Omiscrep_8cpp.html#a42a16">BG_PIC_ID</a> = 19
00049 };
00050 
00051 <span class="keyword">enum</span> {                                            <span class="comment">// screen coordinates</span>
00052     <a class="code" href="Omiscrep_8cpp.html#a43a17">REPORT_X1</a> = <a class="code" href="Oworldmt_8h.html#a12">ZOOM_X1</a>+15,
00053     <a class="code" href="Omiscrep_8cpp.html#a43a18">REPORT_Y1</a> = <a class="code" href="Oworldmt_8h.html#a13">ZOOM_Y1</a>+25,
00054     <a class="code" href="Omiscrep_8cpp.html#a43a19">REPORT_X2</a> = <a class="code" href="Oworldmt_8h.html#a14">ZOOM_X2</a>-15,
00055     <a class="code" href="Omiscrep_8cpp.html#a43a20">REPORT_Y2</a> = <a class="code" href="Oworldmt_8h.html#a15">ZOOM_Y2</a>-55
00056 };
00057 
00058 <span class="keyword">enum</span> {
00059     <a class="code" href="Omiscrep_8cpp.html#a44a21">BOTTOM_BUTTON_X1</a> = <a class="code" href="Omiscrep_8cpp.html#a43a17">REPORT_X1</a>+200,
00060     <a class="code" href="Omiscrep_8cpp.html#a44a22">BOTTOM_BUTTON_Y1</a> = <a class="code" href="Omiscrep_8cpp.html#a43a20">REPORT_Y2</a>+15,
00061     <a class="code" href="Omiscrep_8cpp.html#a44a23">BOTTOM_BUTTON_X2</a> = <a class="code" href="Omiscrep_8cpp.html#a43a19">REPORT_X2</a>-80,
00062     <a class="code" href="Omiscrep_8cpp.html#a44a24">BOTTOM_BUTTON_Y2</a> = <a class="code" href="Omiscrep_8cpp.html#a43a20">REPORT_Y2</a>+40
00063 };
00064 
00065 <span class="keyword">enum</span> {
00066     <a class="code" href="Omiscrep_8cpp.html#a45a25">BOTTOM_BUTTON_WIDTH</a> = 125,
00067     <a class="code" href="Omiscrep_8cpp.html#a45a26">BOTTOM_BUTTON_HEIGHT</a> = 25,
00068     <a class="code" href="Omiscrep_8cpp.html#a45a27">BOTTOM_BUTTON_DISTANCE</a>
00069     = (<a class="code" href="Omiscrep_8cpp.html#a44a23">BOTTOM_BUTTON_X2</a>-<a class="code" href="Omiscrep_8cpp.html#a44a21">BOTTOM_BUTTON_X1</a>-<a class="code" href="Omiscrep_8cpp.html#a45a25">BOTTOM_BUTTON_WIDTH</a>*2)/3
00070 };
00071 
00072 <span class="comment">// begin kevin 0723</span>
00073 <span class="keyword">enum</span> {
00074     <a class="code" href="Omiscrep_8cpp.html#a46a28">MODE_AWARD1_BOX1_HEIGHT</a> = 120,
00075     <a class="code" href="Omiscrep_8cpp.html#a46a29">MODE_AWARD1_BOX2_HEIGHT</a> = 215,
00076     <a class="code" href="Omiscrep_8cpp.html#a46a30">MODE_AWARD1_BOX_WIDTH</a> = 650,
00077     <a class="code" href="Omiscrep_8cpp.html#a46a31">MODE_AWARD1_TAB0</a> = 15,
00078     <a class="code" href="Omiscrep_8cpp.html#a46a32">MODE_AWARD1_TAB1</a> = 100,
00079     <a class="code" href="Omiscrep_8cpp.html#a46a33">MODE_AWARD1_TAB2</a> = 455,
00080 };
00081 
00082 <span class="keyword">enum</span> {
00083     <a class="code" href="Omiscrep_8cpp.html#a47a34">MODE_AWARD1_GRAPH_WIDTH</a> = 370,
00084     <a class="code" href="Omiscrep_8cpp.html#a47a35">MODE_AWARD1_GRAPH_HEIGHT</a> = 160,
00085     <a class="code" href="Omiscrep_8cpp.html#a47a36">MODE_AWARD1_LEGEND_HEIGHT</a> = 26,
00086     <a class="code" href="Omiscrep_8cpp.html#a47a37">MODE_AWARD1_LEGEND_WIDTH</a> = 370,
00087 };
00088 
00089 <span class="comment">// end kevin 0723</span>
00090 
00091 <span class="comment">//-------- define static vars -----------//</span>
00092 
00093 <span class="keyword">static</span> <span class="keywordtype">char</span> report_init_flag = 0;
00094 <span class="keyword">static</span> <span class="keywordtype">char</span> mode_init_flag = -1;                  <span class="comment">// -1: non of the mode was init'ed</span>
00095 
00096 <span class="keyword">static</span> <span class="keywordtype">char</span> current_mode = <a class="code" href="Omiscrep_8cpp.html#a41a15">MODE_AWARD1</a>;
00097 
00098 <span class="keyword">static</span> <a class="code" href="classButtonGroup.html">ButtonGroup</a> bottom_button_group(2);
00099 <span class="keyword">static</span> <span class="keywordtype">short</span> *bottom_button_up_bitmap[2];
00100 <span class="keyword">static</span> <span class="keywordtype">short</span> *bottom_button_down_bitmap[2];
00101 <span class="keyword">static</span> <span class="keywordtype">char</span> *bottom_button_label[] = {
00102     <span class="stringliteral">"Overview"</span>, <span class="stringliteral">"BUGHER"</span>
00103 };
00104 
00105 <span class="keyword">static</span> <a class="code" href="classButton.html">Button</a> button_back;
00106 
00107 <span class="keyword">static</span> <span class="keywordtype">char</span> *plaque_image_str[] = { <span class="stringliteral">"AW_GOLD"</span>, <span class="stringliteral">"AW_SIL"</span>, <span class="stringliteral">"AW_COP"</span> };
00108 
00109 <span class="comment">// Notes:       the strings could be moved to Ogamestr.cpp</span>
00110 <span class="comment">// Begin MiscReport Mode Setting</span>
00111 <span class="comment">//static GraphDoubleBarYear mode_award_graphdbar_winloss;</span>
00112 <span class="comment">//static RadioButton mode_award_radio_button_participation;</span>
00113 
00114 <span class="comment">//static char *mode_award_str4[] = {</span>
00115 <span class="comment">//      "Number of top athletes :",</span>
00116 
00117 <span class="comment">// End MiscReport Mode Setting</span>
00118 
00119 <span class="comment">//-------- define static functions ------//</span>
00120 
00121 <span class="comment">// Notes:       the deinit_x functions should deallocate memory used by the</span>
00122 <span class="comment">//                              GraphDoubleBar, ValueSlider, RadioButton, etc. objects</span>
00123 <span class="comment">//                              the functions are called when a mode-switching is triggered</span>
00124 <span class="comment">//      Norris 0716</span>
00125 
00126 <span class="keyword">static</span> <span class="keywordtype">void</span> report_award(<span class="keywordtype">int</span>);
00127 <span class="keyword">static</span> <span class="keywordtype">int</span> detect_award();
00128 <span class="keyword">static</span> <span class="keywordtype">void</span> deinit_award();
00129 
<a name="l00130"></a><a class="code" href="Omiscrep_8cpp.html#a9">00130</a> <span class="keyword">typedef</span> void (*<a class="code" href="Omiscrep_8cpp.html#a9">ReportFP</a>)(<span class="keywordtype">int</span> refreshFlag);
<a name="l00131"></a><a class="code" href="Omiscrep_8cpp.html#a10">00131</a> <span class="keyword">typedef</span> int (*<a class="code" href="Omiscrep_8cpp.html#a10">DetectFP</a>)();
<a name="l00132"></a><a class="code" href="Omiscrep_8cpp.html#a11">00132</a> <span class="keyword">typedef</span> void (*<a class="code" href="Omiscrep_8cpp.html#a11">DeinitFP</a>)();
00133 
00134 <span class="keyword">static</span> <a class="code" href="Omiscrep_8cpp.html#a9">ReportFP</a> report_func_ptr[] = {
00135     &amp;report_award,
00136     <span class="comment">//  &amp;report_financial</span>
00137 };
00138 
00139 <span class="keyword">static</span> <a class="code" href="Omiscrep_8cpp.html#a10">DetectFP</a> detect_func_ptr[] = {
00140     &amp;detect_award,
00141     <span class="comment">//  &amp;detect_financial</span>
00142 };
00143 
00144 <span class="keyword">static</span> <a class="code" href="Omiscrep_8cpp.html#a11">DeinitFP</a> deinit_func_ptr[] = {
00145     &amp;deinit_award,
00146     <span class="comment">//  &amp;deinit_financial,</span>
00147 };
00148 
00149 <span class="comment">//------- Begin of function MiscReport::MiscReport -----------//</span>
<a name="l00151"></a><a class="code" href="classMiscReport.html#a0">00151</a> <span class="comment">MiscReport::MiscReport() {</span>
00152     page_num=1;
00153     award_init();
00154 }
00155 
00156 <span class="comment">//--------- End of function MiscReport::MiscReport -----------//</span>
00157 
00158 <span class="comment">//------- Begin of function MiscReport::~MiscReport -----------//</span>
<a name="l00160"></a><a class="code" href="classMiscReport.html#a1">00160</a> <span class="comment">MiscReport::~MiscReport() {</span>
00161     award_deinit();
00162 }
00163 
00164 <span class="comment">//--------- End of function MiscReport::~MiscReport -----------//</span>
00165 
00166 <span class="comment">//------- Begin of function MiscReport::deinit ---------------//</span>
<a name="l00168"></a><a class="code" href="classMiscReport.html#a3">00168</a> <span class="comment">void MiscReport::award_deinit() {</span>
00169     <span class="comment">//--------- deallocate memory -------------//</span>
00170     <span class="keywordflow">if</span> (*bottom_button_up_bitmap) {
00171         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 2; i++) {
00172             <a class="code" href="ALL_8H.html#a8">mem_del</a>(bottom_button_up_bitmap[i]);
00173             <a class="code" href="ALL_8H.html#a8">mem_del</a>(bottom_button_down_bitmap[i]);
00174             bottom_button_up_bitmap[i] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00175             bottom_button_down_bitmap[i] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00176         }
00177     }
00178 
00179     (*deinit_func_ptr[current_mode])();
00180 
00181     report_init_flag = 0;
00182 }
00183 
00184 <span class="comment">//--------- End of function MiscReport::deinit ---------------//</span>
00185 
00186 <span class="comment">//------- Begin of function MiscReport::init -----------------//</span>
<a name="l00188"></a><a class="code" href="classMiscReport.html#a2">00188</a> <span class="comment">void MiscReport::award_init() {</span>
00189     memset(<span class="keyword">this</span>, 0, <span class="keyword">sizeof</span>(<a class="code" href="classMiscReport.html">MiscReport</a>));
00190 
00191     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 2; i++) {
00192         bottom_button_up_bitmap[i] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00193         bottom_button_down_bitmap[i] = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00194     }
00195 }
00196 
00197 <span class="comment">//--------- End of function MiscReport::init -----------------//</span>
00198 
00199 <span class="comment">//------- Begin of function MiscReport::report ---------------//</span>
<a name="l00201"></a><a class="code" href="classMiscReport.html#a4">00201</a> <span class="comment">void MiscReport::award_report(int refreshFlag) {</span>
00202     vga.use_back();
00203 
00204     <span class="keywordflow">if</span> (refreshFlag == <a class="code" href="Gamedef_8h.html#a71a16">INFO_REPAINT</a>) {
00205         <span class="keywordflow">if</span>( report_init_flag )                        <span class="comment">// deinit it first if it has already been initialized</span>
00206             award_deinit();
00207 
00208         <span class="comment">//------------- paint the background ----------------//</span>
00209         user_interface.bg_img(<a class="code" href="Omiscrep_8cpp.html#a42a16">BG_PIC_ID</a>, &amp;vga_back);
00210 
00211         <span class="comment">//REMOVE</span>
00212 
00213         <span class="comment">//----- initialize the bottom sub-menus buttons -----//</span>
00214         <span class="keywordflow">if</span> (!report_init_flag) {
00215             <span class="comment">/*  short x = BOTTOM_BUTTON_X1;</span>
00216 <span class="comment">                for (int i = 0; i &lt; 2; i++, x+=BOTTOM_BUTTON_WIDTH+BOTTOM_BUTTON_DISTANCE)</span>
00217 <span class="comment">                {</span>
00218 <span class="comment">                user_interface.create_button_bitmap(x, BOTTOM_BUTTON_Y1,</span>
00219 <span class="comment">                x+BOTTOM_BUTTON_WIDTH, BOTTOM_BUTTON_Y1+BOTTOM_BUTTON_HEIGHT,</span>
00220 <span class="comment">                bottom_button_label[i], &amp;bottom_button_up_bitmap[i],</span>
00221 <span class="comment">                &amp;bottom_button_down_bitmap[i], &amp;vga_back);</span>
00222 <span class="comment"></span>
00223 <span class="comment">                bottom_button_group[i].create_bitmapW(x, BOTTOM_BUTTON_Y1,</span>
00224 <span class="comment">                x+BOTTOM_BUTTON_WIDTH, BOTTOM_BUTTON_Y1+BOTTOM_BUTTON_HEIGHT,</span>
00225 <span class="comment">                ((i == current_mode) ? bottom_button_down_bitmap[i] : bottom_button_up_bitmap[i])+4);</span>
00226 <span class="comment">                }</span>
00227 <span class="comment">            */</span>
00228             report_init_flag = 1;
00229         }
00230 
00231         <span class="comment">//REMOVE</span>
00232         <span class="comment">//----------- paint the bottom button group ---------//</span>
00233         <span class="comment">//bottom_button_group.paint(current_mode);</span>
00234 
00235     }
00236 
00237     <span class="comment">//---- repaint/refresh the display of the current mode ----//</span>
00238     (*report_func_ptr[current_mode])(refreshFlag);
00239 
00240     <span class="comment">// Comments:        blt buffer only if repaint, because the</span>
00241     <span class="comment">//                                  report_x functions would handle blt_buf</span>
00242     <span class="comment">//                                  when refresh</span>
00243     <span class="comment">//                                  equivalently, in the report_x functions,</span>
00244     <span class="comment">//                                  only blt buffer when refresh</span>
00245 
00246     <span class="keywordflow">if</span> (refreshFlag == <a class="code" href="Gamedef_8h.html#a71a16">INFO_REPAINT</a>) {
00247         <span class="comment">//------- blt the back buffer to front buffer -------//</span>
00248         vga.blt_buf(<a class="code" href="Oworldmt_8h.html#a12">ZOOM_X1</a>, <a class="code" href="Oworldmt_8h.html#a13">ZOOM_Y1</a>, <a class="code" href="Oworldmt_8h.html#a14">ZOOM_X2</a>, <a class="code" href="Oworldmt_8h.html#a15">ZOOM_Y2</a>);
00249     }
00250     vga.use_front();                                <span class="comment">//##trevor 2807</span>
00251 }
00252 
00253 <span class="comment">//---------- End of function MiscReport::report ------------//</span>
00254 
00255 <span class="comment">//-------- Begin of function MiscReport::detect ------------//</span>
<a name="l00259"></a><a class="code" href="classMiscReport.html#a5">00259</a> <span class="comment">int MiscReport::award_detect() {</span>
00260     vga.use_back();
00261 
00262     <span class="keywordtype">int</span> rc = award_detect2();
00263 
00264     vga.use_front();
00265 
00266     <span class="keywordflow">return</span> rc;
00267 }
00268 
00269 <span class="comment">//---------- End of function MiscReport::detect ------------//</span>
00270 
00271 <span class="comment">//-------- Begin of function MiscReport::detect2 ------------//</span>
<a name="l00275"></a><a class="code" href="classMiscReport.html#a6">00275</a> <span class="comment">int MiscReport::award_detect2() {</span>
00276     <span class="keywordflow">if</span> (!report_init_flag)
00277         <span class="keywordflow">return</span> 0;
00278 
00279     <span class="keywordtype">int</span> bottomButtonGroupDetect;
00280     <span class="keywordflow">if</span> ((bottomButtonGroupDetect = bottom_button_group.<a class="code" href="classButtonGroup.html#a4">detect</a>()) &gt;= 0) {
00281         <span class="comment">//---- deinit the modes to free memory ----//</span>
00282         (*deinit_func_ptr[current_mode])();
00283 
00284         <span class="comment">//-------- change display mode ------------//</span>
00285         bottom_button_group[current_mode].body_ptr = (<span class="keywordtype">void</span> *) (bottom_button_up_bitmap[current_mode] + 4);
00286         current_mode = bottomButtonGroupDetect;
00287         bottom_button_group[current_mode].body_ptr = (<span class="keywordtype">void</span> *) (bottom_button_down_bitmap[current_mode] + 4);
00288 
00289         <span class="comment">//-------- post display redraw flag -------//</span>
00290         sys.redraw_all_flag = 1;
00291 
00292         <span class="keywordflow">return</span> 1;
00293     }
00294 
00295     <span class="keywordflow">if</span> ((*detect_func_ptr[current_mode])())
00296         <span class="keywordflow">return</span> 1;
00297 
00298     <span class="keywordflow">return</span> 0;
00299 }
00300 
00301 <span class="comment">//---------- End of function AdmOffice::detect ------------//</span>
00302 
00303 <span class="comment">//-------- Begin of function report_award -------------//</span>
00305 <span class="comment">static void report_award(int refreshFlag) {</span>
00306     <span class="keywordtype">int</span> vtab1=<a class="code" href="Omiscrep_8cpp.html#a43a18">REPORT_Y1</a>+20,vtab2=<a class="code" href="Omiscrep_8cpp.html#a43a18">REPORT_Y1</a>+70,
00307         vtab3=<a class="code" href="Omiscrep_8cpp.html#a43a18">REPORT_Y1</a>+100,vtab4=<a class="code" href="Omiscrep_8cpp.html#a43a18">REPORT_Y1</a>+350;
00308 
00309     <span class="comment">//static int radioVar1 = 1; //*** temporary ***//</span>
00310     <span class="keyword">static</span> <span class="keywordtype">int</span> numSeriesData = 8;                   <span class="comment">//*** temporary ***//</span>
00311     <span class="keyword">static</span> <span class="keywordtype">int</span> *dataArray;
00312 
00313     <span class="comment">//  Communicate with Sim Engine's Output</span>
00314 
00315     <span class="comment">//          top_athletes=enroll_res.matrics_top_athletes;</span>
00316     <span class="comment">//          radioVar1 = athletics_office.ncaa_level_input;</span>
00317     vga.use_back();
00318 
00319     <span class="comment">// chwg031999 begin</span>
00320     <span class="keywordflow">if</span> (misc_report.page_num==1) {
00321         <span class="keywordflow">if</span> (refreshFlag == <a class="code" href="Gamedef_8h.html#a71a16">INFO_REPAINT</a>) {
00322             user_interface.bg_img(7, &amp;vga_back);
00323             info.disp_column_bitmap(&amp;vga_back);
00324             <a class="code" href="classFont.html">Font</a>* fontPtrArr[] = { &amp;font_pgold, &amp;font_psilver, &amp;font_pbronze};
00325 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00326 <span class="preprocessor"></span>            <span class="keywordtype">char</span> * sentence[]= {
00327                 <span class="stringliteral">"You have achieved the Summa Cum Laude plaque!"</span>,
00328                 <span class="stringliteral">"You have achieved the Magna Cum Laude plaque!"</span>,
00329                 <span class="stringliteral">"You have achieved the Cum Laude plaque!"</span>
00330             };
00331 
00332             fontPtrArr[player_school.plaque_last]-&gt;<a class="code" href="classFont.html#a16">center_put</a>(
00333                 <a class="code" href="Omiscrep_8cpp.html#a43a17">REPORT_X1</a>+30, <a class="code" href="Omiscrep_8cpp.html#a43a18">REPORT_Y1</a>+150, <a class="code" href="Omiscrep_8cpp.html#a43a19">REPORT_X2</a>-50, <a class="code" href="Omiscrep_8cpp.html#a43a18">REPORT_Y1</a>+180, <span class="stringliteral">"Congratulations!"</span> );
00334             fontPtrArr[player_school.plaque_last]-&gt;<a class="code" href="classFont.html#a16">center_put</a>(
00335                 <a class="code" href="Omiscrep_8cpp.html#a43a17">REPORT_X1</a>+30, <a class="code" href="Omiscrep_8cpp.html#a43a18">REPORT_Y1</a>+180, <a class="code" href="Omiscrep_8cpp.html#a43a19">REPORT_X2</a>-50, <a class="code" href="Omiscrep_8cpp.html#a43a18">REPORT_Y1</a>+210, sentence[player_school.plaque_last]);
00336 
00337 <span class="preprocessor">#else</span>
00338 <span class="preprocessor"></span>            <span class="comment">// fix in version 2 plague-&gt;plaque</span>
00339             <span class="comment">//                  char * sentence[]={</span>
00340             <span class="comment">//                          "Congratulations! \nYou have achieved the gold plague!",</span>
00341             <span class="comment">//                          "Congratulations! \nYou have achieved the silver plague!",</span>
00342             <span class="comment">//                          "Congratulations! \nYou have achieved the bronze plague!"</span>
00343             <span class="keywordtype">char</span> * sentence[]= {
00344                 <span class="stringliteral">"Congratulations! \nYou have achieved the gold plaque!"</span>,
00345                 <span class="stringliteral">"Congratulations! \nYou have achieved the silver plaque!"</span>,
00346                 <span class="stringliteral">"Congratulations! \nYou have achieved the bronze plaque!"</span>
00347             };
00348             fontPtrArr[player_school.plaque_last]-&gt;<a class="code" href="classFont.html#a17">put_paragraph</a>
00349                 (<a class="code" href="Omiscrep_8cpp.html#a43a17">REPORT_X1</a>+200,<a class="code" href="Omiscrep_8cpp.html#a43a18">REPORT_Y1</a>+150,<a class="code" href="Omiscrep_8cpp.html#a43a17">REPORT_X1</a>+600,<a class="code" href="Omiscrep_8cpp.html#a43a18">REPORT_Y1</a>+200,sentence[player_school.plaque_last]);
00350 <span class="preprocessor">#endif</span>
00351 <span class="preprocessor"></span>            button_back.<a class="code" href="classButton.html#a10">create_text</a>(350,vtab4+10,450,vtab4+28, <span class="stringliteral">"next"</span>);
00352             button_back.<a class="code" href="classButton.html#a20">paint</a>();
00353         }
00354         <span class="keywordflow">else</span> {
00355         }
00356     }
00357     <span class="comment">// chwg031999 end</span>
00358 
00359     <span class="keywordflow">else</span> <span class="keywordflow">if</span>(misc_report.page_num==2) {
00360         <span class="keywordflow">if</span> (refreshFlag == <a class="code" href="Gamedef_8h.html#a71a16">INFO_REPAINT</a>) { {
00361             <span class="comment">//---------  initialization  -----------//</span>
00362             mode_init_flag= <a class="code" href="Omiscrep_8cpp.html#a41a15">MODE_AWARD1</a>;
00363 
00364             image_interface.put_back(<a class="code" href="Omiscrep_8cpp.html#a43a17">REPORT_X1</a>+33,<a class="code" href="Omiscrep_8cpp.html#a43a18">REPORT_Y1</a>+20, plaque_image_str[player_school.plaque_last] );
00365 
00366             <a class="code" href="classString.html">String</a> strT = player_school.player_first_name;
00367             strT += <span class="stringliteral">" "</span>;
00368             strT += player_school.player_last_name;
00369 
00370             <a class="code" href="classFont.html">Font</a>* fontPtrArr[] = { &amp;font_pgold, &amp;font_psilver, &amp;font_pbronze};
00371 
00372             fontPtrArr[player_school.plaque_last]-&gt;<a class="code" href="classFont.html#a16">center_put</a>( <a class="code" href="Omiscrep_8cpp.html#a46a32">MODE_AWARD1_TAB1</a>,
00373                                                                <a class="code" href="Omiscrep_8cpp.html#a43a18">REPORT_Y1</a>+160,
00374                                                                <span class="comment">//MODE_AWARD1_TAB1+20+strlen(player_school.player_last_name)*font_pgold.max_font_width,</span>
00375                                                                50 + <a class="code" href="Omiscrep_8cpp.html#a46a30">MODE_AWARD1_BOX_WIDTH</a>,
00376                                                                <a class="code" href="Omiscrep_8cpp.html#a43a18">REPORT_Y1</a>+160+font_pgold.max_font_height,
00377                                                                strT);
00378 
00379             <span class="comment">// strT = date.date_str(info.game_date);</span>
00380             strT = info.date_str_julian(info.game_date);
00381 
00382             fontPtrArr[player_school.plaque_last]-&gt;<a class="code" href="classFont.html#a16">center_put</a>(<a class="code" href="Omiscrep_8cpp.html#a46a32">MODE_AWARD1_TAB1</a>,
00383                                                               <a class="code" href="Omiscrep_8cpp.html#a43a18">REPORT_Y1</a>+210,
00384                                                               <span class="comment">//MODE_AWARD1_TAB1+20+strlen(strT)*font_pgold.max_font_width,</span>
00385                                                               50 + <a class="code" href="Omiscrep_8cpp.html#a46a30">MODE_AWARD1_BOX_WIDTH</a>,
00386                                                               <a class="code" href="Omiscrep_8cpp.html#a43a18">REPORT_Y1</a>+210+font_pgold.max_font_height,
00387                                                               strT);
00388 
00389             button_back.<a class="code" href="classButton.html#a10">create_text</a>(350,vtab4+7,450,vtab4+28, <span class="stringliteral">"Proceed"</span>); {
00390             }
00391             <span class="comment">//else</span>
00392             <span class="comment">//-------- repaint -----------//</span>
00393             <span class="comment">// mode_award_radio_button_participation.paint();</span>
00394         }
00395 
00396         <span class="comment">//-------- graph text --------------//</span>
00397         <span class="comment">//font_san.put(REPORT_X1+MODE_AWARD1_TAB1,</span>
00398         <span class="comment">//                                              REPORT_Y1+15, mode_award_str4[0]);</span>
00399         button_back.<a class="code" href="classButton.html#a20">paint</a>();
00400         }
00401         <span class="keywordflow">else</span> {                                        <span class="comment">// refreshFlag == INFO_REFRESH</span>
00402         }
00403     }
00404 
00405     <span class="comment">// button_back.paint();</span>
00406 }
00407 
00408 <span class="comment">//-------- Begin of function report_award ---------//</span>
00409 
00410 <span class="comment">//-------- Begin of function detect_award ---------//</span>
00412 <span class="comment">static int detect_award() {</span>
00413     <span class="comment">// chwg031999 begin</span>
00414     <span class="keywordflow">if</span>(misc_report.page_num==1) {
00415         <span class="keywordflow">if</span>(button_back.<a class="code" href="classButton.html#a21">detect</a>()) {
00416             misc_report.page_num=2;
00417             sys.redraw_all_flag=1;
00418         }
00419     }
00420     <span class="keywordflow">else</span> <span class="keywordflow">if</span>(misc_report.page_num==2) {
00421         <span class="keywordflow">if</span> (mode_init_flag != <a class="code" href="Omiscrep_8cpp.html#a41a15">MODE_AWARD1</a>)
00422             <span class="keywordflow">return</span> 0;
00423         vga.use_front(); {
00424             <span class="comment">//if (mode_award_radio_button_participation.detect())</span>
00425             <span class="comment">//athletics_office.ncaa_level_input=*(mode_award_radio_button_participation.sel_num);</span>
00426             <span class="comment">//return 1;</span>
00427         }
00428 
00429         <span class="keywordflow">if</span>(button_back.<a class="code" href="classButton.html#a21">detect</a>()) {
00430             <span class="comment">//: go to last view mode or disp newspaper first!!!???</span>
00431             <span class="comment">//          news_array.scenario_news(0, player_school.plaque_last, date.year(info.game_start_date) + player_school.goal_deadline[player_school.plaque_last]);</span>
00432             sys.news_pop_up_flag=0;                     <span class="comment">// chwg031999 disable the newpopup after showing award.</span>
00433 
00434             sys.set_staying_view_mode(0);
00435             sys.set_view_mode(<a class="code" href="Osys_8h.html#a45a9">MODE_NORMAL</a>);
00436             misc_report.page_num=1;
00437         }
00438     }
00439     <span class="comment">// chwg031999 end</span>
00440     <span class="keywordflow">return</span> 0;
00441 }
00442 
00443 <span class="comment">//---------- End of function detect_award ---------//</span>
00444 
00445 <span class="comment">//-------- Begin of function deinit_award ---------//</span>
00447 <span class="comment">static void deinit_award() {</span>
00448     <span class="keywordflow">if</span> (mode_init_flag == <a class="code" href="Omiscrep_8cpp.html#a41a15">MODE_AWARD1</a>) {
00449 
00450         <span class="comment">//mode_award_radio_button_participation.deinit();</span>
00451 
00452         <span class="comment">// reset flag</span>
00453         mode_init_flag = -1;
00454     }
00455 }
00456 
00457 <span class="comment">//---------- End of function deinit_award ---------//</span>
</pre></div><hr><address style="align: right;"><small>Generated on Fri Aug 23 01:38:06 2002 for VirtualU by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.17 </small></address>
</body>
</html>
