<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Ogam_if2.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.17 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>Ogam_if2.cpp</h1><a href="Ogam__if2_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">//Filename    : OGAM_IF2.H</span>
00002 <span class="comment">//Description : Game Class Definition (Load game)</span>
00003 <span class="comment">//Owner       : Fred</span>
00004 
00005 <span class="preprocessor">#include &lt;OSYS.H&gt;</span>
00006 <span class="preprocessor">#include &lt;<a class="code" href="OLOG_8H.html">OLOG.H</a>&gt;</span>
00007 <span class="preprocessor">#include &lt;OMOUSE.H&gt;</span>
00008 <span class="preprocessor">#include &lt;<a class="code" href="OVGA_8H.html">OVGA.H</a>&gt;</span>
00009 
00010 <span class="preprocessor">#include &lt;OWORLDMT.H&gt;</span>                             <span class="comment">// ZOOM_Y1, etc</span>
00011 <span class="preprocessor">#include &lt;OIFACE.H&gt;</span>
00012 <span class="preprocessor">#include &lt;<a class="code" href="OGAME_8H.html">OGAME.H</a>&gt;</span>
00013 <span class="preprocessor">#include &lt;OGFILE.H&gt;</span>
00014 
00015 <span class="preprocessor">#include &lt;<a class="code" href="OVBROW98_8H.html">OVBROW98.H</a>&gt;</span>
00016 <span class="preprocessor">#include &lt;OBUTTON.H&gt;</span>
00017 <span class="preprocessor">#include &lt;<a class="code" href="OVGALOCK_8H.html">OVGALOCK.H</a>&gt;</span>
00018 
00019 <span class="comment">/*</span>
00020 <span class="comment">#include &lt;COLOR.H&gt;</span>
00021 <span class="comment">#include &lt;OFONT.H&gt;</span>
00022 <span class="comment">#include &lt;OGAMESTR.H&gt;</span>
00023 <span class="comment"></span>
00024 <span class="comment">#include &lt;OGAMESET.H&gt;</span>
00025 <span class="comment">#include &lt;OGSET.H&gt;</span>
00026 <span class="comment"></span>
00027 <span class="comment">#include &lt;OINFO.H&gt;</span>
00028 <span class="comment">*/</span>
00029 
00030 <span class="keyword">enum</span> {
00031     <a class="code" href="Ogam__if2_8cpp.html#a31a16">REPORT_X1</a> = <a class="code" href="Oworldmt_8h.html#a12">ZOOM_X1</a> + 15,
00032     <a class="code" href="Ogam__if2_8cpp.html#a31a17">REPORT_Y1</a> = <a class="code" href="Oworldmt_8h.html#a13">ZOOM_Y1</a> + 15,
00033     <a class="code" href="Ogam__if2_8cpp.html#a31a18">REPORT_X2</a> = <a class="code" href="Oworldmt_8h.html#a14">ZOOM_X2</a> - 15,
00034     <a class="code" href="Ogam__if2_8cpp.html#a31a19">REPORT_Y2</a> = <a class="code" href="Oworldmt_8h.html#a15">ZOOM_Y2</a> - 40
00035 };
00036 
00037 <span class="keyword">enum</span> {
00038     <a class="code" href="Ogam__if2_8cpp.html#a32a20">TMENU_X1</a> = <a class="code" href="Ogam__if2_8cpp.html#a31a16">REPORT_X1</a> + 5,
00039     <a class="code" href="Ogam__if2_8cpp.html#a32a21">TMENU_Y1</a> = <a class="code" href="Ogam__if2_8cpp.html#a31a17">REPORT_Y1</a> + 35,
00040     <a class="code" href="Ogam__if2_8cpp.html#a32a22">TMENU_X2</a> = <a class="code" href="Ogam__if2_8cpp.html#a31a18">REPORT_X2</a> - 5,
00041     <a class="code" href="Ogam__if2_8cpp.html#a32a23">TMENU_Y2</a> = <a class="code" href="Ogam__if2_8cpp.html#a31a19">REPORT_Y2</a> - 5
00042 };
00043 
00044 <span class="keyword">enum</span> { <a class="code" href="Ogam__if2_8cpp.html#a33a24">TAB_SCREEN</a>,<a class="code" href="Ogam__if2_8cpp.html#a33a25">SAVE_EXPRESS</a>};
00045 
00046 <span class="keyword">static</span> current_report_mode=<a class="code" href="Ogam__if2_8cpp.html#a33a24">TAB_SCREEN</a>;
00047 <span class="keyword">static</span> button_timing = 0;
00048 
00049 <span class="keyword">static</span> <a class="code" href="classButton.html">Button</a> button_start,button_cancel;
00050 <span class="keyword">static</span> <span class="keywordtype">char</span> * button_label[]={<span class="stringliteral">"Load Game"</span>,<span class="stringliteral">"Cancel"</span>};
00051 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00052 <span class="preprocessor"></span><span class="keyword">static</span> <a class="code" href="classButton.html">Button</a> button_browse;
00053 <span class="preprocessor">#endif</span>
00054 <span class="preprocessor"></span>
00055 <span class="keyword">static</span> <a class="code" href="classButton.html">Button</a> button_left,button_right,button_add,button_remove,button_reset,button_addall;
00056 
00057 <span class="keyword">static</span> <span class="keywordtype">char</span> screen_init_flag=0;
00058 <span class="keyword">static</span> <span class="keywordtype">char</span> redraw_browser_flag=0;
00059 <span class="keyword">static</span> <span class="keywordtype">int</span> pic_id=9;
00060 
00061 <span class="keyword">enum</span> {                                            <span class="comment">// screen coordinates</span>
00062     <a class="code" href="Ogam__if2_8cpp.html#a34a26">WIN_X1</a> = <a class="code" href="Ogam__if2_8cpp.html#a31a16">REPORT_X1</a>+15,
00063     <a class="code" href="Ogam__if2_8cpp.html#a34a27">WIN_Y1</a> = <a class="code" href="Ogam__if2_8cpp.html#a31a17">REPORT_Y1</a>+25,
00064     <a class="code" href="Ogam__if2_8cpp.html#a34a28">WIN_X2</a> = <a class="code" href="Ogam__if2_8cpp.html#a31a18">REPORT_X2</a>-15,
00065     <a class="code" href="Ogam__if2_8cpp.html#a34a29">WIN_Y2</a> = <a class="code" href="Ogam__if2_8cpp.html#a31a19">REPORT_Y2</a>-25
00066 };
00067 
00068 <span class="keyword">static</span> <span class="keywordtype">int</span> browser_rec_size;
00069 <span class="keyword">static</span> <a class="code" href="classVBrowse98.html">VBrowse98</a> game_browser;
00070 
00071 <span class="comment">//-----------------------------------------------------------------//</span>
00072 <span class="comment">//-----------------------------------------------------------------//</span>
00073 <span class="comment">//-----------------------------------------------------------------//</span>
00074 
00075 <span class="comment">//-----------------------------------------------------------------//</span>
00076 <span class="comment">//-----------------------------------------------------------------//</span>
00077 <span class="comment">//-----------------------------------------------------------------//</span>
00078 
00079 <span class="keyword">static</span> <span class="keywordtype">void</span> disp_load_game_rec(<span class="keywordtype">int</span> recNo, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> refreshFlag) {
00080     <span class="keywordflow">if</span>((recNo&gt;0)&amp;&amp;(recNo&lt;=game_file_array.size())) {
00081         <a class="code" href="classGameFile.html">GameFile</a>* gfPtr = game_file_array[recNo];
00082         <span class="keywordtype">char</span>* name = gfPtr-&gt;<a class="code" href="classGameFile.html#a0">get_save_name</a>();
00083         font_chartsm.put(x,y,name);
00084     }
00085 };
00086 
00087 <span class="comment">//------- Begin of function Game::loadgame_init ------//</span>
00089 <span class="comment">void Game::loadgame_init() {</span>
00090     screen_init_flag = 0;
00091 
00092     game_file_array.init(<span class="stringliteral">"*.SAV"</span>);
00093     browser_rec_size=game_file_array.size();
00094 }
00095 
<a name="l00096"></a><a class="code" href="classGame.html#a8">00096</a> <span class="keywordtype">void</span> <a class="code" href="classGame.html#a8">Game::loadgame_deinit</a>() {
00097     screen_init_flag = 0;
00098 }
00099 
00100 <span class="comment">//------- End of function Game::loadgame_init ------//</span>
00101 
00102 <span class="comment">//------- Begin of function Game::loadgame_report ------//</span>
00104 <span class="comment">void Game::loadgame_report(int refreshFlag) {</span>
00105     <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span>  tab1=<a class="code" href="Ogam__if2_8cpp.html#a34a26">WIN_X1</a>+10,
00106         tab2=<a class="code" href="Ogam__if2_8cpp.html#a34a26">WIN_X1</a>+410,
00107         vtab0=<a class="code" href="Ogam__if2_8cpp.html#a34a27">WIN_Y1</a>+10,
00108         vtab1=<a class="code" href="Ogam__if2_8cpp.html#a34a27">WIN_Y1</a>+60,
00109         vtab2=<a class="code" href="Ogam__if2_8cpp.html#a34a29">WIN_Y2</a>-30;
00110 
00111     vga.use_back();
00112 
00113     <span class="keywordflow">if</span>(current_report_mode==<a class="code" href="Ogam__if2_8cpp.html#a33a24">TAB_SCREEN</a>) {
00114         <span class="keywordflow">if</span>((refreshFlag == <a class="code" href="Gamedef_8h.html#a71a16">INFO_REPAINT</a>)) {
00115             user_interface.bg_img(pic_id, &amp;vga_back);
00116             font_charts.put(tab1+275, vtab0,<span class="stringliteral">"Saved Game List"</span>);
00117 
00118             <span class="keywordflow">if</span> (!screen_init_flag) {
00119 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00120 <span class="preprocessor"></span>                button_start.<a class="code" href="classButton.html#a10">create_text</a>
00121                     (<a class="code" href="Ogam__if2_8cpp.html#a31a16">REPORT_X1</a>+350-250, <a class="code" href="Ogam__if2_8cpp.html#a31a19">REPORT_Y2</a>+15,
00122                      <a class="code" href="Ogam__if2_8cpp.html#a31a16">REPORT_X1</a>+350-100, <a class="code" href="Ogam__if2_8cpp.html#a31a19">REPORT_Y2</a>+35, button_label[0]);
00123                 button_cancel.<a class="code" href="classButton.html#a10">create_text</a>
00124                     (<a class="code" href="Ogam__if2_8cpp.html#a31a16">REPORT_X1</a>+350-75, <a class="code" href="Ogam__if2_8cpp.html#a31a19">REPORT_Y2</a>+15,
00125                      <a class="code" href="Ogam__if2_8cpp.html#a31a16">REPORT_X1</a>+350+75, <a class="code" href="Ogam__if2_8cpp.html#a31a19">REPORT_Y2</a>+35, button_label[1]);
00126                 button_browse.<a class="code" href="classButton.html#a10">create_text</a>
00127                     (<a class="code" href="Ogam__if2_8cpp.html#a31a16">REPORT_X1</a>+350+100, <a class="code" href="Ogam__if2_8cpp.html#a31a19">REPORT_Y2</a>+15,
00128                      <a class="code" href="Ogam__if2_8cpp.html#a31a16">REPORT_X1</a>+350+250, <a class="code" href="Ogam__if2_8cpp.html#a31a19">REPORT_Y2</a>+35, <span class="stringliteral">"Browse"</span>);
00129 <span class="preprocessor">#else</span>
00130 <span class="preprocessor"></span>                button_start.<a class="code" href="classButton.html#a10">create_text</a>
00131                     (<a class="code" href="Ogam__if2_8cpp.html#a31a16">REPORT_X1</a>+150, <a class="code" href="Ogam__if2_8cpp.html#a31a19">REPORT_Y2</a>+15,
00132                      <a class="code" href="Ogam__if2_8cpp.html#a31a16">REPORT_X1</a>+300, <a class="code" href="Ogam__if2_8cpp.html#a31a19">REPORT_Y2</a>+35, button_label[0]);
00133                 button_cancel.<a class="code" href="classButton.html#a10">create_text</a>
00134                     (<a class="code" href="Ogam__if2_8cpp.html#a31a16">REPORT_X1</a>+400, <a class="code" href="Ogam__if2_8cpp.html#a31a19">REPORT_Y2</a>+15,
00135                      <a class="code" href="Ogam__if2_8cpp.html#a31a16">REPORT_X1</a>+550, <a class="code" href="Ogam__if2_8cpp.html#a31a19">REPORT_Y2</a>+35, button_label[1]);
00136 <span class="preprocessor">#endif</span>
00137 <span class="preprocessor"></span>
00138                 screen_init_flag = 1;
00139                 user_interface.brighten(tab1+100, vtab1+10, tab1+550, vtab2-20);
00140                 user_interface.rect(tab1+100, vtab1+10, tab1+550, vtab2-20);
00141                 game_browser.<a class="code" href="classVBrowse98.html#a2">init</a>( tab1+100, vtab1+10, tab1+550, vtab2-20,
00142                                    0, 18, browser_rec_size, disp_load_game_rec );
00143                 game_browser.<a class="code" href="classVBrowse98.html#a4">open</a>(game_browser.<a class="code" href="classVBrowse98.html#a6">recno</a>());
00144                 vga.blt_buf(0,0,<a class="code" href="OVGA_8H.html#a0">VGA_WIDTH</a>-1,<a class="code" href="OVGA_8H.html#a1">VGA_HEIGHT</a>-1);
00145             }
00146             <span class="keywordflow">else</span> {
00147                 <span class="comment">//                              user_interface.brighten(tab1+100, vtab1+10, tab1+550, vtab2-20);</span>
00148                 <span class="comment">//                              user_interface.rect(tab1+100, vtab1+10, tab1+550, vtab2-20);</span>
00149                 user_interface.brighten(tab1+100, vtab1+10, tab1+550, vtab2-20);
00150                 user_interface.rect(tab1+100, vtab1+10, tab1+550, vtab2-20);
00151                 <span class="comment">//                              vga.use_back();</span>
00152                 game_browser.<a class="code" href="classVBrowse98.html#a11">update</a>();
00153                 <span class="comment">//                              vga.blt_buf(tab1+100, vtab1+10, tab1+525, vtab2-20);</span>
00154             }
00155 
00156             <span class="comment">// chwg032999</span>
00157             <span class="comment">// begin</span>
00158             button_start.<a class="code" href="classButton.html#a20">paint</a>();
00159             button_cancel.<a class="code" href="classButton.html#a20">paint</a>();
00160 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00161 <span class="preprocessor"></span>            button_browse.<a class="code" href="classButton.html#a20">paint</a>();
00162             vga.blt_buf
00163                 (<a class="code" href="Ogam__if2_8cpp.html#a31a16">REPORT_X1</a>+350-250, <a class="code" href="Ogam__if2_8cpp.html#a31a19">REPORT_Y2</a>+15,
00164                  <a class="code" href="Ogam__if2_8cpp.html#a31a16">REPORT_X1</a>+350-100, <a class="code" href="Ogam__if2_8cpp.html#a31a19">REPORT_Y2</a>+35);
00165             vga.blt_buf
00166                 (<a class="code" href="Ogam__if2_8cpp.html#a31a16">REPORT_X1</a>+350-75, <a class="code" href="Ogam__if2_8cpp.html#a31a19">REPORT_Y2</a>+15,
00167                  <a class="code" href="Ogam__if2_8cpp.html#a31a16">REPORT_X1</a>+350+75, <a class="code" href="Ogam__if2_8cpp.html#a31a19">REPORT_Y2</a>+35);
00168             vga.blt_buf
00169                 (<a class="code" href="Ogam__if2_8cpp.html#a31a16">REPORT_X1</a>+350+100, <a class="code" href="Ogam__if2_8cpp.html#a31a19">REPORT_Y2</a>+15,
00170                  <a class="code" href="Ogam__if2_8cpp.html#a31a16">REPORT_X1</a>+350+250, <a class="code" href="Ogam__if2_8cpp.html#a31a19">REPORT_Y2</a>+35);
00171 <span class="preprocessor">#else</span>
00172 <span class="preprocessor"></span>            vga.blt_buf
00173                 (<a class="code" href="Ogam__if2_8cpp.html#a31a16">REPORT_X1</a>+150, <a class="code" href="Ogam__if2_8cpp.html#a31a19">REPORT_Y2</a>+15,
00174                  <a class="code" href="Ogam__if2_8cpp.html#a31a16">REPORT_X1</a>+300, <a class="code" href="Ogam__if2_8cpp.html#a31a19">REPORT_Y2</a>+35);
00175             vga.blt_buf
00176                 (<a class="code" href="Ogam__if2_8cpp.html#a31a16">REPORT_X1</a>+400, <a class="code" href="Ogam__if2_8cpp.html#a31a19">REPORT_Y2</a>+15,
00177                  <a class="code" href="Ogam__if2_8cpp.html#a31a16">REPORT_X1</a>+550, <a class="code" href="Ogam__if2_8cpp.html#a31a19">REPORT_Y2</a>+35);
00178 <span class="preprocessor">#endif</span>
00179 <span class="preprocessor"></span>
00180             <span class="comment">//                  vga.blt_buf(0,0,VGA_WIDTH-1,VGA_HEIGHT-1);</span>
00181             <span class="comment">// end</span>
00182         }
00183         <span class="keywordflow">else</span> {
00184         }
00185 
00186         <span class="comment">//              button_start.paint();</span>
00187         <span class="comment">//              button_cancel.paint();</span>
00188         <span class="comment">// chwg032999</span>
00189         <span class="comment">// begin</span>
00190         <span class="comment">//              vga.blt_buf(REPORT_X1+150, REPORT_Y2+15,</span>
00191         <span class="comment">//                                              REPORT_X1+300, REPORT_Y2+35);</span>
00192         <span class="comment">//              vga.blt_buf(REPORT_X1+400, REPORT_Y2+15,</span>
00193         <span class="comment">//                                              REPORT_X1+550, REPORT_Y2+35);</span>
00194         sys.yield();
00195         <span class="comment">// end</span>
00196     }
00197 
00198     <span class="comment">//  vga.blt_buf(0,0,VGA_WIDTH-1,VGA_HEIGHT-1);              // DON'T need to blt all area...</span>
00199 }
00200 
00201 <span class="comment">//------- End of function GameSetting::loadgame_report ------//</span>
00202 
00203 <span class="comment">//------ Begin of function GameSetting::loadgame_detect ------//</span>
00209 <span class="comment">int Game::loadgame_detect() {</span>
00210     <span class="keywordtype">int</span> rc=0;
00211     vga.use_back();
00212 
00213     <span class="keywordflow">if</span>(current_report_mode==<a class="code" href="Ogam__if2_8cpp.html#a33a24">TAB_SCREEN</a>) {
00214         vga.use_front();
00215 
00216         <span class="keywordflow">if</span>( button_start.<a class="code" href="classButton.html#a21">detect</a>() ) {
00217             <span class="keywordflow">if</span> ( game_file_array.size()&gt;=game_browser.<a class="code" href="classVBrowse98.html#a6">recno</a>() &amp;&amp; game_browser.<a class="code" href="classVBrowse98.html#a6">recno</a>()&gt;0) {
00218                 game_file_array[game_browser.<a class="code" href="classVBrowse98.html#a6">recno</a>()]-&gt;load_game();
00219                 <span class="comment">//sys.redraw_all_flag=1;</span>
00220                 <span class="comment">//menu_pull_down = 0;</span>
00221                 sys.set_staying_view_mode(0);
00222                 sys.redraw_all_flag=1;
00223                 rc = 1;
00224             }
00225 
00226         }
00227 
00228         <span class="keywordflow">if</span>( button_cancel.<a class="code" href="classButton.html#a21">detect</a>() )
00229             rc = -1;
00230 
00231 <span class="preprocessor">#if(GAME_VERSION&gt;=200)</span>
00232 <span class="preprocessor"></span>        <span class="keywordflow">if</span>( button_browse.<a class="code" href="classButton.html#a21">detect</a>() ) {
00233             <span class="keywordtype">char</span> loadFileName[MAX_PATH] = <span class="stringliteral">""</span>;
00234             BOOL retValue = FALSE; {
00235                 <a class="code" href="classMouseDispCount.html">MouseDispCount</a> mouseDispCount;            <span class="comment">// redisplay windows cursor</span>
00236 
00237                 <span class="comment">// ask filename now</span>
00238                 OPENFILENAME openFileName;
00239                 memset( &amp;openFileName, 0, <span class="keyword">sizeof</span>(openFileName) );
00240                 openFileName.lStructSize = <span class="keyword">sizeof</span>(openFileName);
00241                 openFileName.hwndOwner = sys.main_hwnd;
00242                 openFileName.hInstance = sys.app_hinstance;
00243                 <span class="comment">// 2 '\0' at the end</span>
00244                 openFileName.lpstrFilter = <span class="stringliteral">"All Files(*.*)\0*.*\0"</span>;
00245                 openFileName.lpstrCustomFilter = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00246                 openFileName.nMaxCustFilter = 0;
00247                 openFileName.nFilterIndex = 0;
00248                 openFileName.lpstrFile =  loadFileName;   <span class="comment">// first char is already NULL</span>
00249                 openFileName.nMaxFile = <span class="keyword">sizeof</span>(loadFileName);
00250                 openFileName.lpstrFileTitle = <a class="code" href="OHELP_8H.html#a0">NULL</a>;       <span class="comment">// result filename, without path</span>
00251                 openFileName.nMaxFileTitle = 0;
00252                 openFileName.lpstrInitialDir = <span class="stringliteral">"."</span>;       <span class="comment">// current directory</span>
00253                 openFileName.lpstrTitle = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00254                 openFileName.Flags = OFN_LONGNAMES | OFN_PATHMUSTEXIST | OFN_FILEMUSTEXIST | OFN_HIDEREADONLY;
00255                 openFileName.nFileOffset = 0;
00256                 openFileName.nFileExtension = 0;
00257                 openFileName.lpstrDefExt = <span class="stringliteral">"001"</span>;
00258                 openFileName.lCustData = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00259                 openFileName.lpfnHook = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00260                 openFileName.lpTemplateName = <a class="code" href="OHELP_8H.html#a0">NULL</a>;
00261 
00262                 retValue = GetOpenFileName(&amp;openFileName);
00263             }                                           <span class="comment">// call mouseDispCount destructor</span>
00264 
00265             <span class="keywordflow">if</span>( retValue ) {
00266                 game_file.load_game(loadFileName);
00267                 <span class="comment">//sys.redraw_all_flag=1;</span>
00268                 <span class="comment">//menu_pull_down = 0;</span>
00269                 sys.set_staying_view_mode(0);
00270                 sys.redraw_all_flag=1;
00271                 rc = 1;
00272             }
00273         }
00274 <span class="preprocessor">#endif</span>
00275 <span class="preprocessor"></span>
00276         vga.use_back();                               <span class="comment">// why do this here? before vbrowse??</span>
00277 
00278         <span class="keywordflow">if</span>(<span class="keywordtype">int</span> rec=game_browser.<a class="code" href="classVBrowse98.html#a8">detect</a>()) {
00279             game_browser.<a class="code" href="classVBrowse98.html#a10">refresh</a>(rec);
00280             <span class="keywordflow">if</span>(game_browser.<a class="code" href="classVBrowse98.html#m1">double_click</a>) {
00281                 <span class="keywordflow">if</span> (game_file_array.size()&gt;=rec &amp;&amp; rec&gt;0) {
00282                     game_file_array[rec]-&gt;load_game();
00283                     <span class="comment">//sys.redraw_all_flag=1;</span>
00284                     <span class="comment">//menu_pull_down = 0;</span>
00285                     sys.set_staying_view_mode(0);           <span class="comment">// 0: restore last saved mode which is not "staying"</span>
00286                     sys.redraw_all_flag=1;
00287                     <span class="keywordflow">return</span> 1;
00288                 }
00289             }
00290             sys.redraw_all_flag=1;
00291         }
00292     }
00293     vga.use_back();
00294 
00295     <span class="keywordflow">return</span> rc;
00296 }
00297 
00298 <span class="comment">//------- End of function GameSetting::loadgame_detect ------//</span>
</pre></div><hr><address style="align: right;"><small>Generated on Fri Aug 23 01:37:41 2002 for VirtualU by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.17 </small></address>
</body>
</html>
