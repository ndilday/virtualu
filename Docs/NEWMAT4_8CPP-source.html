<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>NEWMAT4.CPP Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.17 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>NEWMAT4.CPP</h1><a href="NEWMAT4_8CPP.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">//Owner: Fred</span>
00002 <span class="comment">//$$ newmat4.cpp       Constructors, ReSize, basic utilities</span>
00003 
00004 <span class="comment">// Copyright (C) 1991,2,3,4: R B Davies</span>
00005 
00006 <span class="preprocessor">#include "include.h"</span>
00007 
00008 <span class="preprocessor">#include "newmat.h"</span>
00009 <span class="preprocessor">#include "newmatrc.h"</span>
00010 
00011 <span class="preprocessor">#ifdef use_namespace</span>
00012 <span class="preprocessor"></span><span class="keyword">namespace </span>NEWMAT {
00013 <span class="preprocessor">#endif</span>
00014 <span class="preprocessor"></span>
00015 <span class="preprocessor">#ifdef DO_REPORT</span>
00016 <span class="preprocessor"></span><span class="preprocessor">#define REPORT { static ExeCounter ExeCount(__LINE__,4); ++ExeCount; }</span>
00017 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00018"></a><a class="code" href="NEWMAT4_8CPP.html#a0">00018</a> <span class="preprocessor"></span><span class="preprocessor">#define REPORT {}</span>
00019 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00020 <span class="preprocessor"></span>
<a name="l00021"></a><a class="code" href="NEWMAT4_8CPP.html#a1">00021</a> <span class="preprocessor">#define DO_SEARCH                               // search for LHS of = in RHS</span>
00022 <span class="preprocessor"></span>
00023     <span class="comment">/*************************** general utilities *************************/</span>
00024 
00025     <span class="keyword">static</span> <span class="keywordtype">int</span> tristore(<span class="keywordtype">int</span> n)                      <span class="comment">// elements in triangular matrix</span>
00026     { <span class="keywordflow">return</span> (n*(n+1))/2; }
00027 
00028     <span class="comment">/****************************** constructors ***************************/</span>
00029 
<a name="l00030"></a><a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b0">00030</a>     GeneralMatrix::GeneralMatrix()
00031     { <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>=0; <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a>=0; <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>=0; <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>=0; <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n0">tag</a>=-1; }
00032 
<a name="l00033"></a><a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b1">00033</a>     GeneralMatrix::GeneralMatrix(<a class="code" href="classNEWMAT_1_1ArrayLengthSpecifier.html">ArrayLengthSpecifier</a> s) {
00034         <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a>
00035             <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a>=s.<a class="code" href="classNEWMAT_1_1ArrayLengthSpecifier.html#a0">Value</a>(); <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n0">tag</a>=-1;
00036         <span class="keywordflow">if</span> (storage) {
00037             <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a> = <span class="keyword">new</span> <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a> [<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a>]; <a class="code" href="namespaceNEWMAT.html#a19">MatrixErrorNoSpace</a>(<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>);
00038             <a class="code" href="MYEXCEPT_8H.html#a1">MONITOR_REAL_NEW</a>(<span class="stringliteral">"Make (GenMatrix)"</span>,<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a>,<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>)
00039                 }
00040         <span class="keywordflow">else</span> <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a> = 0;
00041     }
00042 
<a name="l00043"></a><a class="code" href="classNEWMAT_1_1Matrix.html#a1">00043</a>     <a class="code" href="classMatrix.html#a0">Matrix::Matrix</a>(<span class="keywordtype">int</span> m, <span class="keywordtype">int</span> n) : <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>(m*n)
00044     { <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a> <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>=m; <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>=n; }
00045 
<a name="l00046"></a><a class="code" href="classNEWMAT_1_1SymmetricMatrix.html#a1">00046</a>     SymmetricMatrix::SymmetricMatrix(<a class="code" href="classNEWMAT_1_1ArrayLengthSpecifier.html">ArrayLengthSpecifier</a> n)
00047         : <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>(tristore(n.Value()))
00048     { <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a> <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>=n.Value(); <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>=n.Value(); }
00049 
<a name="l00050"></a><a class="code" href="classNEWMAT_1_1UpperTriangularMatrix.html#a1">00050</a>     UpperTriangularMatrix::UpperTriangularMatrix(<a class="code" href="classNEWMAT_1_1ArrayLengthSpecifier.html">ArrayLengthSpecifier</a> n)
00051         : <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>(tristore(n.Value()))
00052     { <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a> <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>=n.Value(); <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>=n.Value(); }
00053 
<a name="l00054"></a><a class="code" href="classNEWMAT_1_1LowerTriangularMatrix.html#a1">00054</a>     LowerTriangularMatrix::LowerTriangularMatrix(<a class="code" href="classNEWMAT_1_1ArrayLengthSpecifier.html">ArrayLengthSpecifier</a> n)
00055         : <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>(tristore(n.Value()))
00056     { <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a> <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>=n.Value(); <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>=n.Value(); }
00057 
<a name="l00058"></a><a class="code" href="classNEWMAT_1_1DiagonalMatrix.html#a1">00058</a>     DiagonalMatrix::DiagonalMatrix(<a class="code" href="classNEWMAT_1_1ArrayLengthSpecifier.html">ArrayLengthSpecifier</a> m) : <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>(m)
00059     { <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a> <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>=m.Value(); <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>=m.Value(); }
00060 
<a name="l00061"></a><a class="code" href="classNEWMAT_1_1Matrix.html#a2">00061</a>     <a class="code" href="classMatrix.html#a0">Matrix::Matrix</a>(<span class="keyword">const</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html">BaseMatrix</a>&amp; M) {
00062         <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a>                                        <span class="comment">// CheckConversion(M);</span>
00063             <a class="code" href="classNEWMAT_1_1MatrixConversionCheck.html">MatrixConversionCheck</a> mcc;
00064         <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gmx=((<a class="code" href="classNEWMAT_1_1BaseMatrix.html">BaseMatrix</a>&amp;)M).Evaluate(MatrixType::Rt);
00065         <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b15">GetMatrix</a>(gmx);
00066     }
00067 
<a name="l00068"></a><a class="code" href="classNEWMAT_1_1RowVector.html#a2">00068</a>     RowVector::RowVector(<span class="keyword">const</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html">BaseMatrix</a>&amp; M) : <a class="code" href="classNEWMAT_1_1Matrix.html">Matrix</a>(M) {
00069         <span class="keywordflow">if</span> (<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>!=1) {
00070             <a class="code" href="classTracer.html">Tracer</a> tr(<span class="stringliteral">"RowVector"</span>);
00071             Throw(<a class="code" href="classNEWMAT_1_1VectorException.html">VectorException</a>(*<span class="keyword">this</span>));
00072         }
00073     }
00074 
<a name="l00075"></a><a class="code" href="classNEWMAT_1_1ColumnVector.html#a2">00075</a>     ColumnVector::ColumnVector(<span class="keyword">const</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html">BaseMatrix</a>&amp; M) : <a class="code" href="classNEWMAT_1_1Matrix.html">Matrix</a>(M) {
00076         <span class="keywordflow">if</span> (<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>!=1) {
00077             <a class="code" href="classTracer.html">Tracer</a> tr(<span class="stringliteral">"ColumnVector"</span>);
00078             Throw(<a class="code" href="classNEWMAT_1_1VectorException.html">VectorException</a>(*<span class="keyword">this</span>));
00079         }
00080     }
00081 
<a name="l00082"></a><a class="code" href="classNEWMAT_1_1SymmetricMatrix.html#a2">00082</a>     SymmetricMatrix::SymmetricMatrix(<span class="keyword">const</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html">BaseMatrix</a>&amp; M) {
00083         <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a>                                        <span class="comment">// CheckConversion(M);</span>
00084             <a class="code" href="classNEWMAT_1_1MatrixConversionCheck.html">MatrixConversionCheck</a> mcc;
00085         <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gmx=((<a class="code" href="classNEWMAT_1_1BaseMatrix.html">BaseMatrix</a>&amp;)M).Evaluate(MatrixType::Sm);
00086         <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b15">GetMatrix</a>(gmx);
00087     }
00088 
<a name="l00089"></a><a class="code" href="classNEWMAT_1_1UpperTriangularMatrix.html#a4">00089</a>     UpperTriangularMatrix::UpperTriangularMatrix(<span class="keyword">const</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html">BaseMatrix</a>&amp; M) {
00090         <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a>                                        <span class="comment">// CheckConversion(M);</span>
00091             <a class="code" href="classNEWMAT_1_1MatrixConversionCheck.html">MatrixConversionCheck</a> mcc;
00092         <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gmx=((<a class="code" href="classNEWMAT_1_1BaseMatrix.html">BaseMatrix</a>&amp;)M).Evaluate(MatrixType::UT);
00093         <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b15">GetMatrix</a>(gmx);
00094     }
00095 
<a name="l00096"></a><a class="code" href="classNEWMAT_1_1LowerTriangularMatrix.html#a4">00096</a>     LowerTriangularMatrix::LowerTriangularMatrix(<span class="keyword">const</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html">BaseMatrix</a>&amp; M) {
00097         <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a>                                        <span class="comment">// CheckConversion(M);</span>
00098             <a class="code" href="classNEWMAT_1_1MatrixConversionCheck.html">MatrixConversionCheck</a> mcc;
00099         <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gmx=((<a class="code" href="classNEWMAT_1_1BaseMatrix.html">BaseMatrix</a>&amp;)M).Evaluate(MatrixType::LT);
00100         <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b15">GetMatrix</a>(gmx);
00101     }
00102 
<a name="l00103"></a><a class="code" href="classNEWMAT_1_1DiagonalMatrix.html#a2">00103</a>     DiagonalMatrix::DiagonalMatrix(<span class="keyword">const</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html">BaseMatrix</a>&amp; M) {
00104         <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a>                                        <span class="comment">//CheckConversion(M);</span>
00105             <a class="code" href="classNEWMAT_1_1MatrixConversionCheck.html">MatrixConversionCheck</a> mcc;
00106         <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gmx=((<a class="code" href="classNEWMAT_1_1BaseMatrix.html">BaseMatrix</a>&amp;)M).Evaluate(MatrixType::Dg);
00107         <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b15">GetMatrix</a>(gmx);
00108     }
00109 
<a name="l00110"></a><a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a6">00110</a>     GeneralMatrix::~GeneralMatrix() {
00111         <span class="keywordflow">if</span> (store) {
00112             <a class="code" href="MYEXCEPT_8H.html#a3">MONITOR_REAL_DELETE</a>(<span class="stringliteral">"Free (GenMatrix)"</span>,<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a>,<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>)
00113                 <span class="keyword">delete</span> [] <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>;
00114         }
00115     }
00116 
<a name="l00117"></a><a class="code" href="classNEWMAT_1_1CroutMatrix.html#a0">00117</a>     CroutMatrix::CroutMatrix(<span class="keyword">const</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html">BaseMatrix</a>&amp; m) {
00118         <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a>
00119             <a class="code" href="classTracer.html">Tracer</a> tr(<span class="stringliteral">"CroutMatrix"</span>);
00120         <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gm = ((<a class="code" href="classNEWMAT_1_1BaseMatrix.html">BaseMatrix</a>&amp;)m).Evaluate(MatrixType::Rt);
00121         <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b15">GetMatrix</a>(gm);
00122         <span class="keywordflow">if</span> (<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>!=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>) Throw(<a class="code" href="classNEWMAT_1_1NotSquareException.html">NotSquareException</a>(*<span class="keyword">this</span>));
00123         d=<span class="keyword">true</span>; sing=<span class="keyword">false</span>;
00124         indx=<span class="keyword">new</span> <span class="keywordtype">int</span> [<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>]; <a class="code" href="namespaceNEWMAT.html#a19">MatrixErrorNoSpace</a>(indx);
00125         <a class="code" href="MYEXCEPT_8H.html#a2">MONITOR_INT_NEW</a>(<span class="stringliteral">"Index (CroutMat)"</span>,<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>,indx)
00126             ludcmp();
00127     }
00128 
<a name="l00129"></a><a class="code" href="classNEWMAT_1_1CroutMatrix.html#a3">00129</a>     CroutMatrix::~CroutMatrix() {
00130         <a class="code" href="MYEXCEPT_8H.html#a4">MONITOR_INT_DELETE</a>(<span class="stringliteral">"Index (CroutMat)"</span>,<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>,indx)
00131             <span class="keyword">delete</span> [] indx;
00132     }
00133 
00134     <span class="comment">//ReturnMatrixX::ReturnMatrixX(GeneralMatrix&amp; gmx)</span>
00135     <span class="comment">//{</span>
00136     <span class="comment">//   REPORT</span>
00137     <span class="comment">//   gm = gmx.Image(); gm-&gt;ReleaseAndDelete();</span>
00138     <span class="comment">//}</span>
00139 
00140 <span class="preprocessor">#ifndef TEMPS_DESTROYED_QUICKLY_R</span>
00141 <span class="preprocessor"></span>
00142     GeneralMatrix::operator ReturnMatrixX()<span class="keyword"> const </span>{
00143         <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a>
00144             <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b0">GeneralMatrix</a>* gm = Image(); gm-&gt;ReleaseAndDelete();
00145         <span class="keywordflow">return</span> <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#l33">ReturnMatrixX</a>(gm);
00146     }
00147 
00148 <span class="preprocessor">#else</span>
00149 <span class="preprocessor"></span>
00150     GeneralMatrix::operator ReturnMatrixX&amp;()<span class="keyword"> const </span>{
00151         <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a>
00152             <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b0">GeneralMatrix</a>* gm = Image(); gm-&gt;ReleaseAndDelete();
00153         <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#l33">ReturnMatrixX</a>* x = <span class="keyword">new</span> <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#l33">ReturnMatrixX</a>(gm);
00154         <a class="code" href="namespaceNEWMAT.html#a19">MatrixErrorNoSpace</a>(x); <span class="keywordflow">return</span> *x;
00155     }
00156 <span class="preprocessor">#endif</span>
00157 <span class="preprocessor"></span>
00158 <span class="preprocessor">#ifndef TEMPS_DESTROYED_QUICKLY_R</span>
00159 <span class="preprocessor"></span>
<a name="l00160"></a><a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a49">00160</a>     <a class="code" href="classNEWMAT_1_1ReturnMatrixX.html">ReturnMatrixX</a> GeneralMatrix::ForReturn()<span class="keyword"> const </span>{
00161         <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a>
00162             <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gm = Image(); gm-&gt;ReleaseAndDelete();
00163         <span class="keywordflow">return</span> <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#l33">ReturnMatrixX</a>(gm);
00164     }
00165 
00166 <span class="preprocessor">#else</span>
00167 <span class="preprocessor"></span>
00168     ReturnMatrixX&amp; GeneralMatrix::ForReturn()<span class="keyword"> const </span>{
00169         <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a>
00170             <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b0">GeneralMatrix</a>* gm = Image(); gm-&gt;ReleaseAndDelete();
00171         <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#l33">ReturnMatrixX</a>* x = <span class="keyword">new</span> <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#l33">ReturnMatrixX</a>(gm);
00172         <a class="code" href="namespaceNEWMAT.html#a19">MatrixErrorNoSpace</a>(x); <span class="keywordflow">return</span> *x;
00173     }
00174 <span class="preprocessor">#endif</span>
00175 <span class="preprocessor"></span>
00176     <span class="comment">/**************************** ReSize matrices ***************************/</span>
00177 
<a name="l00178"></a><a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b21">00178</a>     <span class="keywordtype">void</span> GeneralMatrix::ReSize(<span class="keywordtype">int</span> nr, <span class="keywordtype">int</span> nc, <span class="keywordtype">int</span> s) {
00179         <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a>
00180             <span class="keywordflow">if</span> (store) {
00181                 <a class="code" href="MYEXCEPT_8H.html#a3">MONITOR_REAL_DELETE</a>(<span class="stringliteral">"Free (ReDimensi)"</span>,<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a>,<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>)
00182                     <span class="keyword">delete</span> [] <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>;
00183             }
00184         <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a>=s; <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>=nr; <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>=nc; <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n0">tag</a>=-1;
00185         <span class="keywordflow">if</span> (s) {
00186             <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a> = <span class="keyword">new</span> <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a> [<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a>]; <a class="code" href="namespaceNEWMAT.html#a19">MatrixErrorNoSpace</a>(<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>);
00187             <a class="code" href="MYEXCEPT_8H.html#a1">MONITOR_REAL_NEW</a>(<span class="stringliteral">"Make (ReDimensi)"</span>,<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a>,<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>)
00188                 }
00189         <span class="keywordflow">else</span> <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a> = 0;
00190     }
00191 
<a name="l00192"></a><a class="code" href="classNEWMAT_1_1Matrix.html#a21">00192</a>     <span class="keywordtype">void</span> Matrix::ReSize(<span class="keywordtype">int</span> nr, <span class="keywordtype">int</span> nc)
00193     { <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a> GeneralMatrix::ReSize(nr,nc,nr*nc); }
00194 
<a name="l00195"></a><a class="code" href="classNEWMAT_1_1SymmetricMatrix.html#a21">00195</a>     <span class="keywordtype">void</span> SymmetricMatrix::ReSize(<span class="keywordtype">int</span> nr)
00196     { <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a> GeneralMatrix::ReSize(nr,nr,tristore(nr)); }
00197 
<a name="l00198"></a><a class="code" href="classNEWMAT_1_1UpperTriangularMatrix.html#a21">00198</a>     <span class="keywordtype">void</span> UpperTriangularMatrix::ReSize(<span class="keywordtype">int</span> nr)
00199     { <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a> GeneralMatrix::ReSize(nr,nr,tristore(nr)); }
00200 
<a name="l00201"></a><a class="code" href="classNEWMAT_1_1LowerTriangularMatrix.html#a21">00201</a>     <span class="keywordtype">void</span> LowerTriangularMatrix::ReSize(<span class="keywordtype">int</span> nr)
00202     { <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a> GeneralMatrix::ReSize(nr,nr,tristore(nr)); }
00203 
<a name="l00204"></a><a class="code" href="classNEWMAT_1_1DiagonalMatrix.html#a25">00204</a>     <span class="keywordtype">void</span> DiagonalMatrix::ReSize(<span class="keywordtype">int</span> nr)
00205     { <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a> GeneralMatrix::ReSize(nr,nr,nr); }
00206 
<a name="l00207"></a><a class="code" href="classNEWMAT_1_1RowVector.html#a18">00207</a>     <span class="keywordtype">void</span> RowVector::ReSize(<span class="keywordtype">int</span> nc)
00208     { <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a> GeneralMatrix::ReSize(1,nc,nc); }
00209 
<a name="l00210"></a><a class="code" href="classNEWMAT_1_1ColumnVector.html#a12">00210</a>     <span class="keywordtype">void</span> ColumnVector::ReSize(<span class="keywordtype">int</span> nr)
00211     { <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a> GeneralMatrix::ReSize(nr,1,nr); }
00212 
<a name="l00213"></a><a class="code" href="classNEWMAT_1_1RowVector.html#a19">00213</a>     <span class="keywordtype">void</span> RowVector::ReSize(<span class="keywordtype">int</span> nr, <span class="keywordtype">int</span> nc) {
00214         <a class="code" href="classTracer.html">Tracer</a> tr(<span class="stringliteral">"RowVector::ReSize"</span>);
00215         <span class="keywordflow">if</span> (nr != 1) Throw(<a class="code" href="classNEWMAT_1_1VectorException.html">VectorException</a>(*<span class="keyword">this</span>));
00216         <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a> GeneralMatrix::ReSize(1,nc,nc);
00217     }
00218 
<a name="l00219"></a><a class="code" href="classNEWMAT_1_1ColumnVector.html#a13">00219</a>     <span class="keywordtype">void</span> ColumnVector::ReSize(<span class="keywordtype">int</span> nr, <span class="keywordtype">int</span> nc) {
00220         <a class="code" href="classTracer.html">Tracer</a> tr(<span class="stringliteral">"ColumnVector::ReSize"</span>);
00221         <span class="keywordflow">if</span> (nc != 1) Throw(<a class="code" href="classNEWMAT_1_1VectorException.html">VectorException</a>(*<span class="keyword">this</span>));
00222         <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a> GeneralMatrix::ReSize(nr,1,nr);
00223     }
00224 
00225     <span class="comment">/********************* manipulate types, storage **************************/</span>
00226 
<a name="l00227"></a><a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b18">00227</a>     <span class="keywordtype">int</span> GeneralMatrix::search(<span class="keyword">const</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html">BaseMatrix</a>* s)<span class="keyword"> const</span>
00228 <span class="keyword">    </span>{ <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a> <span class="keywordflow">return</span> (s==<span class="keyword">this</span>) ? 1 : 0; }
00229 
00230     <span class="keywordtype">int</span> GenericMatrix::search(<span class="keyword">const</span> BaseMatrix* s)<span class="keyword"> const</span>
00231 <span class="keyword">    </span>{ <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a> <span class="keywordflow">return</span> gm-&gt;search(s); }
00232 
<a name="l00233"></a><a class="code" href="classNEWMAT_1_1MultipliedMatrix.html#b1">00233</a>     <span class="keywordtype">int</span> MultipliedMatrix::search(<span class="keyword">const</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html">BaseMatrix</a>* s)<span class="keyword"> const</span>
00234 <span class="keyword">    </span>{ <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a> <span class="keywordflow">return</span> <a class="code" href="classNEWMAT_1_1MultipliedMatrix.html#n0">bm1</a>-&gt;<a class="code" href="classNEWMAT_1_1BaseMatrix.html#b0">search</a>(s) + <a class="code" href="classNEWMAT_1_1MultipliedMatrix.html#n2">bm2</a>-&gt;<a class="code" href="classNEWMAT_1_1BaseMatrix.html#b0">search</a>(s); }
00235 
<a name="l00236"></a><a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#b1">00236</a>     <span class="keywordtype">int</span> ShiftedMatrix::search(<span class="keyword">const</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html">BaseMatrix</a>* s)<span class="keyword"> const</span>
00237 <span class="keyword">    </span>{ <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a> <span class="keywordflow">return</span> <a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n1">bm</a>-&gt;<a class="code" href="classNEWMAT_1_1BaseMatrix.html#b0">search</a>(s); }
00238 
<a name="l00239"></a><a class="code" href="classNEWMAT_1_1NegatedMatrix.html#b1">00239</a>     <span class="keywordtype">int</span> NegatedMatrix::search(<span class="keyword">const</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html">BaseMatrix</a>* s)<span class="keyword"> const</span>
00240 <span class="keyword">    </span>{ <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a> <span class="keywordflow">return</span> <a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n0">bm</a>-&gt;<a class="code" href="classNEWMAT_1_1BaseMatrix.html#b0">search</a>(s); }
00241 
00242     <span class="keywordtype">int</span> ReturnMatrixX::search(<span class="keyword">const</span> BaseMatrix* s)<span class="keyword"> const</span>
00243 <span class="keyword">    </span>{ <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a> <span class="keywordflow">return</span> (s==<a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>) ? 1 : 0; }
00244 
<a name="l00245"></a><a class="code" href="classNEWMAT_1_1Matrix.html#a6">00245</a>     <a class="code" href="classNEWMAT_1_1MatrixType.html">MatrixType</a> Matrix::Type()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> MatrixType::Rt; }
<a name="l00246"></a><a class="code" href="classNEWMAT_1_1SymmetricMatrix.html#a8">00246</a>     <a class="code" href="classNEWMAT_1_1MatrixType.html">MatrixType</a> SymmetricMatrix::Type()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> MatrixType::Sm; }
<a name="l00247"></a><a class="code" href="classNEWMAT_1_1UpperTriangularMatrix.html#a10">00247</a>     <a class="code" href="classNEWMAT_1_1MatrixType.html">MatrixType</a> UpperTriangularMatrix::Type()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> MatrixType::UT; }
<a name="l00248"></a><a class="code" href="classNEWMAT_1_1LowerTriangularMatrix.html#a10">00248</a>     <a class="code" href="classNEWMAT_1_1MatrixType.html">MatrixType</a> LowerTriangularMatrix::Type()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> MatrixType::LT; }
<a name="l00249"></a><a class="code" href="classNEWMAT_1_1DiagonalMatrix.html#a13">00249</a>     <a class="code" href="classNEWMAT_1_1MatrixType.html">MatrixType</a> DiagonalMatrix::Type()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> MatrixType::Dg; }
<a name="l00250"></a><a class="code" href="classNEWMAT_1_1RowVector.html#a10">00250</a>     <a class="code" href="classNEWMAT_1_1MatrixType.html">MatrixType</a> RowVector::Type()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> MatrixType::RV; }
<a name="l00251"></a><a class="code" href="classNEWMAT_1_1ColumnVector.html#a10">00251</a>     <a class="code" href="classNEWMAT_1_1MatrixType.html">MatrixType</a> ColumnVector::Type()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> MatrixType::CV; }
<a name="l00252"></a><a class="code" href="classNEWMAT_1_1CroutMatrix.html#a1">00252</a>     <a class="code" href="classNEWMAT_1_1MatrixType.html">MatrixType</a> CroutMatrix::Type()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> MatrixType::Ct; }
<a name="l00253"></a><a class="code" href="classNEWMAT_1_1BandMatrix.html#a6">00253</a>     <a class="code" href="classNEWMAT_1_1MatrixType.html">MatrixType</a> BandMatrix::Type()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> MatrixType::BM; }
<a name="l00254"></a><a class="code" href="classNEWMAT_1_1UpperBandMatrix.html#a6">00254</a>     <a class="code" href="classNEWMAT_1_1MatrixType.html">MatrixType</a> UpperBandMatrix::Type()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> MatrixType::UB; }
<a name="l00255"></a><a class="code" href="classNEWMAT_1_1LowerBandMatrix.html#a6">00255</a>     <a class="code" href="classNEWMAT_1_1MatrixType.html">MatrixType</a> LowerBandMatrix::Type()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> MatrixType::LB; }
<a name="l00256"></a><a class="code" href="classNEWMAT_1_1SymmetricBandMatrix.html#a8">00256</a>     <a class="code" href="classNEWMAT_1_1MatrixType.html">MatrixType</a> SymmetricBandMatrix::Type()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> MatrixType::SB; }
00257 
<a name="l00258"></a><a class="code" href="classNEWMAT_1_1BaseMatrix.html#a35">00258</a>     <a class="code" href="classNEWMAT_1_1MatrixBandWidth.html">MatrixBandWidth</a> BaseMatrix::BandWidth()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> -1; }
<a name="l00259"></a><a class="code" href="classNEWMAT_1_1DiagonalMatrix.html#a28">00259</a>     <a class="code" href="classNEWMAT_1_1MatrixBandWidth.html">MatrixBandWidth</a> DiagonalMatrix::BandWidth()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> 0; }
00260 
<a name="l00261"></a><a class="code" href="classNEWMAT_1_1BandMatrix.html#a25">00261</a>     <a class="code" href="classNEWMAT_1_1MatrixBandWidth.html">MatrixBandWidth</a> BandMatrix::BandWidth()<span class="keyword"> const</span>
00262 <span class="keyword">    </span>{ <span class="keywordflow">return</span> <a class="code" href="classNEWMAT_1_1MatrixBandWidth.html">MatrixBandWidth</a>(<a class="code" href="classNEWMAT_1_1BandMatrix.html#m0">lower</a>,<a class="code" href="classNEWMAT_1_1BandMatrix.html#m1">upper</a>); }
00263 
<a name="l00264"></a><a class="code" href="classNEWMAT_1_1GenericMatrix.html#a18">00264</a>     <a class="code" href="classNEWMAT_1_1MatrixBandWidth.html">MatrixBandWidth</a> GenericMatrix::BandWidth()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> gm-&gt;<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a35">BandWidth</a>(); }
00265 
<a name="l00266"></a><a class="code" href="classNEWMAT_1_1AddedMatrix.html#a1">00266</a>     <a class="code" href="classNEWMAT_1_1MatrixBandWidth.html">MatrixBandWidth</a> AddedMatrix::BandWidth()<span class="keyword"> const</span>
00267 <span class="keyword">    </span>{ <span class="keywordflow">return</span> <a class="code" href="classNEWMAT_1_1MultipliedMatrix.html#n1">gm1</a>-&gt;<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a35">BandWidth</a>() + <a class="code" href="classNEWMAT_1_1MultipliedMatrix.html#n3">gm2</a>-&gt;<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a35">BandWidth</a>(); }
00268 
<a name="l00269"></a><a class="code" href="classNEWMAT_1_1SPMatrix.html#a1">00269</a>     <a class="code" href="classNEWMAT_1_1MatrixBandWidth.html">MatrixBandWidth</a> SPMatrix::BandWidth()<span class="keyword"> const</span>
00270 <span class="keyword">    </span>{ <span class="keywordflow">return</span> <a class="code" href="classNEWMAT_1_1MultipliedMatrix.html#n1">gm1</a>-&gt;<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a35">BandWidth</a>().<a class="code" href="classNEWMAT_1_1MatrixBandWidth.html#a4">minimum</a>(<a class="code" href="classNEWMAT_1_1MultipliedMatrix.html#n3">gm2</a>-&gt;<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a35">BandWidth</a>()); }
00271 
<a name="l00272"></a><a class="code" href="classNEWMAT_1_1MultipliedMatrix.html#a1">00272</a>     <a class="code" href="classNEWMAT_1_1MatrixBandWidth.html">MatrixBandWidth</a> MultipliedMatrix::BandWidth()<span class="keyword"> const</span>
00273 <span class="keyword">    </span>{ <span class="keywordflow">return</span> <a class="code" href="classNEWMAT_1_1MultipliedMatrix.html#n1">gm1</a>-&gt;<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a35">BandWidth</a>() * <a class="code" href="classNEWMAT_1_1MultipliedMatrix.html#n3">gm2</a>-&gt;<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a35">BandWidth</a>(); }
00274 
<a name="l00275"></a><a class="code" href="classNEWMAT_1_1ConcatenatedMatrix.html#a0">00275</a>     <a class="code" href="classNEWMAT_1_1MatrixBandWidth.html">MatrixBandWidth</a> ConcatenatedMatrix::BandWidth()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> -1; }
<a name="l00276"></a><a class="code" href="classNEWMAT_1_1SolvedMatrix.html#a1">00276</a>     <a class="code" href="classNEWMAT_1_1MatrixBandWidth.html">MatrixBandWidth</a> SolvedMatrix::BandWidth()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> -1; }
<a name="l00277"></a><a class="code" href="classNEWMAT_1_1ScaledMatrix.html#a1">00277</a>     <a class="code" href="classNEWMAT_1_1MatrixBandWidth.html">MatrixBandWidth</a> ScaledMatrix::BandWidth()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classNEWMAT_1_1ShiftedMatrix.html#n2">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a35">BandWidth</a>(); }
<a name="l00278"></a><a class="code" href="classNEWMAT_1_1NegatedMatrix.html#a1">00278</a>     <a class="code" href="classNEWMAT_1_1MatrixBandWidth.html">MatrixBandWidth</a> NegatedMatrix::BandWidth()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a35">BandWidth</a>(); }
00279 
<a name="l00280"></a><a class="code" href="classNEWMAT_1_1TransposedMatrix.html#a1">00280</a>     <a class="code" href="classNEWMAT_1_1MatrixBandWidth.html">MatrixBandWidth</a> TransposedMatrix::BandWidth()<span class="keyword"> const</span>
00281 <span class="keyword">    </span>{ <span class="keywordflow">return</span> <a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a35">BandWidth</a>().<a class="code" href="classNEWMAT_1_1MatrixBandWidth.html#a5">t</a>(); }
00282 
<a name="l00283"></a><a class="code" href="classNEWMAT_1_1InvertedMatrix.html#a3">00283</a>     <a class="code" href="classNEWMAT_1_1MatrixBandWidth.html">MatrixBandWidth</a> InvertedMatrix::BandWidth()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> -1; }
<a name="l00284"></a><a class="code" href="classNEWMAT_1_1RowedMatrix.html#a1">00284</a>     <a class="code" href="classNEWMAT_1_1MatrixBandWidth.html">MatrixBandWidth</a> RowedMatrix::BandWidth()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> -1; }
<a name="l00285"></a><a class="code" href="classNEWMAT_1_1ColedMatrix.html#a1">00285</a>     <a class="code" href="classNEWMAT_1_1MatrixBandWidth.html">MatrixBandWidth</a> ColedMatrix::BandWidth()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> -1; }
<a name="l00286"></a><a class="code" href="classNEWMAT_1_1DiagedMatrix.html#a1">00286</a>     <a class="code" href="classNEWMAT_1_1MatrixBandWidth.html">MatrixBandWidth</a> DiagedMatrix::BandWidth()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> 0; }
<a name="l00287"></a><a class="code" href="classNEWMAT_1_1MatedMatrix.html#a1">00287</a>     <a class="code" href="classNEWMAT_1_1MatrixBandWidth.html">MatrixBandWidth</a> MatedMatrix::BandWidth()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> -1; }
<a name="l00288"></a><a class="code" href="classNEWMAT_1_1ReturnMatrixX.html#a3">00288</a>     <a class="code" href="classNEWMAT_1_1MatrixBandWidth.html">MatrixBandWidth</a> ReturnMatrixX::BandWidth()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> gm-&gt;<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a35">BandWidth</a>(); }
00289 
<a name="l00290"></a><a class="code" href="classNEWMAT_1_1GetSubMatrix.html#a13">00290</a>     <a class="code" href="classNEWMAT_1_1MatrixBandWidth.html">MatrixBandWidth</a> GetSubMatrix::BandWidth()<span class="keyword"> const </span>{
00291 
00292         <span class="keywordflow">if</span> (row_skip==col_skip &amp;&amp; row_number==col_number) <span class="keywordflow">return</span> <a class="code" href="classNEWMAT_1_1NegatedMatrix.html#n1">gm</a>-&gt;<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a35">BandWidth</a>();
00293         <span class="keywordflow">else</span> <span class="keywordflow">return</span> <a class="code" href="classNEWMAT_1_1MatrixBandWidth.html">MatrixBandWidth</a>(-1);
00294     }
00295 
00296     <span class="comment">/************************ the memory managment tools **********************/</span>
00297 
00298     <span class="comment">//  Rules regarding tDelete, reuse, GetStore</span>
00299     <span class="comment">//    All matrices processed during expression evaluation must be subject</span>
00300     <span class="comment">//    to exactly one of reuse(), tDelete(), GetStore() or BorrowStore().</span>
00301     <span class="comment">//    If reuse returns true the matrix must be reused.</span>
00302     <span class="comment">//    GetMatrix(gm) always calls gm-&gt;GetStore()</span>
00303     <span class="comment">//    gm-&gt;Evaluate obeys rules</span>
00304     <span class="comment">//    bm-&gt;Evaluate obeys rules for matrices in bm structure</span>
00305 
<a name="l00306"></a><a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a7">00306</a>     <span class="keywordtype">void</span> GeneralMatrix::tDelete() {
00307         <span class="keywordflow">if</span> (<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n0">tag</a>&lt;0) {
00308             <span class="keywordflow">if</span> (<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n0">tag</a>&lt;-1) {                               <span class="comment">// borrowed</span>
00309                 <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a> <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>=0; <span class="keyword">delete</span> <span class="keyword">this</span>; <span class="keywordflow">return</span>;
00310             }
00311             <span class="keywordflow">else</span> { <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a> <span class="keywordflow">return</span>; }
00312         }
00313         <span class="keywordflow">if</span> (<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n0">tag</a>==1) {
00314             <span class="keywordflow">if</span> (store) {
00315                 <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a>  <a class="code" href="MYEXCEPT_8H.html#a3">MONITOR_REAL_DELETE</a>(<span class="stringliteral">"Free   (tDelete)"</span>,<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a>,<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>)
00316                     <span class="keyword">delete</span> [] <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>;
00317             }
00318             <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>=0; <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n0">tag</a>=-1; <span class="keywordflow">return</span>;
00319         }
00320         <span class="keywordflow">if</span> (<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n0">tag</a>==0) { <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a> <span class="keyword">delete</span> <span class="keyword">this</span>; <span class="keywordflow">return</span>; }
00321         <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a> <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n0">tag</a>--; <span class="keywordflow">return</span>;
00322     }
00323 
00324     <span class="keyword">static</span> <span class="keywordtype">void</span> BlockCopy(<span class="keywordtype">int</span> n, <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* from, <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* to) {
00325         <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a>
00326             <span class="keywordtype">int</span> i = (n &gt;&gt; 3);
00327         <span class="keywordflow">while</span> (i--) {
00328             *to++ = *from++; *to++ = *from++; *to++ = *from++; *to++ = *from++;
00329             *to++ = *from++; *to++ = *from++; *to++ = *from++; *to++ = *from++;
00330         }
00331         i = n &amp; 7; <span class="keywordflow">while</span> (i--) *to++ = *from++;
00332     }
00333 
<a name="l00334"></a><a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a8">00334</a>     <span class="keywordtype">bool</span> GeneralMatrix::reuse() {
00335         <span class="keywordflow">if</span> (<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n0">tag</a>&lt;-1) {
00336             <span class="keywordflow">if</span> (<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a>&gt;0) {
00337                 <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a>
00338                     <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* s = <span class="keyword">new</span> <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a> [<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a>]; <a class="code" href="namespaceNEWMAT.html#a19">MatrixErrorNoSpace</a>(s);
00339                 <a class="code" href="MYEXCEPT_8H.html#a1">MONITOR_REAL_NEW</a>(<span class="stringliteral">"Make     (reuse)"</span>,<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a>,s)
00340                     BlockCopy(<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a>, <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>, s); <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>=s;
00341             }
00342             <span class="keywordflow">else</span> <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a> = 0;
00343             <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n0">tag</a>=0; <span class="keywordflow">return</span> <span class="keyword">true</span>;
00344         }
00345         <span class="keywordflow">if</span> (<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n0">tag</a>&lt;0) { <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a> <span class="keywordflow">return</span> <span class="keyword">false</span>; }
00346         <span class="keywordflow">if</span> (<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n0">tag</a>&lt;=1)  { <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a> <span class="keywordflow">return</span> <span class="keyword">true</span>; }
00347         <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a> <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n0">tag</a>--; <span class="keywordflow">return</span> <span class="keyword">false</span>;
00348     }
00349 
<a name="l00350"></a><a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b13">00350</a>     <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* GeneralMatrix::GetStore() {
00351         <span class="keywordflow">if</span> (tag&lt;0 || tag&gt;1) {
00352             <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* s;
00353             <span class="keywordflow">if</span> (storage) {
00354                 s = <span class="keyword">new</span> <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a> [<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a>]; <a class="code" href="namespaceNEWMAT.html#a19">MatrixErrorNoSpace</a>(s);
00355                 <a class="code" href="MYEXCEPT_8H.html#a1">MONITOR_REAL_NEW</a>(<span class="stringliteral">"Make  (GetStore)"</span>,<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a>,s)
00356                     BlockCopy(<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a>, <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>, s);
00357             }
00358             <span class="keywordflow">else</span> s = 0;
00359             <span class="keywordflow">if</span> (<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n0">tag</a>&gt;1) { <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a> <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n0">tag</a>--; }
00360             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n0">tag</a> &lt; -1) {                        <span class="comment">// borrowed store</span>
00361                 <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a> <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>=0; <span class="keyword">delete</span> <span class="keyword">this</span>;
00362             }
00363             <span class="keywordflow">else</span> { <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a> }
00364             <span class="keywordflow">return</span> s;
00365         }
00366         <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* s=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>; <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>=0;
00367         <span class="keywordflow">if</span> (<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n0">tag</a>==0) { <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a> <span class="keyword">delete</span> <span class="keyword">this</span>; }
00368         <span class="keywordflow">else</span> { <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a> <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n0">tag</a>=-1; }
00369         <span class="keywordflow">return</span> s;
00370     }
00371 
<a name="l00372"></a><a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b15">00372</a>     <span class="keywordtype">void</span> GeneralMatrix::GetMatrix(<span class="keyword">const</span> <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gmx) {
00373         <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a>  <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n0">tag</a>=-1; <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>=gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a2">Nrows</a>(); <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>=gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a3">Ncols</a>();
00374         <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a>=gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a>; <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a47">SetParameters</a>(gmx);
00375         <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>=((<a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>*)gmx)-&gt;GetStore();
00376     }
00377 
<a name="l00378"></a><a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b14">00378</a>     <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* GeneralMatrix::BorrowStore(<a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gmx, <a class="code" href="classNEWMAT_1_1MatrixType.html">MatrixType</a> mt) {
00379         <span class="comment">// Copy storage of *this to storage of *gmx. Then convert to type mt.</span>
00380         <span class="comment">// If mt == 0 just let *gmx point to storage of *this if tag==-1.</span>
00381         <span class="keywordflow">if</span> (!mt) {
00382             <span class="keywordflow">if</span> (<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n0">tag</a> == -1) { <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a> gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n0">tag</a> = -2; gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a> = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>; }
00383             <span class="keywordflow">else</span> { <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a> gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n0">tag</a> = 0; gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a> = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b13">GetStore</a>(); }
00384         }
00385         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespaceNEWMAT.html#a45">Compare</a>(gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a1">Type</a>(),mt))
00386         { <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a>  gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n0">tag</a> = 0; gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a> = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b13">GetStore</a>(); }
00387         <span class="keywordflow">else</span> {
00388             <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a> gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n0">tag</a> = -2; gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a> = <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>;
00389             gmx = gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a0">Evaluate</a>(mt); gmx-&gt;<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n0">tag</a> = 0; <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a7">tDelete</a>();
00390         }
00391 
00392         <span class="keywordflow">return</span> gmx;
00393     }
00394 
<a name="l00395"></a><a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b16">00395</a>     <span class="keywordtype">void</span> GeneralMatrix::Eq(<span class="keyword">const</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html">BaseMatrix</a>&amp; X, <a class="code" href="classNEWMAT_1_1MatrixType.html">MatrixType</a> mt) {
00396         <span class="comment">// Count number of references to this in X.</span>
00397         <span class="comment">// If zero delete storage in this;</span>
00398         <span class="comment">// otherwise tag this to show when storage can be deleted</span>
00399         <span class="comment">// evaluate X and copy to this</span>
00400 <span class="preprocessor">#ifdef DO_SEARCH</span>
00401 <span class="preprocessor"></span>        <span class="keywordtype">int</span> counter=X.<a class="code" href="classNEWMAT_1_1BaseMatrix.html#b0">search</a>(<span class="keyword">this</span>);
00402         <span class="keywordflow">if</span> (counter==0) {
00403             <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a>
00404                 <span class="keywordflow">if</span> (store) {
00405                     <a class="code" href="MYEXCEPT_8H.html#a3">MONITOR_REAL_DELETE</a>(<span class="stringliteral">"Free (operator=)"</span>,<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a>,<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>)
00406                         <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a> <span class="keyword">delete</span> [] <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>; <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a>=0;
00407                 }
00408         }
00409         <span class="keywordflow">else</span> { <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a> <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a12">Release</a>(counter); }
00410         <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gmx = ((<a class="code" href="classNEWMAT_1_1BaseMatrix.html">BaseMatrix</a>&amp;)X).Evaluate(mt);
00411         <span class="keywordflow">if</span> (gmx!=<span class="keyword">this</span>) { <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a> <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b15">GetMatrix</a>(gmx); }
00412         <span class="keywordflow">else</span> { <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a> }
00413         <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a9">Protect</a>();
00414 <span class="preprocessor">#else</span>
00415 <span class="preprocessor"></span>        <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gmx = ((<a class="code" href="classNEWMAT_1_1BaseMatrix.html">BaseMatrix</a>&amp;)X).<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a0">Evaluate</a>(mt);
00416         <span class="keywordflow">if</span> (gmx!=<span class="keyword">this</span>) {
00417             <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a>
00418                 <span class="keywordflow">if</span> (store) {
00419                     <a class="code" href="MYEXCEPT_8H.html#a3">MONITOR_REAL_DELETE</a>(<span class="stringliteral">"Free (operator=)"</span>,<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a>,<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>)
00420                         <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a> <span class="keyword">delete</span> [] <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>; <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a>=0;
00421                 }
00422             <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b15">GetMatrix</a>(gmx);
00423         }
00424         <span class="keywordflow">else</span> { <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a> }
00425         <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a9">Protect</a>();
00426 <span class="preprocessor">#endif</span>
00427 <span class="preprocessor"></span>    }
00428 
<a name="l00429"></a><a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b17">00429</a>     <span class="keywordtype">void</span> GeneralMatrix::Eq2(<span class="keyword">const</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html">BaseMatrix</a>&amp; X, <a class="code" href="classNEWMAT_1_1MatrixType.html">MatrixType</a> mt) {
00430         <span class="comment">// a cut down version of Eq for use with += etc.</span>
00431         <span class="comment">// we know BaseMatrix points to two GeneralMatrix objects,</span>
00432         <span class="comment">// the first being this (may be the same).</span>
00433         <span class="comment">// we know tag has been set correctly in each.</span>
00434         <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>* gmx = ((<a class="code" href="classNEWMAT_1_1BaseMatrix.html">BaseMatrix</a>&amp;)X).Evaluate(mt);
00435         <span class="keywordflow">if</span> (gmx!=<span class="keyword">this</span>) {                              <span class="comment">// simplify GetMatrix ?</span>
00436             <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a> <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#b15">GetMatrix</a>(gmx);
00437         }
00438         <span class="keywordflow">else</span> { <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a> }
00439         <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a9">Protect</a>();
00440     }
00441 
<a name="l00442"></a><a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a17">00442</a>     <span class="keywordtype">void</span> GeneralMatrix::Inject(<span class="keyword">const</span> <a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>&amp; X) {
00443         <span class="comment">// copy stored values of X; otherwise leave els of *this unchanged</span>
00444         <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a>
00445             <a class="code" href="classTracer.html">Tracer</a> tr(<span class="stringliteral">"Inject"</span>);
00446         <span class="keywordflow">if</span> (<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a> != X.<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a> || <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a> != X.<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>)
00447             Throw(<a class="code" href="classNEWMAT_1_1IncompatibleDimensionsException.html">IncompatibleDimensionsException</a>());
00448         <a class="code" href="classMatrixRow.html">MatrixRow</a> mr((<a class="code" href="classNEWMAT_1_1GeneralMatrix.html">GeneralMatrix</a>*)&amp;X, <a class="code" href="NEWMATRC_8H.html#a6a1">LoadOnEntry</a>);
00449         <a class="code" href="classMatrixRow.html">MatrixRow</a> mrx(<span class="keyword">this</span>, <a class="code" href="NEWMATRC_8H.html#a6a1">LoadOnEntry</a>+<a class="code" href="NEWMATRC_8H.html#a6a2">StoreOnExit</a>+<a class="code" href="NEWMATRC_8H.html#a6a3">DirectPart</a>);
00450         <span class="keywordtype">int</span> <a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>=<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>;
00451         <span class="keywordflow">while</span> (<a class="code" href="classNEWMAT_1_1BaseMatrix.html#a13">i</a>--) { mrx.<a class="code" href="classMatrixRowCol.html#a25">Inject</a>(mr); mrx.<a class="code" href="classMatrixRow.html#a2">Next</a>(); mr.<a class="code" href="classMatrixRow.html#a2">Next</a>(); }
00452     }
00453 
00454     <span class="comment">/*************** checking for data loss during conversion *******************/</span>
00455 
00456     <span class="comment">//void GeneralMatrix::CheckConversion(const BaseMatrix&amp; M)</span>
00457     <span class="comment">//{</span>
00458     <span class="comment">//   if (!(this-&gt;Type() &gt;= M.Type()))</span>
00459     <span class="comment">//      Throw(ProgramException("Illegal Conversion"));</span>
00460     <span class="comment">//}</span>
00461 
00462     <span class="keywordtype">bool</span> MatrixConversionCheck::DoCheck;            <span class="comment">// will be set to false</span>
00463 
<a name="l00464"></a><a class="code" href="classNEWMAT_1_1MatrixConversionCheck.html#d1">00464</a>     <span class="keywordtype">void</span> MatrixConversionCheck::DataLoss()
00465     { <span class="keywordflow">if</span> (DoCheck) Throw(<a class="code" href="classNEWMAT_1_1ProgramException.html">ProgramException</a>(<span class="stringliteral">"Illegal Conversion"</span>)); }
00466 
<a name="l00467"></a><a class="code" href="namespaceNEWMAT.html#a45">00467</a>     <span class="keywordtype">bool</span> <a class="code" href="namespaceNEWMAT.html#a45">Compare</a>(<span class="keyword">const</span> <a class="code" href="classNEWMAT_1_1MatrixType.html">MatrixType</a>&amp; source, <a class="code" href="classNEWMAT_1_1MatrixType.html">MatrixType</a>&amp; destination) {
00468         <span class="keywordflow">if</span> (!destination) { destination=source; <span class="keywordflow">return</span> <span class="keyword">true</span>; }
00469         <span class="keywordflow">if</span> (destination==source) <span class="keywordflow">return</span> <span class="keyword">true</span>;
00470         <span class="keywordflow">if</span> (MatrixConversionCheck::IsOn() &amp;&amp; !(destination&gt;=source))
00471             Throw(<a class="code" href="classNEWMAT_1_1ProgramException.html">ProgramException</a>(<span class="stringliteral">"Illegal Conversion"</span>, source, destination));
00472         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00473     }
00474 
00475     <span class="comment">/*************** Make a copy of a matrix on the heap *********************/</span>
00476 
00477     GeneralMatrix* Matrix::Image()<span class="keyword"> const </span>{
00478         <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a>
00479             GeneralMatrix* gm = <span class="keyword">new</span> <a class="code" href="classMatrix.html">Matrix</a>(*<span class="keyword">this</span>); <a class="code" href="namespaceNEWMAT.html#a19">MatrixErrorNoSpace</a>(gm);
00480         <span class="keywordflow">return</span> gm;
00481     }
00482 
00483     GeneralMatrix* SymmetricMatrix::Image()<span class="keyword"> const </span>{
00484         <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a>
00485             GeneralMatrix* gm = <span class="keyword">new</span> SymmetricMatrix(*<span class="keyword">this</span>); <a class="code" href="namespaceNEWMAT.html#a19">MatrixErrorNoSpace</a>(gm);
00486         <span class="keywordflow">return</span> gm;
00487     }
00488 
00489     GeneralMatrix* UpperTriangularMatrix::Image()<span class="keyword"> const </span>{
00490         <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a>
00491             GeneralMatrix* gm = <span class="keyword">new</span> UpperTriangularMatrix(*<span class="keyword">this</span>);
00492         <a class="code" href="namespaceNEWMAT.html#a19">MatrixErrorNoSpace</a>(gm); <span class="keywordflow">return</span> gm;
00493     }
00494 
00495     GeneralMatrix* LowerTriangularMatrix::Image()<span class="keyword"> const </span>{
00496         <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a>
00497             GeneralMatrix* gm = <span class="keyword">new</span> LowerTriangularMatrix(*<span class="keyword">this</span>);
00498         <a class="code" href="namespaceNEWMAT.html#a19">MatrixErrorNoSpace</a>(gm); <span class="keywordflow">return</span> gm;
00499     }
00500 
00501     GeneralMatrix* DiagonalMatrix::Image()<span class="keyword"> const </span>{
00502         <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a>
00503             GeneralMatrix* gm = <span class="keyword">new</span> DiagonalMatrix(*<span class="keyword">this</span>); <a class="code" href="namespaceNEWMAT.html#a19">MatrixErrorNoSpace</a>(gm);
00504         <span class="keywordflow">return</span> gm;
00505     }
00506 
00507     GeneralMatrix* RowVector::Image()<span class="keyword"> const </span>{
00508         <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a>
00509             GeneralMatrix* gm = <span class="keyword">new</span> RowVector(*<span class="keyword">this</span>); <a class="code" href="namespaceNEWMAT.html#a19">MatrixErrorNoSpace</a>(gm);
00510         <span class="keywordflow">return</span> gm;
00511     }
00512 
00513     GeneralMatrix* ColumnVector::Image()<span class="keyword"> const </span>{
00514         <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a>
00515             GeneralMatrix* gm = <span class="keyword">new</span> ColumnVector(*<span class="keyword">this</span>); <a class="code" href="namespaceNEWMAT.html#a19">MatrixErrorNoSpace</a>(gm);
00516         <span class="keywordflow">return</span> gm;
00517     }
00518 
00519     GeneralMatrix* BandMatrix::Image()<span class="keyword"> const </span>{
00520         <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a>
00521             GeneralMatrix* gm = <span class="keyword">new</span> BandMatrix(*<span class="keyword">this</span>); <a class="code" href="namespaceNEWMAT.html#a19">MatrixErrorNoSpace</a>(gm);
00522         <span class="keywordflow">return</span> gm;
00523     }
00524 
00525     GeneralMatrix* UpperBandMatrix::Image()<span class="keyword"> const </span>{
00526         <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a>
00527             GeneralMatrix* gm = <span class="keyword">new</span> UpperBandMatrix(*<span class="keyword">this</span>); <a class="code" href="namespaceNEWMAT.html#a19">MatrixErrorNoSpace</a>(gm);
00528         <span class="keywordflow">return</span> gm;
00529     }
00530 
00531     GeneralMatrix* LowerBandMatrix::Image()<span class="keyword"> const </span>{
00532         <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a>
00533             GeneralMatrix* gm = <span class="keyword">new</span> LowerBandMatrix(*<span class="keyword">this</span>); <a class="code" href="namespaceNEWMAT.html#a19">MatrixErrorNoSpace</a>(gm);
00534         <span class="keywordflow">return</span> gm;
00535     }
00536 
00537     GeneralMatrix* SymmetricBandMatrix::Image()<span class="keyword"> const </span>{
00538         <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a>
00539             GeneralMatrix* gm = <span class="keyword">new</span> SymmetricBandMatrix(*<span class="keyword">this</span>); <a class="code" href="namespaceNEWMAT.html#a19">MatrixErrorNoSpace</a>(gm);
00540         <span class="keywordflow">return</span> gm;
00541     }
00542 
00543     GeneralMatrix* nricMatrix::Image()<span class="keyword"> const </span>{
00544         <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a>
00545             GeneralMatrix* gm = <span class="keyword">new</span> nricMatrix(*<span class="keyword">this</span>); <a class="code" href="namespaceNEWMAT.html#a19">MatrixErrorNoSpace</a>(gm);
00546         <span class="keywordflow">return</span> gm;
00547     }
00548 
00549     GeneralMatrix* GeneralMatrix::Image()<span class="keyword"> const </span>{
00550 
00551         Throw(InternalException(<span class="stringliteral">"Cannot apply Image to this matrix type"</span>));
00552         <span class="keywordflow">return</span> 0;
00553     }
00554 
00555     <span class="comment">/************************* nricMatrix routines *****************************/</span>
00556 
00557     <span class="keywordtype">void</span> nricMatrix::MakeRowPointer() {
00558         row_pointer = <span class="keyword">new</span> <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* [nrows]; <a class="code" href="namespaceNEWMAT.html#a19">MatrixErrorNoSpace</a>(row_pointer);
00559         <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>* s = Store() - 1; <span class="keywordtype">int</span> i = nrows; <a class="code" href="namespaceRBD__COMMON.html#a0">Real</a>** rp = row_pointer;
00560         <span class="keywordflow">while</span> (i--) { *rp++ = s; s+=ncols; }
00561     }
00562 
00563     <span class="keywordtype">void</span> nricMatrix::DeleteRowPointer()
00564     { <span class="keywordflow">if</span> (nrows) <span class="keyword">delete</span> [] row_pointer; }
00565 
<a name="l00566"></a><a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a46">00566</a>     <span class="keywordtype">void</span> GeneralMatrix::CheckStore()<span class="keyword"> const </span>{
00567         <span class="keywordflow">if</span> (!<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>)
00568             Throw(<a class="code" href="classNEWMAT_1_1ProgramException.html">ProgramException</a>(<span class="stringliteral">"NRIC accessing matrix with unset dimensions"</span>));
00569     }
00570 
00571     <span class="comment">/***************************** CleanUp routines *****************************/</span>
00572 
<a name="l00573"></a><a class="code" href="classNEWMAT_1_1GeneralMatrix.html#a51">00573</a>     <span class="keywordtype">void</span> GeneralMatrix::CleanUp() {
00574         <span class="comment">// set matrix dimensions to zero, delete storage</span>
00575         <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a>
00576             <span class="keywordflow">if</span> (<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a> &amp;&amp; <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a>) {
00577                 <a class="code" href="MYEXCEPT_8H.html#a3">MONITOR_REAL_DELETE</a>(<span class="stringliteral">"Free (CleanUp)    "</span>,<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a>,<a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>)
00578                     <a class="code" href="NEWMAT4_8CPP.html#a0">REPORT</a> <span class="keyword">delete</span> [] <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>;
00579             }
00580         <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n4">store</a>=0; <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n3">storage</a>=0; <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>=0; <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>=0;
00581     }
00582 
<a name="l00583"></a><a class="code" href="classNEWMAT_1_1nricMatrix.html#a11">00583</a>     <span class="keywordtype">void</span> nricMatrix::CleanUp()
00584     { DeleteRowPointer(); GeneralMatrix::CleanUp(); }
00585 
<a name="l00586"></a><a class="code" href="classNEWMAT_1_1RowVector.html#a21">00586</a>     <span class="keywordtype">void</span> RowVector::CleanUp()
00587     { GeneralMatrix::CleanUp(); <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n1">nrows</a>=1; }
00588 
<a name="l00589"></a><a class="code" href="classNEWMAT_1_1ColumnVector.html#a15">00589</a>     <span class="keywordtype">void</span> ColumnVector::CleanUp()
00590     { GeneralMatrix::CleanUp(); <a class="code" href="classNEWMAT_1_1GeneralMatrix.html#n2">ncols</a>=1; }
00591 
<a name="l00592"></a><a class="code" href="classNEWMAT_1_1CroutMatrix.html#a12">00592</a>     <span class="keywordtype">void</span> CroutMatrix::CleanUp() {
00593         <span class="keywordflow">if</span> (nrows) <span class="keyword">delete</span> [] indx;
00594         GeneralMatrix::CleanUp();
00595     }
00596 
<a name="l00597"></a><a class="code" href="classNEWMAT_1_1BandLUMatrix.html#a12">00597</a>     <span class="keywordtype">void</span> BandLUMatrix::CleanUp() {
00598         <span class="keywordflow">if</span> (nrows) <span class="keyword">delete</span> [] indx;
00599         <span class="keywordflow">if</span> (storage2) <span class="keyword">delete</span> [] store2;
00600         GeneralMatrix::CleanUp();
00601     }
00602 
00603 <span class="preprocessor">#ifdef use_namespace</span>
00604 <span class="preprocessor"></span>}
00605 <span class="preprocessor">#endif</span>
</pre></div><hr><address style="align: right;"><small>Generated on Fri Aug 23 01:37:07 2002 for VirtualU by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.17 </small></address>
</body>
</html>
